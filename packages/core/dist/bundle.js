!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("graphql"),require("sweetalert")):"function"==typeof define&&define.amd?define(["react","graphql","sweetalert"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).zeiqCore=t(e.React,e.graphql,e.sweetalert)}(this,(function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(e),o=n(r),a={makeId:e=>{let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*n));return t},absoluteUrl:(e,t)=>{let r="https:",n=e?e.headers["x-forwarded-host"]||e.headers.host:window.location.host;return n.indexOf("localhost")>-1&&(t&&(n=t),r="http:"),{protocol:r,host:n,origin:`${r}//${n}`,url:e}}};const s=i.default.createContext();var u={ZeiqThemeProvider:({children:e,value:t})=>i.default.createElement(s.Provider,{value:t},e)},c={getAppCookies:e=>{const t={};if(e.headers.cookie){e.headers.cookie.split("; ").forEach((e=>{const r=e.split("=");t[r[0]]=decodeURI(r[1])}))}return t}},l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function f(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var p=function(){return(p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function d(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var v="Invariant Violation",b=Object.setPrototypeOf,g=void 0===b?function(e,t){return e.__proto__=t,e}:b,m=function(e){function t(r){void 0===r&&(r=v);var n=e.call(this,"number"==typeof r?v+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=v,g(n,t.prototype),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);function w(e,t){if(!e)throw new m(t)}var O=["log","warn","error","silent"],S=O.indexOf("log");function k(e){return function(){if(O.indexOf(e)>=S)return console[e].apply(console,arguments)}}function x(e,t){var r=e.directives;return!r||!r.length||function(e){var t=[];e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var r=e.arguments,n=e.name.value;w(r&&1===r.length,"Incorrect number of arguments for the @"+n+" directive.");var i=r[0];w(i.name&&"if"===i.name.value,"Invalid argument for the @"+n+" directive.");var o=i.value;w(o&&("Variable"===o.kind||"BooleanValue"===o.kind),"Argument for the @"+n+" directive must be a variable or a boolean value."),t.push({directive:e,ifArgument:i})}}));return t}(r).every((function(e){var r=e.directive,n=e.ifArgument,i=!1;return"Variable"===n.value.kind?w(void 0!==(i=t&&t[n.value.name.value]),"Invalid variable referenced in @"+r.name.value+" directive."):i=n.value.value,"skip"===r.name.value?!i:i}))}function E(e,r){return function(e){var r=[];return t.visit(e,{Directive:function(e){r.push(e.name.value)}}),r}(r).some((function(t){return e.indexOf(t)>-1}))}function j(e,t){var r=t,n=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw new m("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&n.push(e)})),void 0===r&&(w(1===n.length,"Found "+n.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."),r=n[0].name.value),p(p({},e),{definitions:d([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],e.definitions)})}function _(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function R(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var r=t&&t[e.name.value];return w(r,"No fragment named "+e.name.value+"."),r;default:return null}}!function(e){e.log=k("log"),e.warn=k("warn"),e.error=k("error")}(w||(w={})),"object"!=typeof process||"object"!=typeof process.env||process;function M(e){return{__ref:String(e)}}function q(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function T(e,t,r,n){if(function(e){return"IntValue"===e.kind}(r)||function(e){return"FloatValue"===e.kind}(r))e[t.value]=Number(r.value);else if(function(e){return"BooleanValue"===e.kind}(r)||function(e){return"StringValue"===e.kind}(r))e[t.value]=r.value;else if(function(e){return"ObjectValue"===e.kind}(r)){var i={};r.fields.map((function(e){return T(i,e.name,e.value,n)})),e[t.value]=i}else if(function(e){return"Variable"===e.kind}(r)){var o=(n||{})[r.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(r))e[t.value]=r.values.map((function(e){var r={};return T(r,t,e,n),r[t.value]}));else if(function(e){return"EnumValue"===e.kind}(r))e[t.value]=r.value;else{if(!function(e){return"NullValue"===e.kind}(r))throw new m('The inline argument "'+t.value+'" of kind "'+r.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}var P=["connection","include","skip","client","rest","export"];function C(e,t,r){if(t&&r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i={};return n.forEach((function(e){i[e]=t[e]})),r.connection.key+"("+JSON.stringify(i)+")"}return r.connection.key}var o=e;if(t){var a=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},o={key:n,value:e[n]};return r(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,a;if(Array.isArray(t)){for(a="[",r=0;r<t.length;r++)r&&(a+=","),a+=e(t[r])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",r=0;r<u.length;r++){var c=u[r],l=e(t[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(e)}(t);o+="("+a+")"}return r&&Object.keys(r).forEach((function(e){-1===P.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?o+="@"+e+"("+JSON.stringify(r[e])+")":o+="@"+e)})),o}function D(e){return e.alias?e.alias.value:e.name.value}function I(e,t,r){if("string"==typeof e.__typename)return e.__typename;for(var n=0,i=t.selections;n<i.length;n++){var o=i[n];if(F(o)){if("__typename"===o.name.value)return e[D(o)]}else{var a=I(e,R(o,r).selectionSet,r);if("string"==typeof a)return a}}}function F(e){return"Field"===e.kind}function A(e){w(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new m('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e}));return w(t.length<=1,"Ambiguous GraphQL document: contains "+t.length+" operations"),e}function Q(e){return A(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function N(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function V(e){var t;A(e);for(var r=0,n=e.definitions;r<n.length;r++){var i=n[r];if("OperationDefinition"===i.kind){var o=i.operation;if("query"===o||"mutation"===o||"subscription"===o)return i}"FragmentDefinition"!==i.kind||t||(t=i)}if(t)return t;throw new m("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function z(e){var t=Object.create(null),r=e&&e.variableDefinitions;return r&&r.length&&r.forEach((function(e){e.defaultValue&&T(t,e.variable.name,e.defaultValue)})),t}var L={kind:"Field",name:{kind:"Name",value:"__typename"}};function B(e){return t.visit(A(e),{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var n=e.selections;if(n)if(!n.some((function(e){return F(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var i=r;if(!(F(i)&&i.directives&&i.directives.some((function(e){return"export"===e.name.value}))))return p(p({},e),{selections:d(n,[L])})}}}}})}B.added=function(e){return e===L};var W=Object.prototype.hasOwnProperty;function J(e){return null!==e&&"object"==typeof e}var U=function(e,t,r){return this.merge(e[r],t[r])},G=function(){function e(e){void 0===e&&(e=U),this.reconciler=e,this.isObject=J,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var r=this,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return J(t)&&J(e)?(Object.keys(t).forEach((function(i){if(W.call(e,i)){var o=e[i];if(t[i]!==o){var a=r.reconciler.apply(r,d([e,t,i],n));a!==o&&((e=r.shallowCopyForMerge(e))[i]=a)}}else(e=r.shallowCopyForMerge(e))[i]=t[i]})),e):t},e.prototype.shallowCopyForMerge=function(e){return J(e)&&!this.pastCopies.has(e)&&(e=Array.isArray(e)?e.slice(0):p({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)),e},e}();var K,Y=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var o=function(){return"function"==typeof Symbol},a=function(e){return o()&&Boolean(Symbol[e])},s=function(e){return a(e)?Symbol[e]:"@@"+e};o()&&!a("observable")&&(Symbol.observable=Symbol("observable"));var u=s("iterator"),c=s("observable"),l=s("species");function f(e,t){var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:S}function h(e){return e instanceof S}function d(e){d.log?d.log(e):setTimeout((function(){throw e}))}function y(e){Promise.resolve().then((function(){try{e()}catch(e){d(e)}}))}function v(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var r=f(t,"unsubscribe");r&&r.call(t)}}catch(e){d(e)}}function b(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function g(e,t,r){e._state="running";var n=e._observer;try{var i=f(n,t);switch(t){case"next":i&&i.call(n,r);break;case"error":if(b(e),!i)throw r;i.call(n,r);break;case"complete":b(e),i&&i.call(n)}}catch(e){d(e)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function m(e,t,r){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void y((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length&&(g(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}(e)}))):void g(e,t,r);e._queue.push({type:t,value:r})}}var w=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new O(this);try{this._cleanup=n.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(b(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),O=function(){function e(t){r(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){m(this._subscription,"next",e)}},{key:"error",value:function(e){m(this._subscription,"error",e)}},{key:"complete",value:function(){m(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),S=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(r,n){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r});else n(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),r()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=p(this),n=arguments.length>1,i=!1,o=arguments[1],a=o;return new r((function(r){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||n)try{a=e(a,t)}catch(e){return r.error(e)}else a=t},error:function(e){r.error(e)},complete:function(){if(!i&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(a),r.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=p(this);return new i((function(t){var n,o=0;return function e(a){n=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===r.length?(n=void 0,t.complete()):e(i.from(r[o++]))}})}(e),function(){n&&(n.unsubscribe(),n=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=p(this);return new r((function(n){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return n.error(e)}var o=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),a()}});i.push(o)},error:function(e){n.error(e)},complete:function(){a()}});function a(){o.closed&&0===i.length&&n.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var r="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=f(t,c);if(n){var i=n.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return h(i)&&i.constructor===r?i:new r((function(e){return i.subscribe(e)}))}if(a("iterator")&&(n=f(t,u)))return new r((function(e){y((function(){if(!e.closed){var r=!0,i=!1,o=void 0;try{for(var a,s=n.call(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new r((function(e){y((function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i="function"==typeof this?this:e;return new i((function(e){y((function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}}))}))}},{key:l,get:function(){return this}}]),e}();t.Observable=S,o()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:c,hostReportError:d},configurable:!0})}));(K=Y)&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")&&K.default,Y.Observable;var H=Y.Observable;!function(e){var t,r=e.Symbol;if("function"==typeof r)if(r.observable)t=r.observable;else{t=r.for("https://github.com/benlesh/symbol-observable");try{r.observable=t}catch(e){}}else t="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")());var $=H.prototype,Z="@@observable";$[Z]||($[Z]=function(){return this});var X=Object.prototype.toString;function ee(e){return te(e)}function te(e,t){switch(X.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var r=e.slice(0);return t.set(e,r),r.forEach((function(e,n){r[n]=te(e,t)})),r;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var n=Object.create(Object.getPrototypeOf(e));return t.set(e,n),Object.keys(e).forEach((function(r){n[r]=te(e[r],t)})),n;default:return e}}function re(e){return"development"===e}function ne(e){return null!==e&&"object"==typeof e}function ie(e){var t,r;return!0!==re("development")&&!0!==re("test")||(t=e,(r=new Set([t])).forEach((function(e){ne(e)&&(Object.isFrozen(e)||Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){ne(e[t])&&r.add(e[t])})))}))),e}function oe(e,t,r){var n=[];e.forEach((function(e){return e[t]&&n.push(e)})),n.forEach((function(e){return e[t](r)}))}function ae(e){function t(t){Object.defineProperty(e,t,{value:H})}return"function"==typeof Symbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function se(e){return e&&"function"==typeof e.then}function ue(e){return Array.isArray(e)&&e.length>0}ae(function(e){function t(t){var r=e.call(this,(function(e){return r.addObserver(e),function(){return r.removeObserver(e)}}))||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),r.handlers={next:function(e){null!==r.sub&&(r.latest=["next",e],oe(r.observers,"next",e))},error:function(e){var t=r.sub;null!==t&&(t&&Promise.resolve().then((function(){return t.unsubscribe()})),r.sub=null,r.latest=["error",e],r.reject(e),oe(r.observers,"error",e))},complete:function(){if(null!==r.sub){var e=r.sources.shift();e?se(e)?e.then((function(e){return r.sub=e.subscribe(r.handlers)})):r.sub=e.subscribe(r.handlers):(r.sub=null,r.latest&&"next"===r.latest[0]?r.resolve(r.latest[1]):r.resolve(),oe(r.observers,"complete"))}}},r.cancel=function(e){r.reject(e),r.sources=[],r.handlers.complete()},r.promise.catch((function(e){})),"function"==typeof t&&(t=[new H(t)]),se(t)?t.then((function(e){return r.start(e)}),r.handlers.error):r.start(t),r}return f(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],r=e[t];r&&r.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e),++this.addCount)},t.prototype.removeObserver=function(e,t){this.observers.delete(e)&&--this.addCount<1&&!t&&this.handlers.error(new Error("Observable cancelled prematurely"))},t.prototype.cleanup=function(e){var t=this,r=!1,n=function(){r||(r=!0,t.observers.delete(i),e())},i={next:n,error:n,complete:n},o=this.addCount;this.addObserver(i),this.addCount=o},t}(H));var ce="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product);function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];void 0!==n&&(r[t]=n)}))})),r}function fe(e){return new H((function(t){t.error(e)}))}var pe=function(e,t,r){var n=new Error(r);throw n.name="ServerError",n.response=e,n.statusCode=e.status,n.result=t,n};function he(e,t){return t?t(e):H.of()}function de(e){return"function"==typeof e?new be(e):e}function ye(e){return e.request.length<=1}var ve=function(e){function t(t,r){var n=e.call(this,t)||this;return n.link=r,n}return f(t,e),t}(Error),be=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return H.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(de).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,r,n){var i=de(r),o=de(n||new e(he));return ye(i)&&ye(o)?new e((function(e){return t(e)?i.request(e)||H.of():o.request(e)||H.of()})):new e((function(e,r){return t(e)?i.request(e,r)||H.of():o.request(e,r)||H.of()}))},e.execute=function(e,t){return e.request(function(e,t){var r=p({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){r=p(p({},r),"function"==typeof e?e(r):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return p({},r)}}),t}(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?t.query.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||void 0:""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(t.indexOf(i)<0)throw new m("illegal argument: "+i)}return e}(t))))||H.of()},e.concat=function(t,r){var n=de(t);if(ye(n))return w.warn(new ve("You are calling concat on a terminating link, which will have no effect",n)),n;var i=de(r);return ye(i)?new e((function(e){return n.request(e,(function(e){return i.request(e)||H.of()}))||H.of()})):new e((function(e,t){return n.request(e,(function(e){return i.request(e,t)||H.of()}))||H.of()}))},e.prototype.split=function(t,r,n){return this.concat(e.split(t,r,n||new e(he)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw new m("request is not implemented")},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}(),ge=Object.prototype.hasOwnProperty;var me=function(e,t){var r;try{r=JSON.stringify(e)}catch(e){var n=new m("Network request failed. "+t+" is not serializable: "+e.message);throw n.parseError=e,n}return r},we={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}};var Oe=function(e){void 0===e&&(e={});var r=e.uri,n=void 0===r?"/graphql":r,i=e.fetch,o=e.includeExtensions,a=e.useGETForQueries,s=e.includeUnusedVariables,u=void 0!==s&&s,c=h(e,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);!function(e){if(!e&&"undefined"==typeof fetch)throw new m("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    ")}(i),i||(i=fetch);var l={http:{includeExtensions:o},options:c.fetchOptions,credentials:c.credentials,headers:c.headers};return new be((function(e){var r=function(e,t){return e.getContext().uri||("function"==typeof t?t(e):t||"/graphql")}(e,n),o=e.getContext(),s={};if(o.clientAwareness){var c=o.clientAwareness,f=c.name,h=c.version;f&&(s["apollographql-client-name"]=f),h&&(s["apollographql-client-version"]=h)}var d,y=p(p({},s),o.headers),v={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:y},b=function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=p(p({},r.options),{headers:r.headers,credentials:r.credentials}),a=r.http||{};n.forEach((function(e){o=p(p(p({},o),e.options),{headers:p(p({},o.headers),e.headers)}),e.credentials&&(o.credentials=e.credentials),a=p(p({},a),e.http)}));var s=e.operationName,u=e.extensions,c=e.variables,l=e.query,f={operationName:s,variables:c};return a.includeExtensions&&(f.extensions=u),a.includeQuery&&(f.query=t.print(l)),{options:o,body:f}}(e,we,l,v),g=b.options,m=b.body;if(m.variables&&!u){var w=new Set(Object.keys(m.variables));t.visit(e.query,{Variable:function(e,t,r){r&&"VariableDefinition"!==r.kind&&w.delete(e.name.value)}}),w.size&&(m.variables=p({},m.variables),w.forEach((function(e){delete m.variables[e]})))}if(!g.signal){var O=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),S=O.controller,k=O.signal;(d=S)&&(g.signal=k)}if(a&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(g.method="GET"),"GET"===g.method){var x=function(e,t){var r=[],n=function(e,t){r.push(e+"="+encodeURIComponent(t))};if("query"in t&&n("query",t.query),t.operationName&&n("operationName",t.operationName),t.variables){var i=void 0;try{i=me(t.variables,"Variables map")}catch(e){return{parseError:e}}n("variables",i)}if(t.extensions){var o=void 0;try{o=me(t.extensions,"Extensions map")}catch(e){return{parseError:e}}n("extensions",o)}var a="",s=e,u=e.indexOf("#");-1!==u&&(a=e.substr(u),s=e.substr(0,u));var c=-1===s.indexOf("?")?"?":"&";return{newURI:s+c+r.join("&")+a}}(r,m),E=x.newURI,j=x.parseError;if(j)return fe(j);r=E}else try{g.body=me(m,"Payload")}catch(j){return fe(j)}return new H((function(t){var n;return i(r,g).then((function(t){return e.setContext({response:t}),t})).then((n=e,function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(n){var r=n;throw r.name="ServerParseError",r.response=e,r.statusCode=e.status,r.bodyText=t,r}})).then((function(t){return e.status>=300&&pe(e,t,"Response not successful: Received status code "+e.status),Array.isArray(t)||ge.call(t,"data")||ge.call(t,"errors")||pe(e,t,"Server response was missing for query '"+(Array.isArray(n)?n.map((function(e){return e.operationName})):n.operationName)+"'."),t}))})).then((function(e){return t.next(e),t.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.error(e))})),function(){d&&d.abort()}}))}))};!function(e){function t(t){void 0===t&&(t={});var r=e.call(this,Oe(t).request)||this;return r.options=t,r}f(t,e)}(be);var Se=Object.prototype,ke=Se.toString,xe=Se.hasOwnProperty,Ee=Function.prototype.toString,je=new Map;function _e(e,t){try{return Re(e,t)}finally{je.clear()}}function Re(e,t){if(e===t)return!0;var r,n,i,o=ke.call(e);if(o!==ke.call(t))return!1;switch(o){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(Pe(e,t))return!0;var a=Me(e),s=Me(t),u=a.length;if(u!==s.length)return!1;for(var c=0;c<u;++c)if(!xe.call(t,a[c]))return!1;for(c=0;c<u;++c){var l=a[c];if(!Re(e[l],t[l]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(Pe(e,t))return!0;for(var f=e.entries(),p="[object Map]"===o;;){var h=f.next();if(h.done)break;var d=h.value,y=d[0],v=d[1];if(!t.has(y))return!1;if(p&&!Re(v,t.get(y)))return!1}return!0;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var b=Ee.call(e);return b===Ee.call(t)&&(n=Te,!((i=(r=b).length-n.length)>=0&&r.indexOf(n,i)===i))}return!1}function Me(e){return Object.keys(e).filter(qe,e)}function qe(e){return void 0!==this[e]}var Te="{ [native code] }";function Pe(e,t){var r=je.get(e);if(r){if(r.has(t))return!0}else je.set(e,r=new Set);return r.add(t),!1}var Ce,De=function(e){function t(r){var n,i,o=r.graphQLErrors,a=r.networkError,s=r.errorMessage,u=r.extraInfo,c=e.call(this,s)||this;return c.graphQLErrors=o||[],c.networkError=a||null,c.message=s||(i="",ue((n=c).graphQLErrors)&&n.graphQLErrors.forEach((function(e){var t=e?e.message:"Error message not found.";i+=t+"\n"})),n.networkError&&(i+=n.networkError.message+"\n"),i=i.replace(/\n$/,"")),c.extraInfo=u,c.__proto__=t.prototype,c}return f(t,e),t}(Error);function Ie(e){return!!e&&e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(Ce||(Ce={}));var Fe=function(){function e(e,t,r,n){this.observer=e,this.options=t,this.fetch=r,this.shouldFetch=n}return e.prototype.reobserve=function(e,t){e?this.updateOptions(e):this.updatePolling();var r=this.fetch(this.options,t);return this.concast&&this.concast.removeObserver(this.observer,!0),r.addObserver(this.observer),(this.concast=r).promise},e.prototype.updateOptions=function(e){return Object.assign(this.options,le(e)),this.updatePolling(),this},e.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},e.prototype.updatePolling=function(){var e=this,t=this.pollingInfo,r=this.options.pollInterval;if(r){if((!t||t.interval!==r)&&(w(r,"Attempted to start a polling query without a polling interval."),!1!==this.shouldFetch)){(t||(this.pollingInfo={})).interval=r;var n=function(){e.pollingInfo&&(e.shouldFetch&&e.shouldFetch()?e.reobserve({fetchPolicy:"network-only",nextFetchPolicy:e.options.fetchPolicy||"cache-first"},Ce.poll).then(i,i):i())},i=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(n,t.interval))};i()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)},e}(),Ae=!1;function Qe(e){w.error("Unhandled error",e.message,e.stack)}ae(function(e){function t(t){var r=t.queryManager,n=t.queryInfo,i=t.options,o=e.call(this,(function(e){return o.onSubscribe(e)}))||this;o.observers=new Set,o.subscriptions=new Set,o.observer={next:function(e){(o.lastError||o.isDifferentFromLastResult(e))&&(o.updateLastResult(e),oe(o.observers,"next",e))},error:function(e){o.updateLastResult(p(p({},o.lastResult),{error:e,errors:e.graphQLErrors,networkStatus:Ce.error,loading:!1})),oe(o.observers,"error",o.lastError=e)}},o.isTornDown=!1,o.options=i,o.queryId=r.generateQueryId();var a=Q(i.query);return o.queryName=a&&a.name&&a.name.value,o.queryManager=r,o.queryInfo=n,o}return f(t,e),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,r){var n={next:function(r){t(r),e.observers.delete(n),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:r},i=e.subscribe(n)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.lastResult,r=this.queryInfo.networkStatus||t&&t.networkStatus||Ce.ready,n=p(p({},t),{loading:Ie(r),networkStatus:r});if(this.isTornDown)return n;var i=this.options.fetchPolicy,o=void 0===i?"cache-first":i;if("no-cache"===o||"network-only"===o)delete n.partial;else if(!n.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var a=this.queryInfo.getDiff();n.data=a.complete||this.options.returnPartialData?a.result:void 0,a.complete?(n.networkStatus!==Ce.loading||"cache-first"!==o&&"cache-only"!==o||(n.networkStatus=Ce.ready,n.loading=!1),delete n.partial):n.partial=!0}return e&&this.updateLastResult(n),n},t.prototype.isDifferentFromLastResult=function(e){return!_e(this.lastResultSnapshot,e)},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t={pollInterval:0},r=this.options.fetchPolicy;return"no-cache"!==r&&"cache-and-network"!==r&&(t.fetchPolicy="network-only",t.nextFetchPolicy=r||"cache-first"),e&&!_e(this.options.variables,e)&&(t.variables=this.options.variables=p(p({},this.options.variables),e)),this.newReobserver(!1).reobserve(t,Ce.refetch)},t.prototype.fetchMore=function(e){var t=this,r=p(p({},e.query?e:p(p(p({},this.options),e),{variables:p(p({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),n=this.queryManager.generateQueryId();return r.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=Ce.fetchMore,this.observe()),this.queryManager.fetchQuery(n,r,Ce.fetchMore).then((function(n){var i=n.data,o=e.updateQuery;return o?(Ae||(w.warn("The updateQuery callback for fetchMore is deprecated, and will be removed\nin the next major version of Apollo Client.\n\nPlease convert updateQuery functions to field policies with appropriate\nread and merge functions, or use/adapt a helper function (such as\nconcatPagination, offsetLimitPagination, or relayStylePagination) from\n@apollo/client/utilities.\n\nThe field policy system handles pagination more effectively than a\nhand-written updateQuery function, and you only need to define the policy\nonce, rather than every time you call fetchMore."),Ae=!0),t.updateQuery((function(e){return o(e,{fetchMoreResult:i,variables:r.variables})}))):t.queryManager.cache.writeQuery({query:r.query,variables:r.variables,data:i}),n})).finally((function(){t.queryManager.stopQuery(n),t.reobserve()}))},t.prototype.subscribeToMore=function(e){var t=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(r){var n=e.updateQuery;n&&t.updateQuery((function(e,t){var i=t.variables;return n(e,{subscriptionData:r,variables:i})}))},error:function(t){e.onError?e.onError(t):w.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(r),function(){t.subscriptions.delete(r)&&r.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){if(_e(this.variables,e))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=e,!this.observers.size)return Promise.resolve();var t=this.options.fetchPolicy,r=void 0===t?"cache-first":t,n={fetchPolicy:r,variables:e};return"cache-first"!==r&&"no-cache"!==r&&"network-only"!==r&&(n.fetchPolicy="cache-and-network",n.nextFetchPolicy=r),this.reobserve(n,Ce.setVariables)},t.prototype.updateQuery=function(e){var t,r=this.queryManager,n=e(r.cache.diff({query:this.options.query,variables:this.variables,previousResult:null===(t=this.lastResult)||void 0===t?void 0:t.data,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});n&&(r.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(e){this.getReobserver().updateOptions({pollInterval:e})},t.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:ee(e),ue(e.errors)||delete this.lastError,t},t.prototype.onSubscribe=function(e){var t=this;if(e===this.observer)return function(){};try{var r=e._subscription._observer;r&&!r.error&&(r.error=Qe)}catch(e){}var n=!this.observers.size;return this.observers.add(e),this.lastError?e.error&&e.error(this.lastError):this.lastResult&&e.next&&e.next(this.lastResult),n&&this.reobserve().catch((function(e){})),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},t.prototype.newReobserver=function(e){var t=this,r=this.queryManager,n=this.queryId;return r.setObservableQuery(this),new Fe(this.observer,e?this.options:p({},this.options),(function(e,i){return r.setObservableQuery(t),r.fetchQueryObservable(n,e,i)}),!r.ssrMode&&function(){return!Ie(t.queryInfo.networkStatus)})},t.prototype.reobserve=function(e,t){return this.isTornDown=!1,this.getReobserver().reobserve(e,t)},t.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(H));var Ne=function(){return Object.create(null)},Ve=Array.prototype,ze=Ve.forEach,Le=Ve.slice,Be=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=Ne),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return ze.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(Le.call(e)))},e.prototype.getChildTrie=function(t){var r=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(t);return n||r.set(t,n=new e(this.weakness,this.makeData)),n},e}();var We=null,Je={},Ue=1,Ge="@wry/context:Slot",Ke=Array,Ye=Ke[Ge]||function(){var e=function(){function e(){this.id=["slot",Ue++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=We;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===Je)break;return e!==We&&(We.slots[this.id]=t),!0}return We&&(We.slots[this.id]=Je),!1},e.prototype.getValue=function(){if(this.hasValue())return We.slots[this.id]},e.prototype.withValue=function(e,t,r,n){var i,o=((i={__proto__:null})[this.id]=e,i),a=We;We={parent:a,slots:o};try{return t.apply(n,r)}finally{We=a}},e.bind=function(e){var t=We;return function(){var r=We;try{return We=t,e.apply(this,arguments)}finally{We=r}}},e.noContext=function(e,t,r){if(!We)return e.apply(r,t);var n=We;try{return We=null,e.apply(r,t)}finally{We=n}},e}();try{Object.defineProperty(Ke,Ge,{value:Ke[Ge]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();function He(){}Ye.bind,Ye.noContext;var $e,Ze=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=He),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var r=t.older,n=t.newer;n&&(n.older=r),r&&(r.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t},e.prototype.set=function(e,t){var r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),Xe=new Ye,et=Object.prototype.hasOwnProperty,tt=void 0===($e=Array.from)?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:$e;function rt(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var nt=[];function it(e,t){if(!e)throw new Error(t||"assertion failure")}function ot(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var at=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!ct(this))return st(this),this.value[0]},e.prototype.recompute=function(e){return it(!this.recomputing,"already recomputing"),st(this),ct(this)?function(e,t){vt(e),Xe.withValue(e,ut,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{rt(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){if(e.dirty=!1,ct(e))return;ft(e)}(e);return ot(e.value)}(this,e):ot(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,lt(this),rt(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),vt(this),pt(this,(function(t,r){t.setDirty(),bt(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=nt.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(tt(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),nt.push(this.deps),this.deps=null)},e.count=0,e}();function st(e){var t=Xe.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),ct(e)?ht(t,e):dt(t,e),t}function ut(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(t){e.value[1]=t}e.recomputing=!1}function ct(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function lt(e){pt(e,ht)}function ft(e){pt(e,dt)}function pt(e,t){var r=e.parents.size;if(r)for(var n=tt(e.parents),i=0;i<r;++i)t(n[i],e)}function ht(e,t){it(e.childValues.has(t)),it(ct(t));var r=!ct(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=nt.pop()||new Set;e.dirtyChildren.add(t),r&&lt(e)}function dt(e,t){it(e.childValues.has(t)),it(!ct(t));var r,n,i,o=e.childValues.get(t);0===o.length?e.childValues.set(t,t.value.slice(0)):(r=o,n=t.value,(i=r.length)>0&&i===n.length&&r[i-1]===n[i-1]||e.setDirty()),yt(e,t),ct(e)||ft(e)}function yt(e,t){var r=e.dirtyChildren;r&&(r.delete(t),0===r.size&&(nt.length<100&&nt.push(r),e.dirtyChildren=null))}function vt(e){e.childValues.size>0&&e.childValues.forEach((function(t,r){bt(e,r)})),e.forgetDeps(),it(null===e.dirtyChildren)}function bt(e,t){t.parents.delete(e),e.childValues.delete(t),yt(e,t)}var gt={setDirty:!0,dispose:!0,forget:!0};function mt(e){var t=new Map,r=e&&e.subscribe;function n(e){var n=Xe.getValue();if(n){var i=t.get(e);i||t.set(e,i=new Set),n.dependOn(i),"function"==typeof r&&(rt(i),i.unsubscribe=r(e))}}return n.dirty=function(e,r){var n=t.get(e);if(n){var i=r&&et.call(gt,r)?r:"setDirty";tt(n).forEach((function(e){return e[i]()})),t.delete(e),rt(n)}},n}function wt(){var e=new Be("function"==typeof WeakMap);return function(){return e.lookupArray(arguments)}}wt();var Ot=new Set;function St(e,t){void 0===t&&(t=Object.create(null));var r=new Ze(t.max||Math.pow(2,16),(function(e){return e.dispose()})),n=t.keyArgs,i=t.makeCacheKey||wt(),o=function(){var o=i.apply(null,n?n.apply(null,arguments):arguments);if(void 0===o)return e.apply(null,arguments);var a=r.get(o);a||(r.set(o,a=new at(e)),a.subscribe=t.subscribe,a.forget=function(){return r.delete(o)});var s=a.recompute(Array.prototype.slice.call(arguments));return r.set(o,a),Ot.add(r),Xe.hasValue()||(Ot.forEach((function(e){return e.clean()})),Ot.clear()),s};function a(e){var t=r.get(e);t&&t.setDirty()}function s(e){var t=r.get(e);if(t)return t.peek()}function u(e){return r.delete(e)}return Object.defineProperty(o,"size",{get:function(){return r.map.size},configurable:!1,enumerable:!1}),o.dirtyKey=a,o.dirty=function(){a(i.apply(null,arguments))},o.peekKey=s,o.peek=function(){return s(i.apply(null,arguments))},o.forgetKey=u,o.forget=function(){return u(i.apply(null,arguments))},o.makeCacheKey=i,o.getKey=n?function(){return i.apply(null,n.apply(null,arguments))}:i,Object.freeze(o)}var kt=function(){function e(){this.getFragmentDoc=St(j)}return e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({query:this.getFragmentDoc(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.writeQuery=function(e){return this.write({dataId:e.id||"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables,broadcast:e.broadcast})},e.prototype.writeFragment=function(e){return this.write({dataId:e.id,result:e.data,variables:e.variables,query:this.getFragmentDoc(e.fragment,e.fragmentName),broadcast:e.broadcast})},e}(),xt=function(e,t,r,n,i){this.message=e,this.path=t,this.query=r,this.clientOnly=n,this.variables=i},Et=Object.prototype.hasOwnProperty;var jt=/^[_a-z][_0-9a-z]*/i;function _t(e){var t=e.match(jt);return t?t[0]:e}function Rt(e,t,r){return!(!t||"object"!=typeof t)&&(Array.isArray(t)?t.every((function(t){return Rt(e,t,r)})):e.selections.every((function(e){if(F(e)&&x(e,r)){var n=D(e);return Et.call(t,n)&&(!e.selectionSet||Rt(e.selectionSet,t[n],r))}return!0})))}function Mt(e){return null!==e&&"object"==typeof e&&!q(e)&&!Array.isArray(e)}var qt=Object.create(null),Tt=function(){return qt},Pt=Object.create(null),Ct=function(){function e(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return ie(q(e)?r.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return q(e)?r.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return M(e);if(q(e))return e;var n=r.policies.identify(e)[0];if(n){var i=M(n);return t&&r.merge(n,e),i}}}return e.prototype.toObject=function(){return p({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),Et.call(this.data,e)){var r=this.data[e];if(r&&Et.call(r,t))return r[t]}return"__typename"===t&&Et.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof Ft?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),Et.call(this.data,e)?this.data[e]:this instanceof Ft?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var r=this,n=this.lookup(e),i=new G(At).merge(n,t);if(this.data[e]=i,i!==n&&(delete this.refs[e],this.group.caching)){var o=Object.create(null);n||(o.__exists=1),Object.keys(t).forEach((function(e){if(!n||n[e]!==i[e]){o[e]=1;var t=_t(e);t===e||r.policies.hasKeyArgs(i.__typename,t)||(o[t]=1),void 0!==i[e]||r instanceof Ft||delete i[e]}})),Object.keys(o).forEach((function(t){return r.group.dirty(e,t)}))}},e.prototype.modify=function(e,t){var r=this,n=this.lookup(e);if(n){var i=Object.create(null),o=!1,a=!0,s={DELETE:qt,INVALIDATE:Pt,isReference:q,toReference:this.toReference,canRead:this.canRead,readField:function(t,n){return r.policies.readField("string"==typeof t?{fieldName:t,from:n||M(e)}:t,{store:r})}};if(Object.keys(n).forEach((function(u){var c=_t(u),l=n[u];if(void 0!==l){var f="function"==typeof t?t:t[u]||t[c];if(f){var h=f===Tt?qt:f(ie(l),p(p({},s),{fieldName:c,storeFieldName:u,storage:r.getStorage(e,u)}));h===Pt?r.group.dirty(e,u):(h===qt&&(h=void 0),h!==l&&(i[u]=h,o=!0,l=h))}void 0!==l&&(a=!1)}})),o)return this.merge(e,i),a&&(this instanceof Ft?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,r){var n,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),a=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,a?((n={})[a]=Tt,n):Tt)}return!1},e.prototype.evict=function(e){var t=!1;return e.id&&(Et.call(this.data,e.id)&&(t=this.delete(e.id,e.fieldName,e.args)),this instanceof Ft&&(t=this.parent.evict(e)||t),(e.fieldName||t)&&this.group.dirty(e.id,e.fieldName||"__exists")),t},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach((function(t){Et.call(e.policies.rootTypenamesById,t)||r.push(t)})),r.length&&(t.__META={extraRootIds:r.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(r){e&&Et.call(e,r)||t.delete(r)})),e){var r=e.__META,n=h(e,["__META"]);Object.keys(n).forEach((function(e){t.merge(e,n[e])})),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof Ft?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach((function(n){Et.call(r,n)&&(Object.keys(e.findChildRefIds(n)).forEach(t.add,t),delete r[n])}));var n=Object.keys(r);if(n.length){for(var i=this;i instanceof Ft;)i=i.parent;n.forEach((function(e){return i.delete(e)}))}return n},e.prototype.findChildRefIds=function(e){if(!Et.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=new Set([this.data[e]]),n=function(e){return null!==e&&"object"==typeof e};r.forEach((function(e){q(e)?t[e.__ref]=!0:n(e)&&Object.values(e).filter(n).forEach(r.add,r)}))}return this.refs[e]},e.prototype.makeCacheKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.group.keyMaker.lookupArray(e)},e}(),Dt=function(){function e(e){this.caching=e,this.d=null,this.keyMaker=new Be(ce),this.d=e?mt():null}return e.prototype.depend=function(e,t){if(this.d){this.d(It(e,t));var r=_t(t);r!==t&&this.d(It(e,r))}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(It(e,t))},e}();function It(e,t){return t+"#"+e}!function(e){var t=function(e){function t(t){var r=t.policies,n=t.resultCaching,i=void 0===n||n,o=t.seed,a=e.call(this,r,new Dt(i))||this;return a.storageTrie=new Be(ce),a.sharedLayerGroup=new Dt(i),o&&a.replace(o),a}return f(t,e),t.prototype.addLayer=function(e,t){return new Ft(e,this,t,this.sharedLayerGroup)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(Ct||(Ct={}));var Ft=function(e){function t(t,r,n,i){var o=e.call(this,r.policies,i)||this;return o.id=t,o.parent=r,o.replay=n,o.group=i,n(o),o}return f(t,e),t.prototype.addLayer=function(e,r){return new t(e,this,r,this.group)},t.prototype.removeLayer=function(e){var t=this,r=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){t.data[e]!==r.lookup(e)&&t.delete(e)})),r):r===this.parent?this:r.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return p(p({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return Et.call(this.data,t)?p(p({},r),e.prototype.findChildRefIds.call(this,t)):r},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(Ct);function At(e,t,r){var n=e[r],i=t[r];return _e(n,i)?n:i}function Qt(e){return!!(e instanceof Ct&&e.group.caching)}function Nt(e,t){return new xt(e.message,t.path.slice(),t.query,t.clientOnly,t.variables)}var Vt=function(){function e(e){var t=this;this.config=e,this.executeSelectionSet=St((function(e){return t.execSelectionSetImpl(e)}),{keyArgs:function(e){return[e.selectionSet,e.objectOrReference,e.context]},makeCacheKey:function(e,t,r){if(Qt(r.store))return r.store.makeCacheKey(e,q(t)?t.__ref:t,r.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=St((function(e){return t.execSubSelectedArrayImpl(e)}),{makeCacheKey:function(e){var t=e.field,r=e.array,n=e.context;if(Qt(n.store))return n.store.makeCacheKey(t,r,n.varString)}}),this.config=p({addTypename:!0},e)}return e.prototype.diffQueryAgainstStore=function(e){var t,r=e.store,n=e.query,i=e.rootId,o=void 0===i?"ROOT_QUERY":i,a=e.variables,s=e.returnPartialData,u=void 0===s||s,c=this.config.cache.policies;a=p(p({},z((w((t=Q(n))&&"query"===t.operation,"Must contain a query definition."),t))),a);var l=this.executeSelectionSet({selectionSet:V(n).selectionSet,objectOrReference:M(o),context:{store:r,query:n,policies:c,variables:a,varString:JSON.stringify(a),fragmentMap:_(N(n)),path:[],clientOnly:!1}}),f=l.missing&&l.missing.length>0;if(f&&!u)throw l.missing[0];return{result:l.result,missing:l.missing,complete:!f}},e.prototype.isFresh=function(e,t,r,n){if(Qt(n.store)&&this.knownResults.get(e)===r){var i=this.executeSelectionSet.peek(r,t,n);if(i&&e===i.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,n=e.objectOrReference,i=e.context;if(q(n)&&!i.policies.rootTypenamesById[n.__ref]&&!i.store.has(n.__ref))return{result:{},missing:[Nt(new m("Dangling reference to missing "+n.__ref+" object"),i)]};var o=i.variables,a=i.policies,s=i.store,u=[],c={result:null},l=s.getFieldValue(n,"__typename");function f(){return c.missing||(c.missing=[])}function p(e){var t;return e.missing&&(t=f()).push.apply(t,e.missing),e.result}this.config.addTypename&&"string"==typeof l&&!a.rootIdsByTypename[l]&&u.push({__typename:l});var h=new Set(r.selections);return h.forEach((function(e){var r;if(x(e,o))if(F(e)){var s=a.readField({fieldName:e.name.value,field:e,variables:i.variables,from:n},i),c=D(e);i.path.push(c);var d=i.clientOnly;i.clientOnly=d||!(!e.directives||!e.directives.some((function(e){return"client"===e.name.value}))),void 0===s?B.added(e)||f().push(Nt(new m("Can't find field '"+e.name.value+"' on "+(q(n)?n.__ref+" object":"object "+JSON.stringify(n,null,2))),i)):Array.isArray(s)?s=p(t.executeSubSelectedArray({field:e,array:s,context:i})):e.selectionSet?null!=s&&(s=p(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:s,context:i}))):(zt(i.store,e,s),ie(s)),void 0!==s&&u.push(((r={})[c]=s,r)),i.clientOnly=d,w(i.path.pop()===c)}else{var y=R(e,i.fragmentMap);y&&a.fragmentMatches(y,l)&&y.selectionSet.selections.forEach(h.add,h)}})),c.result=function(e){var t=e[0]||{},r=e.length;if(r>1)for(var n=new G,i=1;i<r;++i)t=n.merge(t,e[i]);return t}(u),Object.freeze(c.result),this.knownResults.set(c.result,r),c},e.prototype.execSubSelectedArrayImpl=function(e){var t,r=this,n=e.field,i=e.array,o=e.context;function a(e,r){return e.missing&&(t=t||[]).push.apply(t,e.missing),w(o.path.pop()===r),e.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map((function(e,t){return null===e?null:(o.path.push(t),Array.isArray(e)?a(r.executeSubSelectedArray({field:n,array:e,context:o}),t):n.selectionSet?a(r.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:e,context:o}),t):(zt(o.store,n,e),w(o.path.pop()===t),e))})),Object.freeze(i),{result:i,missing:t}},e}();function zt(e,t,r){if(!t.selectionSet){var n=new Set([r]);n.forEach((function(r){r&&"object"==typeof r&&(w(!q(r),"Missing selection set for object of type "+function(e,t){return q(t)?e.get(t.__ref,"__typename"):t&&t.__typename}(e,r)+" returned for query field "+t.name.value),Object.values(r).forEach(n.add,n))}))}}var Lt=function(){function e(e,t){this.cache=e,this.reader=t}return e.prototype.writeToStore=function(e){var t=e.query,r=e.result,n=e.dataId,i=e.store,o=e.variables,a=Q(t),s=new G;o=p(p({},z(a)),o);var u=this.processSelectionSet({result:r||Object.create(null),dataId:n,selectionSet:a.selectionSet,mergeTree:{map:new Map},context:{store:i,written:Object.create(null),merge:function(e,t){return s.merge(e,t)},variables:o,varString:JSON.stringify(o),fragmentMap:_(N(t))}});if(!q(u))throw new m("Could not identify object "+JSON.stringify(r));return i.retain(u.__ref),u},e.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,n=e.result,i=e.selectionSet,o=e.context,a=e.mergeTree,s=this.cache.policies,u=s.identify(n,i,o.fragmentMap),c=u[0],l=u[1];if("string"==typeof(r=r||c)){var f=o.written[r]||(o.written[r]=[]),p=M(r);if(f.indexOf(i)>=0)return p;if(f.push(i),this.reader&&this.reader.isFresh(n,p,i,o))return p}var h=Object.create(null);l&&(h=o.merge(h,l));var d=r&&s.rootTypenamesById[r]||I(n,i,o.fragmentMap)||r&&o.store.get(r,"__typename");"string"==typeof d&&(h.__typename=d);var y=new Set(i.selections);if(y.forEach((function(e){var r;if(x(e,o.variables))if(F(e)){var i=D(e),u=n[i];if(void 0!==u){var c=s.getStoreFieldName({typename:d,fieldName:e.name.value,field:e,variables:o.variables}),l=Wt(a,c),f=t.processFieldValue(u,e,o,l),p=e.selectionSet&&o.store.getFieldValue(f,"__typename")||void 0,v=s.getMergeFunction(d,e.name.value,p);v?l.info={field:e,typename:d,merge:v}:Jt(a,c),h=o.merge(h,((r={})[c]=f,r))}else if(s.usingPossibleTypes&&!E(["defer","client"],e))throw new m("Missing field '"+i+"' in "+JSON.stringify(n,null,2).substring(0,100))}else{var b=R(e,o.fragmentMap);b&&s.fragmentMatches(b,d,n,o.variables)&&b.selectionSet.selections.forEach(y.add,y)}})),"string"==typeof r){var v=M(r);a.map.size&&(h=this.applyMerges(a,v,h,o));var b=new Set;y.forEach((function(e){F(e)&&e.selectionSet&&b.add(e.name.value)}));return Object.keys(h).forEach((function(e){(function(e){return b.has(_t(e))})(e)&&!function(e){var t=a.map.get(e);return Boolean(t&&t.info&&t.info.merge)}(e)&&function(e,t,r,n){var i=function(e){var t=n.getFieldValue(e,r);return"object"==typeof t&&t},o=i(e);if(!o)return;var a=i(t);if(!a)return;if(q(o))return;if(_e(o,a))return;if(Object.keys(o).every((function(e){return void 0!==n.getFieldValue(a,e)})))return;var s=n.getFieldValue(e,"__typename")||n.getFieldValue(t,"__typename"),u=_t(r),c=s+"."+u;if(Ut.has(c))return;Ut.add(c);var l=[];Array.isArray(o)||Array.isArray(a)||[o,a].forEach((function(e){var t=n.getFieldValue(e,"__typename");"string"!=typeof t||l.includes(t)||l.push(t)}));w.warn("Cache data may be lost when replacing the "+u+" field of a "+s+" object.\n\nTo address this problem (which is not a bug in Apollo Client), "+(l.length?"either ensure all objects of type "+l.join(" and ")+" have an ID or a custom merge function, or ":"")+"define a custom merge function for the "+c+" field, so InMemoryCache can safely merge these objects:\n\n  existing: "+JSON.stringify(o).slice(0,1e3)+"\n  incoming: "+JSON.stringify(a).slice(0,1e3)+"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n")}(v,h,e,o.store)})),o.store.merge(r,h),v}return h},e.prototype.processFieldValue=function(e,t,r,n){var i=this;return t.selectionSet&&null!==e?Array.isArray(e)?e.map((function(e,o){var a=i.processFieldValue(e,t,r,Wt(n,o));return Jt(n,o),a})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:n}):ee(e)},e.prototype.applyMerges=function(e,t,r,n,i){var o,a=this;if(e.map.size&&!q(r)){var s,u=Array.isArray(r)||!q(t)&&!Mt(t)?void 0:t,c=r;u&&!i&&(i=[q(u)?u.__ref:u]);var l=function(e,t){return Array.isArray(e)?"number"==typeof t?e[t]:void 0:n.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){i&&i.push(t);var r=l(u,t),o=l(c,t),f=a.applyMerges(e,r,o,n,i);f!==o&&(s=s||new Map).set(t,f),i&&w(i.pop()===t)})),s&&(r=Array.isArray(c)?c.slice(0):p({},c),s.forEach((function(e,t){r[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,n,i&&(o=n.store).getStorage.apply(o,i)):r},e}(),Bt=[];function Wt(e,t){var r=e.map;return r.has(t)||r.set(t,Bt.pop()||{map:new Map}),r.get(t)}function Jt(e,t){var r=e.map,n=r.get(t);!n||n.info||n.map.size||(Bt.push(n),r.delete(t))}var Ut=new Set;var Gt=new Ye,Kt=new WeakMap;function Yt(e){var t=Kt.get(e);return t||Kt.set(e,t={vars:new Set,dep:mt()}),t}function Ht(e){var t=new Set,r=new Set,n=function(o){if(arguments.length>0){if(e!==o){e=o,t.forEach((function(e){Yt(e).dep.dirty(n),$t(e)}));var a=Array.from(r);r.clear(),a.forEach((function(t){return t(e)}))}}else{var s=Gt.getValue();s&&(i(s),Yt(s).dep(n))}return e};n.onNextChange=function(e){return r.add(e),function(){r.delete(e)}};var i=n.attachCache=function(e){return t.add(e),Yt(e).vars.add(n),n};return n.forgetCache=function(e){return t.delete(e)},n}function $t(e){e.broadcastWatches&&e.broadcastWatches()}function Zt(e){return void 0!==e.args?e.args:e.field?function(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach((function(e){var n=e.name,i=e.value;return T(r,n,i,t)})),r}return null}(e.field,e.variables):null}var Xt=function(e,t){var r=e.__typename,n=e.id,i=e._id;if("string"==typeof r&&(t&&(t.keyObject=void 0!==n?{id:n}:void 0!==i?{_id:i}:void 0),void 0===n&&(n=i),void 0!==n))return r+":"+("number"==typeof n||"string"==typeof n?n:JSON.stringify(n))},er=function(){},tr=function(e,t){return t.fieldName},rr=function(e,t,r){return(0,r.mergeObjects)(e,t)},nr=function(e,t){return t},ir=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=p({dataIdFromObject:Xt},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t,r){var n=t&&r?I(e,t,r):e.__typename;if(n===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var i,o={typename:n,selectionSet:t,fragmentMap:r},a=n&&this.getTypePolicy(n),s=a&&a.keyFn||this.config.dataIdFromObject;s;){var u=s(e,o);if(!Array.isArray(u)){i=u;break}s=ur(u)}return i=i?String(i):void 0,o.keyObject?[i,o.keyObject]:[i]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(r){var n=e[r],i=n.queryType,o=n.mutationType,a=n.subscriptionType,s=h(n,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),a&&t.setRootTypename("Subscription",r),Et.call(t.toBeAdded,r)?t.toBeAdded[r].push(s):t.toBeAdded[r]=[s]}))},e.prototype.updateTypePolicy=function(e,t){var r=this,n=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function a(e,t){e.merge="function"==typeof t?t:!0===t?rr:!1===t?nr:e.merge}a(n,t.merge),n.keyFn=!1===i?er:Array.isArray(i)?ur(i):"function"==typeof i?i:n.keyFn,o&&Object.keys(o).forEach((function(t){var n=r.getFieldPolicy(e,t,!0),i=o[t];if("function"==typeof i)n.read=i;else{var s=i.keyArgs,u=i.read,c=i.merge;n.keyFn=!1===s?tr:Array.isArray(s)?sr(s):"function"==typeof s?s:n.keyFn,"function"==typeof u&&(n.read=u),a(n,c)}n.read&&n.merge&&(n.keyFn=n.keyFn||tr)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var r="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[r];t!==n&&(w(!n||n===e,"Cannot change root "+e+" __typename more than once"),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(r){t.getSupertypeSet(r,!0),e[r].forEach((function(e){t.getSupertypeSet(e,!0).add(r);var n=e.match(jt);n&&n[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!Et.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var n=this.supertypeMap.get(e);n&&n.size&&n.forEach((function(e){var n=t.getTypePolicy(e),i=n.fields,o=h(n,["fields"]);Object.assign(r,o),Object.assign(r.fields,i)}))}var i=this.toBeAdded[e];return i&&i.length&&this.updateTypePolicy(e,le.apply(void 0,i.splice(0))),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,r){if(e){var n=this.getTypePolicy(e).fields;return n[t]||r&&(n[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},e.prototype.fragmentMatches=function(e,t,r,n){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),s=[a],u=function(e){var t=i.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},c=!(!r||!this.fuzzySubtypes.size),l=!1,f=0;f<s.length;++f){var p=s[f];if(p.has(o))return a.has(o)||(l&&w.warn("Inferring subtype "+t+" of supertype "+o),a.add(o)),!0;p.forEach(u),c&&f===s.length-1&&Rt(e.selectionSet,r,n)&&(c=!1,l=!0,this.fuzzySubtypes.forEach((function(e,r){var n=t.match(e);n&&n[0]===t&&u(r)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!(!r||!r.keyFn)},e.prototype.getStoreFieldName=function(e){var t,r=e.typename,n=e.fieldName,i=this.getFieldPolicy(r,n,!1),o=i&&i.keyFn;if(o&&r)for(var a={typename:r,fieldName:n,field:e.field||null,variables:e.variables},s=Zt(e);o;){var u=o(s,a);if(!Array.isArray(u)){t=u||n;break}o=sr(u)}return void 0===t&&(t=e.field?function(e,t){var r=null;e.directives&&(r={},e.directives.forEach((function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach((function(n){var i=n.name,o=n.value;return T(r[e.name.value],i,o,t)}))})));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach((function(e){var r=e.name,i=e.value;return T(n,r,i,t)}))),C(e.name.value,n,r)}(e.field,e.variables):C(n,Zt(e))),!1===t?n:n===_t(t)?t:n+":"+t},e.prototype.readField=function(e,t){var r=e.from;if(r&&(e.field||e.fieldName)){if(void 0===e.typename){var n=t.store.getFieldValue(r,"__typename");n&&(e.typename=n)}var i=this.getStoreFieldName(e),o=_t(i),a=t.store.getFieldValue(r,i),s=this.getFieldPolicy(e.typename,o,!1),u=s&&s.read;if(u){var c=or(this,r,e,t,t.store.getStorage(q(r)?r.__ref:r,i));return Gt.withValue(this.cache,u,[a,c])}return a}},e.prototype.getMergeFunction=function(e,t,r){var n=this.getFieldPolicy(e,t,!1),i=n&&n.merge;return!i&&r&&(i=(n=this.getTypePolicy(r))&&n.merge),i},e.prototype.runMergeFunction=function(e,t,r,n,i){var o=r.field,a=r.typename,s=r.merge;return s===rr?ar(n.store.getFieldValue)(e,t):s===nr?t:s(e,t,or(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:n.variables},n,i||Object.create(null)))},e}();function or(e,t,r,n,i){var o=e.getStoreFieldName(r),a=_t(o),s=r.variables||n.variables,u=n.store,c=u.getFieldValue,l=u.toReference,f=u.canRead;return{args:Zt(r),field:r.field||null,fieldName:a,storeFieldName:o,variables:s,isReference:q,toReference:l,storage:i,cache:e.cache,canRead:f,readField:function(r,i){var o="string"==typeof r?{fieldName:r,from:i}:p({},r);return void 0===o.from&&(o.from=t),void 0===o.variables&&(o.variables=s),e.readField(o,n)},mergeObjects:ar(c)}}function ar(e){return function(t,r){if(Array.isArray(t)||Array.isArray(r))throw new m("Cannot automatically merge arrays");if(t&&"object"==typeof t&&r&&"object"==typeof r){var n=e(t,"__typename"),i=e(r,"__typename");return!(n&&i&&n!==i)&&Mt(t)&&Mt(r)?p(p({},t),r):r}return r}}function sr(e){return function(t,r){return t?r.fieldName+":"+JSON.stringify(lr(t,e,!1)):r.fieldName}}function ur(e){var t=new Be(ce);return function(r,n){var i;if(n.selectionSet&&n.fragmentMap){var o=t.lookupArray([n.selectionSet,n.fragmentMap]);i=o.aliasMap||(o.aliasMap=cr(n.selectionSet,n.fragmentMap))}var a=n.keyObject=lr(r,e,!0,i);return n.typename+":"+JSON.stringify(a)}}function cr(e,t){var r=Object.create(null),n=new Set([e]);return n.forEach((function(e){e.selections.forEach((function(e){if(F(e)){if(e.alias){var i=e.alias.value,o=e.name.value;if(o!==i)(r.aliases||(r.aliases=Object.create(null)))[o]=i}if(e.selectionSet)(r.subsets||(r.subsets=Object.create(null)))[e.name.value]=cr(e.selectionSet,t)}else{var a=R(e,t);a&&n.add(a.selectionSet)}}))})),r}function lr(e,t,r,n){var i,o=Object.create(null);return t.forEach((function(t){if(Array.isArray(t)){if("string"==typeof i){var a=n&&n.subsets,s=a&&a[i];o[i]=lr(e[i],t,r,s)}}else{var u=n&&n.aliases,c=u&&u[t]||t;Et.call(e,c)?o[i=t]=e[c]:(w(!r,"Missing field '"+c+"' while computing key fields"),i=void 0)}})),o}var fr={dataIdFromObject:Xt,addTypename:!0,resultCaching:!0,typePolicies:{}};!function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=Ht,r.txCount=0,r.maybeBroadcastWatch=St((function(e,t){return r.broadcastWatch.call(r,e,!!t)}),{makeCacheKey:function(e){var t=e.optimistic?r.optimisticData:r.data;if(Qt(t)){var n=e.optimistic,i=e.rootId,o=e.variables;return t.makeCacheKey(e.query,e.callback,JSON.stringify({optimistic:n,rootId:i,variables:o}))}}}),r.watchDep=mt(),r.config=p(p({},fr),t),r.addTypename=!!r.config.addTypename,r.policies=new ir({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.data=new Ct.Root({policies:r.policies,resultCaching:r.config.resultCaching}),r.optimisticData=r.data,r.storeWriter=new Lt(r,r.storeReader=new Vt({cache:r,addTypename:r.addTypename})),r}f(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,r=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:e.query,variables:e.variables,rootId:e.rootId,config:this.config,returnPartialData:r}).result||null}catch(e){if(e instanceof xt)return null;throw e}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:e.query,result:e.result,dataId:e.dataId,variables:e.variables})}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(Et.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.size||function(e){Yt(e).vars.forEach((function(t){return t.attachCache(e)}))}(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&function(e){Yt(e).vars.forEach((function(t){return t.forgetCache(e)}))}(t),t.watchDep.dirty(e),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(){return this.optimisticData.gc()},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){return q(e)?e.__ref:this.policies.identify(e)[0]},t.prototype.evict=function(e){if(!e.id){if(Et.call(e,"id"))return!1;e=p(p({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.performTransaction=function(e,t){var r=this,n=function(t){var n=r,i=n.data,o=n.optimisticData;++r.txCount,t&&(r.data=r.optimisticData=t);try{e(r)}finally{--r.txCount,r.data=i,r.optimisticData=o}},i=!1;"string"==typeof t?(this.optimisticData=this.optimisticData.addLayer(t,n),i=!0):null===t?n(this.data):n(),this.broadcastWatches(i)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=B(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(r){return t.maybeBroadcastWatch(r,e)}))},t.prototype.broadcastWatch=function(e,t){this.watchDep.dirty(e),this.watchDep(e);var r=this.diff({query:e.query,variables:e.variables,optimistic:e.optimistic});e.optimistic&&t&&(r.fromOptimisticTransaction=!0),e.callback(r)}}(kt);
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var pr=function(){return(pr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},hr=new Map,dr=new Map,yr=!0,vr=!1;function br(e){return e.replace(/[\s,]+/g," ").trim()}function gr(e){var t=new Set,r=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var n=e.name.value,i=br((a=e.loc).source.body.substring(a.start,a.end)),o=dr.get(n);o&&!o.has(i)?yr&&console.warn("Warning: fragment with name "+n+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||dr.set(n,o=new Set),o.add(i),t.has(i)||(t.add(i),r.push(e))}else r.push(e);var a})),pr(pr({},e),{definitions:r})}function mr(e){var r=br(e);if(!hr.has(r)){var n=t.parse(e,{experimentalFragmentVariables:vr});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");hr.set(r,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(r){var n=e[r];n&&"object"==typeof n&&t.add(n)}))}));var r=e.loc;return r&&(delete r.startToken,delete r.endToken),e}(gr(n)))}return hr.get(r)}function wr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&(e=[e]);var n=e[0];return t.forEach((function(t,r){t&&"Document"===t.kind?n+=t.loc.source.body:n+=t,n+=e[r+1]})),mr(n)}var Or,Sr=wr,kr=function(){hr.clear(),dr.clear()},xr=function(){yr=!1},Er=function(){vr=!0},jr=function(){vr=!1};(Or=wr||(wr={})).gql=Sr,Or.resetCaches=kr,Or.disableFragmentWarnings=xr,Or.enableExperimentalFragmentVariables=Er,Or.disableExperimentalFragmentVariables=jr,wr.default=wr;var _r,Rr=wr;_r="log",O[S],S=Math.max(0,O.indexOf(_r));var Mr,qr=new(ce?WeakMap:Map);!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(Mr||(Mr={}));var Tr=new Map;function Pr(e){var t;switch(e){case Mr.Query:t="Query";break;case Mr.Mutation:t="Mutation";break;case Mr.Subscription:t="Subscription"}return t}var Cr=function(){function e(e,t){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=e||{},this.context=t||{}}return e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(e,t){void 0===t&&(t=!1),t&&!_e(this.options,e)&&(this.previousOptions=this.options),this.options=e},e.prototype.unmount=function(){this.isMounted=!1},e.prototype.refreshClient=function(){var e=this.options&&this.options.client||this.context&&this.context.client;w(!!e,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.');var t=!1;return e!==this.client&&(t=!0,this.client=e,this.cleanup()),{client:this.client,isNew:t}},e.prototype.verifyDocumentType=function(e,t){var r=function(e){var t,r,n=Tr.get(e);if(n)return n;w(!!e&&!!e.kind,"Argument of "+e+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document");var i=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),o=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),a=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),s=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));w(!i.length||o.length||a.length||s.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"),w(o.length+a.length+s.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+e+" had "+o.length+" queries, "+s.length+" subscriptions and "+a.length+" mutations. You can use 'compose' to join multiple operation types to a component"),r=o.length?Mr.Query:Mr.Mutation,o.length||a.length||(r=Mr.Subscription);var u=o.length?o:a.length?a:s;w(1===u.length,"react-apollo only supports one definition per HOC. "+e+" had "+u.length+" definitions. You can use 'compose' to join multiple operation types to a component");var c=u[0];t=c.variableDefinitions||[];var l={name:c.name&&"Name"===c.name.kind?c.name.value:"data",type:r,variables:t};return Tr.set(e,l),l}(e),n=Pr(t),i=Pr(r.type);w(r.type===t,"Running a "+n+" requires a graphql "+n+", but a "+i+" was used instead.")},e}();!function(e){function t(t){var r=t.options,n=t.context,i=t.setResult,o=e.call(this,r,n)||this;return o.currentObservable={},o.setResult=i,o.initialize(r),o}f(t,e),t.prototype.execute=function(e){if(!0===this.getOptions().skip)return this.cleanup(),{loading:!1,error:void 0,data:void 0,variables:this.getOptions().variables};var t=e;this.refreshClient().isNew&&(t=this.getLoadingResult());var r=this.getOptions().shouldResubscribe;return"function"==typeof r&&(r=!!r(this.getOptions())),!1!==r&&this.previousOptions&&Object.keys(this.previousOptions).length>0&&(this.previousOptions.subscription!==this.getOptions().subscription||!_e(this.previousOptions.variables,this.getOptions().variables)||this.previousOptions.skip!==this.getOptions().skip)&&(this.cleanup(),t=this.getLoadingResult()),this.initialize(this.getOptions()),this.startSubscription(),this.previousOptions=this.getOptions(),p(p({},t),{variables:this.getOptions().variables})},t.prototype.afterExecute=function(){this.isMounted=!0},t.prototype.cleanup=function(){this.endSubscription(),delete this.currentObservable.query},t.prototype.initialize=function(e){this.currentObservable.query||!0===this.getOptions().skip||(this.currentObservable.query=this.refreshClient().client.subscribe({query:e.subscription,variables:e.variables,fetchPolicy:e.fetchPolicy,context:e.context}))},t.prototype.startSubscription=function(){this.currentObservable.subscription||(this.currentObservable.subscription=this.currentObservable.query.subscribe({next:this.updateCurrentData.bind(this),error:this.updateError.bind(this),complete:this.completeSubscription.bind(this)}))},t.prototype.getLoadingResult=function(){return{loading:!0,error:void 0,data:void 0}},t.prototype.updateResult=function(e){this.isMounted&&this.setResult(e)},t.prototype.updateCurrentData=function(e){var t=this.getOptions().onSubscriptionData;this.updateResult({data:e.data,loading:!1,error:void 0}),t&&t({client:this.refreshClient().client,subscriptionData:e})},t.prototype.updateError=function(e){this.updateResult({error:e,loading:!1})},t.prototype.completeSubscription=function(){var e=this;Promise.resolve().then((function(){var t=e.getOptions().onSubscriptionComplete;t&&t(),e.endSubscription()}))},t.prototype.endSubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)}}(Cr);var Dr=function(e){function t(t){var r=t.options,n=t.context,i=t.result,o=t.setResult,a=e.call(this,r,n)||this;return a.runMutation=function(e){void 0===e&&(e={}),a.onMutationStart();var t=a.generateNewMutationId();return a.mutate(e).then((function(e){return a.onMutationCompleted(e,t),e})).catch((function(e){var r=a.getOptions().onError;if(a.onMutationError(e,t),r)return r(e),{data:void 0,errors:e};throw e}))},a.verifyDocumentType(r.mutation,Mr.Mutation),a.result=i,a.setResult=o,a.mostRecentMutationId=0,a}return f(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,Mr.Mutation),[this.runMutation,p(p({},e),{client:this.refreshClient().client})]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){return this.refreshClient().client.mutate(function(e,t){return le(e,t,t.variables&&{variables:p(p({},e.variables),t.variables)})}(this.getOptions(),e))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var r=this.getOptions(),n=r.onCompleted,i=r.ignoreResults,o=e.data,a=e.errors,s=a&&a.length>0?new De({graphQLErrors:a}):void 0;this.isMostRecentMutation(t)&&!i&&this.updateResult({called:!0,loading:!1,data:o,error:s}),n&&n(o)},t.prototype.onMutationError=function(e,t){this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0})},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){if(this.isMounted&&(!this.previousResult||!_e(this.previousResult,e)))return this.setResult(e),this.previousResult=e,e},t}(Cr);function Ir(t,r){var n=e.useContext(function(){var e=qr.get(i.default.createContext);return e||((e=i.default.createContext({})).displayName="ApolloContext",qr.set(i.default.createContext,e)),e}()),o=e.useState({called:!1,loading:!1}),a=o[0],s=o[1],u=r?p(p({},r),{mutation:t}):{mutation:t},c=e.useRef();var l=(c.current||(c.current=new Dr({options:u,context:n,result:a,setResult:s})),c.current);return l.setOptions(u),l.context=n,e.useEffect((function(){return l.afterExecute()})),l.execute(a)}!function(e){function t(t){var r=t.options,n=t.context,i=t.onNewData,o=e.call(this,r,n)||this;return o.runLazy=!1,o.previous=Object.create(null),o.runLazyQuery=function(e){o.cleanup(),o.runLazy=!0,o.lazyOptions=e,o.onNewData()},o.getQueryResult=function(){var e=o.observableQueryFields(),t=o.getOptions();if(t.skip)e=p(p({},e),{data:void 0,error:void 0,loading:!1,networkStatus:Ce.ready,called:!0});else if(o.currentObservable){var r=o.currentObservable.getCurrentResult(),n=r.data,i=r.loading,a=r.partial,s=r.networkStatus,u=r.errors,c=r.error;if(u&&u.length>0&&(c=new De({graphQLErrors:u})),e=p(p({},e),{data:n,loading:i,networkStatus:s,error:c,called:!0}),i);else if(c)Object.assign(e,{data:(o.currentObservable.getLastResult()||{}).data});else{var l=o.currentObservable.options.fetchPolicy;if(t.partialRefetch&&a&&(!n||0===Object.keys(n).length)&&"cache-only"!==l)return Object.assign(e,{loading:!0,networkStatus:Ce.loading}),e.refetch(),e}}e.client=o.client,o.setOptions(t,!0);var f=o.previous.result;return o.previous.loading=f&&f.loading||!1,e.previousData=f&&(f.data||f.previousData),o.previous.result=e,o.currentObservable&&o.currentObservable.resetQueryStoreErrors(),e},o.obsRefetch=function(e){var t;return null===(t=o.currentObservable)||void 0===t?void 0:t.refetch(e)},o.obsFetchMore=function(e){return o.currentObservable.fetchMore(e)},o.obsUpdateQuery=function(e){return o.currentObservable.updateQuery(e)},o.obsStartPolling=function(e){var t;null===(t=o.currentObservable)||void 0===t||t.startPolling(e)},o.obsStopPolling=function(){var e;null===(e=o.currentObservable)||void 0===e||e.stopPolling()},o.obsSubscribeToMore=function(e){return o.currentObservable.subscribeToMore(e)},o.onNewData=i,o}f(t,e),t.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,r=e.query;return(t||r!==this.previous.query)&&(this.removeQuerySubscription(),this.removeObservable(!t),this.previous.query=r),this.updateObservableQuery(),this.isMounted&&this.startQuerySubscription(),this.getExecuteSsrResult()||this.getExecuteResult()},t.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:Ce.ready,called:!1,data:void 0}]},t.prototype.fetchData=function(){var e=this,t=this.getOptions();return!t.skip&&!1!==t.ssr&&new Promise((function(t){return e.startQuerySubscription(t)}))},t.prototype.afterExecute=function(e){var t=(void 0===e?{}:e).lazy,r=void 0!==t&&t;return this.isMounted=!0,r&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=this.getOptions(),this.unmount.bind(this)},t.prototype.cleanup=function(){this.removeQuerySubscription(),this.removeObservable(!0),delete this.previous.result},t.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this);return this.lazyOptions&&(t.variables=p(p({},t.variables),this.lazyOptions.variables),t.context=p(p({},t.context),this.lazyOptions.context)),this.runLazy&&delete t.skip,t},t.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},t.prototype.getExecuteResult=function(){var e=this.getQueryResult();return this.startQuerySubscription(),e},t.prototype.getExecuteSsrResult=function(){var e=this.getOptions(),t=e.ssr,r=e.skip,n=!1===t,i=this.refreshClient().client.disableNetworkFetches,o=p({loading:!0,networkStatus:Ce.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());if(n&&(this.ssrInitiated()||i))return this.previous.result=o,o;if(this.ssrInitiated()){var a=this.getQueryResult()||o;return a.loading&&!r&&this.context.renderPromises.addQueryPromise(this,(function(){return null})),a}},t.prototype.prepareObservableQueryOptions=function(){var e=this.getOptions();this.verifyDocumentType(e.query,Mr.Query);var t=e.displayName||"Query";return!this.ssrInitiated()||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e.fetchPolicy="cache-first"),p(p({},e),{displayName:t,context:e.context})},t.prototype.initializeObservableQuery=function(){if(this.ssrInitiated()&&(this.currentObservable=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable){var e=this.prepareObservableQueryOptions();this.previous.observableQueryOptions=p(p({},e),{children:null}),this.currentObservable=this.refreshClient().client.watchQuery(p({},e)),this.ssrInitiated()&&this.context.renderPromises.registerSSRObservable(this.currentObservable,e)}},t.prototype.updateObservableQuery=function(){if(this.currentObservable){if(!this.getOptions().skip){var e=p(p({},this.prepareObservableQueryOptions()),{children:null});_e(e,this.previous.observableQueryOptions)||(this.previous.observableQueryOptions=e,this.currentObservable.setOptions(e).catch((function(){})))}}else this.initializeObservableQuery()},t.prototype.startQuerySubscription=function(e){var t=this;void 0===e&&(e=this.onNewData),this.currentSubscription||this.getOptions().skip||(this.currentSubscription=this.currentObservable.subscribe({next:function(r){var n=r.loading,i=r.networkStatus,o=r.data,a=t.previous.result;a&&a.loading===n&&a.networkStatus===i&&_e(a.data,o)||e()},error:function(r){if(t.resubscribeToQuery(),!r.hasOwnProperty("graphQLErrors"))throw r;var n=t.previous.result;(n&&n.loading||!_e(r,t.previous.error))&&(t.previous.error=r,e())}}))},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable;if(e){var t=e.getLastError(),r=e.getLastResult();e.resetLastResults(),this.startQuerySubscription(),Object.assign(e,{lastError:t,lastResult:r})}},t.prototype.handleErrorOrCompleted=function(){if(this.currentObservable&&this.previous.result){var e=this.previous.result,t=e.data,r=e.loading,n=e.error;if(!r){var i=this.getOptions(),o=i.query,a=i.variables,s=i.onCompleted,u=i.onError,c=i.skip;if(this.previousOptions&&!this.previous.loading&&_e(this.previousOptions.query,o)&&_e(this.previousOptions.variables,a))return;!s||n||c?u&&n&&u(n):s(t)}}},t.prototype.removeQuerySubscription=function(){this.currentSubscription&&(this.currentSubscription.unsubscribe(),delete this.currentSubscription)},t.prototype.removeObservable=function(e){this.currentObservable&&(this.currentObservable.tearDownQuery(),e&&delete this.currentObservable)},t.prototype.observableQueryFields=function(){var e;return{variables:null===(e=this.currentObservable)||void 0===e?void 0:e.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}}}(Cr);const Fr=Rr`
  mutation contact($input: ContactInput!) {
    contact(input: $input) {
      success
    }
  }
`;return{...a,...u,...c,...{useSubmitContact:()=>{const[t,{data:r,error:n,loading:i}]=Ir(Fr);e.useEffect((()=>{n&&o.default(n.message),r&&r.contact&&o.default("Message sent!")}),[n,r]);return[async e=>{console.log("useSubmitContact.js"),await t({variables:{input:e}})},{data:r,error:n,loading:i}]}},...{Button:()=>i.default.createElement(s.Consumer,null,((e,t)=>(console.log("value",e,t),i.default.createElement("button",{type:"button"},"My Button"))))}}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyIuLi9zcmMvaGVscGVycy9pbmRleC5qcyIsIi4uL3NyYy9oZWxwZXJzL21ha2VJZC5qcyIsIi4uL3NyYy9oZWxwZXJzL2Fic29sdXRlVXJsLmpzIiwiLi4vc3JjL2xpYnMvWmVpcVRoZW1lUHJvdmlkZXIuanMiLCIuLi9zcmMvbGlicy9pbmRleC5qcyIsIi4uL3NyYy9hdXRoL2luZGV4LmpzIiwiLi4vc3JjL2F1dGgvZ2V0QXBwQ29va2llcy5qcyIsIi4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9ub2RlX21vZHVsZXMvdHMtaW52YXJpYW50L25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9ub2RlX21vZHVsZXMvdHMtaW52YXJpYW50L3NyYy9pbnZhcmlhbnQudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2dyYXBocWwvZGlyZWN0aXZlcy50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvZ3JhcGhxbC9mcmFnbWVudHMudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2dyYXBocWwvc3RvcmVVdGlscy50cyIsIi4uL25vZGVfbW9kdWxlcy9mYXN0LWpzb24tc3RhYmxlLXN0cmluZ2lmeS9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvZ3JhcGhxbC9nZXRGcm9tQVNULnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9ncmFwaHFsL3RyYW5zZm9ybS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL21lcmdlRGVlcC50cyIsIi4uL25vZGVfbW9kdWxlcy96ZW4tb2JzZXJ2YWJsZS9saWIvT2JzZXJ2YWJsZS5qcyIsIi4uL25vZGVfbW9kdWxlcy96ZW4tb2JzZXJ2YWJsZS9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9wb255ZmlsbC5qcyIsIi4uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvb2JzZXJ2YWJsZXMvT2JzZXJ2YWJsZS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL2Nsb25lRGVlcC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL2Vudmlyb25tZW50LnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vbWF5YmVEZWVwRnJlZXplLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9vYnNlcnZhYmxlcy9pdGVyYXRpb24udHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL29ic2VydmFibGVzL3N1YmNsYXNzaW5nLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9vYnNlcnZhYmxlcy9Db25jYXN0LnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vYXJyYXlzLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vY2FuVXNlLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vY29tcGFjdC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL3V0aWxzL2Zyb21FcnJvci50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL3V0aWxzL3Rocm93U2VydmVyRXJyb3IudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9jb3JlL0Fwb2xsb0xpbmsudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay91dGlscy9jcmVhdGVPcGVyYXRpb24udHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay91dGlscy90cmFuc2Zvcm1PcGVyYXRpb24udHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay91dGlscy92YWxpZGF0ZU9wZXJhdGlvbi50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvcGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9odHRwL3NlbGVjdEh0dHBPcHRpb25zQW5kQm9keS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvY3JlYXRlSHR0cExpbmsudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9odHRwL2NoZWNrRmV0Y2hlci50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvc2VsZWN0VVJJLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2xpbmsvaHR0cC9jcmVhdGVTaWduYWxJZlN1cHBvcnRlZC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvcmV3cml0ZVVSSUZvckdFVC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvSHR0cExpbmsudHMiLCIuLi9ub2RlX21vZHVsZXMvQHdyeS9lcXVhbGl0eS9zcmMvZXF1YWxpdHkudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvZXJyb3JzL2luZGV4LnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NvcmUvbmV0d29ya1N0YXR1cy50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jb3JlL1Jlb2JzZXJ2ZXIudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9PYnNlcnZhYmxlUXVlcnkudHMiLCIuLi9ub2RlX21vZHVsZXMvQHdyeS90cmllL3NyYy90cmllLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0B3cnkvY29udGV4dC9zcmMvc2xvdC50cyIsIi4uL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9zcmMvY2FjaGUudHMiLCIuLi9ub2RlX21vZHVsZXMvQHdyeS9jb250ZXh0L3NyYy9jb250ZXh0LnRzIiwiLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9jb250ZXh0LnRzIiwiLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9oZWxwZXJzLnRzIiwiLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9lbnRyeS50cyIsIi4uL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9zcmMvZGVwLnRzIiwiLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9pbmRleC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9jb3JlL2NhY2hlLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NhY2hlL2NvcmUvdHlwZXMvY29tbW9uLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NhY2hlL2lubWVtb3J5L2hlbHBlcnMudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvZW50aXR5U3RvcmUudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvcmVhZEZyb21TdG9yZS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9pbm1lbW9yeS93cml0ZVRvU3RvcmUudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvcmVhY3RpdmVWYXJzLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NhY2hlL2lubWVtb3J5L3BvbGljaWVzLnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NhY2hlL2lubWVtb3J5L2luTWVtb3J5Q2FjaGUudHMiLCIuLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC10YWcvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uL25vZGVfbW9kdWxlcy9ncmFwaHFsLXRhZy9zcmMvaW5kZXgudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9pbmRleC50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9yZWFjdC9jb250ZXh0L0Fwb2xsb0NvbnRleHQudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvcmVhY3QvcGFyc2VyL2luZGV4LnRzIiwiLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3JlYWN0L2RhdGEvT3BlcmF0aW9uRGF0YS50cyIsIi4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9yZWFjdC9kYXRhL1N1YnNjcmlwdGlvbkRhdGEudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvcmVhY3QvZGF0YS9NdXRhdGlvbkRhdGEudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9BcG9sbG9DbGllbnQudHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvcmVhY3QvaG9va3MvdXNlTXV0YXRpb24udHMiLCIuLi9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvcmVhY3QvZGF0YS9RdWVyeURhdGEudHMiLCIuLi9zcmMvaG9va3MvdXNlU3VibWl0Q29udGFjdC5qcyIsIi4uL3NyYy9tYWluLmpzIiwiLi4vc3JjL2hvb2tzL2luZGV4LmpzIiwiLi4vc3JjL2VsZW1lbnRzL2luZGV4LmpzIiwiLi4vc3JjL2VsZW1lbnRzL0J1dHRvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWFrZUlkIGZyb20gJy4vbWFrZUlkJztcbmltcG9ydCBhYnNvbHV0ZVVybCBmcm9tICcuL2Fic29sdXRlVXJsJztcblxuZXhwb3J0IGRlZmF1bHQgeyBtYWtlSWQsIGFic29sdXRlVXJsIH07XG4iLCJleHBvcnQgZGVmYXVsdCAobGVuZ3RoKSA9PiB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgY29uc3QgY2hhcmFjdGVycyA9XG4gICAgJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgY29uc3QgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGx1c3BsdXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCAocmVxLCBzZXRMb2NhbGhvc3QpID0+IHtcbiAgbGV0IHByb3RvY29sID0gJ2h0dHBzOic7XG4gIGxldCBob3N0ID0gcmVxXG4gICAgPyByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtaG9zdCddIHx8IHJlcS5oZWFkZXJzLmhvc3RcbiAgICA6IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICBpZiAoaG9zdC5pbmRleE9mKCdsb2NhbGhvc3QnKSA+IC0xKSB7XG4gICAgaWYgKHNldExvY2FsaG9zdCkgaG9zdCA9IHNldExvY2FsaG9zdDtcbiAgICBwcm90b2NvbCA9ICdodHRwOic7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbCxcbiAgICBob3N0LFxuICAgIG9yaWdpbjogYCR7cHJvdG9jb2x9Ly8ke2hvc3R9YCxcbiAgICB1cmw6IHJlcSxcbiAgfTtcbn07XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgVGhlbWVDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCgpO1xuXG5jb25zdCBaZWlxVGhlbWVQcm92aWRlciA9ICh7IGNoaWxkcmVuLCB2YWx1ZSB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFRoZW1lQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PntjaGlsZHJlbn08L1RoZW1lQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFplaXFUaGVtZVByb3ZpZGVyO1xuIiwiaW1wb3J0IFplaXFUaGVtZVByb3ZpZGVyIGZyb20gJy4vWmVpcVRoZW1lUHJvdmlkZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7IFplaXFUaGVtZVByb3ZpZGVyIH07XG4iLCJpbXBvcnQgZ2V0QXBwQ29va2llcyBmcm9tICcuL2dldEFwcENvb2tpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCB7IGdldEFwcENvb2tpZXMgfTtcbiIsIi8qXG4gKiBAcGFyYW1zIHtyZXF1ZXN0fSBleHRyYWN0ZWQgZnJvbSByZXF1ZXN0IHJlc3BvbnNlXG4gKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBvZiBwYXJzZSBqd3QgY29va2llIGRlY29kZSBvYmplY3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQgKHJlcSkgPT4ge1xuICBjb25zdCBwYXJzZWRJdGVtcyA9IHt9O1xuICBpZiAocmVxLmhlYWRlcnMuY29va2llKSB7XG4gICAgY29uc3QgY29va2llc0l0ZW1zID0gcmVxLmhlYWRlcnMuY29va2llLnNwbGl0KCc7ICcpO1xuICAgIGNvb2tpZXNJdGVtcy5mb3JFYWNoKChjb29raWVzKSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWRJdGVtID0gY29va2llcy5zcGxpdCgnPScpO1xuICAgICAgcGFyc2VkSXRlbXNbcGFyc2VkSXRlbVswXV0gPSBkZWNvZGVVUkkocGFyc2VkSXRlbVsxXSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhcnNlZEl0ZW1zO1xufTtcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NyZWF0ZUJpbmRpbmcobywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJpdmF0ZU1hcC5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlTWFwLnNldChyZWNlaXZlciwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcclxuICAgICAgICB0b1tqXSA9IGZyb21baV07XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJjb25zdCBnZW5lcmljTWVzc2FnZSA9IFwiSW52YXJpYW50IFZpb2xhdGlvblwiO1xuY29uc3Qge1xuICBzZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uIChvYmo6IGFueSwgcHJvdG86IGFueSkge1xuICAgIG9iai5fX3Byb3RvX18gPSBwcm90bztcbiAgICByZXR1cm4gb2JqO1xuICB9LFxufSA9IE9iamVjdCBhcyBhbnk7XG5cbmV4cG9ydCBjbGFzcyBJbnZhcmlhbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgZnJhbWVzVG9Qb3AgPSAxO1xuICBuYW1lID0gZ2VuZXJpY01lc3NhZ2U7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyB8IG51bWJlciA9IGdlbmVyaWNNZXNzYWdlKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgbWVzc2FnZSA9PT0gXCJudW1iZXJcIlxuICAgICAgICA/IGAke2dlbmVyaWNNZXNzYWdlfTogJHttZXNzYWdlfSAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcG9sbG9ncmFwaHFsL2ludmFyaWFudC1wYWNrYWdlcylgXG4gICAgICAgIDogbWVzc2FnZVxuICAgICk7XG4gICAgc2V0UHJvdG90eXBlT2YodGhpcywgSW52YXJpYW50RXJyb3IucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW52YXJpYW50KFxuICBjb25kaXRpb246IGFueSxcbiAgbWVzc2FnZT86IHN0cmluZyB8IG51bWJlcixcbik6IGFzc2VydHMgY29uZGl0aW9uIHtcbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IobWVzc2FnZSk7XG4gIH1cbn1cblxuY29uc3QgdmVyYm9zaXR5TGV2ZWxzID0gW1wibG9nXCIsIFwid2FyblwiLCBcImVycm9yXCIsIFwic2lsZW50XCJdIGFzIGNvbnN0O1xudHlwZSBWZXJib3NpdHlMZXZlbCA9ICh0eXBlb2YgdmVyYm9zaXR5TGV2ZWxzKVtudW1iZXJdO1xudHlwZSBDb25zb2xlTWV0aG9kTmFtZSA9IEV4Y2x1ZGU8VmVyYm9zaXR5TGV2ZWwsIFwic2lsZW50XCI+O1xubGV0IHZlcmJvc2l0eUxldmVsID0gdmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YoXCJsb2dcIik7XG5cbmZ1bmN0aW9uIHdyYXBDb25zb2xlTWV0aG9kPE0gZXh0ZW5kcyBDb25zb2xlTWV0aG9kTmFtZT4obWV0aG9kOiBNKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHZlcmJvc2l0eUxldmVscy5pbmRleE9mKG1ldGhvZCkgPj0gdmVyYm9zaXR5TGV2ZWwpIHtcbiAgICAgIHJldHVybiBjb25zb2xlW21ldGhvZF0uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzIGFzIGFueSk7XG4gICAgfVxuICB9IGFzICh0eXBlb2YgY29uc29sZSlbTV07XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgaW52YXJpYW50IHtcbiAgZXhwb3J0IGNvbnN0IGxvZyA9IHdyYXBDb25zb2xlTWV0aG9kKFwibG9nXCIpO1xuICBleHBvcnQgY29uc3Qgd2FybiA9IHdyYXBDb25zb2xlTWV0aG9kKFwid2FyblwiKTtcbiAgZXhwb3J0IGNvbnN0IGVycm9yID0gd3JhcENvbnNvbGVNZXRob2QoXCJlcnJvclwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcmJvc2l0eShsZXZlbDogVmVyYm9zaXR5TGV2ZWwpOiBWZXJib3NpdHlMZXZlbCB7XG4gIGNvbnN0IG9sZCA9IHZlcmJvc2l0eUxldmVsc1t2ZXJib3NpdHlMZXZlbF07XG4gIHZlcmJvc2l0eUxldmVsID0gTWF0aC5tYXgoMCwgdmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YobGV2ZWwpKTtcbiAgcmV0dXJuIG9sZDtcbn1cblxuLy8gQ29kZSB0aGF0IHVzZXMgdHMtaW52YXJpYW50IHdpdGggcm9sbHVwLXBsdWdpbi1pbnZhcmlhbnQgbWF5IHdhbnQgdG9cbi8vIGltcG9ydCB0aGlzIHByb2Nlc3Mgc3R1YiB0byBhdm9pZCBlcnJvcnMgZXZhbHVhdGluZyBwcm9jZXNzLmVudi5OT0RFX0VOVi5cbi8vIEhvd2V2ZXIsIGJlY2F1c2UgbW9zdCBFU00tdG8tQ0pTIGNvbXBpbGVycyB3aWxsIHJld3JpdGUgdGhlIHByb2Nlc3MgaW1wb3J0XG4vLyBhcyB0c0ludmFyaWFudC5wcm9jZXNzLCB3aGljaCBwcmV2ZW50cyBwcm9wZXIgcmVwbGFjZW1lbnQgYnkgbWluaWZpZXJzLCB3ZVxuLy8gYWxzbyBleHBvcnQgcHJvY2Vzc1N0dWIsIHNvIHlvdSBjYW4gaW1wb3J0IHsgaW52YXJpYW50LCBwcm9jZXNzU3R1YiB9IGZyb21cbi8vIFwidHMtaW52YXJpYW50XCIgYW5kIGFzc2lnbiBwcm9jZXNzU3R1YiB0byBhIGxvY2FsIHZhcmlhYmxlIG5hbWVkIHByb2Nlc3MuXG5leHBvcnQgY29uc3QgcHJvY2Vzc1N0dWI6IHtcbiAgZW52OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59ID0gKFxuICB0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09IFwib2JqZWN0XCJcbikgPyBwcm9jZXNzIDogeyBlbnY6IHt9IH07XG5cbmV4cG9ydCB7IHByb2Nlc3NTdHViIGFzIHByb2Nlc3MgfTtcblxuZXhwb3J0IGRlZmF1bHQgaW52YXJpYW50O1xuIiwiLy8gUHJvdmlkZXMgdGhlIG1ldGhvZHMgdGhhdCBhbGxvdyBRdWVyeU1hbmFnZXIgdG8gaGFuZGxlIHRoZSBgc2tpcGAgYW5kXG4vLyBgaW5jbHVkZWAgZGlyZWN0aXZlcyB3aXRoaW4gR3JhcGhRTC5cbmltcG9ydCB7XG4gIFNlbGVjdGlvbk5vZGUsXG4gIFZhcmlhYmxlTm9kZSxcbiAgQm9vbGVhblZhbHVlTm9kZSxcbiAgRGlyZWN0aXZlTm9kZSxcbiAgRG9jdW1lbnROb2RlLFxuICBBcmd1bWVudE5vZGUsXG4gIFZhbHVlTm9kZSxcbiAgQVNUTm9kZSxcbiAgdmlzaXQsXG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5leHBvcnQgdHlwZSBEaXJlY3RpdmVJbmZvID0ge1xuICBbZmllbGROYW1lOiBzdHJpbmddOiB7IFthcmdOYW1lOiBzdHJpbmddOiBhbnkgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRJbmNsdWRlKFxuICB7IGRpcmVjdGl2ZXMgfTogU2VsZWN0aW9uTm9kZSxcbiAgdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgYW55Pixcbik6IGJvb2xlYW4ge1xuICBpZiAoIWRpcmVjdGl2ZXMgfHwgIWRpcmVjdGl2ZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGdldEluY2x1c2lvbkRpcmVjdGl2ZXMoXG4gICAgZGlyZWN0aXZlc1xuICApLmV2ZXJ5KCh7IGRpcmVjdGl2ZSwgaWZBcmd1bWVudCB9KSA9PiB7XG4gICAgbGV0IGV2YWxlZFZhbHVlOiBib29sZWFuID0gZmFsc2U7XG4gICAgaWYgKGlmQXJndW1lbnQudmFsdWUua2luZCA9PT0gJ1ZhcmlhYmxlJykge1xuICAgICAgZXZhbGVkVmFsdWUgPSB2YXJpYWJsZXMgJiYgdmFyaWFibGVzWyhpZkFyZ3VtZW50LnZhbHVlIGFzIFZhcmlhYmxlTm9kZSkubmFtZS52YWx1ZV07XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIGV2YWxlZFZhbHVlICE9PSB2b2lkIDAsXG4gICAgICAgIGBJbnZhbGlkIHZhcmlhYmxlIHJlZmVyZW5jZWQgaW4gQCR7ZGlyZWN0aXZlLm5hbWUudmFsdWV9IGRpcmVjdGl2ZS5gLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZhbGVkVmFsdWUgPSAoaWZBcmd1bWVudC52YWx1ZSBhcyBCb29sZWFuVmFsdWVOb2RlKS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSAnc2tpcCcgPyAhZXZhbGVkVmFsdWUgOiBldmFsZWRWYWx1ZTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXJlY3RpdmVOYW1lcyhyb290OiBBU1ROb2RlKSB7XG4gIGNvbnN0IG5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIHZpc2l0KHJvb3QsIHtcbiAgICBEaXJlY3RpdmUobm9kZTogRGlyZWN0aXZlTm9kZSkge1xuICAgICAgbmFtZXMucHVzaChub2RlLm5hbWUudmFsdWUpO1xuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBuYW1lcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0RpcmVjdGl2ZXMobmFtZXM6IHN0cmluZ1tdLCByb290OiBBU1ROb2RlKSB7XG4gIHJldHVybiBnZXREaXJlY3RpdmVOYW1lcyhyb290KS5zb21lKFxuICAgIChuYW1lOiBzdHJpbmcpID0+IG5hbWVzLmluZGV4T2YobmFtZSkgPiAtMSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NsaWVudEV4cG9ydHMoZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSkge1xuICByZXR1cm4gKFxuICAgIGRvY3VtZW50ICYmXG4gICAgaGFzRGlyZWN0aXZlcyhbJ2NsaWVudCddLCBkb2N1bWVudCkgJiZcbiAgICBoYXNEaXJlY3RpdmVzKFsnZXhwb3J0J10sIGRvY3VtZW50KVxuICApO1xufVxuXG5leHBvcnQgdHlwZSBJbmNsdXNpb25EaXJlY3RpdmVzID0gQXJyYXk8e1xuICBkaXJlY3RpdmU6IERpcmVjdGl2ZU5vZGU7XG4gIGlmQXJndW1lbnQ6IEFyZ3VtZW50Tm9kZTtcbn0+O1xuXG5mdW5jdGlvbiBpc0luY2x1c2lvbkRpcmVjdGl2ZSh7IG5hbWU6IHsgdmFsdWUgfSB9OiBEaXJlY3RpdmVOb2RlKTogYm9vbGVhbiB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJ3NraXAnIHx8IHZhbHVlID09PSAnaW5jbHVkZSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmNsdXNpb25EaXJlY3RpdmVzKFxuICBkaXJlY3RpdmVzOiBSZWFkb25seUFycmF5PERpcmVjdGl2ZU5vZGU+LFxuKTogSW5jbHVzaW9uRGlyZWN0aXZlcyB7XG4gIGNvbnN0IHJlc3VsdDogSW5jbHVzaW9uRGlyZWN0aXZlcyA9IFtdO1xuXG4gIGlmIChkaXJlY3RpdmVzICYmIGRpcmVjdGl2ZXMubGVuZ3RoKSB7XG4gICAgZGlyZWN0aXZlcy5mb3JFYWNoKGRpcmVjdGl2ZSA9PiB7XG4gICAgICBpZiAoIWlzSW5jbHVzaW9uRGlyZWN0aXZlKGRpcmVjdGl2ZSkpIHJldHVybjtcblxuICAgICAgY29uc3QgZGlyZWN0aXZlQXJndW1lbnRzID0gZGlyZWN0aXZlLmFyZ3VtZW50cztcbiAgICAgIGNvbnN0IGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmUubmFtZS52YWx1ZTtcblxuICAgICAgaW52YXJpYW50KFxuICAgICAgICBkaXJlY3RpdmVBcmd1bWVudHMgJiYgZGlyZWN0aXZlQXJndW1lbnRzLmxlbmd0aCA9PT0gMSxcbiAgICAgICAgYEluY29ycmVjdCBudW1iZXIgb2YgYXJndW1lbnRzIGZvciB0aGUgQCR7ZGlyZWN0aXZlTmFtZX0gZGlyZWN0aXZlLmAsXG4gICAgICApO1xuXG4gICAgICBjb25zdCBpZkFyZ3VtZW50ID0gZGlyZWN0aXZlQXJndW1lbnRzIVswXTtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgaWZBcmd1bWVudC5uYW1lICYmIGlmQXJndW1lbnQubmFtZS52YWx1ZSA9PT0gJ2lmJyxcbiAgICAgICAgYEludmFsaWQgYXJndW1lbnQgZm9yIHRoZSBAJHtkaXJlY3RpdmVOYW1lfSBkaXJlY3RpdmUuYCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGlmVmFsdWU6IFZhbHVlTm9kZSA9IGlmQXJndW1lbnQudmFsdWU7XG5cbiAgICAgIC8vIG1lYW5zIGl0IGhhcyB0byBiZSBhIHZhcmlhYmxlIHZhbHVlIGlmIHRoaXMgaXMgYSB2YWxpZCBAc2tpcCBvciBAaW5jbHVkZSBkaXJlY3RpdmVcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgaWZWYWx1ZSAmJlxuICAgICAgICAgIChpZlZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZScgfHwgaWZWYWx1ZS5raW5kID09PSAnQm9vbGVhblZhbHVlJyksXG4gICAgICAgIGBBcmd1bWVudCBmb3IgdGhlIEAke2RpcmVjdGl2ZU5hbWV9IGRpcmVjdGl2ZSBtdXN0IGJlIGEgdmFyaWFibGUgb3IgYSBib29sZWFuIHZhbHVlLmAsXG4gICAgICApO1xuXG4gICAgICByZXN1bHQucHVzaCh7IGRpcmVjdGl2ZSwgaWZBcmd1bWVudCB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbiIsImltcG9ydCB7XG4gIERvY3VtZW50Tm9kZSxcbiAgRnJhZ21lbnREZWZpbml0aW9uTm9kZSxcbiAgSW5saW5lRnJhZ21lbnROb2RlLFxuICBTZWxlY3Rpb25Ob2RlXG59IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbi8qKlxuICogUmV0dXJucyBhIHF1ZXJ5IGRvY3VtZW50IHdoaWNoIGFkZHMgYSBzaW5nbGUgcXVlcnkgb3BlcmF0aW9uIHRoYXQgb25seVxuICogc3ByZWFkcyB0aGUgdGFyZ2V0IGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbiAqXG4gKiBTbyBmb3IgZXhhbXBsZSBhIGRvY3VtZW50IG9mOlxuICpcbiAqIGBgYGdyYXBocWxcbiAqIGZyYWdtZW50IGZvbyBvbiBGb28geyBhIGIgYyB9XG4gKiBgYGBcbiAqXG4gKiBUdXJucyBpbnRvOlxuICpcbiAqIGBgYGdyYXBocWxcbiAqIHsgLi4uZm9vIH1cbiAqXG4gKiBmcmFnbWVudCBmb28gb24gRm9vIHsgYSBiIGMgfVxuICogYGBgXG4gKlxuICogVGhlIHRhcmdldCBmcmFnbWVudCB3aWxsIGVpdGhlciBiZSB0aGUgb25seSBmcmFnbWVudCBpbiB0aGUgZG9jdW1lbnQsIG9yIGFcbiAqIGZyYWdtZW50IHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgYGZyYWdtZW50TmFtZWAuIElmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmVcbiAqIGZyYWdtZW50LCBidXQgYSBgZnJhZ21lbnROYW1lYCB3YXMgbm90IGRlZmluZWQgdGhlbiBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50UXVlcnlEb2N1bWVudChcbiAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSxcbiAgZnJhZ21lbnROYW1lPzogc3RyaW5nLFxuKTogRG9jdW1lbnROb2RlIHtcbiAgbGV0IGFjdHVhbEZyYWdtZW50TmFtZSA9IGZyYWdtZW50TmFtZTtcblxuICAvLyBCdWlsZCBhbiBhcnJheSBvZiBhbGwgb3VyIGZyYWdtZW50IGRlZmluaXRpb25zIHRoYXQgd2lsbCBiZSB1c2VkIGZvclxuICAvLyB2YWxpZGF0aW9ucy4gV2UgYWxzbyBkbyBzb21lIHZhbGlkYXRpb25zIG9uIHRoZSBvdGhlciBkZWZpbml0aW9ucyBpbiB0aGVcbiAgLy8gZG9jdW1lbnQgd2hpbGUgYnVpbGRpbmcgdGhpcyBsaXN0LlxuICBjb25zdCBmcmFnbWVudHM6IEFycmF5PEZyYWdtZW50RGVmaW5pdGlvbk5vZGU+ID0gW107XG4gIGRvY3VtZW50LmRlZmluaXRpb25zLmZvckVhY2goZGVmaW5pdGlvbiA9PiB7XG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgd2UgZW5jb3VudGVyIGFuIG9wZXJhdGlvbiBkZWZpbml0aW9uIGJlY2F1c2Ugd2Ugd2lsbFxuICAgIC8vIGRlZmluZSBvdXIgb3duIG9wZXJhdGlvbiBkZWZpbml0aW9uIGxhdGVyIG9uLlxuICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKFxuICAgICAgICBgRm91bmQgYSAke2RlZmluaXRpb24ub3BlcmF0aW9ufSBvcGVyYXRpb24ke1xuICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA/IGAgbmFtZWQgJyR7ZGVmaW5pdGlvbi5uYW1lLnZhbHVlfSdgIDogJydcbiAgICAgICAgfS4gYCArXG4gICAgICAgICAgJ05vIG9wZXJhdGlvbnMgYXJlIGFsbG93ZWQgd2hlbiB1c2luZyBhIGZyYWdtZW50IGFzIGEgcXVlcnkuIE9ubHkgZnJhZ21lbnRzIGFyZSBhbGxvd2VkLicsXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBBZGQgb3VyIGRlZmluaXRpb24gdG8gdGhlIGZyYWdtZW50cyBhcnJheSBpZiBpdCBpcyBhIGZyYWdtZW50XG4gICAgLy8gZGVmaW5pdGlvbi5cbiAgICBpZiAoZGVmaW5pdGlvbi5raW5kID09PSAnRnJhZ21lbnREZWZpbml0aW9uJykge1xuICAgICAgZnJhZ21lbnRzLnB1c2goZGVmaW5pdGlvbik7XG4gICAgfVxuICB9KTtcblxuICAvLyBJZiB0aGUgdXNlciBkaWQgbm90IGdpdmUgdXMgYSBmcmFnbWVudCBuYW1lIHRoZW4gbGV0IHVzIHRyeSB0byBnZXQgYVxuICAvLyBuYW1lIGZyb20gYSBzaW5nbGUgZnJhZ21lbnQgaW4gdGhlIGRlZmluaXRpb24uXG4gIGlmICh0eXBlb2YgYWN0dWFsRnJhZ21lbnROYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIGludmFyaWFudChcbiAgICAgIGZyYWdtZW50cy5sZW5ndGggPT09IDEsXG4gICAgICBgRm91bmQgJHtcbiAgICAgICAgZnJhZ21lbnRzLmxlbmd0aFxuICAgICAgfSBmcmFnbWVudHMuIFxcYGZyYWdtZW50TmFtZVxcYCBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdGhlcmUgaXMgbm90IGV4YWN0bHkgMSBmcmFnbWVudC5gLFxuICAgICk7XG4gICAgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnRzWzBdLm5hbWUudmFsdWU7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIHF1ZXJ5IGRvY3VtZW50IHdpdGggYW4gb3BlcmF0aW9uIHRoYXQgc2ltcGx5IHNwcmVhZHMgdGhlXG4gIC8vIGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbiAgY29uc3QgcXVlcnk6IERvY3VtZW50Tm9kZSA9IHtcbiAgICAuLi5kb2N1bWVudCxcbiAgICBkZWZpbml0aW9uczogW1xuICAgICAge1xuICAgICAgICBraW5kOiAnT3BlcmF0aW9uRGVmaW5pdGlvbicsXG4gICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgc2VsZWN0aW9uU2V0OiB7XG4gICAgICAgICAga2luZDogJ1NlbGVjdGlvblNldCcsXG4gICAgICAgICAgc2VsZWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBraW5kOiAnRnJhZ21lbnRTcHJlYWQnLFxuICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ05hbWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhY3R1YWxGcmFnbWVudE5hbWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgLi4uZG9jdW1lbnQuZGVmaW5pdGlvbnMsXG4gICAgXSxcbiAgfTtcblxuICByZXR1cm4gcXVlcnk7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhbiBpbnRlcmZhY2UgdGhhdCBkZXNjcmliZXMgYSBtYXAgZnJvbSBmcmFnbWVudCBuYW1lcyB0byBmcmFnbWVudCBkZWZpbml0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGcmFnbWVudE1hcCB7XG4gIFtmcmFnbWVudE5hbWU6IHN0cmluZ106IEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGxpc3Qgb2YgZnJhZ21lbnQgZGVmaW5pdGlvbnMgYW5kIG1ha2VzIGEgaGFzaCBvdXQgb2YgdGhlbVxuLy8gdGhhdCBtYXBzIHRoZSBuYW1lIG9mIHRoZSBmcmFnbWVudCB0byB0aGUgZnJhZ21lbnQgZGVmaW5pdGlvbi5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFnbWVudE1hcChcbiAgZnJhZ21lbnRzOiBGcmFnbWVudERlZmluaXRpb25Ob2RlW10gPSBbXSxcbik6IEZyYWdtZW50TWFwIHtcbiAgY29uc3Qgc3ltVGFibGU6IEZyYWdtZW50TWFwID0ge307XG4gIGZyYWdtZW50cy5mb3JFYWNoKGZyYWdtZW50ID0+IHtcbiAgICBzeW1UYWJsZVtmcmFnbWVudC5uYW1lLnZhbHVlXSA9IGZyYWdtZW50O1xuICB9KTtcbiAgcmV0dXJuIHN5bVRhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKFxuICBzZWxlY3Rpb246IFNlbGVjdGlvbk5vZGUsXG4gIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXAsXG4pOiBJbmxpbmVGcmFnbWVudE5vZGUgfCBGcmFnbWVudERlZmluaXRpb25Ob2RlIHwgbnVsbCB7XG4gIHN3aXRjaCAoc2VsZWN0aW9uLmtpbmQpIHtcbiAgICBjYXNlICdJbmxpbmVGcmFnbWVudCc6XG4gICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIGNhc2UgJ0ZyYWdtZW50U3ByZWFkJzoge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmcmFnbWVudE1hcCAmJiBmcmFnbWVudE1hcFtzZWxlY3Rpb24ubmFtZS52YWx1ZV07XG4gICAgICBpbnZhcmlhbnQoZnJhZ21lbnQsIGBObyBmcmFnbWVudCBuYW1lZCAke3NlbGVjdGlvbi5uYW1lLnZhbHVlfS5gKTtcbiAgICAgIHJldHVybiBmcmFnbWVudCE7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgRGlyZWN0aXZlTm9kZSxcbiAgRmllbGROb2RlLFxuICBJbnRWYWx1ZU5vZGUsXG4gIEZsb2F0VmFsdWVOb2RlLFxuICBTdHJpbmdWYWx1ZU5vZGUsXG4gIEJvb2xlYW5WYWx1ZU5vZGUsXG4gIE9iamVjdFZhbHVlTm9kZSxcbiAgTGlzdFZhbHVlTm9kZSxcbiAgRW51bVZhbHVlTm9kZSxcbiAgTnVsbFZhbHVlTm9kZSxcbiAgVmFyaWFibGVOb2RlLFxuICBJbmxpbmVGcmFnbWVudE5vZGUsXG4gIFZhbHVlTm9kZSxcbiAgU2VsZWN0aW9uTm9kZSxcbiAgTmFtZU5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJ2Zhc3QtanNvbi1zdGFibGUtc3RyaW5naWZ5JztcbmltcG9ydCB7IEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcbmltcG9ydCB7IEZyYWdtZW50TWFwLCBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24gfSBmcm9tICcuL2ZyYWdtZW50cyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVmZXJlbmNlIHtcbiAgcmVhZG9ubHkgX19yZWY6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWZlcmVuY2UoaWQ6IHN0cmluZyk6IFJlZmVyZW5jZSB7XG4gIHJldHVybiB7IF9fcmVmOiBTdHJpbmcoaWQpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZmVyZW5jZShvYmo6IGFueSk6IG9iaiBpcyBSZWZlcmVuY2Uge1xuICByZXR1cm4gQm9vbGVhbihvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iai5fX3JlZiA9PT0gJ3N0cmluZycpO1xufVxuXG5leHBvcnQgdHlwZSBTdG9yZVZhbHVlID1cbiAgfCBudW1iZXJcbiAgfCBzdHJpbmdcbiAgfCBzdHJpbmdbXVxuICB8IFJlZmVyZW5jZVxuICB8IFJlZmVyZW5jZVtdXG4gIHwgbnVsbFxuICB8IHVuZGVmaW5lZFxuICB8IHZvaWRcbiAgfCBPYmplY3Q7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcmVPYmplY3Qge1xuICBfX3R5cGVuYW1lPzogc3RyaW5nO1xuICBbc3RvcmVGaWVsZE5hbWU6IHN0cmluZ106IFN0b3JlVmFsdWU7XG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nVmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIFN0cmluZ1ZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnU3RyaW5nVmFsdWUnO1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW5WYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgQm9vbGVhblZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnQm9vbGVhblZhbHVlJztcbn1cblxuZnVuY3Rpb24gaXNJbnRWYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgSW50VmFsdWVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdJbnRWYWx1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzRmxvYXRWYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgRmxvYXRWYWx1ZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ0Zsb2F0VmFsdWUnO1xufVxuXG5mdW5jdGlvbiBpc1ZhcmlhYmxlKHZhbHVlOiBWYWx1ZU5vZGUpOiB2YWx1ZSBpcyBWYXJpYWJsZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ1ZhcmlhYmxlJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3RWYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgT2JqZWN0VmFsdWVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdPYmplY3RWYWx1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzTGlzdFZhbHVlKHZhbHVlOiBWYWx1ZU5vZGUpOiB2YWx1ZSBpcyBMaXN0VmFsdWVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdMaXN0VmFsdWUnO1xufVxuXG5mdW5jdGlvbiBpc0VudW1WYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgRW51bVZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnRW51bVZhbHVlJztcbn1cblxuZnVuY3Rpb24gaXNOdWxsVmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIE51bGxWYWx1ZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ051bGxWYWx1ZSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oXG4gIGFyZ09iajogYW55LFxuICBuYW1lOiBOYW1lTm9kZSxcbiAgdmFsdWU6IFZhbHVlTm9kZSxcbiAgdmFyaWFibGVzPzogT2JqZWN0LFxuKSB7XG4gIGlmIChpc0ludFZhbHVlKHZhbHVlKSB8fCBpc0Zsb2F0VmFsdWUodmFsdWUpKSB7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gTnVtYmVyKHZhbHVlLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc0Jvb2xlYW5WYWx1ZSh2YWx1ZSkgfHwgaXNTdHJpbmdWYWx1ZSh2YWx1ZSkpIHtcbiAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgfSBlbHNlIGlmIChpc09iamVjdFZhbHVlKHZhbHVlKSkge1xuICAgIGNvbnN0IG5lc3RlZEFyZ09iaiA9IHt9O1xuICAgIHZhbHVlLmZpZWxkcy5tYXAob2JqID0+XG4gICAgICB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24obmVzdGVkQXJnT2JqLCBvYmoubmFtZSwgb2JqLnZhbHVlLCB2YXJpYWJsZXMpLFxuICAgICk7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gbmVzdGVkQXJnT2JqO1xuICB9IGVsc2UgaWYgKGlzVmFyaWFibGUodmFsdWUpKSB7XG4gICAgY29uc3QgdmFyaWFibGVWYWx1ZSA9ICh2YXJpYWJsZXMgfHwgKHt9IGFzIGFueSkpW3ZhbHVlLm5hbWUudmFsdWVdO1xuICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhcmlhYmxlVmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNMaXN0VmFsdWUodmFsdWUpKSB7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gdmFsdWUudmFsdWVzLm1hcChsaXN0VmFsdWUgPT4ge1xuICAgICAgY29uc3QgbmVzdGVkQXJnQXJyYXlPYmogPSB7fTtcbiAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihcbiAgICAgICAgbmVzdGVkQXJnQXJyYXlPYmosXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpc3RWYWx1ZSxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgKTtcbiAgICAgIHJldHVybiAobmVzdGVkQXJnQXJyYXlPYmogYXMgYW55KVtuYW1lLnZhbHVlXTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc0VudW1WYWx1ZSh2YWx1ZSkpIHtcbiAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSAodmFsdWUgYXMgRW51bVZhbHVlTm9kZSkudmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNOdWxsVmFsdWUodmFsdWUpKSB7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICBgVGhlIGlubGluZSBhcmd1bWVudCBcIiR7bmFtZS52YWx1ZX1cIiBvZiBraW5kIFwiJHsodmFsdWUgYXMgYW55KS5raW5kfVwiYCArXG4gICAgICAgICdpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdmFyaWFibGVzIGluc3RlYWQgb2YgaW5saW5lIGFyZ3VtZW50cyB0byAnICtcbiAgICAgICAgJ292ZXJjb21lIHRoaXMgbGltaXRhdGlvbi4nLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlS2V5TmFtZUZyb21GaWVsZChcbiAgZmllbGQ6IEZpZWxkTm9kZSxcbiAgdmFyaWFibGVzPzogT2JqZWN0LFxuKTogc3RyaW5nIHtcbiAgbGV0IGRpcmVjdGl2ZXNPYmo6IGFueSA9IG51bGw7XG4gIGlmIChmaWVsZC5kaXJlY3RpdmVzKSB7XG4gICAgZGlyZWN0aXZlc09iaiA9IHt9O1xuICAgIGZpZWxkLmRpcmVjdGl2ZXMuZm9yRWFjaChkaXJlY3RpdmUgPT4ge1xuICAgICAgZGlyZWN0aXZlc09ialtkaXJlY3RpdmUubmFtZS52YWx1ZV0gPSB7fTtcblxuICAgICAgaWYgKGRpcmVjdGl2ZS5hcmd1bWVudHMpIHtcbiAgICAgICAgZGlyZWN0aXZlLmFyZ3VtZW50cy5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+XG4gICAgICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKFxuICAgICAgICAgICAgZGlyZWN0aXZlc09ialtkaXJlY3RpdmUubmFtZS52YWx1ZV0sXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGxldCBhcmdPYmo6IGFueSA9IG51bGw7XG4gIGlmIChmaWVsZC5hcmd1bWVudHMgJiYgZmllbGQuYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGFyZ09iaiA9IHt9O1xuICAgIGZpZWxkLmFyZ3VtZW50cy5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+XG4gICAgICB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oYXJnT2JqLCBuYW1lLCB2YWx1ZSwgdmFyaWFibGVzKSxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGdldFN0b3JlS2V5TmFtZShmaWVsZC5uYW1lLnZhbHVlLCBhcmdPYmosIGRpcmVjdGl2ZXNPYmopO1xufVxuXG5leHBvcnQgdHlwZSBEaXJlY3RpdmVzID0ge1xuICBbZGlyZWN0aXZlTmFtZTogc3RyaW5nXToge1xuICAgIFthcmdOYW1lOiBzdHJpbmddOiBhbnk7XG4gIH07XG59O1xuXG5jb25zdCBLTk9XTl9ESVJFQ1RJVkVTOiBzdHJpbmdbXSA9IFtcbiAgJ2Nvbm5lY3Rpb24nLFxuICAnaW5jbHVkZScsXG4gICdza2lwJyxcbiAgJ2NsaWVudCcsXG4gICdyZXN0JyxcbiAgJ2V4cG9ydCcsXG5dO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmVLZXlOYW1lKFxuICBmaWVsZE5hbWU6IHN0cmluZyxcbiAgYXJncz86IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLFxuICBkaXJlY3RpdmVzPzogRGlyZWN0aXZlcyxcbik6IHN0cmluZyB7XG4gIGlmIChcbiAgICBhcmdzICYmXG4gICAgZGlyZWN0aXZlcyAmJlxuICAgIGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXSAmJlxuICAgIGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsna2V5J11cbiAgKSB7XG4gICAgaWYgKFxuICAgICAgZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydmaWx0ZXInXSAmJlxuICAgICAgKGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsnZmlsdGVyJ10gYXMgc3RyaW5nW10pLmxlbmd0aCA+IDBcbiAgICApIHtcbiAgICAgIGNvbnN0IGZpbHRlcktleXMgPSBkaXJlY3RpdmVzWydjb25uZWN0aW9uJ11bJ2ZpbHRlciddXG4gICAgICAgID8gKGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsnZmlsdGVyJ10gYXMgc3RyaW5nW10pXG4gICAgICAgIDogW107XG4gICAgICBmaWx0ZXJLZXlzLnNvcnQoKTtcblxuICAgICAgY29uc3QgZmlsdGVyZWRBcmdzID0ge30gYXMgeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICAgIGZpbHRlcktleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBmaWx0ZXJlZEFyZ3Nba2V5XSA9IGFyZ3Nba2V5XTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gYCR7ZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydrZXknXX0oJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgZmlsdGVyZWRBcmdzLFxuICAgICAgKX0pYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsna2V5J107XG4gICAgfVxuICB9XG5cbiAgbGV0IGNvbXBsZXRlRmllbGROYW1lOiBzdHJpbmcgPSBmaWVsZE5hbWU7XG5cbiAgaWYgKGFyZ3MpIHtcbiAgICAvLyBXZSBjYW4ndCB1c2UgYEpTT04uc3RyaW5naWZ5YCBoZXJlIHNpbmNlIGl0J3Mgbm9uLWRldGVybWluaXN0aWMsXG4gICAgLy8gYW5kIGNhbiBsZWFkIHRvIGRpZmZlcmVudCBzdG9yZSBrZXkgbmFtZXMgYmVpbmcgY3JlYXRlZCBldmVuIHRob3VnaFxuICAgIC8vIHRoZSBgYXJnc2Agb2JqZWN0IHVzZWQgZHVyaW5nIGNyZWF0aW9uIGhhcyB0aGUgc2FtZSBwcm9wZXJ0aWVzL3ZhbHVlcy5cbiAgICBjb25zdCBzdHJpbmdpZmllZEFyZ3M6IHN0cmluZyA9IHN0cmluZ2lmeShhcmdzKTtcbiAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBgKCR7c3RyaW5naWZpZWRBcmdzfSlgO1xuICB9XG5cbiAgaWYgKGRpcmVjdGl2ZXMpIHtcbiAgICBPYmplY3Qua2V5cyhkaXJlY3RpdmVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoS05PV05fRElSRUNUSVZFUy5pbmRleE9mKGtleSkgIT09IC0xKSByZXR1cm47XG4gICAgICBpZiAoZGlyZWN0aXZlc1trZXldICYmIE9iamVjdC5rZXlzKGRpcmVjdGl2ZXNba2V5XSkubGVuZ3RoKSB7XG4gICAgICAgIGNvbXBsZXRlRmllbGROYW1lICs9IGBAJHtrZXl9KCR7SlNPTi5zdHJpbmdpZnkoZGlyZWN0aXZlc1trZXldKX0pYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlRmllbGROYW1lICs9IGBAJHtrZXl9YDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBjb21wbGV0ZUZpZWxkTmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChcbiAgZmllbGQ6IEZpZWxkTm9kZSB8IERpcmVjdGl2ZU5vZGUsXG4gIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT4sXG4pOiBPYmplY3QgfCBudWxsIHtcbiAgaWYgKGZpZWxkLmFyZ3VtZW50cyAmJiBmaWVsZC5hcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgY29uc3QgYXJnT2JqOiBPYmplY3QgPSB7fTtcbiAgICBmaWVsZC5hcmd1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PlxuICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcyksXG4gICAgKTtcbiAgICByZXR1cm4gYXJnT2JqO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZDogRmllbGROb2RlKTogc3RyaW5nIHtcbiAgcmV0dXJuIGZpZWxkLmFsaWFzID8gZmllbGQuYWxpYXMudmFsdWUgOiBmaWVsZC5uYW1lLnZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KFxuICByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIHNlbGVjdGlvblNldDogU2VsZWN0aW9uU2V0Tm9kZSxcbiAgZnJhZ21lbnRNYXA/OiBGcmFnbWVudE1hcCxcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICh0eXBlb2YgcmVzdWx0Ll9fdHlwZW5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHJlc3VsdC5fX3R5cGVuYW1lO1xuICB9XG5cbiAgZm9yIChjb25zdCBzZWxlY3Rpb24gb2Ygc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpIHtcbiAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoc2VsZWN0aW9uLm5hbWUudmFsdWUgPT09ICdfX3R5cGVuYW1lJykge1xuICAgICAgICByZXR1cm4gcmVzdWx0W3Jlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHR5cGVuYW1lID0gZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGZyYWdtZW50TWFwKSEuc2VsZWN0aW9uU2V0LFxuICAgICAgICBmcmFnbWVudE1hcCxcbiAgICAgICk7XG4gICAgICBpZiAodHlwZW9mIHR5cGVuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdHlwZW5hbWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ZpZWxkKHNlbGVjdGlvbjogU2VsZWN0aW9uTm9kZSk6IHNlbGVjdGlvbiBpcyBGaWVsZE5vZGUge1xuICByZXR1cm4gc2VsZWN0aW9uLmtpbmQgPT09ICdGaWVsZCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lubGluZUZyYWdtZW50KFxuICBzZWxlY3Rpb246IFNlbGVjdGlvbk5vZGUsXG4pOiBzZWxlY3Rpb24gaXMgSW5saW5lRnJhZ21lbnROb2RlIHtcbiAgcmV0dXJuIHNlbGVjdGlvbi5raW5kID09PSAnSW5saW5lRnJhZ21lbnQnO1xufVxuXG5leHBvcnQgdHlwZSBWYXJpYWJsZVZhbHVlID0gKG5vZGU6IFZhcmlhYmxlTm9kZSkgPT4gYW55O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhLCBvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSBvcHRzID0geyBjbXA6IG9wdHMgfTtcbiAgICB2YXIgY3ljbGVzID0gKHR5cGVvZiBvcHRzLmN5Y2xlcyA9PT0gJ2Jvb2xlYW4nKSA/IG9wdHMuY3ljbGVzIDogZmFsc2U7XG5cbiAgICB2YXIgY21wID0gb3B0cy5jbXAgJiYgKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFvYmogPSB7IGtleTogYSwgdmFsdWU6IG5vZGVbYV0gfTtcbiAgICAgICAgICAgICAgICB2YXIgYm9iaiA9IHsga2V5OiBiLCB2YWx1ZTogbm9kZVtiXSB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBmKGFvYmosIGJvYmopO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9KShvcHRzLmNtcCk7XG5cbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIHJldHVybiAoZnVuY3Rpb24gc3RyaW5naWZ5IChub2RlKSB7XG4gICAgICAgIGlmIChub2RlICYmIG5vZGUudG9KU09OICYmIHR5cGVvZiBub2RlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUudG9KU09OKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2Ygbm9kZSA9PSAnbnVtYmVyJykgcmV0dXJuIGlzRmluaXRlKG5vZGUpID8gJycgKyBub2RlIDogJ251bGwnO1xuICAgICAgICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSByZXR1cm4gSlNPTi5zdHJpbmdpZnkobm9kZSk7XG5cbiAgICAgICAgdmFyIGksIG91dDtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICAgICAgICAgIG91dCA9ICdbJztcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkpIG91dCArPSAnLCc7XG4gICAgICAgICAgICAgICAgb3V0ICs9IHN0cmluZ2lmeShub2RlW2ldKSB8fCAnbnVsbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0ICsgJ10nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG5cbiAgICAgICAgaWYgKHNlZW4uaW5kZXhPZihub2RlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChjeWNsZXMpIHJldHVybiBKU09OLnN0cmluZ2lmeSgnX19jeWNsZV9fJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDb252ZXJ0aW5nIGNpcmN1bGFyIHN0cnVjdHVyZSB0byBKU09OJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VlbkluZGV4ID0gc2Vlbi5wdXNoKG5vZGUpIC0gMTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhub2RlKS5zb3J0KGNtcCAmJiBjbXAobm9kZSkpO1xuICAgICAgICBvdXQgPSAnJztcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gc3RyaW5naWZ5KG5vZGVba2V5XSk7XG5cbiAgICAgICAgICAgIGlmICghdmFsdWUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKG91dCkgb3V0ICs9ICcsJztcbiAgICAgICAgICAgIG91dCArPSBKU09OLnN0cmluZ2lmeShrZXkpICsgJzonICsgdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc2Vlbi5zcGxpY2Uoc2VlbkluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuICd7JyArIG91dCArICd9JztcbiAgICB9KShkYXRhKTtcbn07XG4iLCJpbXBvcnQge1xuICBEb2N1bWVudE5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlLFxuICBGcmFnbWVudERlZmluaXRpb25Ob2RlLFxuICBWYWx1ZU5vZGUsXG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHsgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uIH0gZnJvbSAnLi9zdG9yZVV0aWxzJztcblxuLy8gQ2hlY2tzIHRoZSBkb2N1bWVudCBmb3IgZXJyb3JzIGFuZCB0aHJvd3MgYW4gZXhjZXB0aW9uIGlmIHRoZXJlIGlzIGFuIGVycm9yLlxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRG9jdW1lbnQoZG9jOiBEb2N1bWVudE5vZGUpIHtcbiAgaW52YXJpYW50KFxuICAgIGRvYyAmJiBkb2Mua2luZCA9PT0gJ0RvY3VtZW50JyxcbiAgICBgRXhwZWN0aW5nIGEgcGFyc2VkIEdyYXBoUUwgZG9jdW1lbnQuIFBlcmhhcHMgeW91IG5lZWQgdG8gd3JhcCB0aGUgcXVlcnkgXFxcbnN0cmluZyBpbiBhIFwiZ3FsXCIgdGFnPyBodHRwOi8vZG9jcy5hcG9sbG9zdGFjay5jb20vYXBvbGxvLWNsaWVudC9jb3JlLmh0bWwjZ3FsYCxcbiAgKTtcblxuICBjb25zdCBvcGVyYXRpb25zID0gZG9jLmRlZmluaXRpb25zXG4gICAgLmZpbHRlcihkID0+IGQua2luZCAhPT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicpXG4gICAgLm1hcChkZWZpbml0aW9uID0+IHtcbiAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgIT09ICdPcGVyYXRpb25EZWZpbml0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAgICAgYFNjaGVtYSB0eXBlIGRlZmluaXRpb25zIG5vdCBhbGxvd2VkIGluIHF1ZXJpZXMuIEZvdW5kOiBcIiR7XG4gICAgICAgICAgICBkZWZpbml0aW9uLmtpbmRcbiAgICAgICAgICB9XCJgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfSk7XG5cbiAgaW52YXJpYW50KFxuICAgIG9wZXJhdGlvbnMubGVuZ3RoIDw9IDEsXG4gICAgYEFtYmlndW91cyBHcmFwaFFMIGRvY3VtZW50OiBjb250YWlucyAke29wZXJhdGlvbnMubGVuZ3RofSBvcGVyYXRpb25zYCxcbiAgKTtcblxuICByZXR1cm4gZG9jO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNoZWNrRG9jdW1lbnQoZG9jKTtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoXG4gICAgZGVmaW5pdGlvbiA9PiBkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyxcbiAgKVswXSBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdGlvbk5hbWUoZG9jOiBEb2N1bWVudE5vZGUpOiBzdHJpbmcgfCBudWxsIHtcbiAgcmV0dXJuIChcbiAgICBkb2MuZGVmaW5pdGlvbnNcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIGRlZmluaXRpb24gPT5cbiAgICAgICAgICBkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiBkZWZpbml0aW9uLm5hbWUsXG4gICAgICApXG4gICAgICAubWFwKCh4OiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkgPT4geCEubmFtZSEudmFsdWUpWzBdIHx8IG51bGxcbiAgKTtcbn1cblxuLy8gUmV0dXJucyB0aGUgRnJhZ21lbnREZWZpbml0aW9ucyBmcm9tIGEgcGFydGljdWxhciBkb2N1bWVudCBhcyBhbiBhcnJheVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbnMoXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRnJhZ21lbnREZWZpbml0aW9uTm9kZVtdIHtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoXG4gICAgZGVmaW5pdGlvbiA9PiBkZWZpbml0aW9uLmtpbmQgPT09ICdGcmFnbWVudERlZmluaXRpb24nLFxuICApIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGVbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5RGVmaW5pdGlvbihkb2M6IERvY3VtZW50Tm9kZSk6IE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlIHtcbiAgY29uc3QgcXVlcnlEZWYgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgYXMgT3BlcmF0aW9uRGVmaW5pdGlvbk5vZGU7XG5cbiAgaW52YXJpYW50KFxuICAgIHF1ZXJ5RGVmICYmIHF1ZXJ5RGVmLm9wZXJhdGlvbiA9PT0gJ3F1ZXJ5JyxcbiAgICAnTXVzdCBjb250YWluIGEgcXVlcnkgZGVmaW5pdGlvbi4nLFxuICApO1xuXG4gIHJldHVybiBxdWVyeURlZjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbihcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBGcmFnbWVudERlZmluaXRpb25Ob2RlIHtcbiAgaW52YXJpYW50KFxuICAgIGRvYy5raW5kID09PSAnRG9jdW1lbnQnLFxuICAgIGBFeHBlY3RpbmcgYSBwYXJzZWQgR3JhcGhRTCBkb2N1bWVudC4gUGVyaGFwcyB5b3UgbmVlZCB0byB3cmFwIHRoZSBxdWVyeSBcXFxuc3RyaW5nIGluIGEgXCJncWxcIiB0YWc/IGh0dHA6Ly9kb2NzLmFwb2xsb3N0YWNrLmNvbS9hcG9sbG8tY2xpZW50L2NvcmUuaHRtbCNncWxgLFxuICApO1xuXG4gIGludmFyaWFudChcbiAgICBkb2MuZGVmaW5pdGlvbnMubGVuZ3RoIDw9IDEsXG4gICAgJ0ZyYWdtZW50IG11c3QgaGF2ZSBleGFjdGx5IG9uZSBkZWZpbml0aW9uLicsXG4gICk7XG5cbiAgY29uc3QgZnJhZ21lbnREZWYgPSBkb2MuZGVmaW5pdGlvbnNbMF0gYXMgRnJhZ21lbnREZWZpbml0aW9uTm9kZTtcblxuICBpbnZhcmlhbnQoXG4gICAgZnJhZ21lbnREZWYua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicsXG4gICAgJ011c3QgYmUgYSBmcmFnbWVudCBkZWZpbml0aW9uLicsXG4gICk7XG5cbiAgcmV0dXJuIGZyYWdtZW50RGVmIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3Qgb3BlcmF0aW9uIGRlZmluaXRpb24gZm91bmQgaW4gdGhpcyBkb2N1bWVudC5cbiAqIElmIG5vIG9wZXJhdGlvbiBkZWZpbml0aW9uIGlzIGZvdW5kLCB0aGUgZmlyc3QgZnJhZ21lbnQgZGVmaW5pdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuICogSWYgbm8gZGVmaW5pdGlvbnMgYXJlIGZvdW5kLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1haW5EZWZpbml0aW9uKFxuICBxdWVyeURvYzogRG9jdW1lbnROb2RlLFxuKTogT3BlcmF0aW9uRGVmaW5pdGlvbk5vZGUgfCBGcmFnbWVudERlZmluaXRpb25Ob2RlIHtcbiAgY2hlY2tEb2N1bWVudChxdWVyeURvYyk7XG5cbiAgbGV0IGZyYWdtZW50RGVmaW5pdGlvbjtcblxuICBmb3IgKGxldCBkZWZpbml0aW9uIG9mIHF1ZXJ5RG9jLmRlZmluaXRpb25zKSB7XG4gICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nKSB7XG4gICAgICBjb25zdCBvcGVyYXRpb24gPSAoZGVmaW5pdGlvbiBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkub3BlcmF0aW9uO1xuICAgICAgaWYgKFxuICAgICAgICBvcGVyYXRpb24gPT09ICdxdWVyeScgfHxcbiAgICAgICAgb3BlcmF0aW9uID09PSAnbXV0YXRpb24nIHx8XG4gICAgICAgIG9wZXJhdGlvbiA9PT0gJ3N1YnNjcmlwdGlvbidcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbiBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicgJiYgIWZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgLy8gd2UgZG8gdGhpcyBiZWNhdXNlIHdlIHdhbnQgdG8gYWxsb3cgbXVsdGlwbGUgZnJhZ21lbnQgZGVmaW5pdGlvbnNcbiAgICAgIC8vIHRvIHByZWNlZGUgYW4gb3BlcmF0aW9uIGRlZmluaXRpb24uXG4gICAgICBmcmFnbWVudERlZmluaXRpb24gPSBkZWZpbml0aW9uIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgIHJldHVybiBmcmFnbWVudERlZmluaXRpb247XG4gIH1cblxuICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgJ0V4cGVjdGVkIGEgcGFyc2VkIEdyYXBoUUwgcXVlcnkgd2l0aCBhIHF1ZXJ5LCBtdXRhdGlvbiwgc3Vic2NyaXB0aW9uLCBvciBhIGZyYWdtZW50LicsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0VmFsdWVzKFxuICBkZWZpbml0aW9uOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IHVuZGVmaW5lZCxcbik6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBjb25zdCBkZWZhdWx0VmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgZGVmcyA9IGRlZmluaXRpb24gJiYgZGVmaW5pdGlvbi52YXJpYWJsZURlZmluaXRpb25zO1xuICBpZiAoZGVmcyAmJiBkZWZzLmxlbmd0aCkge1xuICAgIGRlZnMuZm9yRWFjaChkZWYgPT4ge1xuICAgICAgaWYgKGRlZi5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgZGVmLnZhcmlhYmxlLm5hbWUsXG4gICAgICAgICAgZGVmLmRlZmF1bHRWYWx1ZSBhcyBWYWx1ZU5vZGUsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZXM7XG59XG4iLCJpbXBvcnQge1xuICBEb2N1bWVudE5vZGUsXG4gIFNlbGVjdGlvbk5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlLFxuICBGaWVsZE5vZGUsXG4gIERpcmVjdGl2ZU5vZGUsXG4gIEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIEFyZ3VtZW50Tm9kZSxcbiAgRnJhZ21lbnRTcHJlYWROb2RlLFxuICBWYXJpYWJsZURlZmluaXRpb25Ob2RlLFxuICBWYXJpYWJsZU5vZGUsXG4gIHZpc2l0LFxufSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmltcG9ydCB7XG4gIGNoZWNrRG9jdW1lbnQsXG4gIGdldE9wZXJhdGlvbkRlZmluaXRpb24sXG4gIGdldEZyYWdtZW50RGVmaW5pdGlvbixcbiAgZ2V0RnJhZ21lbnREZWZpbml0aW9ucyxcbiAgZ2V0TWFpbkRlZmluaXRpb24sXG59IGZyb20gJy4vZ2V0RnJvbUFTVCc7XG5pbXBvcnQgeyBmaWx0ZXJJblBsYWNlIH0gZnJvbSAnLi4vY29tbW9uL2ZpbHRlckluUGxhY2UnO1xuaW1wb3J0IHsgaXNGaWVsZCwgaXNJbmxpbmVGcmFnbWVudCB9IGZyb20gJy4vc3RvcmVVdGlscyc7XG5pbXBvcnQge1xuICBjcmVhdGVGcmFnbWVudE1hcCxcbiAgRnJhZ21lbnRNYXAsXG59IGZyb20gJy4vZnJhZ21lbnRzJztcblxuZXhwb3J0IHR5cGUgUmVtb3ZlTm9kZUNvbmZpZzxOPiA9IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdGVzdD86IChub2RlOiBOKSA9PiBib29sZWFuO1xuICByZW1vdmU/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0Tm9kZUNvbmZpZzxOPiA9IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdGVzdD86IChub2RlOiBOKSA9PiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgUmVtb3ZlRGlyZWN0aXZlQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxEaXJlY3RpdmVOb2RlPjtcbmV4cG9ydCB0eXBlIEdldERpcmVjdGl2ZUNvbmZpZyA9IEdldE5vZGVDb25maWc8RGlyZWN0aXZlTm9kZT47XG5leHBvcnQgdHlwZSBSZW1vdmVBcmd1bWVudHNDb25maWcgPSBSZW1vdmVOb2RlQ29uZmlnPEFyZ3VtZW50Tm9kZT47XG5leHBvcnQgdHlwZSBHZXRGcmFnbWVudFNwcmVhZENvbmZpZyA9IEdldE5vZGVDb25maWc8RnJhZ21lbnRTcHJlYWROb2RlPjtcbmV4cG9ydCB0eXBlIFJlbW92ZUZyYWdtZW50U3ByZWFkQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxGcmFnbWVudFNwcmVhZE5vZGU+O1xuZXhwb3J0IHR5cGUgUmVtb3ZlRnJhZ21lbnREZWZpbml0aW9uQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxcbiAgRnJhZ21lbnREZWZpbml0aW9uTm9kZVxuPjtcbmV4cG9ydCB0eXBlIFJlbW92ZVZhcmlhYmxlRGVmaW5pdGlvbkNvbmZpZyA9IFJlbW92ZU5vZGVDb25maWc8XG4gIFZhcmlhYmxlRGVmaW5pdGlvbk5vZGVcbj47XG5cbmNvbnN0IFRZUEVOQU1FX0ZJRUxEOiBGaWVsZE5vZGUgPSB7XG4gIGtpbmQ6ICdGaWVsZCcsXG4gIG5hbWU6IHtcbiAgICBraW5kOiAnTmFtZScsXG4gICAgdmFsdWU6ICdfX3R5cGVuYW1lJyxcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGlzRW1wdHkoXG4gIG9wOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIGZyYWdtZW50czogRnJhZ21lbnRNYXAsXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIG9wLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KFxuICAgIHNlbGVjdGlvbiA9PlxuICAgICAgc2VsZWN0aW9uLmtpbmQgPT09ICdGcmFnbWVudFNwcmVhZCcgJiZcbiAgICAgIGlzRW1wdHkoZnJhZ21lbnRzW3NlbGVjdGlvbi5uYW1lLnZhbHVlXSwgZnJhZ21lbnRzKSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gbnVsbElmRG9jSXNFbXB0eShkb2M6IERvY3VtZW50Tm9kZSkge1xuICByZXR1cm4gaXNFbXB0eShcbiAgICBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgfHwgZ2V0RnJhZ21lbnREZWZpbml0aW9uKGRvYyksXG4gICAgY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2MpKSxcbiAgKVxuICAgID8gbnVsbFxuICAgIDogZG9jO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3RpdmVNYXRjaGVyKFxuICBkaXJlY3RpdmVzOiAoUmVtb3ZlRGlyZWN0aXZlQ29uZmlnIHwgR2V0RGlyZWN0aXZlQ29uZmlnKVtdLFxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZTogRGlyZWN0aXZlTm9kZSkge1xuICAgIHJldHVybiBkaXJlY3RpdmVzLnNvbWUoXG4gICAgICBkaXIgPT5cbiAgICAgICAgKGRpci5uYW1lICYmIGRpci5uYW1lID09PSBkaXJlY3RpdmUubmFtZS52YWx1ZSkgfHxcbiAgICAgICAgKGRpci50ZXN0ICYmIGRpci50ZXN0KGRpcmVjdGl2ZSkpLFxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEaXJlY3RpdmVzRnJvbURvY3VtZW50KFxuICBkaXJlY3RpdmVzOiBSZW1vdmVEaXJlY3RpdmVDb25maWdbXSxcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBEb2N1bWVudE5vZGUgfCBudWxsIHtcbiAgY29uc3QgdmFyaWFibGVzSW5Vc2U6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgbGV0IHZhcmlhYmxlc1RvUmVtb3ZlOiBSZW1vdmVBcmd1bWVudHNDb25maWdbXSA9IFtdO1xuXG4gIGNvbnN0IGZyYWdtZW50U3ByZWFkc0luVXNlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBmcmFnbWVudFNwcmVhZHNUb1JlbW92ZTogUmVtb3ZlRnJhZ21lbnRTcHJlYWRDb25maWdbXSA9IFtdO1xuXG4gIGxldCBtb2RpZmllZERvYyA9IG51bGxJZkRvY0lzRW1wdHkoXG4gICAgdmlzaXQoZG9jLCB7XG4gICAgICBWYXJpYWJsZToge1xuICAgICAgICBlbnRlcihub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAvLyBTdG9yZSBlYWNoIHZhcmlhYmxlIHRoYXQncyByZWZlcmVuY2VkIGFzIHBhcnQgb2YgYW4gYXJndW1lbnRcbiAgICAgICAgICAvLyAoZXhjbHVkaW5nIG9wZXJhdGlvbiBkZWZpbml0aW9uIHZhcmlhYmxlcyksIHNvIHdlIGtub3cgd2hpY2hcbiAgICAgICAgICAvLyB2YXJpYWJsZXMgYXJlIGJlaW5nIHVzZWQuIElmIHdlIGxhdGVyIHdhbnQgdG8gcmVtb3ZlIGEgdmFyaWFibGVcbiAgICAgICAgICAvLyB3ZSdsbCBmaXJzdCBjaGVjayB0byBzZWUgaWYgaXQncyBiZWluZyB1c2VkLCBiZWZvcmUgY29udGludWluZyB3aXRoXG4gICAgICAgICAgLy8gdGhlIHJlbW92YWwuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHBhcmVudCBhcyBWYXJpYWJsZURlZmluaXRpb25Ob2RlKS5raW5kICE9PSAnVmFyaWFibGVEZWZpbml0aW9uJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgdmFyaWFibGVzSW5Vc2Vbbm9kZS5uYW1lLnZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRmllbGQ6IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIGlmIChkaXJlY3RpdmVzICYmIG5vZGUuZGlyZWN0aXZlcykge1xuICAgICAgICAgICAgLy8gSWYgYHJlbW92ZWAgaXMgc2V0IHRvIHRydWUgZm9yIGEgZGlyZWN0aXZlLCBhbmQgYSBkaXJlY3RpdmUgbWF0Y2hcbiAgICAgICAgICAgIC8vIGlzIGZvdW5kIGZvciBhIGZpZWxkLCByZW1vdmUgdGhlIGZpZWxkIGFzIHdlbGwuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZW1vdmVGaWVsZCA9IGRpcmVjdGl2ZXMuc29tZShcbiAgICAgICAgICAgICAgZGlyZWN0aXZlID0+IGRpcmVjdGl2ZS5yZW1vdmUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNob3VsZFJlbW92ZUZpZWxkICYmXG4gICAgICAgICAgICAgIG5vZGUuZGlyZWN0aXZlcyAmJlxuICAgICAgICAgICAgICBub2RlLmRpcmVjdGl2ZXMuc29tZShnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChub2RlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGZpZWxkIGFyZ3VtZW50IHZhcmlhYmxlcyBzbyB0aGV5IGNhbiBiZSByZW1vdmVkXG4gICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgb3BlcmF0aW9uIGRlZmluaXRpb24uXG4gICAgICAgICAgICAgICAgbm9kZS5hcmd1bWVudHMuZm9yRWFjaChhcmcgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyZy52YWx1ZS5raW5kID09PSAnVmFyaWFibGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlc1RvUmVtb3ZlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChhcmcudmFsdWUgYXMgVmFyaWFibGVOb2RlKS5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChub2RlLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGZyYWdtZW50IHNwcmVhZCBuYW1lcyBzbyB0aGV5IGNhbiBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChub2RlLnNlbGVjdGlvblNldCkuZm9yRWFjaChcbiAgICAgICAgICAgICAgICAgIGZyYWcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHNUb1JlbW92ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmcmFnLm5hbWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaWVsZC5cbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRnJhZ21lbnRTcHJlYWQ6IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgcmVmZXJlbmNlZCBmcmFnbWVudCBzcHJlYWRzLiBUaGlzIGlzIHVzZWQgdG9cbiAgICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdG9wIGxldmVsIGZyYWdtZW50IGRlZmluaXRpb25zIHNob3VsZCBiZSByZW1vdmVkLlxuICAgICAgICAgIGZyYWdtZW50U3ByZWFkc0luVXNlW25vZGUubmFtZS52YWx1ZV0gPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRGlyZWN0aXZlOiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBJZiBhIG1hdGNoaW5nIGRpcmVjdGl2ZSBpcyBmb3VuZCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pLFxuICApO1xuXG4gIC8vIElmIHdlJ3ZlIHJlbW92ZWQgZmllbGRzIHdpdGggYXJndW1lbnRzLCBtYWtlIHN1cmUgdGhlIGFzc29jaWF0ZWRcbiAgLy8gdmFyaWFibGVzIGFyZSBhbHNvIHJlbW92ZWQgZnJvbSB0aGUgcmVzdCBvZiB0aGUgZG9jdW1lbnQsIGFzIGxvbmcgYXMgdGhleVxuICAvLyBhcmVuJ3QgYmVpbmcgdXNlZCBlbHNld2hlcmUuXG4gIGlmIChcbiAgICBtb2RpZmllZERvYyAmJlxuICAgIGZpbHRlckluUGxhY2UodmFyaWFibGVzVG9SZW1vdmUsIHYgPT4gISF2Lm5hbWUgJiYgIXZhcmlhYmxlc0luVXNlW3YubmFtZV0pLmxlbmd0aFxuICApIHtcbiAgICBtb2RpZmllZERvYyA9IHJlbW92ZUFyZ3VtZW50c0Zyb21Eb2N1bWVudCh2YXJpYWJsZXNUb1JlbW92ZSwgbW9kaWZpZWREb2MpO1xuICB9XG5cbiAgLy8gSWYgd2UndmUgcmVtb3ZlZCBzZWxlY3Rpb24gc2V0cyB3aXRoIGZyYWdtZW50IHNwcmVhZHMsIG1ha2Ugc3VyZSB0aGVcbiAgLy8gYXNzb2NpYXRlZCBmcmFnbWVudCBkZWZpbml0aW9ucyBhcmUgYWxzbyByZW1vdmVkIGZyb20gdGhlIHJlc3Qgb2YgdGhlXG4gIC8vIGRvY3VtZW50LCBhcyBsb25nIGFzIHRoZXkgYXJlbid0IGJlaW5nIHVzZWQgZWxzZXdoZXJlLlxuICBpZiAoXG4gICAgbW9kaWZpZWREb2MgJiZcbiAgICBmaWx0ZXJJblBsYWNlKGZyYWdtZW50U3ByZWFkc1RvUmVtb3ZlLCBmcyA9PiAhIWZzLm5hbWUgJiYgIWZyYWdtZW50U3ByZWFkc0luVXNlW2ZzLm5hbWVdKVxuICAgICAgLmxlbmd0aFxuICApIHtcbiAgICBtb2RpZmllZERvYyA9IHJlbW92ZUZyYWdtZW50U3ByZWFkRnJvbURvY3VtZW50KFxuICAgICAgZnJhZ21lbnRTcHJlYWRzVG9SZW1vdmUsXG4gICAgICBtb2RpZmllZERvYyxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVkRG9jO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVHlwZW5hbWVUb0RvY3VtZW50KGRvYzogRG9jdW1lbnROb2RlKTogRG9jdW1lbnROb2RlIHtcbiAgcmV0dXJuIHZpc2l0KGNoZWNrRG9jdW1lbnQoZG9jKSwge1xuICAgIFNlbGVjdGlvblNldDoge1xuICAgICAgZW50ZXIobm9kZSwgX2tleSwgcGFyZW50KSB7XG4gICAgICAgIC8vIERvbid0IGFkZCBfX3R5cGVuYW1lIHRvIE9wZXJhdGlvbkRlZmluaXRpb25zLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFyZW50ICYmXG4gICAgICAgICAgKHBhcmVudCBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vIGNoYW5nZXMgaWYgbm8gc2VsZWN0aW9ucy5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25zIH0gPSBub2RlO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBzZWxlY3Rpb25zIGFscmVhZHkgaGF2ZSBhIF9fdHlwZW5hbWUsIG9yIGFyZSBwYXJ0IG9mIGFuXG4gICAgICAgIC8vIGludHJvc3BlY3Rpb24gcXVlcnksIGRvIG5vdGhpbmcuXG4gICAgICAgIGNvbnN0IHNraXAgPSBzZWxlY3Rpb25zLnNvbWUoc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgaXNGaWVsZChzZWxlY3Rpb24pICYmXG4gICAgICAgICAgICAoc2VsZWN0aW9uLm5hbWUudmFsdWUgPT09ICdfX3R5cGVuYW1lJyB8fFxuICAgICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZS5sYXN0SW5kZXhPZignX18nLCAwKSA9PT0gMClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNraXApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGlzIFNlbGVjdGlvblNldCBpcyBAZXhwb3J0LWVkIGFzIGFuIGlucHV0IHZhcmlhYmxlLCBpdCBzaG91bGRcbiAgICAgICAgLy8gbm90IGhhdmUgYSBfX3R5cGVuYW1lIGZpZWxkIChzZWUgaXNzdWUgIzQ2OTEpLlxuICAgICAgICBjb25zdCBmaWVsZCA9IHBhcmVudCBhcyBGaWVsZE5vZGU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpc0ZpZWxkKGZpZWxkKSAmJlxuICAgICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMgJiZcbiAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzLnNvbWUoZCA9PiBkLm5hbWUudmFsdWUgPT09ICdleHBvcnQnKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiBhIG5ldyBTZWxlY3Rpb25TZXQgd2l0aCBhIF9fdHlwZW5hbWUgRmllbGQuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgICBzZWxlY3Rpb25zOiBbLi4uc2VsZWN0aW9ucywgVFlQRU5BTUVfRklFTERdLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBhZGRUeXBlbmFtZVRvRG9jdW1lbnQge1xuICBhZGRlZChmaWVsZDogRmllbGROb2RlKTogYm9vbGVhbjtcbn1cbmFkZFR5cGVuYW1lVG9Eb2N1bWVudC5hZGRlZCA9IGZ1bmN0aW9uIChmaWVsZDogRmllbGROb2RlKSB7XG4gIHJldHVybiBmaWVsZCA9PT0gVFlQRU5BTUVfRklFTEQ7XG59O1xuXG5jb25zdCBjb25uZWN0aW9uUmVtb3ZlQ29uZmlnID0ge1xuICB0ZXN0OiAoZGlyZWN0aXZlOiBEaXJlY3RpdmVOb2RlKSA9PiB7XG4gICAgY29uc3Qgd2lsbFJlbW92ZSA9IGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSAnY29ubmVjdGlvbic7XG4gICAgaWYgKHdpbGxSZW1vdmUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWRpcmVjdGl2ZS5hcmd1bWVudHMgfHxcbiAgICAgICAgIWRpcmVjdGl2ZS5hcmd1bWVudHMuc29tZShhcmcgPT4gYXJnLm5hbWUudmFsdWUgPT09ICdrZXknKVxuICAgICAgKSB7XG4gICAgICAgIGludmFyaWFudC53YXJuKFxuICAgICAgICAgICdSZW1vdmluZyBhbiBAY29ubmVjdGlvbiBkaXJlY3RpdmUgZXZlbiB0aG91Z2ggaXQgZG9lcyBub3QgaGF2ZSBhIGtleS4gJyArXG4gICAgICAgICAgICAnWW91IG1heSB3YW50IHRvIHVzZSB0aGUga2V5IHBhcmFtZXRlciB0byBzcGVjaWZ5IGEgc3RvcmUga2V5LicsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpbGxSZW1vdmU7XG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdGlvbkRpcmVjdGl2ZUZyb21Eb2N1bWVudChkb2M6IERvY3VtZW50Tm9kZSkge1xuICByZXR1cm4gcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudChcbiAgICBbY29ubmVjdGlvblJlbW92ZUNvbmZpZ10sXG4gICAgY2hlY2tEb2N1bWVudChkb2MpLFxuICApO1xufVxuXG5mdW5jdGlvbiBoYXNEaXJlY3RpdmVzSW5TZWxlY3Rpb25TZXQoXG4gIGRpcmVjdGl2ZXM6IEdldERpcmVjdGl2ZUNvbmZpZ1tdLFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUgfCB1bmRlZmluZWQsXG4gIG5lc3RlZENoZWNrID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgICEhc2VsZWN0aW9uU2V0ICYmXG4gICAgc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMgJiZcbiAgICBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5zb21lKHNlbGVjdGlvbiA9PlxuICAgICAgaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKGRpcmVjdGl2ZXMsIHNlbGVjdGlvbiwgbmVzdGVkQ2hlY2spLFxuICAgIClcbiAgKTtcbn1cblxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKFxuICBkaXJlY3RpdmVzOiBHZXREaXJlY3RpdmVDb25maWdbXSxcbiAgc2VsZWN0aW9uOiBTZWxlY3Rpb25Ob2RlLFxuICBuZXN0ZWRDaGVjayA9IHRydWUsXG4pOiBib29sZWFuIHtcbiAgaWYgKCFpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICghc2VsZWN0aW9uLmRpcmVjdGl2ZXMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzLnNvbWUoZ2V0RGlyZWN0aXZlTWF0Y2hlcihkaXJlY3RpdmVzKSkgfHxcbiAgICAobmVzdGVkQ2hlY2sgJiZcbiAgICAgIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvblNldChcbiAgICAgICAgZGlyZWN0aXZlcyxcbiAgICAgICAgc2VsZWN0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgICAgbmVzdGVkQ2hlY2ssXG4gICAgICApKVxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRBcmd1bWVudE1hdGNoZXIoY29uZmlnOiBSZW1vdmVBcmd1bWVudHNDb25maWdbXSkge1xuICByZXR1cm4gZnVuY3Rpb24gYXJndW1lbnRNYXRjaGVyKGFyZ3VtZW50OiBBcmd1bWVudE5vZGUpIHtcbiAgICByZXR1cm4gY29uZmlnLnNvbWUoXG4gICAgICAoYUNvbmZpZzogUmVtb3ZlQXJndW1lbnRzQ29uZmlnKSA9PlxuICAgICAgICBhcmd1bWVudC52YWx1ZSAmJlxuICAgICAgICBhcmd1bWVudC52YWx1ZS5raW5kID09PSAnVmFyaWFibGUnICYmXG4gICAgICAgIGFyZ3VtZW50LnZhbHVlLm5hbWUgJiZcbiAgICAgICAgKGFDb25maWcubmFtZSA9PT0gYXJndW1lbnQudmFsdWUubmFtZS52YWx1ZSB8fFxuICAgICAgICAgIChhQ29uZmlnLnRlc3QgJiYgYUNvbmZpZy50ZXN0KGFyZ3VtZW50KSkpLFxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBcmd1bWVudHNGcm9tRG9jdW1lbnQoXG4gIGNvbmZpZzogUmVtb3ZlQXJndW1lbnRzQ29uZmlnW10sXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGNvbnN0IGFyZ01hdGNoZXIgPSBnZXRBcmd1bWVudE1hdGNoZXIoY29uZmlnKTtcblxuICByZXR1cm4gbnVsbElmRG9jSXNFbXB0eShcbiAgICB2aXNpdChkb2MsIHtcbiAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHRvcCBsZXZlbCB2YXJpYWJsZXMgZGVmaW5pdGlvbnMuXG4gICAgICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zOiBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMgPyBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMuZmlsdGVyKFxuICAgICAgICAgICAgICB2YXJEZWYgPT5cbiAgICAgICAgICAgICAgICAhY29uZmlnLnNvbWUoYXJnID0+IGFyZy5uYW1lID09PSB2YXJEZWYudmFyaWFibGUubmFtZS52YWx1ZSksXG4gICAgICAgICAgICApIDogW10sXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIEZpZWxkOiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBJZiBgcmVtb3ZlYCBpcyBzZXQgdG8gdHJ1ZSBmb3IgYW4gYXJndW1lbnQsIGFuZCBhbiBhcmd1bWVudCBtYXRjaFxuICAgICAgICAgIC8vIGlzIGZvdW5kIGZvciBhIGZpZWxkLCByZW1vdmUgdGhlIGZpZWxkIGFzIHdlbGwuXG4gICAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlRmllbGQgPSBjb25maWcuc29tZShhcmdDb25maWcgPT4gYXJnQ29uZmlnLnJlbW92ZSk7XG5cbiAgICAgICAgICBpZiAoc2hvdWxkUmVtb3ZlRmllbGQpIHtcbiAgICAgICAgICAgIGxldCBhcmdNYXRjaENvdW50ID0gMDtcbiAgICAgICAgICAgIGlmIChub2RlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICBub2RlLmFyZ3VtZW50cy5mb3JFYWNoKGFyZyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ01hdGNoZXIoYXJnKSkge1xuICAgICAgICAgICAgICAgICAgYXJnTWF0Y2hDb3VudCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcmdNYXRjaENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIEFyZ3VtZW50OiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgYWxsIG1hdGNoaW5nIGFyZ3VtZW50cy5cbiAgICAgICAgICBpZiAoYXJnTWF0Y2hlcihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50U3ByZWFkRnJvbURvY3VtZW50KFxuICBjb25maWc6IFJlbW92ZUZyYWdtZW50U3ByZWFkQ29uZmlnW10sXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGZ1bmN0aW9uIGVudGVyKFxuICAgIG5vZGU6IEZyYWdtZW50U3ByZWFkTm9kZSB8IEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gICk6IG51bGwgfCB2b2lkIHtcbiAgICBpZiAoY29uZmlnLnNvbWUoZGVmID0+IGRlZi5uYW1lID09PSBub2RlLm5hbWUudmFsdWUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbElmRG9jSXNFbXB0eShcbiAgICB2aXNpdChkb2MsIHtcbiAgICAgIEZyYWdtZW50U3ByZWFkOiB7IGVudGVyIH0sXG4gICAgICBGcmFnbWVudERlZmluaXRpb246IHsgZW50ZXIgfSxcbiAgICB9KSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChcbiAgc2VsZWN0aW9uU2V0OiBTZWxlY3Rpb25TZXROb2RlLFxuKTogRnJhZ21lbnRTcHJlYWROb2RlW10ge1xuICBjb25zdCBhbGxGcmFnbWVudHM6IEZyYWdtZW50U3ByZWFkTm9kZVtdID0gW107XG5cbiAgc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgIGlmIChcbiAgICAgIChpc0ZpZWxkKHNlbGVjdGlvbikgfHwgaXNJbmxpbmVGcmFnbWVudChzZWxlY3Rpb24pKSAmJlxuICAgICAgc2VsZWN0aW9uLnNlbGVjdGlvblNldFxuICAgICkge1xuICAgICAgZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChzZWxlY3Rpb24uc2VsZWN0aW9uU2V0KS5mb3JFYWNoKFxuICAgICAgICBmcmFnID0+IGFsbEZyYWdtZW50cy5wdXNoKGZyYWcpLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbi5raW5kID09PSAnRnJhZ21lbnRTcHJlYWQnKSB7XG4gICAgICBhbGxGcmFnbWVudHMucHVzaChzZWxlY3Rpb24pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFsbEZyYWdtZW50cztcbn1cblxuLy8gSWYgdGhlIGluY29taW5nIGRvY3VtZW50IGlzIGEgcXVlcnksIHJldHVybiBpdCBhcyBpcy4gT3RoZXJ3aXNlLCBidWlsZCBhXG4vLyBuZXcgZG9jdW1lbnQgY29udGFpbmluZyBhIHF1ZXJ5IG9wZXJhdGlvbiBiYXNlZCBvbiB0aGUgc2VsZWN0aW9uIHNldFxuLy8gb2YgdGhlIHByZXZpb3VzIG1haW4gb3BlcmF0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUXVlcnlGcm9tU2VsZWN0aW9uU2V0KFxuICBkb2N1bWVudDogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IGdldE1haW5EZWZpbml0aW9uKGRvY3VtZW50KTtcbiAgY29uc3QgZGVmaW5pdGlvbk9wZXJhdGlvbiA9ICg8T3BlcmF0aW9uRGVmaW5pdGlvbk5vZGU+ZGVmaW5pdGlvbikub3BlcmF0aW9uO1xuXG4gIGlmIChkZWZpbml0aW9uT3BlcmF0aW9uID09PSAncXVlcnknKSB7XG4gICAgLy8gQWxyZWFkeSBhIHF1ZXJ5LCBzbyByZXR1cm4gdGhlIGV4aXN0aW5nIGRvY3VtZW50LlxuICAgIHJldHVybiBkb2N1bWVudDtcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgbmV3IHF1ZXJ5IHVzaW5nIHRoZSBzZWxlY3Rpb24gc2V0IG9mIHRoZSBtYWluIG9wZXJhdGlvbi5cbiAgY29uc3QgbW9kaWZpZWREb2MgPSB2aXNpdChkb2N1bWVudCwge1xuICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBtb2RpZmllZERvYztcbn1cblxuLy8gUmVtb3ZlIGZpZWxkcyAvIHNlbGVjdGlvbiBzZXRzIHRoYXQgaW5jbHVkZSBhbiBAY2xpZW50IGRpcmVjdGl2ZS5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50KFxuICBkb2N1bWVudDogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuXG4gIGxldCBtb2RpZmllZERvYyA9IHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoXG4gICAgW1xuICAgICAge1xuICAgICAgICB0ZXN0OiAoZGlyZWN0aXZlOiBEaXJlY3RpdmVOb2RlKSA9PiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2NsaWVudCcsXG4gICAgICAgIHJlbW92ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBkb2N1bWVudCxcbiAgKTtcblxuICAvLyBBZnRlciBhIGZyYWdtZW50IGRlZmluaXRpb24gaGFzIGhhZCBpdHMgQGNsaWVudCByZWxhdGVkIGRvY3VtZW50XG4gIC8vIHNldHMgcmVtb3ZlZCwgaWYgdGhlIG9ubHkgZmllbGQgaXQgaGFzIGxlZnQgaXMgYSBfX3R5cGVuYW1lIGZpZWxkLFxuICAvLyByZW1vdmUgdGhlIGVudGlyZSBmcmFnbWVudCBvcGVyYXRpb24gdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGZpcmVkXG4gIC8vIG9uIHRoZSBzZXJ2ZXIuXG4gIGlmIChtb2RpZmllZERvYykge1xuICAgIG1vZGlmaWVkRG9jID0gdmlzaXQobW9kaWZpZWREb2MsIHtcbiAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgICAgaWYgKG5vZGUuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBjb25zdCBpc1R5cGVuYW1lT25seSA9IG5vZGUuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoXG4gICAgICAgICAgICAgIHNlbGVjdGlvbiA9PlxuICAgICAgICAgICAgICAgIGlzRmllbGQoc2VsZWN0aW9uKSAmJiBzZWxlY3Rpb24ubmFtZS52YWx1ZSA9PT0gJ19fdHlwZW5hbWUnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChpc1R5cGVuYW1lT25seSkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVkRG9jO1xufVxuIiwiY29uc3QgeyBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLy8gVGhlc2UgbWVyZ2VEZWVwIGFuZCBtZXJnZURlZXBBcnJheSB1dGlsaXRpZXMgbWVyZ2UgYW55IG51bWJlciBvZiBvYmplY3RzXG4vLyB0b2dldGhlciwgc2hhcmluZyBhcyBtdWNoIG1lbW9yeSBhcyBwb3NzaWJsZSB3aXRoIHRoZSBzb3VyY2Ugb2JqZWN0cywgd2hpbGVcbi8vIHJlbWFpbmluZyBjYXJlZnVsIHRvIGF2b2lkIG1vZGlmeWluZyBhbnkgc291cmNlIG9iamVjdHMuXG5cbi8vIExvZ2ljYWxseSwgdGhlIHJldHVybiB0eXBlIG9mIG1lcmdlRGVlcCBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBvZlxuLy8gYWxsIHRoZSBhcmd1bWVudCB0eXBlcy4gVGhlIGJpbmFyeSBjYWxsIHNpZ25hdHVyZSBpcyBieSBmYXIgdGhlIG1vc3Rcbi8vIGNvbW1vbiwgYnV0IHdlIHN1cHBvcnQgMC0gdGhyb3VnaCA1LWFyeSBhcyB3ZWxsLiBBZnRlciB0aGF0LCB0aGVcbi8vIHJlc3VsdGluZyB0eXBlIGlzIGp1c3QgdGhlIGluZmVycmVkIGFycmF5IGVsZW1lbnQgdHlwZS4gTm90ZSB0byBuZXJkczpcbi8vIHRoZXJlIGlzIGEgbW9yZSBjbGV2ZXIgd2F5IG9mIGRvaW5nIHRoaXMgdGhhdCBjb252ZXJ0cyB0aGUgdHVwbGUgdHlwZVxuLy8gZmlyc3QgdG8gYSB1bmlvbiB0eXBlIChlYXN5IGVub3VnaDogVFtudW1iZXJdKSBhbmQgdGhlbiBjb252ZXJ0cyB0aGVcbi8vIHVuaW9uIHRvIGFuIGludGVyc2VjdGlvbiB0eXBlIHVzaW5nIGRpc3RyaWJ1dGl2ZSBjb25kaXRpb25hbCB0eXBlXG4vLyBpbmZlcmVuY2UsIGJ1dCB0aGF0IGFwcHJvYWNoIGhhcyBzZXZlcmFsIGZhdGFsIGZsYXdzIChib29sZWFuIGJlY29tZXNcbi8vIHRydWUgJiBmYWxzZSwgYW5kIHRoZSBpbmZlcnJlZCB0eXBlIGVuZHMgdXAgYXMgdW5rbm93biBpbiBtYW55IGNhc2VzKSxcbi8vIGluIGFkZGl0aW9uIHRvIGJlaW5nIG5lYXJseSBpbXBvc3NpYmxlIHRvIGV4cGxhaW4vdW5kZXJzdGFuZC5cbmV4cG9ydCB0eXBlIFR1cGxlVG9JbnRlcnNlY3Rpb248VCBleHRlbmRzIGFueVtdPiA9XG4gIFQgZXh0ZW5kcyBbaW5mZXIgQV0gPyBBIDpcbiAgVCBleHRlbmRzIFtpbmZlciBBLCBpbmZlciBCXSA/IEEgJiBCIDpcbiAgVCBleHRlbmRzIFtpbmZlciBBLCBpbmZlciBCLCBpbmZlciBDXSA/IEEgJiBCICYgQyA6XG4gIFQgZXh0ZW5kcyBbaW5mZXIgQSwgaW5mZXIgQiwgaW5mZXIgQywgaW5mZXIgRF0gPyBBICYgQiAmIEMgJiBEIDpcbiAgVCBleHRlbmRzIFtpbmZlciBBLCBpbmZlciBCLCBpbmZlciBDLCBpbmZlciBELCBpbmZlciBFXSA/IEEgJiBCICYgQyAmIEQgJiBFIDpcbiAgVCBleHRlbmRzIChpbmZlciBVKVtdID8gVSA6IGFueTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcDxUIGV4dGVuZHMgYW55W10+KFxuICAuLi5zb3VyY2VzOiBUXG4pOiBUdXBsZVRvSW50ZXJzZWN0aW9uPFQ+IHtcbiAgcmV0dXJuIG1lcmdlRGVlcEFycmF5KHNvdXJjZXMpO1xufVxuXG4vLyBJbiBhbG1vc3QgYW55IHNpdHVhdGlvbiB3aGVyZSB5b3UgY291bGQgc3VjY2VlZCBpbiBnZXR0aW5nIHRoZVxuLy8gVHlwZVNjcmlwdCBjb21waWxlciB0byBpbmZlciBhIHR1cGxlIHR5cGUgZm9yIHRoZSBzb3VyY2VzIGFycmF5LCB5b3Vcbi8vIGNvdWxkIGp1c3QgdXNlIG1lcmdlRGVlcCBpbnN0ZWFkIG9mIG1lcmdlRGVlcEFycmF5LCBzbyBpbnN0ZWFkIG9mXG4vLyB0cnlpbmcgdG8gY29udmVydCBUW10gdG8gYW4gaW50ZXJzZWN0aW9uIHR5cGUgd2UganVzdCBpbmZlciB0aGUgYXJyYXlcbi8vIGVsZW1lbnQgdHlwZSwgd2hpY2ggd29ya3MgcGVyZmVjdGx5IHdoZW4gdGhlIHNvdXJjZXMgYXJyYXkgaGFzIGFcbi8vIGNvbnNpc3RlbnQgZWxlbWVudCB0eXBlLlxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcEFycmF5PFQ+KHNvdXJjZXM6IFRbXSk6IFQge1xuICBsZXQgdGFyZ2V0ID0gc291cmNlc1swXSB8fCAoe30gYXMgVCk7XG4gIGNvbnN0IGNvdW50ID0gc291cmNlcy5sZW5ndGg7XG4gIGlmIChjb3VudCA+IDEpIHtcbiAgICBjb25zdCBtZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgdGFyZ2V0ID0gbWVyZ2VyLm1lcmdlKHRhcmdldCwgc291cmNlc1tpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iajogYW55KTogb2JqIGlzIFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIGFueT4ge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xufVxuXG5leHBvcnQgdHlwZSBSZWNvbmNpbGVyRnVuY3Rpb248VENvbnRleHRBcmdzIGV4dGVuZHMgYW55W10+ID0gKFxuICB0aGlzOiBEZWVwTWVyZ2VyPFRDb250ZXh0QXJncz4sXG4gIHRhcmdldDogUmVjb3JkPHN0cmluZyB8IG51bWJlciwgYW55PixcbiAgc291cmNlOiBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyLCBhbnk+LFxuICBwcm9wZXJ0eTogc3RyaW5nIHwgbnVtYmVyLFxuICAuLi5jb250ZXh0OiBUQ29udGV4dEFyZ3NcbikgPT4gYW55O1xuXG5jb25zdCBkZWZhdWx0UmVjb25jaWxlcjogUmVjb25jaWxlckZ1bmN0aW9uPGFueVtdPiA9XG4gIGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSh0YXJnZXRbcHJvcGVydHldLCBzb3VyY2VbcHJvcGVydHldKTtcbiAgfTtcblxuZXhwb3J0IGNsYXNzIERlZXBNZXJnZXI8VENvbnRleHRBcmdzIGV4dGVuZHMgYW55W10+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWNvbmNpbGVyOiBSZWNvbmNpbGVyRnVuY3Rpb248VENvbnRleHRBcmdzPiA9IGRlZmF1bHRSZWNvbmNpbGVyLFxuICApIHt9XG5cbiAgcHVibGljIG1lcmdlKHRhcmdldDogYW55LCBzb3VyY2U6IGFueSwgLi4uY29udGV4dDogVENvbnRleHRBcmdzKTogYW55IHtcbiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSAmJiBpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goc291cmNlS2V5ID0+IHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSB0YXJnZXRbc291cmNlS2V5XTtcbiAgICAgICAgICBpZiAoc291cmNlW3NvdXJjZUtleV0gIT09IHRhcmdldFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlY29uY2lsZXIodGFyZ2V0LCBzb3VyY2UsIHNvdXJjZUtleSwgLi4uY29udGV4dCk7XG4gICAgICAgICAgICAvLyBBIHdlbGwtaW1wbGVtZW50ZWQgcmVjb25jaWxlciBtYXkgcmV0dXJuIHRhcmdldFZhbHVlIHRvIGluZGljYXRlXG4gICAgICAgICAgICAvLyB0aGUgbWVyZ2UgY2hhbmdlZCBub3RoaW5nIGFib3V0IHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIHRhcmdldC5cbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHRhcmdldFZhbHVlKSB7XG4gICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuc2hhbGxvd0NvcHlGb3JNZXJnZSh0YXJnZXQpO1xuICAgICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29sbGlzaW9uLCB0aGUgdGFyZ2V0IGNhbiBzYWZlbHkgc2hhcmUgbWVtb3J5IHdpdGhcbiAgICAgICAgICAvLyB0aGUgc291cmNlLCBhbmQgdGhlIHJlY3Vyc2lvbiBjYW4gdGVybWluYXRlIGhlcmUuXG4gICAgICAgICAgdGFyZ2V0ID0gdGhpcy5zaGFsbG93Q29weUZvck1lcmdlKHRhcmdldCk7XG4gICAgICAgICAgdGFyZ2V0W3NvdXJjZUtleV0gPSBzb3VyY2Vbc291cmNlS2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgLy8gSWYgc291cmNlIChvciB0YXJnZXQpIGlzIG5vdCBhbiBvYmplY3QsIGxldCBzb3VyY2UgcmVwbGFjZSB0YXJnZXQuXG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfVxuXG4gIHB1YmxpYyBpc09iamVjdCA9IGlzT2JqZWN0O1xuXG4gIHByaXZhdGUgcGFzdENvcGllcyA9IG5ldyBTZXQ8YW55PigpO1xuXG4gIHB1YmxpYyBzaGFsbG93Q29weUZvck1lcmdlPFQ+KHZhbHVlOiBUKTogVCB7XG4gICAgaWYgKGlzT2JqZWN0KHZhbHVlKSAmJiAhdGhpcy5wYXN0Q29waWVzLmhhcyh2YWx1ZSkpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSBhcyBhbnkpLnNsaWNlKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgX19wcm90b19fOiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpLFxuICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdGhpcy5wYXN0Q29waWVzLmFkZCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLk9ic2VydmFibGUgPSB2b2lkIDA7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLy8gPT09IFN5bWJvbCBTdXBwb3J0ID09PVxudmFyIGhhc1N5bWJvbHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nO1xufTtcblxudmFyIGhhc1N5bWJvbCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiBoYXNTeW1ib2xzKCkgJiYgQm9vbGVhbihTeW1ib2xbbmFtZV0pO1xufTtcblxudmFyIGdldFN5bWJvbCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiBoYXNTeW1ib2wobmFtZSkgPyBTeW1ib2xbbmFtZV0gOiAnQEAnICsgbmFtZTtcbn07XG5cbmlmIChoYXNTeW1ib2xzKCkgJiYgIWhhc1N5bWJvbCgnb2JzZXJ2YWJsZScpKSB7XG4gIFN5bWJvbC5vYnNlcnZhYmxlID0gU3ltYm9sKCdvYnNlcnZhYmxlJyk7XG59XG5cbnZhciBTeW1ib2xJdGVyYXRvciA9IGdldFN5bWJvbCgnaXRlcmF0b3InKTtcbnZhciBTeW1ib2xPYnNlcnZhYmxlID0gZ2V0U3ltYm9sKCdvYnNlcnZhYmxlJyk7XG52YXIgU3ltYm9sU3BlY2llcyA9IGdldFN5bWJvbCgnc3BlY2llcycpOyAvLyA9PT0gQWJzdHJhY3QgT3BlcmF0aW9ucyA9PT1cblxuZnVuY3Rpb24gZ2V0TWV0aG9kKG9iaiwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcih2YWx1ZSArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBnZXRTcGVjaWVzKG9iaikge1xuICB2YXIgY3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcblxuICBpZiAoY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY3RvciA9IGN0b3JbU3ltYm9sU3BlY2llc107XG5cbiAgICBpZiAoY3RvciA9PT0gbnVsbCkge1xuICAgICAgY3RvciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3RvciAhPT0gdW5kZWZpbmVkID8gY3RvciA6IE9ic2VydmFibGU7XG59XG5cbmZ1bmN0aW9uIGlzT2JzZXJ2YWJsZSh4KSB7XG4gIHJldHVybiB4IGluc3RhbmNlb2YgT2JzZXJ2YWJsZTsgLy8gU1BFQzogQnJhbmQgY2hlY2tcbn1cblxuZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGUpIHtcbiAgaWYgKGhvc3RSZXBvcnRFcnJvci5sb2cpIHtcbiAgICBob3N0UmVwb3J0RXJyb3IubG9nKGUpO1xuICB9IGVsc2Uge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbnF1ZXVlKGZuKSB7XG4gIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICBmbigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGhvc3RSZXBvcnRFcnJvcihlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuICB2YXIgY2xlYW51cCA9IHN1YnNjcmlwdGlvbi5fY2xlYW51cDtcbiAgaWYgKGNsZWFudXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBzdWJzY3JpcHRpb24uX2NsZWFudXAgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKCFjbGVhbnVwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIGNsZWFudXAgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVuc3Vic2NyaWJlID0gZ2V0TWV0aG9kKGNsZWFudXAsICd1bnN1YnNjcmliZScpO1xuXG4gICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdW5zdWJzY3JpYmUuY2FsbChjbGVhbnVwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBob3N0UmVwb3J0RXJyb3IoZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG4gIHN1YnNjcmlwdGlvbi5fb2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gIHN1YnNjcmlwdGlvbi5fcXVldWUgPSB1bmRlZmluZWQ7XG4gIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAnY2xvc2VkJztcbn1cblxuZnVuY3Rpb24gZmx1c2hTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG4gIHZhciBxdWV1ZSA9IHN1YnNjcmlwdGlvbi5fcXVldWU7XG5cbiAgaWYgKCFxdWV1ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN1YnNjcmlwdGlvbi5fcXVldWUgPSB1bmRlZmluZWQ7XG4gIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAncmVhZHknO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICBub3RpZnlTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBxdWV1ZVtpXS50eXBlLCBxdWV1ZVtpXS52YWx1ZSk7XG4gICAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdjbG9zZWQnKSBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBub3RpZnlTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCB0eXBlLCB2YWx1ZSkge1xuICBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ3J1bm5pbmcnO1xuICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX29ic2VydmVyO1xuXG4gIHRyeSB7XG4gICAgdmFyIG0gPSBnZXRNZXRob2Qob2JzZXJ2ZXIsIHR5cGUpO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICduZXh0JzpcbiAgICAgICAgaWYgKG0pIG0uY2FsbChvYnNlcnZlciwgdmFsdWUpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICBpZiAobSkgbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7ZWxzZSB0aHJvdyB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NvbXBsZXRlJzpcbiAgICAgICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKG0pIG0uY2FsbChvYnNlcnZlcik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGhvc3RSZXBvcnRFcnJvcihlKTtcbiAgfVxuXG4gIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlID09PSAnY2xvc2VkJykgY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO2Vsc2UgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdydW5uaW5nJykgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdyZWFkeSc7XG59XG5cbmZ1bmN0aW9uIG9uTm90aWZ5KHN1YnNjcmlwdGlvbiwgdHlwZSwgdmFsdWUpIHtcbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdjbG9zZWQnKSByZXR1cm47XG5cbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdidWZmZXJpbmcnKSB7XG4gICAgc3Vic2NyaXB0aW9uLl9xdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlICE9PSAncmVhZHknKSB7XG4gICAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdidWZmZXJpbmcnO1xuICAgIHN1YnNjcmlwdGlvbi5fcXVldWUgPSBbe1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH1dO1xuICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZsdXNoU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbm90aWZ5U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgdHlwZSwgdmFsdWUpO1xufVxuXG52YXIgU3Vic2NyaXB0aW9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKG9ic2VydmVyLCBzdWJzY3JpYmVyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1YnNjcmlwdGlvbik7XG5cbiAgICAvLyBBU1NFUlQ6IG9ic2VydmVyIGlzIGFuIG9iamVjdFxuICAgIC8vIEFTU0VSVDogc3Vic2NyaWJlciBpcyBjYWxsYWJsZVxuICAgIHRoaXMuX2NsZWFudXAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICB0aGlzLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zdGF0ZSA9ICdpbml0aWFsaXppbmcnO1xuICAgIHZhciBzdWJzY3JpcHRpb25PYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9jbGVhbnVwID0gc3Vic2NyaWJlci5jYWxsKHVuZGVmaW5lZCwgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHN1YnNjcmlwdGlvbk9ic2VydmVyLmVycm9yKGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gJ2luaXRpYWxpemluZycpIHRoaXMuX3N0YXRlID0gJ3JlYWR5JztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTdWJzY3JpcHRpb24sIFt7XG4gICAga2V5OiBcInVuc3Vic2NyaWJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSAnY2xvc2VkJykge1xuICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbih0aGlzKTtcbiAgICAgICAgY2xlYW51cFN1YnNjcmlwdGlvbih0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xvc2VkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09ICdjbG9zZWQnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJzY3JpcHRpb247XG59KCk7XG5cbnZhciBTdWJzY3JpcHRpb25PYnNlcnZlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbk9ic2VydmVyKHN1YnNjcmlwdGlvbikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJzY3JpcHRpb25PYnNlcnZlcik7XG5cbiAgICB0aGlzLl9zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3Vic2NyaXB0aW9uT2JzZXJ2ZXIsIFt7XG4gICAga2V5OiBcIm5leHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dCh2YWx1ZSkge1xuICAgICAgb25Ob3RpZnkodGhpcy5fc3Vic2NyaXB0aW9uLCAnbmV4dCcsIHZhbHVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXJyb3IodmFsdWUpIHtcbiAgICAgIG9uTm90aWZ5KHRoaXMuX3N1YnNjcmlwdGlvbiwgJ2Vycm9yJywgdmFsdWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wbGV0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgIG9uTm90aWZ5KHRoaXMuX3N1YnNjcmlwdGlvbiwgJ2NvbXBsZXRlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsb3NlZFwiLFxuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdjbG9zZWQnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJzY3JpcHRpb25PYnNlcnZlcjtcbn0oKTtcblxudmFyIE9ic2VydmFibGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JzZXJ2YWJsZSk7XG5cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ09ic2VydmFibGUgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uJyk7XG4gICAgaWYgKHR5cGVvZiBzdWJzY3JpYmVyICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYnNlcnZhYmxlIGluaXRpYWxpemVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIHRoaXMuX3N1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE9ic2VydmFibGUsIFt7XG4gICAga2V5OiBcInN1YnNjcmliZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnIHx8IG9ic2VydmVyID09PSBudWxsKSB7XG4gICAgICAgIG9ic2VydmVyID0ge1xuICAgICAgICAgIG5leHQ6IG9ic2VydmVyLFxuICAgICAgICAgIGVycm9yOiBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgY29tcGxldGU6IGFyZ3VtZW50c1syXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbihvYnNlcnZlciwgdGhpcy5fc3Vic2NyaWJlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZvckVhY2hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm4odmFsdWUsIGRvbmUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgICBjb21wbGV0ZTogcmVzb2x2ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtYXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwKGZuKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBmbih2YWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaWx0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyKGZuKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKCFmbih2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlZHVjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWR1Y2UoZm4pIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgICAgdmFyIGhhc1NlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMTtcbiAgICAgIHZhciBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgdmFyIHNlZWQgPSBhcmd1bWVudHNbMV07XG4gICAgICB2YXIgYWNjID0gc2VlZDtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gIWhhc1ZhbHVlO1xuICAgICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGhhc1NlZWQpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhY2MgPSBmbihhY2MsIHZhbHVlKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWNjID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghaGFzVmFsdWUgJiYgIWhhc1NlZWQpIHJldHVybiBvYnNlcnZlci5lcnJvcihuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVkdWNlIGFuIGVtcHR5IHNlcXVlbmNlJykpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChhY2MpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbmNhdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb25jYXQoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIHNvdXJjZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgICBmdW5jdGlvbiBzdGFydE5leHQobmV4dCkge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5leHQuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQodik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gc291cmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFydE5leHQoQy5mcm9tKHNvdXJjZXNbaW5kZXgrK10pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnROZXh0KF90aGlzNSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZsYXRNYXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmxhdE1hcChmbikge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICB2YXIgQyA9IGdldFNwZWNpZXModGhpcyk7XG4gICAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gW107XG5cbiAgICAgICAgdmFyIG91dGVyID0gX3RoaXM2LnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZuKHZhbHVlKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaW5uZXIgPSBDLmZyb20odmFsdWUpLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihpbm5lcik7XG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gMCkgc3Vic2NyaXB0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgY29tcGxldGVJZkRvbmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goaW5uZXIpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb21wbGV0ZUlmRG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY29tcGxldGVJZkRvbmUoKSB7XG4gICAgICAgICAgaWYgKG91dGVyLmNsb3NlZCAmJiBzdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG91dGVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFN5bWJvbE9ic2VydmFibGUsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImZyb21cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbSh4KSB7XG4gICAgICB2YXIgQyA9IHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6IE9ic2VydmFibGU7XG4gICAgICBpZiAoeCA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKHggKyAnIGlzIG5vdCBhbiBvYmplY3QnKTtcbiAgICAgIHZhciBtZXRob2QgPSBnZXRNZXRob2QoeCwgU3ltYm9sT2JzZXJ2YWJsZSk7XG5cbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBtZXRob2QuY2FsbCh4KTtcbiAgICAgICAgaWYgKE9iamVjdChvYnNlcnZhYmxlKSAhPT0gb2JzZXJ2YWJsZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihvYnNlcnZhYmxlICsgJyBpcyBub3QgYW4gb2JqZWN0Jyk7XG4gICAgICAgIGlmIChpc09ic2VydmFibGUob2JzZXJ2YWJsZSkgJiYgb2JzZXJ2YWJsZS5jb25zdHJ1Y3RvciA9PT0gQykgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1N5bWJvbCgnaXRlcmF0b3InKSkge1xuICAgICAgICBtZXRob2QgPSBnZXRNZXRob2QoeCwgU3ltYm9sSXRlcmF0b3IpO1xuXG4gICAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICBlbnF1ZXVlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBtZXRob2QuY2FsbCh4KVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBfaXRlbSA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChfaXRlbSk7XG4gICAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICBlbnF1ZXVlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoeFtpXSk7XG4gICAgICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoeCArICcgaXMgbm90IG9ic2VydmFibGUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2ZcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2YoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGl0ZW1zID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGl0ZW1zW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogT2JzZXJ2YWJsZTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgZW5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFN5bWJvbFNwZWNpZXMsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKTtcblxuZXhwb3J0cy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZTtcblxuaWYgKGhhc1N5bWJvbHMoKSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JzZXJ2YWJsZSwgU3ltYm9sKCdleHRlbnNpb25zJyksIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3ltYm9sOiBTeW1ib2xPYnNlcnZhYmxlLFxuICAgICAgaG9zdFJlcG9ydEVycm9yOiBob3N0UmVwb3J0RXJyb3JcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL09ic2VydmFibGUuanMnKS5PYnNlcnZhYmxlO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsKHJvb3QpIHtcblx0dmFyIHJlc3VsdDtcblx0dmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0aWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG5cdFx0XHRyZXN1bHQgPSBTeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBUaGlzIGp1c3QgbmVlZHMgdG8gYmUgc29tZXRoaW5nIHRoYXQgd29uJ3QgdHJhbXBsZSBvdGhlciB1c2VyJ3MgU3ltYm9sLmZvciB1c2Vcblx0XHRcdC8vIEl0IGFsc28gd2lsbCBndWlkZSBwZW9wbGUgdG8gdGhlIHNvdXJjZSBvZiB0aGVpciBpc3N1ZXMsIGlmIHRoaXMgaXMgcHJvYmxlbWF0aWMuXG5cdFx0XHQvLyBNRVRBOiBJdCdzIGEgcmVzb3VyY2UgbG9jYXRvciFcblx0XHRcdHJlc3VsdCA9IFN5bWJvbC5mb3IoJ2h0dHBzOi8vZ2l0aHViLmNvbS9iZW5sZXNoL3N5bWJvbC1vYnNlcnZhYmxlJyk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRTeW1ib2wub2JzZXJ2YWJsZSA9IHJlc3VsdDtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHQvLyBEbyBub3RoaW5nLiBJbiBzb21lIGVudmlyb25tZW50cywgdXNlcnMgaGF2ZSBmcm96ZW4gYFN5bWJvbGAgZm9yIHNlY3VyaXR5IHJlYXNvbnMsXG5cdFx0XHRcdC8vIGlmIGl0IGlzIGZyb3plbiBhc3NpZ25pbmcgdG8gaXQgd2lsbCB0aHJvdy4gSW4gdGhpcyBjYXNlLCB3ZSBkb24ndCBjYXJlLCBiZWNhdXNlXG5cdFx0XHRcdC8vIHRoZXkgd2lsbCBuZWVkIHRvIHVzZSB0aGUgcmV0dXJuZWQgdmFsdWUgZnJvbSB0aGUgcG9ueWZpbGwuXG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG4iLCIvKiBnbG9iYWwgd2luZG93ICovXG5pbXBvcnQgcG9ueWZpbGwgZnJvbSAnLi9wb255ZmlsbC5qcyc7XG5cbnZhciByb290O1xuXG5pZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gbW9kdWxlO1xufSBlbHNlIHtcbiAgcm9vdCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG59XG5cbnZhciByZXN1bHQgPSBwb255ZmlsbChyb290KTtcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcbiIsImltcG9ydCBPYnNlcnZhYmxlIGZyb20gJ3plbi1vYnNlcnZhYmxlJztcblxuLy8gVGhpcyBzaW1wbGlmaWVkIHBvbHlmaWxsIGF0dGVtcHRzIHRvIGZvbGxvdyB0aGUgRUNNQVNjcmlwdCBPYnNlcnZhYmxlXG4vLyBwcm9wb3NhbCAoaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZSlcbmltcG9ydCAnc3ltYm9sLW9ic2VydmFibGUnO1xuXG5leHBvcnQgdHlwZSBPYnNlcnZhYmxlU3Vic2NyaXB0aW9uID0gWmVuT2JzZXJ2YWJsZS5TdWJzY3JpcHRpb247XG5leHBvcnQgdHlwZSBPYnNlcnZlcjxUPiA9IFplbk9ic2VydmFibGUuT2JzZXJ2ZXI8VD47XG5leHBvcnQgdHlwZSBTdWJzY3JpYmVyPFQ+ID0gWmVuT2JzZXJ2YWJsZS5TdWJzY3JpYmVyPFQ+O1xuXG4vLyBUaGUgemVuLW9ic2VydmFibGUgcGFja2FnZSBkZWZpbmVzIE9ic2VydmFibGUucHJvdG90eXBlW1N5bWJvbC5vYnNlcnZhYmxlXVxuLy8gd2hlbiBTeW1ib2wgaXMgc3VwcG9ydGVkLCBidXQgUnhKUyBpbnRlcm9wIGRlcGVuZHMgb24gYWxzbyBzZXR0aW5nIHRoaXMgZmFrZVxuLy8gJ0BAb2JzZXJ2YWJsZScgc3RyaW5nIGFzIGEgcG9seWZpbGwgZm9yIFN5bWJvbC5vYnNlcnZhYmxlLlxuY29uc3QgeyBwcm90b3R5cGUgfSA9IE9ic2VydmFibGU7XG5jb25zdCBmYWtlT2JzU3ltYm9sID0gJ0BAb2JzZXJ2YWJsZScgYXMga2V5b2YgdHlwZW9mIHByb3RvdHlwZTtcbmlmICghcHJvdG90eXBlW2Zha2VPYnNTeW1ib2xdKSB7XG4gIHByb3RvdHlwZVtmYWtlT2JzU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG5cbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcbiIsImNvbnN0IHsgdG9TdHJpbmcgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogRGVlcGx5IGNsb25lcyBhIHZhbHVlIHRvIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVlcDxUPih2YWx1ZTogVCk6IFQge1xuICByZXR1cm4gY2xvbmVEZWVwSGVscGVyKHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gY2xvbmVEZWVwSGVscGVyPFQ+KHZhbDogVCwgc2Vlbj86IE1hcDxhbnksIGFueT4pOiBUIHtcbiAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcbiAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6IHtcbiAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwO1xuICAgIGlmIChzZWVuLmhhcyh2YWwpKSByZXR1cm4gc2Vlbi5nZXQodmFsKTtcbiAgICBjb25zdCBjb3B5OiBUICYgYW55W10gPSAodmFsIGFzIGFueSkuc2xpY2UoMCk7XG4gICAgc2Vlbi5zZXQodmFsLCBjb3B5KTtcbiAgICBjb3B5LmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpKSB7XG4gICAgICBjb3B5W2ldID0gY2xvbmVEZWVwSGVscGVyKGNoaWxkLCBzZWVuKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29weTtcbiAgfVxuXG4gIGNhc2UgXCJbb2JqZWN0IE9iamVjdF1cIjoge1xuICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXA7XG4gICAgaWYgKHNlZW4uaGFzKHZhbCkpIHJldHVybiBzZWVuLmdldCh2YWwpO1xuICAgIC8vIEhpZ2ggZmlkZWxpdHkgcG9seWZpbGxzIG9mIE9iamVjdC5jcmVhdGUgYW5kIE9iamVjdC5nZXRQcm90b3R5cGVPZiBhcmVcbiAgICAvLyBwb3NzaWJsZSBpbiBhbGwgSlMgZW52aXJvbm1lbnRzLCBzbyB3ZSB3aWxsIGFzc3VtZSB0aGV5IGV4aXN0L3dvcmsuXG4gICAgY29uc3QgY29weSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbCkpO1xuICAgIHNlZW4uc2V0KHZhbCwgY29weSk7XG4gICAgT2JqZWN0LmtleXModmFsKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb3B5W2tleV0gPSBjbG9uZURlZXBIZWxwZXIoKHZhbCBhcyBhbnkpW2tleV0sIHNlZW4pO1xuICAgIH0pO1xuICAgIHJldHVybiBjb3B5O1xuICB9XG5cbiAgZGVmYXVsdDpcbiAgICByZXR1cm4gdmFsO1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0RW52KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG4gIH1cblxuICAvLyBkZWZhdWx0IGVudmlyb25tZW50XG4gIHJldHVybiAnZGV2ZWxvcG1lbnQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbnYoZW52OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdldEVudigpID09PSBlbnY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RldmVsb3BtZW50KCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNFbnYoJ2RldmVsb3BtZW50JykgPT09IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Rlc3QoKTogYm9vbGVhbiB7XG4gIHJldHVybiBpc0VudigndGVzdCcpID09PSB0cnVlO1xufVxuIiwiaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgaXNUZXN0IH0gZnJvbSAnLi9lbnZpcm9ubWVudCc7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlOiBhbnkpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIjtcbn1cblxuZnVuY3Rpb24gZGVlcEZyZWV6ZSh2YWx1ZTogYW55KSB7XG4gIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFt2YWx1ZV0pO1xuICB3b3JrU2V0LmZvckVhY2gob2JqID0+IHtcbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgaWYgKCFPYmplY3QuaXNGcm96ZW4ob2JqKSkgT2JqZWN0LmZyZWV6ZShvYmopO1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoaXNPYmplY3Qob2JqW25hbWVdKSkgd29ya1NldC5hZGQob2JqW25hbWVdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlRGVlcEZyZWV6ZTxUPihvYmo6IFQpOiBUIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAoaXNEZXZlbG9wbWVudCgpIHx8IGlzVGVzdCgpKSkge1xuICAgIGRlZXBGcmVlemUob2JqKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuIiwiaW1wb3J0IHsgT2JzZXJ2ZXIgfSBmcm9tIFwiLi9PYnNlcnZhYmxlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5PEUsIEE+KFxuICBvYnNlcnZlcnM6IFNldDxPYnNlcnZlcjxFPj4sXG4gIG1ldGhvZDoga2V5b2YgT2JzZXJ2ZXI8RT4sXG4gIGFyZ3VtZW50PzogQSxcbikge1xuICAvLyBJbiBjYXNlIG9ic2VydmVycyBpcyBtb2RpZmllZCBkdXJpbmcgaXRlcmF0aW9uLCB3ZSBuZWVkIHRvIGNvbW1pdCB0byB0aGVcbiAgLy8gb3JpZ2luYWwgZWxlbWVudHMsIHdoaWNoIGFsc28gcHJvdmlkZXMgYW4gb3Bwb3J0dW5pdHkgdG8gZmlsdGVyIHRoZW0gZG93blxuICAvLyB0byBqdXN0IHRoZSBvYnNlcnZlcnMgd2l0aCB0aGUgZ2l2ZW4gbWV0aG9kLlxuICBjb25zdCBvYnNlcnZlcnNXaXRoTWV0aG9kOiBPYnNlcnZlcjxFPltdID0gW107XG4gIG9ic2VydmVycy5mb3JFYWNoKG9icyA9PiBvYnNbbWV0aG9kXSAmJiBvYnNlcnZlcnNXaXRoTWV0aG9kLnB1c2gob2JzKSk7XG4gIG9ic2VydmVyc1dpdGhNZXRob2QuZm9yRWFjaChvYnMgPT4gKG9icyBhcyBhbnkpW21ldGhvZF0oYXJndW1lbnQpKTtcbn1cbiIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9PYnNlcnZhYmxlXCI7XG5cbi8vIEdlbmVyaWMgaW1wbGVtZW50YXRpb25zIG9mIE9ic2VydmFibGUucHJvdG90eXBlIG1ldGhvZHMgbGlrZSBtYXAgYW5kXG4vLyBmaWx0ZXIgbmVlZCB0byBrbm93IGhvdyB0byBjcmVhdGUgYSBuZXcgT2JzZXJ2YWJsZSBmcm9tIGFuIE9ic2VydmFibGVcbi8vIHN1YmNsYXNzIChsaWtlIENvbmNhc3Qgb3IgT2JzZXJ2YWJsZVF1ZXJ5KS4gVGhvc2UgbWV0aG9kcyBhc3N1bWVcbi8vIChwZXJoYXBzIHVud2lzZWx5PykgdGhhdCB0aGV5IGNhbiBjYWxsIHRoZSBzdWJ0eXBlJ3MgY29uc3RydWN0b3Igd2l0aCBhXG4vLyBTdWJzY3JpYmVyIGZ1bmN0aW9uLCBldmVuIHRob3VnaCB0aGUgc3ViY2xhc3MgY29uc3RydWN0b3IgbWlnaHQgZXhwZWN0XG4vLyBkaWZmZXJlbnQgcGFyYW1ldGVycy4gRGVmaW5pbmcgdGhpcyBzdGF0aWMgU3ltYm9sLnNwZWNpZXMgcHJvcGVydHkgb25cbi8vIHRoZSBzdWJjbGFzcyBpcyBhIGhpbnQgdG8gZ2VuZXJpYyBPYnNlcnZhYmxlIGNvZGUgdG8gdXNlIHRoZSBkZWZhdWx0XG4vLyBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRyeWluZyB0byBkbyBgbmV3IFN1YmNsYXNzKG9ic2VydmVyID0+IC4uLilgLlxuZXhwb3J0IGZ1bmN0aW9uIGZpeE9ic2VydmFibGVTdWJjbGFzczxcbiAgUyBleHRlbmRzIG5ldyAoLi4uYXJnczogYW55W10pID0+IE9ic2VydmFibGU8YW55Pixcbj4oc3ViY2xhc3M6IFMpOiBTIHtcbiAgZnVuY3Rpb24gc2V0KGtleTogc3ltYm9sIHwgc3RyaW5nKSB7XG4gICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBTeW1ib2wuc3BlY2llc1xuICAgIC8vIHByb3BlcnR5IGlzIGEgZ2V0dGVyIGJ5IGRlZmF1bHQgaW4gbW9kZXJuIEpTIGVudmlyb25tZW50cywgc28gd2VcbiAgICAvLyBjYW4ndCBhc3NpZ24gdG8gaXQgd2l0aCBhIG5vcm1hbCBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YmNsYXNzLCBrZXksIHsgdmFsdWU6IE9ic2VydmFibGUgfSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuc3BlY2llcykge1xuICAgIHNldChTeW1ib2wuc3BlY2llcyk7XG4gIH1cbiAgLy8gVGhlIFwiQEBzcGVjaWVzXCIgc3RyaW5nIGlzIHVzZWQgYXMgYSBmYWtlIFN5bWJvbC5zcGVjaWVzIHZhbHVlIGluIHNvbWVcbiAgLy8gcG9seWZpbGwgc3lzdGVtcyAoaW5jbHVkaW5nIHRoZSBTeW1ib2xTcGVjaWVzIHZhcmlhYmxlIHVzZWQgYnlcbiAgLy8gemVuLW9ic2VydmFibGUpLCBzbyB3ZSBzaG91bGQgc2V0IGl0IGFzIHdlbGwsIHRvIGJlIHNhZmUuXG4gIHNldChcIkBAc3BlY2llc1wiKTtcbiAgcmV0dXJuIHN1YmNsYXNzO1xufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIsIE9ic2VydmFibGVTdWJzY3JpcHRpb24sIFN1YnNjcmliZXIgfSBmcm9tIFwiLi9PYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5IH0gZnJvbSBcIi4vaXRlcmF0aW9uXCI7XG5pbXBvcnQgeyBmaXhPYnNlcnZhYmxlU3ViY2xhc3MgfSBmcm9tIFwiLi9zdWJjbGFzc2luZ1wiO1xuXG50eXBlIE1heWJlQXN5bmM8VD4gPSBUIHwgUHJvbWlzZUxpa2U8VD47XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2U8VD4odmFsdWU6IE1heWJlQXN5bmM8VD4pOiB2YWx1ZSBpcyBQcm9taXNlTGlrZTxUPiB7XG4gIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgKHZhbHVlIGFzIGFueSkudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyBBbnkgaW5kaXZpZHVhbCBTb3VyY2U8VD4gY2FuIGJlIGFuIE9ic2VydmFibGU8VD4gb3IgYSBwcm9taXNlIGZvciBvbmUuXG50eXBlIFNvdXJjZTxUPiA9IE1heWJlQXN5bmM8T2JzZXJ2YWJsZTxUPj47XG5cbmV4cG9ydCB0eXBlIENvbmNhc3RTb3VyY2VzSXRlcmFibGU8VD4gPSBJdGVyYWJsZTxTb3VyY2U8VD4+O1xuXG4vLyBBIENvbmNhc3Q8VD4gb2JzZXJ2YWJsZSBjb25jYXRlbmF0ZXMgdGhlIGdpdmVuIHNvdXJjZXMgaW50byBhIHNpbmdsZVxuLy8gbm9uLW92ZXJsYXBwaW5nIHNlcXVlbmNlIG9mIFRzLCBhdXRvbWF0aWNhbGx5IHVud3JhcHBpbmcgYW55IHByb21pc2VzLFxuLy8gYW5kIGJyb2FkY2FzdHMgdGhlIFQgZWxlbWVudHMgb2YgdGhhdCBzZXF1ZW5jZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBzdWJzY3JpYmVycywgYWxsIHdpdGhvdXQgY3JlYXRpbmcgYSBidW5jaCBvZiBpbnRlcm1lZGlhcnkgT2JzZXJ2YWJsZVxuLy8gd3JhcHBlciBvYmplY3RzLlxuLy9cbi8vIEV2ZW4gdGhvdWdoIGFueSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGNhbiBzdWJzY3JpYmUgdG8gdGhlIENvbmNhc3QsIGVhY2hcbi8vIHNvdXJjZSBvYnNlcnZhYmxlIGlzIGd1YXJhbnRlZWQgdG8gcmVjZWl2ZSBhdCBtb3N0IG9uZSBzdWJzY3JpYmUgY2FsbCxcbi8vIGFuZCB0aGUgcmVzdWx0cyBhcmUgbXVsdGljYXN0IHRvIGFsbCBvYnNlcnZlcnMuXG4vL1xuLy8gSW4gYWRkaXRpb24gdG8gYnJvYWRjYXN0aW5nIGV2ZXJ5IG5leHQvZXJyb3IgbWVzc2FnZSB0byB0aGlzLm9ic2VydmVycyxcbi8vIHRoZSBDb25jYXN0IHN0b3JlcyB0aGUgbW9zdCByZWNlbnQgbWVzc2FnZSB1c2luZyB0aGlzLmxhdGVzdCwgc28gYW55XG4vLyBuZXcgb2JzZXJ2ZXJzIGNhbiBpbW1lZGlhdGVseSByZWNlaXZlIHRoZSBsYXRlc3QgbWVzc2FnZSwgZXZlbiBpZiBpdFxuLy8gd2FzIG9yaWdpbmFsbHkgZGVsaXZlcmVkIGluIHRoZSBwYXN0LiBUaGlzIGJlaGF2aW9yIG1lYW5zIHdlIGNhbiBhc3N1bWVcbi8vIGV2ZXJ5IGFjdGl2ZSBvYnNlcnZlciBpbiB0aGlzLm9ic2VydmVycyBoYXMgcmVjZWl2ZWQgdGhlIHNhbWUgbW9zdFxuLy8gcmVjZW50IG1lc3NhZ2UuXG4vL1xuLy8gV2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoaXMubGF0ZXN0IHJlcGxheSwgYSBDb25jYXN0IGlzIGEgXCJob3RcIlxuLy8gb2JzZXJ2YWJsZSBpbiB0aGUgc2Vuc2UgdGhhdCBpdCBkb2VzIG5vdCByZXBsYXkgcGFzdCByZXN1bHRzIGZyb20gdGhlXG4vLyBiZWdpbm5pbmcgb2YgdGltZSBmb3IgZWFjaCBuZXcgb2JzZXJ2ZXIuXG4vL1xuLy8gQ291bGQgd2UgaGF2ZSB1c2VkIHNvbWUgZXhpc3RpbmcgUnhKUyBjbGFzcyBpbnN0ZWFkPyBDb25jYXN0PFQ+IGlzXG4vLyBzaW1pbGFyIHRvIGEgQmVoYXZpb3JTdWJqZWN0PFQ+LCBiZWNhdXNlIGl0IGlzIG11bHRpY2FzdCBhbmQgcmVkZWxpdmVyc1xuLy8gdGhlIGxhdGVzdCBuZXh0L2Vycm9yIG1lc3NhZ2UgdG8gbmV3IHN1YnNjcmliZXJzLiBVbmxpa2UgU3ViamVjdDxUPixcbi8vIENvbmNhc3Q8VD4gZG9lcyBub3QgZXhwb3NlIGFuIE9ic2VydmVyPFQ+IGludGVyZmFjZSAodGhpcy5oYW5kbGVycyBpc1xuLy8gaW50ZW50aW9uYWxseSBwcml2YXRlKSwgc2luY2UgQ29uY2FzdDxUPiBnZXRzIGl0cyBpbnB1dHMgZnJvbSB0aGVcbi8vIGNvbmNhdGVuYXRlZCBzb3VyY2VzLiBJZiB3ZSBldmVyIHN3aXRjaCB0byBSeEpTLCB0aGVyZSBtYXkgYmUgc29tZVxuLy8gdmFsdWUgaW4gcmV1c2luZyB0aGVpciBjb2RlLCBidXQgZm9yIG5vdyB3ZSB1c2UgemVuLW9ic2VydmFibGUsIHdoaWNoXG4vLyBkb2VzIG5vdCBjb250YWluIGFueSBTdWJqZWN0IGltcGxlbWVudGF0aW9ucy5cbmV4cG9ydCBjbGFzcyBDb25jYXN0PFQ+IGV4dGVuZHMgT2JzZXJ2YWJsZTxUPiB7XG4gIC8vIEFjdGl2ZSBvYnNlcnZlcnMgcmVjZWl2aW5nIGJyb2FkY2FzdCBtZXNzYWdlcy4gVGhhbmtzIHRvIHRoaXMubGF0ZXN0LFxuICAvLyB3ZSBjYW4gYXNzdW1lIGFsbCBvYnNlcnZlcnMgaW4gdGhpcyBTZXQgaGF2ZSByZWNlaXZlZCB0aGUgc2FtZSBtb3N0XG4gIC8vIHJlY2VudCBtZXNzYWdlLCB0aG91Z2ggcG9zc2libHkgYXQgZGlmZmVyZW50IHRpbWVzIGluIHRoZSBwYXN0LlxuICBwcml2YXRlIG9ic2VydmVycyA9IG5ldyBTZXQ8T2JzZXJ2ZXI8VD4+KCk7XG5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBzdGFydHMgb2ZmIHVuZGVmaW5lZCB0byBpbmRpY2F0ZSB0aGUgaW5pdGlhbFxuICAvLyBzdWJzY3JpcHRpb24gaGFzIG5vdCB5ZXQgYmVndW4sIHRoZW4gcG9pbnRzIHRvIGVhY2ggc291cmNlXG4gIC8vIHN1YnNjcmlwdGlvbiBpbiB0dXJuLCBhbmQgZmluYWxseSBiZWNvbWVzIG51bGwgYWZ0ZXIgdGhlIHNvdXJjZXMgaGF2ZVxuICAvLyBiZWVuIGV4aGF1c3RlZC4gQWZ0ZXIgdGhhdCwgaXQgc3RheXMgbnVsbC5cbiAgcHJpdmF0ZSBzdWI/OiBPYnNlcnZhYmxlU3Vic2NyaXB0aW9uIHwgbnVsbDtcblxuICAvLyBOb3Qgb25seSBjYW4gdGhlIGluZGl2aWR1YWwgZWxlbWVudHMgb2YgdGhlIGl0ZXJhYmxlIGJlIHByb21pc2VzLCBidXRcbiAgLy8gYWxzbyB0aGUgaXRlcmFibGUgaXRzZWxmIGNhbiBiZSB3cmFwcGVkIGluIGEgcHJvbWlzZS5cbiAgY29uc3RydWN0b3Ioc291cmNlczogTWF5YmVBc3luYzxDb25jYXN0U291cmNlc0l0ZXJhYmxlPFQ+PiB8IFN1YnNjcmliZXI8VD4pIHtcbiAgICBzdXBlcihvYnNlcnZlciA9PiB7XG4gICAgICB0aGlzLmFkZE9ic2VydmVyKG9ic2VydmVyKTtcbiAgICAgIHJldHVybiAoKSA9PiB0aGlzLnJlbW92ZU9ic2VydmVyKG9ic2VydmVyKTtcbiAgICB9KTtcblxuICAgIC8vIFN1cHByZXNzIHJlamVjdGlvbiB3YXJuaW5ncyBmb3IgdGhpcy5wcm9taXNlLCBzaW5jZSBpdCdzIHBlcmZlY3RseVxuICAgIC8vIGFjY2VwdGFibGUgdG8gcGF5IG5vIGF0dGVudGlvbiB0byB0aGlzLnByb21pc2UgaWYgeW91J3JlIGNvbnN1bWluZ1xuICAgIC8vIHRoZSByZXN1bHRzIHRocm91Z2ggdGhlIG5vcm1hbCBvYnNlcnZhYmxlIEFQSS5cbiAgICB0aGlzLnByb21pc2UuY2F0Y2goXyA9PiB7fSk7XG5cbiAgICAvLyBJZiBzb21lb25lIGFjY2lkZW50YWxseSB0cmllcyB0byBjcmVhdGUgYSBDb25jYXN0IHVzaW5nIGEgc3Vic2NyaWJlclxuICAgIC8vIGZ1bmN0aW9uLCByZWNvdmVyIGJ5IGNyZWF0aW5nIGFuIE9ic2VydmFibGUgZnJvbSB0aGF0IHN1YnNjcmliZXIgYW5kXG4gICAgLy8gdXNpbmcgaXQgYXMgdGhlIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIHNvdXJjZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgc291cmNlcyA9IFtuZXcgT2JzZXJ2YWJsZShzb3VyY2VzKV07XG4gICAgfVxuXG4gICAgaWYgKGlzUHJvbWlzZUxpa2Uoc291cmNlcykpIHtcbiAgICAgIHNvdXJjZXMudGhlbihcbiAgICAgICAgaXRlcmFibGUgPT4gdGhpcy5zdGFydChpdGVyYWJsZSksXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZXJyb3IsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXJ0KHNvdXJjZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEEgY29uc3VtYWJsZSBhcnJheSBvZiBzb3VyY2Ugb2JzZXJ2YWJsZXMsIGluY3JlbWVudGFsbHkgY29uc3VtZWRcbiAgLy8gZWFjaCB0aW1lIHRoaXMuaGFuZGxlcnMuY29tcGxldGUgaXMgY2FsbGVkLlxuICBwcml2YXRlIHNvdXJjZXM6IFNvdXJjZTxUPltdO1xuXG4gIHByaXZhdGUgc3RhcnQoc291cmNlczogQ29uY2FzdFNvdXJjZXNJdGVyYWJsZTxUPikge1xuICAgIGlmICh0aGlzLnN1YiAhPT0gdm9pZCAwKSByZXR1cm47XG5cbiAgICAvLyBJbiBwcmFjdGljZSwgc291cmNlcyBpcyBtb3N0IG9mdGVuIHNpbXBseSBhbiBBcnJheSBvZiBvYnNlcnZhYmxlcy5cbiAgICAvLyBUT0RPIENvbnNpZGVyIHVzaW5nIHNvdXJjZXNbU3ltYm9sLml0ZXJhdG9yXSgpIHRvIHRha2UgYWR2YW50YWdlXG4gICAgLy8gb2YgdGhlIGxhemluZXNzIG9mIG5vbi1BcnJheSBpdGVyYWJsZXMuXG4gICAgdGhpcy5zb3VyY2VzID0gQXJyYXkuZnJvbShzb3VyY2VzKTtcblxuICAgIC8vIENhbGxpbmcgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSgpIGtpY2tzIG9mZiBjb25zdW1wdGlvbiBvZiB0aGUgZmlyc3RcbiAgICAvLyBzb3VyY2Ugb2JzZXJ2YWJsZS4gSXQncyB0ZW1wdGluZyB0byBkbyB0aGlzIHN0ZXAgbGF6aWx5IGluXG4gICAgLy8gYWRkT2JzZXJ2ZXIsIGJ1dCB0aGlzLnByb21pc2UgY2FuIGJlIGFjY2Vzc2VkIHdpdGhvdXQgY2FsbGluZ1xuICAgIC8vIGFkZE9ic2VydmVyLCBzbyBjb25zdW1wdGlvbiBuZWVkcyB0byBiZWdpbiBlYWdlcmx5LlxuICAgIHRoaXMuaGFuZGxlcnMuY29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsaXZlckxhc3RNZXNzYWdlKG9ic2VydmVyOiBPYnNlcnZlcjxUPikge1xuICAgIGlmICh0aGlzLmxhdGVzdCkge1xuICAgICAgY29uc3QgbmV4dE9yRXJyb3IgPSB0aGlzLmxhdGVzdFswXTtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IG9ic2VydmVyW25leHRPckVycm9yXTtcbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgbWV0aG9kLmNhbGwob2JzZXJ2ZXIsIHRoaXMubGF0ZXN0WzFdKTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBzdWJzY3JpcHRpb24gaXMgYWxyZWFkeSBjbG9zZWQsIGFuZCB0aGUgbGFzdCBtZXNzYWdlIHdhc1xuICAgICAgLy8gYSAnbmV4dCcgbWVzc2FnZSwgc2ltdWxhdGUgZGVsaXZlcnkgb2YgdGhlIGZpbmFsICdjb21wbGV0ZSdcbiAgICAgIC8vIG1lc3NhZ2UgYWdhaW4uXG4gICAgICBpZiAodGhpcy5zdWIgPT09IG51bGwgJiZcbiAgICAgICAgICBuZXh0T3JFcnJvciA9PT0gXCJuZXh0XCIgJiZcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSkge1xuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE5vdGU6IGNsZWFudXAgb2JzZXJ2ZXJzIGRvIG5vdCBjb3VudCB0b3dhcmRzIHRoaXMgdG90YWwuXG4gIHByaXZhdGUgYWRkQ291bnQgPSAwO1xuXG4gIHB1YmxpYyBhZGRPYnNlcnZlcihvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pIHtcbiAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLmhhcyhvYnNlcnZlcikpIHtcbiAgICAgIC8vIEltbWVkaWF0ZWx5IGRlbGl2ZXIgdGhlIG1vc3QgcmVjZW50IG1lc3NhZ2UsIHNvIHdlIGNhbiBhbHdheXNcbiAgICAgIC8vIGJlIHN1cmUgYWxsIG9ic2VydmVycyBoYXZlIHRoZSBsYXRlc3QgaW5mb3JtYXRpb24uXG4gICAgICB0aGlzLmRlbGl2ZXJMYXN0TWVzc2FnZShvYnNlcnZlcik7XG4gICAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgICAgKyt0aGlzLmFkZENvdW50O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVPYnNlcnZlcihcbiAgICBvYnNlcnZlcjogT2JzZXJ2ZXI8VD4sXG4gICAgcXVpZXRseT86IGJvb2xlYW4sXG4gICkge1xuICAgIGlmICh0aGlzLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIpICYmXG4gICAgICAgIC0tdGhpcy5hZGRDb3VudCA8IDEgJiZcbiAgICAgICAgIXF1aWV0bHkpIHtcbiAgICAgIC8vIEluIGNhc2UgdGhlcmUgYXJlIHN0aWxsIGFueSBjbGVhbnVwIG9ic2VydmVycyBpbiB0aGlzLm9ic2VydmVycyxcbiAgICAgIC8vIGFuZCBubyBlcnJvciBvciBjb21wbGV0aW9uIGhhcyBiZWVuIGJyb2FkY2FzdCB5ZXQsIG1ha2Ugc3VyZVxuICAgICAgLy8gdGhvc2Ugb2JzZXJ2ZXJzIHJlY2VpdmUgYW4gZXJyb3IgdGhhdCB0ZXJtaW5hdGVzIHRoZW0uXG4gICAgICB0aGlzLmhhbmRsZXJzLmVycm9yKG5ldyBFcnJvcihcIk9ic2VydmFibGUgY2FuY2VsbGVkIHByZW1hdHVyZWx5XCIpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBbnkgQ29uY2FzdCBvYmplY3QgY2FuIGJlIHRyaXZpYWxseSBjb252ZXJ0ZWQgdG8gYSBQcm9taXNlLCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byBjcmVhdGUgYSBuZXcgd3JhcHBlciBPYnNlcnZhYmxlLiBUaGlzIHByb21pc2UgcHJvdmlkZXMgYW5cbiAgLy8gZWFzeSB3YXkgdG8gb2JzZXJ2ZSB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIENvbmNhc3QuXG4gIHByaXZhdGUgcmVzb2x2ZTogKHJlc3VsdD86IFQgfCBQcm9taXNlTGlrZTxUPikgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWplY3Q6IChyZWFzb246IGFueSkgPT4gdm9pZDtcbiAgcHVibGljIHJlYWRvbmx5IHByb21pc2UgPSBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG5cbiAgLy8gTmFtZSBhbmQgYXJndW1lbnQgb2YgdGhlIG1vc3QgcmVjZW50bHkgaW52b2tlZCBvYnNlcnZlciBtZXRob2QsIHVzZWRcbiAgLy8gdG8gZGVsaXZlciBsYXRlc3QgcmVzdWx0cyBpbW1lZGlhdGVseSB0byBuZXcgb2JzZXJ2ZXJzLlxuICBwcml2YXRlIGxhdGVzdD86IFtcIm5leHRcIiB8IFwiZXJyb3JcIiwgYW55XTtcblxuICAvLyBCb3VuZCBoYW5kbGVyIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSByZXVzZWQgZm9yIGV2ZXJ5IGludGVybmFsXG4gIC8vIHN1YnNjcmlwdGlvbi5cbiAgcHJpdmF0ZSBoYW5kbGVycyA9IHtcbiAgICBuZXh0OiAocmVzdWx0OiBUKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5sYXRlc3QgPSBbXCJuZXh0XCIsIHJlc3VsdF07XG4gICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkodGhpcy5vYnNlcnZlcnMsIFwibmV4dFwiLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlcnJvcjogKGVycm9yOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHsgc3ViIH0gPSB0aGlzO1xuICAgICAgaWYgKHN1YiAhPT0gbnVsbCkge1xuICAgICAgICAvLyBEZWxheSB1bnN1YnNjcmliaW5nIGZyb20gdGhlIHVuZGVybHlpbmcgc3Vic2NyaXB0aW9uIHNsaWdodGx5LFxuICAgICAgICAvLyBzbyB0aGF0IGltbWVkaWF0ZWx5IHN1YnNjcmliaW5nIGFub3RoZXIgb2JzZXJ2ZXIgY2FuIGtlZXAgdGhlXG4gICAgICAgIC8vIHN1YnNjcmlwdGlvbiBhY3RpdmUuXG4gICAgICAgIGlmIChzdWIpIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gc3ViLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLnN1YiA9IG51bGw7XG4gICAgICAgIHRoaXMubGF0ZXN0ID0gW1wiZXJyb3JcIiwgZXJyb3JdO1xuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XG4gICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkodGhpcy5vYnNlcnZlcnMsIFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc3ViICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zb3VyY2VzLnNoaWZ0KCk7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB0aGlzLnN1YiA9IG51bGw7XG4gICAgICAgICAgaWYgKHRoaXMubGF0ZXN0ICYmXG4gICAgICAgICAgICAgIHRoaXMubGF0ZXN0WzBdID09PSBcIm5leHRcIikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHRoaXMubGF0ZXN0WzFdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdG9yZSB0aGlzLmxhdGVzdCA9IFtcImNvbXBsZXRlXCJdLCBiZWNhdXNlIGRvaW5nIHNvXG4gICAgICAgICAgLy8gZGlzY2FyZHMgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcmV2aW91cyBuZXh0IChvclxuICAgICAgICAgIC8vIGVycm9yKSBtZXNzYWdlLiBJbnN0ZWFkLCBpZiBuZXcgb2JzZXJ2ZXJzIHN1YnNjcmliZSBhZnRlclxuICAgICAgICAgIC8vIHRoaXMgQ29uY2FzdCBoYXMgY29tcGxldGVkLCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUgZmluYWxcbiAgICAgICAgICAvLyAnbmV4dCcgbWVzc2FnZSAodW5sZXNzIHRoZXJlIHdhcyBhbiBlcnJvcikgaW1tZWRpYXRlbHlcbiAgICAgICAgICAvLyBmb2xsb3dlZCBieSBhICdjb21wbGV0ZScgbWVzc2FnZSAoc2VlIGFkZE9ic2VydmVyKS5cbiAgICAgICAgICBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5KHRoaXMub2JzZXJ2ZXJzLCBcImNvbXBsZXRlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUudGhlbihvYnMgPT4gdGhpcy5zdWIgPSBvYnMuc3Vic2NyaWJlKHRoaXMuaGFuZGxlcnMpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN1YiA9IHZhbHVlLnN1YnNjcmliZSh0aGlzLmhhbmRsZXJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH07XG5cbiAgcHVibGljIGNsZWFudXAoY2FsbGJhY2s6ICgpID0+IGFueSkge1xuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdCBvbmNlID0gKCkgPT4ge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gUmVtb3ZpbmcgYSBjbGVhbnVwIG9ic2VydmVyIHNob3VsZCBub3QgdW5zdWJzY3JpYmUgZnJvbSB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBPYnNlcnZhYmxlLCBzbyB0aGUgb25seSByZW1vdmVPYnNlcnZlciBiZWhhdmlvciB3ZVxuICAgICAgICAvLyBuZWVkIGhlcmUgaXMgdG8gZGVsZXRlIG9ic2VydmVyIGZyb20gdGhpcy5vYnNlcnZlcnMuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlcik7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0ge1xuICAgICAgbmV4dDogb25jZSxcbiAgICAgIGVycm9yOiBvbmNlLFxuICAgICAgY29tcGxldGU6IG9uY2UsXG4gICAgfTtcbiAgICBjb25zdCBjb3VudCA9IHRoaXMuYWRkQ291bnQ7XG4gICAgdGhpcy5hZGRPYnNlcnZlcihvYnNlcnZlcik7XG4gICAgLy8gTm9ybWFsbHkgYWRkT2JzZXJ2ZXIgaW5jcmVtZW50cyB0aGlzLmFkZENvdW50LCBidXQgd2UgY2FuIFwiaGlkZVwiXG4gICAgLy8gY2xlYW51cCBvYnNlcnZlcnMgYnkgcmVzdG9yaW5nIHRoaXMuYWRkQ291bnQgdG8gaXRzIHByZXZpb3VzIHZhbHVlXG4gICAgLy8gYWZ0ZXIgYWRkaW5nIGFueSBjbGVhbnVwIG9ic2VydmVyLlxuICAgIHRoaXMuYWRkQ291bnQgPSBjb3VudDtcbiAgfVxuXG4gIC8vIEEgcHVibGljIHdheSB0byBhYm9ydCBvYnNlcnZhdGlvbiBhbmQgYnJvYWRjYXN0LlxuICBwdWJsaWMgY2FuY2VsID0gKHJlYXNvbjogYW55KSA9PiB7XG4gICAgdGhpcy5yZWplY3QocmVhc29uKTtcbiAgICB0aGlzLnNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKCk7XG4gIH1cbn1cblxuLy8gTmVjZXNzYXJ5IGJlY2F1c2UgdGhlIENvbmNhc3QgY29uc3RydWN0b3IgaGFzIGEgZGlmZmVyZW50IHNpZ25hdHVyZVxuLy8gdGhhbiB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3Rvci5cbmZpeE9ic2VydmFibGVTdWJjbGFzcyhDb25jYXN0KTtcbiIsImV4cG9ydCBmdW5jdGlvbiBpc05vbkVtcHR5QXJyYXk8VD4odmFsdWU/OiBBcnJheUxpa2U8VD4pOiB2YWx1ZSBpcyBBcnJheTxUPiB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPiAwO1xufVxuIiwiZXhwb3J0IGNvbnN0IGNhblVzZVdlYWtNYXAgPSB0eXBlb2YgV2Vha01hcCA9PT0gJ2Z1bmN0aW9uJyAmJiAhKFxuICB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJlxuICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJ1xuKTtcbiIsImltcG9ydCB7IFR1cGxlVG9JbnRlcnNlY3Rpb24gfSBmcm9tICcuL21lcmdlRGVlcCc7XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBwcm92aWRlZCBvYmplY3RzIHNoYWxsb3dseSBhbmQgcmVtb3Zlc1xuICogYWxsIHByb3BlcnRpZXMgd2l0aCBhbiBgdW5kZWZpbmVkYCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdDxUQXJncyBleHRlbmRzIGFueVtdPihcbiAgLi4ub2JqZWN0czogVEFyZ3Ncbik6IFR1cGxlVG9JbnRlcnNlY3Rpb248VEFyZ3M+IHtcbiAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBvYmplY3RzLmZvckVhY2gob2JqID0+IHtcbiAgICBpZiAoIW9iaikgcmV0dXJuO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAob2JqIGFzIGFueSlba2V5XTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FcnJvcjxUPihlcnJvclZhbHVlOiBhbnkpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPFQ+KG9ic2VydmVyID0+IHtcbiAgICBvYnNlcnZlci5lcnJvcihlcnJvclZhbHVlKTtcbiAgfSk7XG59XG4iLCJleHBvcnQgdHlwZSBTZXJ2ZXJFcnJvciA9IEVycm9yICYge1xuICByZXNwb25zZTogUmVzcG9uc2U7XG4gIHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xufTtcblxuZXhwb3J0IGNvbnN0IHRocm93U2VydmVyRXJyb3IgPSAoXG4gIHJlc3BvbnNlOiBSZXNwb25zZSxcbiAgcmVzdWx0OiBhbnksXG4gIG1lc3NhZ2U6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpIGFzIFNlcnZlckVycm9yO1xuICBlcnJvci5uYW1lID0gJ1NlcnZlckVycm9yJztcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgZXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgZXJyb3IucmVzdWx0ID0gcmVzdWx0O1xuICB0aHJvdyBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciwgaW52YXJpYW50IH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5pbXBvcnQge1xuICBOZXh0TGluayxcbiAgT3BlcmF0aW9uLFxuICBSZXF1ZXN0SGFuZGxlcixcbiAgRmV0Y2hSZXN1bHQsXG4gIEdyYXBoUUxSZXF1ZXN0XG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgdmFsaWRhdGVPcGVyYXRpb24sXG4gIGNyZWF0ZU9wZXJhdGlvbixcbiAgdHJhbnNmb3JtT3BlcmF0aW9uLFxufSBmcm9tICcuLi91dGlscyc7XG5cbmZ1bmN0aW9uIHBhc3N0aHJvdWdoKG9wOiBPcGVyYXRpb24sIGZvcndhcmQ6IE5leHRMaW5rKSB7XG4gIHJldHVybiAoZm9yd2FyZCA/IGZvcndhcmQob3ApIDogT2JzZXJ2YWJsZS5vZigpKSBhcyBPYnNlcnZhYmxlPEZldGNoUmVzdWx0Pjtcbn1cblxuZnVuY3Rpb24gdG9MaW5rKGhhbmRsZXI6IFJlcXVlc3RIYW5kbGVyIHwgQXBvbGxvTGluaykge1xuICByZXR1cm4gdHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicgPyBuZXcgQXBvbGxvTGluayhoYW5kbGVyKSA6IGhhbmRsZXI7XG59XG5cbmZ1bmN0aW9uIGlzVGVybWluYXRpbmcobGluazogQXBvbGxvTGluayk6IGJvb2xlYW4ge1xuICByZXR1cm4gbGluay5yZXF1ZXN0Lmxlbmd0aCA8PSAxO1xufVxuXG5jbGFzcyBMaW5rRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHB1YmxpYyBsaW5rPzogQXBvbGxvTGluaztcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgbGluaz86IEFwb2xsb0xpbmspIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBcG9sbG9MaW5rIHtcbiAgcHVibGljIHN0YXRpYyBlbXB0eSgpOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoKCkgPT4gT2JzZXJ2YWJsZS5vZigpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZnJvbShsaW5rczogKEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcilbXSk6IEFwb2xsb0xpbmsge1xuICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApIHJldHVybiBBcG9sbG9MaW5rLmVtcHR5KCk7XG4gICAgcmV0dXJuIGxpbmtzLm1hcCh0b0xpbmspLnJlZHVjZSgoeCwgeSkgPT4geC5jb25jYXQoeSkpIGFzIEFwb2xsb0xpbms7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHNwbGl0KFxuICAgIHRlc3Q6IChvcDogT3BlcmF0aW9uKSA9PiBib29sZWFuLFxuICAgIGxlZnQ6IEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcixcbiAgICByaWdodD86IEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcixcbiAgKTogQXBvbGxvTGluayB7XG4gICAgY29uc3QgbGVmdExpbmsgPSB0b0xpbmsobGVmdCk7XG4gICAgY29uc3QgcmlnaHRMaW5rID0gdG9MaW5rKHJpZ2h0IHx8IG5ldyBBcG9sbG9MaW5rKHBhc3N0aHJvdWdoKSk7XG5cbiAgICBpZiAoaXNUZXJtaW5hdGluZyhsZWZ0TGluaykgJiYgaXNUZXJtaW5hdGluZyhyaWdodExpbmspKSB7XG4gICAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsob3BlcmF0aW9uID0+IHtcbiAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKVxuICAgICAgICAgID8gbGVmdExpbmsucmVxdWVzdChvcGVyYXRpb24pIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKChvcGVyYXRpb24sIGZvcndhcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKVxuICAgICAgICAgID8gbGVmdExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZvcndhcmQpIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGV4ZWN1dGUoXG4gICAgbGluazogQXBvbGxvTGluayxcbiAgICBvcGVyYXRpb246IEdyYXBoUUxSZXF1ZXN0LFxuICApOiBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGxpbmsucmVxdWVzdChcbiAgICAgICAgY3JlYXRlT3BlcmF0aW9uKFxuICAgICAgICAgIG9wZXJhdGlvbi5jb250ZXh0LFxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbih2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24pKSxcbiAgICAgICAgKSxcbiAgICAgICkgfHwgT2JzZXJ2YWJsZS5vZigpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgY29uY2F0KFxuICAgIGZpcnN0OiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIsXG4gICAgc2Vjb25kOiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIsXG4gICkge1xuICAgIGNvbnN0IGZpcnN0TGluayA9IHRvTGluayhmaXJzdCk7XG4gICAgaWYgKGlzVGVybWluYXRpbmcoZmlyc3RMaW5rKSkge1xuICAgICAgaW52YXJpYW50Lndhcm4oXG4gICAgICAgIG5ldyBMaW5rRXJyb3IoXG4gICAgICAgICAgYFlvdSBhcmUgY2FsbGluZyBjb25jYXQgb24gYSB0ZXJtaW5hdGluZyBsaW5rLCB3aGljaCB3aWxsIGhhdmUgbm8gZWZmZWN0YCxcbiAgICAgICAgICBmaXJzdExpbmssXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZpcnN0TGluaztcbiAgICB9XG4gICAgY29uc3QgbmV4dExpbmsgPSB0b0xpbmsoc2Vjb25kKTtcblxuICAgIGlmIChpc1Rlcm1pbmF0aW5nKG5leHRMaW5rKSkge1xuICAgICAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKFxuICAgICAgICBvcGVyYXRpb24gPT5cbiAgICAgICAgICBmaXJzdExpbmsucmVxdWVzdChcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIG9wID0+IG5leHRMaW5rLnJlcXVlc3Qob3ApIHx8IE9ic2VydmFibGUub2YoKSxcbiAgICAgICAgICApIHx8IE9ic2VydmFibGUub2YoKSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluaygob3BlcmF0aW9uLCBmb3J3YXJkKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZmlyc3RMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBvcCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dExpbmsucmVxdWVzdChvcCwgZm9yd2FyZCkgfHwgT2JzZXJ2YWJsZS5vZigpO1xuICAgICAgICAgIH0pIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IocmVxdWVzdD86IFJlcXVlc3RIYW5kbGVyKSB7XG4gICAgaWYgKHJlcXVlc3QpIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwdWJsaWMgc3BsaXQoXG4gICAgdGVzdDogKG9wOiBPcGVyYXRpb24pID0+IGJvb2xlYW4sXG4gICAgbGVmdDogQXBvbGxvTGluayB8IFJlcXVlc3RIYW5kbGVyLFxuICAgIHJpZ2h0PzogQXBvbGxvTGluayB8IFJlcXVlc3RIYW5kbGVyLFxuICApOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gdGhpcy5jb25jYXQoXG4gICAgICBBcG9sbG9MaW5rLnNwbGl0KHRlc3QsIGxlZnQsIHJpZ2h0IHx8IG5ldyBBcG9sbG9MaW5rKHBhc3N0aHJvdWdoKSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGNvbmNhdChuZXh0OiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIpOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gQXBvbGxvTGluay5jb25jYXQodGhpcywgbmV4dCk7XG4gIH1cblxuICBwdWJsaWMgcmVxdWVzdChcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICBmb3J3YXJkPzogTmV4dExpbmssXG4gICk6IE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ+IHwgbnVsbCB7XG4gICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKCdyZXF1ZXN0IGlzIG5vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uRXJyb3IoXG4gICAgZXJyb3I6IGFueSxcbiAgICBvYnNlcnZlcj86IFplbk9ic2VydmFibGUuT2JzZXJ2ZXI8RmV0Y2hSZXN1bHQ+LFxuICApOiBmYWxzZSB8IHZvaWQge1xuICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci5lcnJvcikge1xuICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuaW5nIGZhbHNlIGluZGljYXRlcyB0aGF0IG9ic2VydmVyLmVycm9yIGRvZXMgbm90IG5lZWQgdG8gYmVcbiAgICAgIC8vIGNhbGxlZCBhZ2Fpbiwgc2luY2UgaXQgd2FzIGFscmVhZHkgY2FsbGVkIChvbiB0aGUgcHJldmlvdXMgbGluZSkuXG4gICAgICAvLyBDYWxsaW5nIG9ic2VydmVyLmVycm9yIGFnYWluIHdvdWxkIG5vdCBjYXVzZSBhbnkgcmVhbCBwcm9ibGVtcyxcbiAgICAgIC8vIHNpbmNlIG9ubHkgdGhlIGZpcnN0IGNhbGwgbWF0dGVycywgYnV0IGN1c3RvbSBvbkVycm9yIGZ1bmN0aW9uc1xuICAgICAgLy8gbWlnaHQgaGF2ZSBvdGhlciByZWFzb25zIGZvciB3YW50aW5nIHRvIHByZXZlbnQgdGhlIGRlZmF1bHRcbiAgICAgIC8vIGJlaGF2aW9yIGJ5IHJldHVybmluZyBmYWxzZS5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gVGhyb3cgZXJyb3JzIHdpbGwgYmUgcGFzc2VkIHRvIG9ic2VydmVyLmVycm9yLlxuICAgIHRocm93IGVycm9yO1xuICB9XG5cbiAgcHVibGljIHNldE9uRXJyb3IoZm46IEFwb2xsb0xpbmtbXCJvbkVycm9yXCJdKTogdGhpcyB7XG4gICAgdGhpcy5vbkVycm9yID0gZm47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiIsImltcG9ydCB7IEdyYXBoUUxSZXF1ZXN0LCBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9wZXJhdGlvbihcbiAgc3RhcnRpbmc6IGFueSxcbiAgb3BlcmF0aW9uOiBHcmFwaFFMUmVxdWVzdCxcbik6IE9wZXJhdGlvbiB7XG4gIGxldCBjb250ZXh0ID0geyAuLi5zdGFydGluZyB9O1xuICBjb25zdCBzZXRDb250ZXh0ID0gKG5leHQ6IGFueSkgPT4ge1xuICAgIGlmICh0eXBlb2YgbmV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29udGV4dCA9IHsgLi4uY29udGV4dCwgLi4ubmV4dChjb250ZXh0KSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0ID0geyAuLi5jb250ZXh0LCAuLi5uZXh0IH07XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXRDb250ZXh0ID0gKCkgPT4gKHsgLi4uY29udGV4dCB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3BlcmF0aW9uLCAnc2V0Q29udGV4dCcsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogc2V0Q29udGV4dCxcbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgJ2dldENvbnRleHQnLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWU6IGdldENvbnRleHQsXG4gIH0pO1xuXG4gIHJldHVybiBvcGVyYXRpb24gYXMgT3BlcmF0aW9uO1xufVxuIiwiaW1wb3J0IHsgR3JhcGhRTFJlcXVlc3QsIE9wZXJhdGlvbiB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgZ2V0T3BlcmF0aW9uTmFtZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1PcGVyYXRpb24ob3BlcmF0aW9uOiBHcmFwaFFMUmVxdWVzdCk6IEdyYXBoUUxSZXF1ZXN0IHtcbiAgY29uc3QgdHJhbnNmb3JtZWRPcGVyYXRpb246IEdyYXBoUUxSZXF1ZXN0ID0ge1xuICAgIHZhcmlhYmxlczogb3BlcmF0aW9uLnZhcmlhYmxlcyB8fCB7fSxcbiAgICBleHRlbnNpb25zOiBvcGVyYXRpb24uZXh0ZW5zaW9ucyB8fCB7fSxcbiAgICBvcGVyYXRpb25OYW1lOiBvcGVyYXRpb24ub3BlcmF0aW9uTmFtZSxcbiAgICBxdWVyeTogb3BlcmF0aW9uLnF1ZXJ5LFxuICB9O1xuXG4gIC8vIEJlc3QgZ3Vlc3MgYXQgYW4gb3BlcmF0aW9uIG5hbWVcbiAgaWYgKCF0cmFuc2Zvcm1lZE9wZXJhdGlvbi5vcGVyYXRpb25OYW1lKSB7XG4gICAgdHJhbnNmb3JtZWRPcGVyYXRpb24ub3BlcmF0aW9uTmFtZSA9XG4gICAgICB0eXBlb2YgdHJhbnNmb3JtZWRPcGVyYXRpb24ucXVlcnkgIT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0T3BlcmF0aW9uTmFtZSh0cmFuc2Zvcm1lZE9wZXJhdGlvbi5xdWVyeSkgfHwgdW5kZWZpbmVkXG4gICAgICAgIDogJyc7XG4gIH1cblxuICByZXR1cm4gdHJhbnNmb3JtZWRPcGVyYXRpb24gYXMgT3BlcmF0aW9uO1xufVxuIiwiaW1wb3J0IHsgSW52YXJpYW50RXJyb3IgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5pbXBvcnQgeyBHcmFwaFFMUmVxdWVzdCB9IGZyb20gJy4uL2NvcmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVPcGVyYXRpb24ob3BlcmF0aW9uOiBHcmFwaFFMUmVxdWVzdCk6IEdyYXBoUUxSZXF1ZXN0IHtcbiAgY29uc3QgT1BFUkFUSU9OX0ZJRUxEUyA9IFtcbiAgICAncXVlcnknLFxuICAgICdvcGVyYXRpb25OYW1lJyxcbiAgICAndmFyaWFibGVzJyxcbiAgICAnZXh0ZW5zaW9ucycsXG4gICAgJ2NvbnRleHQnLFxuICBdO1xuICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMob3BlcmF0aW9uKSkge1xuICAgIGlmIChPUEVSQVRJT05fRklFTERTLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBJbnZhcmlhbnRFcnJvcihgaWxsZWdhbCBhcmd1bWVudDogJHtrZXl9YCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9wZXJhdGlvbjtcbn1cbiIsImltcG9ydCB7IE9wZXJhdGlvbiB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgdGhyb3dTZXJ2ZXJFcnJvciB9IGZyb20gJy4uL3V0aWxzJztcblxuY29uc3QgeyBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuZXhwb3J0IHR5cGUgU2VydmVyUGFyc2VFcnJvciA9IEVycm9yICYge1xuICByZXNwb25zZTogUmVzcG9uc2U7XG4gIHN0YXR1c0NvZGU6IG51bWJlcjtcbiAgYm9keVRleHQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlKFxuICBvcGVyYXRpb25zOiBPcGVyYXRpb24gfCBPcGVyYXRpb25bXSxcbikge1xuICByZXR1cm4gKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2VcbiAgICAudGV4dCgpXG4gICAgLnRoZW4oYm9keVRleHQgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keVRleHQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlRXJyb3IgPSBlcnIgYXMgU2VydmVyUGFyc2VFcnJvcjtcbiAgICAgICAgcGFyc2VFcnJvci5uYW1lID0gJ1NlcnZlclBhcnNlRXJyb3InO1xuICAgICAgICBwYXJzZUVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHBhcnNlRXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgcGFyc2VFcnJvci5ib2R5VGV4dCA9IGJvZHlUZXh0O1xuICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDMwMCkge1xuICAgICAgICAvLyBOZXR3b3JrIGVycm9yXG4gICAgICAgIHRocm93U2VydmVyRXJyb3IoXG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIGBSZXNwb25zZSBub3Qgc3VjY2Vzc2Z1bDogUmVjZWl2ZWQgc3RhdHVzIGNvZGUgJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhQXJyYXkuaXNBcnJheShyZXN1bHQpICYmXG4gICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgJ2RhdGEnKSAmJlxuICAgICAgICAhaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsICdlcnJvcnMnKVxuICAgICAgKSB7XG4gICAgICAgIC8vIERhdGEgZXJyb3JcbiAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcihcbiAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgYFNlcnZlciByZXNwb25zZSB3YXMgbWlzc2luZyBmb3IgcXVlcnkgJyR7XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KG9wZXJhdGlvbnMpXG4gICAgICAgICAgICAgID8gb3BlcmF0aW9ucy5tYXAob3AgPT4gb3Aub3BlcmF0aW9uTmFtZSlcbiAgICAgICAgICAgICAgOiBvcGVyYXRpb25zLm9wZXJhdGlvbk5hbWVcbiAgICAgICAgICB9Jy5gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbn1cbiIsImltcG9ydCB7IEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuZXhwb3J0IHR5cGUgQ2xpZW50UGFyc2VFcnJvciA9IEludmFyaWFudEVycm9yICYge1xuICBwYXJzZUVycm9yOiBFcnJvcjtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciA9IChwOiBhbnksIGxhYmVsOiBzdHJpbmcpID0+IHtcbiAgbGV0IHNlcmlhbGl6ZWQ7XG4gIHRyeSB7XG4gICAgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc3QgcGFyc2VFcnJvciA9IG5ldyBJbnZhcmlhbnRFcnJvcihcbiAgICAgIGBOZXR3b3JrIHJlcXVlc3QgZmFpbGVkLiAke2xhYmVsfSBpcyBub3Qgc2VyaWFsaXphYmxlOiAke2UubWVzc2FnZX1gLFxuICAgICkgYXMgQ2xpZW50UGFyc2VFcnJvcjtcbiAgICBwYXJzZUVycm9yLnBhcnNlRXJyb3IgPSBlO1xuICAgIHRocm93IHBhcnNlRXJyb3I7XG4gIH1cbiAgcmV0dXJuIHNlcmlhbGl6ZWQ7XG59O1xuIiwiaW1wb3J0IHsgcHJpbnQgfSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHsgT3BlcmF0aW9uIH0gZnJvbSAnLi4vY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXJpRnVuY3Rpb24ge1xuICAob3BlcmF0aW9uOiBPcGVyYXRpb24pOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9keSB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBvcGVyYXRpb25OYW1lPzogc3RyaW5nO1xuICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBleHRlbnNpb25zPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIdHRwT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgVVJJIHRvIHVzZSB3aGVuIGZldGNoaW5nIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvICcvZ3JhcGhxbCcuXG4gICAqL1xuICB1cmk/OiBzdHJpbmcgfCBVcmlGdW5jdGlvbjtcblxuICAvKipcbiAgICogUGFzc2VzIHRoZSBleHRlbnNpb25zIGZpZWxkIHRvIHlvdXIgZ3JhcGhxbCBzZXJ2ZXIuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKi9cbiAgaW5jbHVkZUV4dGVuc2lvbnM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBIGBmZXRjaGAtY29tcGF0aWJsZSBBUEkgdG8gdXNlIHdoZW4gbWFraW5nIHJlcXVlc3RzLlxuICAgKi9cbiAgZmV0Y2g/OiBXaW5kb3dPcldvcmtlckdsb2JhbFNjb3BlWydmZXRjaCddO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHZhbHVlcyB0byBiZSBzZW50IGFzIGhlYWRlcnMgb24gdGhlIHJlcXVlc3QuXG4gICAqL1xuICBoZWFkZXJzPzogYW55O1xuXG4gIC8qKlxuICAgKiBUaGUgY3JlZGVudGlhbHMgcG9saWN5IHlvdSB3YW50IHRvIHVzZSBmb3IgdGhlIGZldGNoIGNhbGwuXG4gICAqL1xuICBjcmVkZW50aWFscz86IHN0cmluZztcblxuICAvKipcbiAgICogQW55IG92ZXJyaWRlcyBvZiB0aGUgZmV0Y2ggb3B0aW9ucyBhcmd1bWVudCB0byBwYXNzIHRvIHRoZSBmZXRjaCBjYWxsLlxuICAgKi9cbiAgZmV0Y2hPcHRpb25zPzogYW55O1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdXNlIHRoZSBIVFRQIEdFVCBtZXRob2QgZm9yIHF1ZXJ5IG9wZXJhdGlvbnMuIE11dGF0aW9uc1xuICAgKiB3aWxsIHN0aWxsIHVzZSB0aGUgbWV0aG9kIHNwZWNpZmllZCBpbiBmZXRjaE9wdGlvbnMubWV0aG9kICh3aGljaCBkZWZhdWx0c1xuICAgKiB0byBQT1NUKS5cbiAgICovXG4gIHVzZUdFVEZvclF1ZXJpZXM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2Ygc3RyaXBwaW5nIHVudXNlZCB2YXJpYWJsZXNcbiAgICogZnJvbSB0aGUgcmVxdWVzdCB3aWxsIGJlIGRpc2FibGVkLlxuICAgKlxuICAgKiBVbnVzZWQgdmFyaWFibGVzIGFyZSBsaWtlbHkgdG8gdHJpZ2dlciBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9uIGVycm9ycyxcbiAgICogcGVyIGh0dHBzOi8vc3BlYy5ncmFwaHFsLm9yZy9kcmFmdC8jc2VjLUFsbC1WYXJpYWJsZXMtVXNlZCwgYnV0IHRoaXNcbiAgICogaW5jbHVkZVVudXNlZFZhcmlhYmxlcyBvcHRpb24gY2FuIGJlIHVzZWZ1bCBpZiB5b3VyIHNlcnZlciBkZXZpYXRlc1xuICAgKiBmcm9tIHRoZSBHcmFwaFFMIHNwZWNpZmljYXRpb24gYnkgbm90IHN0cmljdGx5IGVuZm9yY2luZyB0aGF0IHJ1bGUuXG4gICAqL1xuICBpbmNsdWRlVW51c2VkVmFyaWFibGVzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIdHRwUXVlcnlPcHRpb25zIHtcbiAgaW5jbHVkZVF1ZXJ5PzogYm9vbGVhbjtcbiAgaW5jbHVkZUV4dGVuc2lvbnM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBDb25maWcge1xuICBodHRwPzogSHR0cFF1ZXJ5T3B0aW9ucztcbiAgb3B0aW9ucz86IGFueTtcbiAgaGVhZGVycz86IGFueTtcbiAgY3JlZGVudGlhbHM/OiBhbnk7XG59XG5cbmNvbnN0IGRlZmF1bHRIdHRwT3B0aW9uczogSHR0cFF1ZXJ5T3B0aW9ucyA9IHtcbiAgaW5jbHVkZVF1ZXJ5OiB0cnVlLFxuICBpbmNsdWRlRXh0ZW5zaW9uczogZmFsc2UsXG59O1xuXG5jb25zdCBkZWZhdWx0SGVhZGVycyA9IHtcbiAgLy8gaGVhZGVycyBhcmUgY2FzZSBpbnNlbnNpdGl2ZSAoaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUyNTkwMDQpXG4gIGFjY2VwdDogJyovKicsXG4gICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG59O1xuXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgbWV0aG9kOiAnUE9TVCcsXG59O1xuXG5leHBvcnQgY29uc3QgZmFsbGJhY2tIdHRwQ29uZmlnID0ge1xuICBodHRwOiBkZWZhdWx0SHR0cE9wdGlvbnMsXG4gIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxuICBvcHRpb25zOiBkZWZhdWx0T3B0aW9ucyxcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHkgPSAoXG4gIG9wZXJhdGlvbjogT3BlcmF0aW9uLFxuICBmYWxsYmFja0NvbmZpZzogSHR0cENvbmZpZyxcbiAgLi4uY29uZmlnczogQXJyYXk8SHR0cENvbmZpZz5cbikgPT4ge1xuICBsZXQgb3B0aW9uczogSHR0cENvbmZpZyAmIFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgLi4uZmFsbGJhY2tDb25maWcub3B0aW9ucyxcbiAgICBoZWFkZXJzOiBmYWxsYmFja0NvbmZpZy5oZWFkZXJzLFxuICAgIGNyZWRlbnRpYWxzOiBmYWxsYmFja0NvbmZpZy5jcmVkZW50aWFscyxcbiAgfTtcbiAgbGV0IGh0dHA6IEh0dHBRdWVyeU9wdGlvbnMgPSBmYWxsYmFja0NvbmZpZy5odHRwIHx8IHt9O1xuXG4gIC8qXG4gICAqIHVzZSB0aGUgcmVzdCBvZiB0aGUgY29uZmlncyB0byBwb3B1bGF0ZSB0aGUgb3B0aW9uc1xuICAgKiBjb25maWdzIGxhdGVyIGluIHRoZSBsaXN0IHdpbGwgb3ZlcndyaXRlIGVhcmxpZXIgZmllbGRzXG4gICAqL1xuICBjb25maWdzLmZvckVhY2goY29uZmlnID0+IHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIC4uLmNvbmZpZy5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICAgIC4uLmNvbmZpZy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9O1xuICAgIGlmIChjb25maWcuY3JlZGVudGlhbHMpIG9wdGlvbnMuY3JlZGVudGlhbHMgPSBjb25maWcuY3JlZGVudGlhbHM7XG5cbiAgICBodHRwID0ge1xuICAgICAgLi4uaHR0cCxcbiAgICAgIC4uLmNvbmZpZy5odHRwLFxuICAgIH07XG4gIH0pO1xuXG4gIC8vVGhlIGJvZHkgZGVwZW5kcyBvbiB0aGUgaHR0cCBvcHRpb25zXG4gIGNvbnN0IHsgb3BlcmF0aW9uTmFtZSwgZXh0ZW5zaW9ucywgdmFyaWFibGVzLCBxdWVyeSB9ID0gb3BlcmF0aW9uO1xuICBjb25zdCBib2R5OiBCb2R5ID0geyBvcGVyYXRpb25OYW1lLCB2YXJpYWJsZXMgfTtcblxuICBpZiAoaHR0cC5pbmNsdWRlRXh0ZW5zaW9ucykgKGJvZHkgYXMgYW55KS5leHRlbnNpb25zID0gZXh0ZW5zaW9ucztcblxuICAvLyBub3Qgc2VuZGluZyB0aGUgcXVlcnkgKGkuZSBwZXJzaXN0ZWQgcXVlcmllcylcbiAgaWYgKGh0dHAuaW5jbHVkZVF1ZXJ5KSAoYm9keSBhcyBhbnkpLnF1ZXJ5ID0gcHJpbnQocXVlcnkpO1xuXG4gIHJldHVybiB7XG4gICAgb3B0aW9ucyxcbiAgICBib2R5LFxuICB9O1xufTtcbiIsImltcG9ydCB7IHZpc2l0LCBEZWZpbml0aW9uTm9kZSwgVmFyaWFibGVEZWZpbml0aW9uTm9kZSB9IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSAnLi4vY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IHNlcmlhbGl6ZUZldGNoUGFyYW1ldGVyIH0gZnJvbSAnLi9zZXJpYWxpemVGZXRjaFBhcmFtZXRlcic7XG5pbXBvcnQgeyBzZWxlY3RVUkkgfSBmcm9tICcuL3NlbGVjdFVSSSc7XG5pbXBvcnQgeyBwYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlIH0gZnJvbSAnLi9wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlJztcbmltcG9ydCB7IGNoZWNrRmV0Y2hlciB9IGZyb20gJy4vY2hlY2tGZXRjaGVyJztcbmltcG9ydCB7XG4gIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keSxcbiAgZmFsbGJhY2tIdHRwQ29uZmlnLFxuICBIdHRwT3B0aW9uc1xufSBmcm9tICcuL3NlbGVjdEh0dHBPcHRpb25zQW5kQm9keSc7XG5pbXBvcnQgeyBjcmVhdGVTaWduYWxJZlN1cHBvcnRlZCB9IGZyb20gJy4vY3JlYXRlU2lnbmFsSWZTdXBwb3J0ZWQnO1xuaW1wb3J0IHsgcmV3cml0ZVVSSUZvckdFVCB9IGZyb20gJy4vcmV3cml0ZVVSSUZvckdFVCc7XG5pbXBvcnQgeyBmcm9tRXJyb3IgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVIdHRwTGluayA9IChsaW5rT3B0aW9uczogSHR0cE9wdGlvbnMgPSB7fSkgPT4ge1xuICBsZXQge1xuICAgIHVyaSA9ICcvZ3JhcGhxbCcsXG4gICAgLy8gdXNlIGRlZmF1bHQgZ2xvYmFsIGZldGNoIGlmIG5vdGhpbmcgcGFzc2VkIGluXG4gICAgZmV0Y2g6IGZldGNoZXIsXG4gICAgaW5jbHVkZUV4dGVuc2lvbnMsXG4gICAgdXNlR0VURm9yUXVlcmllcyxcbiAgICBpbmNsdWRlVW51c2VkVmFyaWFibGVzID0gZmFsc2UsXG4gICAgLi4ucmVxdWVzdE9wdGlvbnNcbiAgfSA9IGxpbmtPcHRpb25zO1xuXG4gIC8vIGRldiB3YXJuaW5ncyB0byBlbnN1cmUgZmV0Y2ggaXMgcHJlc2VudFxuICBjaGVja0ZldGNoZXIoZmV0Y2hlcik7XG5cbiAgLy9mZXRjaGVyIGlzIHNldCBoZXJlIHJhdGhlciB0aGFuIHRoZSBkZXN0cnVjdHVyaW5nIHRvIGVuc3VyZSBmZXRjaCBpc1xuICAvL2RlY2xhcmVkIGJlZm9yZSByZWZlcmVuY2luZyBpdC4gUmVmZXJlbmNlIGluIHRoZSBkZXN0cnVjdHVyaW5nIHdvdWxkIGNhdXNlXG4gIC8vYSBSZWZlcmVuY2VFcnJvclxuICBpZiAoIWZldGNoZXIpIHtcbiAgICBmZXRjaGVyID0gZmV0Y2g7XG4gIH1cblxuICBjb25zdCBsaW5rQ29uZmlnID0ge1xuICAgIGh0dHA6IHsgaW5jbHVkZUV4dGVuc2lvbnMgfSxcbiAgICBvcHRpb25zOiByZXF1ZXN0T3B0aW9ucy5mZXRjaE9wdGlvbnMsXG4gICAgY3JlZGVudGlhbHM6IHJlcXVlc3RPcHRpb25zLmNyZWRlbnRpYWxzLFxuICAgIGhlYWRlcnM6IHJlcXVlc3RPcHRpb25zLmhlYWRlcnMsXG4gIH07XG5cbiAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKG9wZXJhdGlvbiA9PiB7XG4gICAgbGV0IGNob3NlblVSSSA9IHNlbGVjdFVSSShvcGVyYXRpb24sIHVyaSk7XG5cbiAgICBjb25zdCBjb250ZXh0ID0gb3BlcmF0aW9uLmdldENvbnRleHQoKTtcblxuICAgIC8vIGBhcG9sbG9ncmFwaHFsLWNsaWVudC0qYCBoZWFkZXJzIGFyZSBhdXRvbWF0aWNhbGx5IHNldCBpZiBhXG4gICAgLy8gYGNsaWVudEF3YXJlbmVzc2Agb2JqZWN0IGlzIGZvdW5kIGluIHRoZSBjb250ZXh0LiBUaGVzZSBoZWFkZXJzIGFyZVxuICAgIC8vIHNldCBmaXJzdCwgZm9sbG93ZWQgYnkgdGhlIHJlc3Qgb2YgdGhlIGhlYWRlcnMgcHVsbGVkIGZyb21cbiAgICAvLyBgY29udGV4dC5oZWFkZXJzYC4gSWYgZGVzaXJlZCwgYGFwb2xsb2dyYXBocWwtY2xpZW50LSpgIGhlYWRlcnMgc2V0IGJ5XG4gICAgLy8gdGhlIGBjbGllbnRBd2FyZW5lc3NgIG9iamVjdCBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICAgIC8vIGBhcG9sbG9ncmFwaHFsLWNsaWVudC0qYCBoZWFkZXJzIHNldCBpbiBgY29udGV4dC5oZWFkZXJzYC5cbiAgICBjb25zdCBjbGllbnRBd2FyZW5lc3NIZWFkZXJzOiB7XG4gICAgICAnYXBvbGxvZ3JhcGhxbC1jbGllbnQtbmFtZSc/OiBzdHJpbmc7XG4gICAgICAnYXBvbGxvZ3JhcGhxbC1jbGllbnQtdmVyc2lvbic/OiBzdHJpbmc7XG4gICAgfSA9IHt9O1xuXG4gICAgaWYgKGNvbnRleHQuY2xpZW50QXdhcmVuZXNzKSB7XG4gICAgICBjb25zdCB7IG5hbWUsIHZlcnNpb24gfSA9IGNvbnRleHQuY2xpZW50QXdhcmVuZXNzO1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgY2xpZW50QXdhcmVuZXNzSGVhZGVyc1snYXBvbGxvZ3JhcGhxbC1jbGllbnQtbmFtZSddID0gbmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGNsaWVudEF3YXJlbmVzc0hlYWRlcnNbJ2Fwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24nXSA9IHZlcnNpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29udGV4dEhlYWRlcnMgPSB7IC4uLmNsaWVudEF3YXJlbmVzc0hlYWRlcnMsIC4uLmNvbnRleHQuaGVhZGVycyB9O1xuXG4gICAgY29uc3QgY29udGV4dENvbmZpZyA9IHtcbiAgICAgIGh0dHA6IGNvbnRleHQuaHR0cCxcbiAgICAgIG9wdGlvbnM6IGNvbnRleHQuZmV0Y2hPcHRpb25zLFxuICAgICAgY3JlZGVudGlhbHM6IGNvbnRleHQuY3JlZGVudGlhbHMsXG4gICAgICBoZWFkZXJzOiBjb250ZXh0SGVhZGVycyxcbiAgICB9O1xuXG4gICAgLy91c2VzIGZhbGxiYWNrLCBsaW5rLCBhbmQgdGhlbiBjb250ZXh0IHRvIGJ1aWxkIG9wdGlvbnNcbiAgICBjb25zdCB7IG9wdGlvbnMsIGJvZHkgfSA9IHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keShcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIGZhbGxiYWNrSHR0cENvbmZpZyxcbiAgICAgIGxpbmtDb25maWcsXG4gICAgICBjb250ZXh0Q29uZmlnLFxuICAgICk7XG5cbiAgICBpZiAoYm9keS52YXJpYWJsZXMgJiYgIWluY2x1ZGVVbnVzZWRWYXJpYWJsZXMpIHtcbiAgICAgIGNvbnN0IHVudXNlZE5hbWVzID0gbmV3IFNldChPYmplY3Qua2V5cyhib2R5LnZhcmlhYmxlcykpO1xuICAgICAgdmlzaXQob3BlcmF0aW9uLnF1ZXJ5LCB7XG4gICAgICAgIFZhcmlhYmxlKG5vZGUsIF9rZXksIHBhcmVudCkge1xuICAgICAgICAgIC8vIEEgdmFyaWFibGUgdHlwZSBkZWZpbml0aW9uIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBxdWVyeSBpcyBub3RcbiAgICAgICAgICAvLyBlbm91Z2ggdG8gc2lsZW5jZSBzZXJ2ZXItc2lkZSBlcnJvcnMgYWJvdXQgdGhlIHZhcmlhYmxlIGJlaW5nXG4gICAgICAgICAgLy8gdW51c2VkLCBzbyB2YXJpYWJsZSBkZWZpbml0aW9ucyBkbyBub3QgY291bnQgYXMgdXNhZ2UuXG4gICAgICAgICAgLy8gaHR0cHM6Ly9zcGVjLmdyYXBocWwub3JnL2RyYWZ0LyNzZWMtQWxsLVZhcmlhYmxlcy1Vc2VkXG4gICAgICAgICAgaWYgKHBhcmVudCAmJiAocGFyZW50IGFzIFZhcmlhYmxlRGVmaW5pdGlvbk5vZGUpLmtpbmQgIT09ICdWYXJpYWJsZURlZmluaXRpb24nKSB7XG4gICAgICAgICAgICB1bnVzZWROYW1lcy5kZWxldGUobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGlmICh1bnVzZWROYW1lcy5zaXplKSB7XG4gICAgICAgIC8vIE1ha2UgYSBzaGFsbG93IGNvcHkgb2YgYm9keS52YXJpYWJsZXMgKHdpdGgga2V5cyBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBvcmRlcikgYW5kIHRoZW4gZGVsZXRlIHVudXNlZCB2YXJpYWJsZXMgZnJvbSB0aGUgY29weS5cbiAgICAgICAgYm9keS52YXJpYWJsZXMgPSB7IC4uLmJvZHkudmFyaWFibGVzIH07XG4gICAgICAgIHVudXNlZE5hbWVzLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgICAgZGVsZXRlIGJvZHkudmFyaWFibGVzIVtuYW1lXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGNvbnRyb2xsZXI6IGFueTtcbiAgICBpZiAoIShvcHRpb25zIGFzIGFueSkuc2lnbmFsKSB7XG4gICAgICBjb25zdCB7IGNvbnRyb2xsZXI6IF9jb250cm9sbGVyLCBzaWduYWwgfSA9IGNyZWF0ZVNpZ25hbElmU3VwcG9ydGVkKCk7XG4gICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7XG4gICAgICBpZiAoY29udHJvbGxlcikgKG9wdGlvbnMgYXMgYW55KS5zaWduYWwgPSBzaWduYWw7XG4gICAgfVxuXG4gICAgLy8gSWYgcmVxdWVzdGVkLCBzZXQgbWV0aG9kIHRvIEdFVCBpZiB0aGVyZSBhcmUgbm8gbXV0YXRpb25zLlxuICAgIGNvbnN0IGRlZmluaXRpb25Jc011dGF0aW9uID0gKGQ6IERlZmluaXRpb25Ob2RlKSA9PiB7XG4gICAgICByZXR1cm4gZC5raW5kID09PSAnT3BlcmF0aW9uRGVmaW5pdGlvbicgJiYgZC5vcGVyYXRpb24gPT09ICdtdXRhdGlvbic7XG4gICAgfTtcbiAgICBpZiAoXG4gICAgICB1c2VHRVRGb3JRdWVyaWVzICYmXG4gICAgICAhb3BlcmF0aW9uLnF1ZXJ5LmRlZmluaXRpb25zLnNvbWUoZGVmaW5pdGlvbklzTXV0YXRpb24pXG4gICAgKSB7XG4gICAgICBvcHRpb25zLm1ldGhvZCA9ICdHRVQnO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIGNvbnN0IHsgbmV3VVJJLCBwYXJzZUVycm9yIH0gPSByZXdyaXRlVVJJRm9yR0VUKGNob3NlblVSSSwgYm9keSk7XG4gICAgICBpZiAocGFyc2VFcnJvcikge1xuICAgICAgICByZXR1cm4gZnJvbUVycm9yKHBhcnNlRXJyb3IpO1xuICAgICAgfVxuICAgICAgY2hvc2VuVVJJID0gbmV3VVJJO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICAob3B0aW9ucyBhcyBhbnkpLmJvZHkgPSBzZXJpYWxpemVGZXRjaFBhcmFtZXRlcihib2R5LCAnUGF5bG9hZCcpO1xuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICByZXR1cm4gZnJvbUVycm9yKHBhcnNlRXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShvYnNlcnZlciA9PiB7XG4gICAgICBmZXRjaGVyIShjaG9zZW5VUkksIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICBvcGVyYXRpb24uc2V0Q29udGV4dCh7IHJlc3BvbnNlIH0pO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZShvcGVyYXRpb24pKVxuICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgIC8vIHdlIGhhdmUgZGF0YSBhbmQgY2FuIHNlbmQgaXQgdG8gYmFjayB1cCB0aGUgbGluayBjaGFpblxuICAgICAgICAgIG9ic2VydmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIC8vIGZldGNoIHdhcyBjYW5jZWxsZWQgc28gaXQncyBhbHJlYWR5IGJlZW4gY2xlYW5lZCB1cCBpbiB0aGUgdW5zdWJzY3JpYmVcbiAgICAgICAgICBpZiAoZXJyLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgICAgIC8vIGlmIGl0IGlzIGEgbmV0d29yayBlcnJvciwgQlVUIHRoZXJlIGlzIGdyYXBocWwgcmVzdWx0IGluZm9cbiAgICAgICAgICAvLyBmaXJlIHRoZSBuZXh0IG9ic2VydmVyIGJlZm9yZSBjYWxsaW5nIGVycm9yXG4gICAgICAgICAgLy8gdGhpcyBnaXZlcyBhcG9sbG8tY2xpZW50IChhbmQgcmVhY3QtYXBvbGxvKSB0aGUgYGdyYXBocWxFcnJvcnNgIGFuZCBgbmV0d29yRXJyb3JzYFxuICAgICAgICAgIC8vIHRvIHBhc3MgdG8gVUlcbiAgICAgICAgICAvLyB0aGlzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiB3ZSAqYWxzbyogaGF2ZSBkYXRhIGFzIHBhcnQgb2YgdGhlIHJlc3BvbnNlIGtleSBwZXJcbiAgICAgICAgICAvLyB0aGUgc3BlY1xuICAgICAgICAgIGlmIChlcnIucmVzdWx0ICYmIGVyci5yZXN1bHQuZXJyb3JzICYmIGVyci5yZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgY2FsbCBuZXh0LCB0aGUgVUkgY2FuIG9ubHkgc2hvdyBuZXR3b3JrRXJyb3IgYmVjYXVzZSBBQyBkaWRuJ3RcbiAgICAgICAgICAgIC8vIGdldCBhbnkgZ3JhcGhxbEVycm9yc1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBncmFwaHFsIGV4ZWN1dGlvbiByZXN1bHQgaW5mbyAoaS5lIGVycm9ycyBhbmQgcG9zc2libHkgZGF0YSlcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYmVjYXVzZSB0aGVyZSBpcyBubyBmb3JtYWwgc3BlYyBob3cgZXJyb3JzIHNob3VsZCB0cmFuc2xhdGUgdG9cbiAgICAgICAgICAgIC8vIGh0dHAgc3RhdHVzIGNvZGVzLiBTbyBhbiBhdXRoIGVycm9yICg0MDEpIGNvdWxkIGhhdmUgYm90aCBkYXRhXG4gICAgICAgICAgICAvLyBmcm9tIGEgcHVibGljIGZpZWxkLCBlcnJvcnMgZnJvbSBhIHByaXZhdGUgZmllbGQsIGFuZCBhIHN0YXR1cyBvZiA0MDFcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICB1c2VyIHsgLy8gdGhpcyB3aWxsIGhhdmUgZXJyb3JzXG4gICAgICAgICAgICAvLyAgICBmaXJzdE5hbWVcbiAgICAgICAgICAgIC8vICB9XG4gICAgICAgICAgICAvLyAgcHJvZHVjdHMgeyAvLyB0aGlzIGlzIHB1YmxpYyBzbyB3aWxsIGhhdmUgZGF0YVxuICAgICAgICAgICAgLy8gICAgY29zdFxuICAgICAgICAgICAgLy8gIH1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyB0aGUgcmVzdWx0IG9mIGFib3ZlICpjb3VsZCogbG9vayBsaWtlIHRoaXM6XG4gICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAvLyAgIGRhdGE6IHsgcHJvZHVjdHM6IFt7IGNvc3Q6IFwiJDEwXCIgfV0gfSxcbiAgICAgICAgICAgIC8vICAgZXJyb3JzOiBbe1xuICAgICAgICAgICAgLy8gICAgICBtZXNzYWdlOiAneW91ciBzZXNzaW9uIGhhcyB0aW1lZCBvdXQnLFxuICAgICAgICAgICAgLy8gICAgICBwYXRoOiBbXVxuICAgICAgICAgICAgLy8gICB9XVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gc3RhdHVzIGNvZGUgb2YgYWJvdmUgd291bGQgYmUgYSA0MDFcbiAgICAgICAgICAgIC8vIGluIHRoZSBVSSB5b3Ugd2FudCB0byBzaG93IGRhdGEgd2hlcmUgeW91IGNhbiwgZXJyb3JzIGFzIGRhdGEgd2hlcmUgeW91IGNhblxuICAgICAgICAgICAgLy8gYW5kIHVzZSBjb3JyZWN0IGh0dHAgc3RhdHVzIGNvZGVzXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGVyci5yZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgLy8gWFhYIHN1cHBvcnQgY2FuY2VsaW5nIHRoaXMgcmVxdWVzdFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzA5L2Fib3J0YWJsZS1mZXRjaFxuICAgICAgICBpZiAoY29udHJvbGxlcikgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgSW52YXJpYW50RXJyb3IgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5leHBvcnQgY29uc3QgY2hlY2tGZXRjaGVyID0gKGZldGNoZXI6IFdpbmRvd09yV29ya2VyR2xvYmFsU2NvcGVbJ2ZldGNoJ10gfCB1bmRlZmluZWQpID0+IHtcbiAgaWYgKCFmZXRjaGVyICYmIHR5cGVvZiBmZXRjaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoYFxuXCJmZXRjaFwiIGhhcyBub3QgYmVlbiBmb3VuZCBnbG9iYWxseSBhbmQgbm8gZmV0Y2hlciBoYXMgYmVlbiBcXFxuY29uZmlndXJlZC4gVG8gZml4IHRoaXMsIGluc3RhbGwgYSBmZXRjaCBwYWNrYWdlIChsaWtlIFxcXG5odHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9jcm9zcy1mZXRjaCksIGluc3RhbnRpYXRlIHRoZSBcXFxuZmV0Y2hlciwgYW5kIHBhc3MgaXQgaW50byB5b3VyIEh0dHBMaW5rIGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcblxuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgSHR0cExpbmsgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XG5jb25zdCBjbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHtcbiAgbGluazogbmV3IEh0dHBMaW5rKHsgdXJpOiAnL2dyYXBocWwnLCBmZXRjaCB9KVxufSk7XG4gICAgYCk7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFVSSSA9IChcbiAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gIGZhbGxiYWNrVVJJPzogc3RyaW5nIHwgKChvcGVyYXRpb246IE9wZXJhdGlvbikgPT4gc3RyaW5nKSxcbikgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gb3BlcmF0aW9uLmdldENvbnRleHQoKTtcbiAgY29uc3QgY29udGV4dFVSSSA9IGNvbnRleHQudXJpO1xuXG4gIGlmIChjb250ZXh0VVJJKSB7XG4gICAgcmV0dXJuIGNvbnRleHRVUkk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrVVJJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrVVJJKG9wZXJhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChmYWxsYmFja1VSSSBhcyBzdHJpbmcpIHx8ICcvZ3JhcGhxbCc7XG4gIH1cbn07XG4iLCJleHBvcnQgY29uc3QgY3JlYXRlU2lnbmFsSWZTdXBwb3J0ZWQgPSAoKSA9PiB7XG4gIGlmICh0eXBlb2YgQWJvcnRDb250cm9sbGVyID09PSAndW5kZWZpbmVkJylcbiAgICByZXR1cm4geyBjb250cm9sbGVyOiBmYWxzZSwgc2lnbmFsOiBmYWxzZSB9O1xuXG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gIGNvbnN0IHNpZ25hbCA9IGNvbnRyb2xsZXIuc2lnbmFsO1xuICByZXR1cm4geyBjb250cm9sbGVyLCBzaWduYWwgfTtcbn07XG4iLCJpbXBvcnQgeyBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciB9IGZyb20gJy4vc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXInO1xuaW1wb3J0IHsgQm9keSB9IGZyb20gJy4vc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5JztcblxuLy8gRm9yIEdFVCBvcGVyYXRpb25zLCByZXR1cm5zIHRoZSBnaXZlbiBVUkkgcmV3cml0dGVuIHdpdGggcGFyYW1ldGVycywgb3IgYVxuLy8gcGFyc2UgZXJyb3IuXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZVVSSUZvckdFVChjaG9zZW5VUkk6IHN0cmluZywgYm9keTogQm9keSkge1xuICAvLyBJbXBsZW1lbnQgdGhlIHN0YW5kYXJkIEhUVFAgR0VUIHNlcmlhbGl6YXRpb24sIHBsdXMgJ2V4dGVuc2lvbnMnLiBOb3RlXG4gIC8vIHRoZSBleHRyYSBsZXZlbCBvZiBKU09OIHNlcmlhbGl6YXRpb24hXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBhZGRRdWVyeVBhcmFtID0gKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgcXVlcnlQYXJhbXMucHVzaChgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gKTtcbiAgfTtcblxuICBpZiAoJ3F1ZXJ5JyBpbiBib2R5KSB7XG4gICAgYWRkUXVlcnlQYXJhbSgncXVlcnknLCBib2R5LnF1ZXJ5ISk7XG4gIH1cbiAgaWYgKGJvZHkub3BlcmF0aW9uTmFtZSkge1xuICAgIGFkZFF1ZXJ5UGFyYW0oJ29wZXJhdGlvbk5hbWUnLCBib2R5Lm9wZXJhdGlvbk5hbWUpO1xuICB9XG4gIGlmIChib2R5LnZhcmlhYmxlcykge1xuICAgIGxldCBzZXJpYWxpemVkVmFyaWFibGVzO1xuICAgIHRyeSB7XG4gICAgICBzZXJpYWxpemVkVmFyaWFibGVzID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoXG4gICAgICAgIGJvZHkudmFyaWFibGVzLFxuICAgICAgICAnVmFyaWFibGVzIG1hcCcsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHBhcnNlRXJyb3IgfTtcbiAgICB9XG4gICAgYWRkUXVlcnlQYXJhbSgndmFyaWFibGVzJywgc2VyaWFsaXplZFZhcmlhYmxlcyk7XG4gIH1cbiAgaWYgKGJvZHkuZXh0ZW5zaW9ucykge1xuICAgIGxldCBzZXJpYWxpemVkRXh0ZW5zaW9ucztcbiAgICB0cnkge1xuICAgICAgc2VyaWFsaXplZEV4dGVuc2lvbnMgPSBzZXJpYWxpemVGZXRjaFBhcmFtZXRlcihcbiAgICAgICAgYm9keS5leHRlbnNpb25zLFxuICAgICAgICAnRXh0ZW5zaW9ucyBtYXAnLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICByZXR1cm4geyBwYXJzZUVycm9yIH07XG4gICAgfVxuICAgIGFkZFF1ZXJ5UGFyYW0oJ2V4dGVuc2lvbnMnLCBzZXJpYWxpemVkRXh0ZW5zaW9ucyk7XG4gIH1cblxuICAvLyBSZWNvbnN0cnVjdCB0aGUgVVJJIHdpdGggYWRkZWQgcXVlcnkgcGFyYW1zLlxuICAvLyBYWFggVGhpcyBhc3N1bWVzIHRoYXQgdGhlIFVSSSBpcyB3ZWxsLWZvcm1lZCBhbmQgdGhhdCBpdCBkb2Vzbid0XG4gIC8vICAgICBhbHJlYWR5IGNvbnRhaW4gYW55IG9mIHRoZXNlIHF1ZXJ5IHBhcmFtcy4gV2UgY291bGQgaW5zdGVhZCB1c2UgdGhlXG4gIC8vICAgICBVUkwgQVBJIGFuZCB0YWtlIGEgcG9seWZpbGwgKHdoYXR3Zy11cmxANikgZm9yIG9sZGVyIGJyb3dzZXJzIHRoYXRcbiAgLy8gICAgIGRvbid0IHN1cHBvcnQgVVJMU2VhcmNoUGFyYW1zLiBOb3RlIHRoYXQgc29tZSBicm93c2VycyAoYW5kXG4gIC8vICAgICB2ZXJzaW9ucyBvZiB3aGF0d2ctdXJsKSBzdXBwb3J0IFVSTCBidXQgbm90IFVSTFNlYXJjaFBhcmFtcyFcbiAgbGV0IGZyYWdtZW50ID0gJycsXG4gICAgcHJlRnJhZ21lbnQgPSBjaG9zZW5VUkk7XG4gIGNvbnN0IGZyYWdtZW50U3RhcnQgPSBjaG9zZW5VUkkuaW5kZXhPZignIycpO1xuICBpZiAoZnJhZ21lbnRTdGFydCAhPT0gLTEpIHtcbiAgICBmcmFnbWVudCA9IGNob3NlblVSSS5zdWJzdHIoZnJhZ21lbnRTdGFydCk7XG4gICAgcHJlRnJhZ21lbnQgPSBjaG9zZW5VUkkuc3Vic3RyKDAsIGZyYWdtZW50U3RhcnQpO1xuICB9XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zUHJlZml4ID0gcHJlRnJhZ21lbnQuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgY29uc3QgbmV3VVJJID1cbiAgICBwcmVGcmFnbWVudCArIHF1ZXJ5UGFyYW1zUHJlZml4ICsgcXVlcnlQYXJhbXMuam9pbignJicpICsgZnJhZ21lbnQ7XG4gIHJldHVybiB7IG5ld1VSSSB9O1xufVxuIiwiaW1wb3J0IHsgQXBvbGxvTGluaywgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEh0dHBPcHRpb25zIH0gZnJvbSAnLi9zZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHknO1xuaW1wb3J0IHsgY3JlYXRlSHR0cExpbmsgfSBmcm9tICcuL2NyZWF0ZUh0dHBMaW5rJztcblxuZXhwb3J0IGNsYXNzIEh0dHBMaW5rIGV4dGVuZHMgQXBvbGxvTGluayB7XG4gIHB1YmxpYyByZXF1ZXN0ZXI6IFJlcXVlc3RIYW5kbGVyO1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgb3B0aW9uczogSHR0cE9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKGNyZWF0ZUh0dHBMaW5rKG9wdGlvbnMpLnJlcXVlc3QpO1xuICB9XG59XG4iLCJjb25zdCB7IHRvU3RyaW5nLCBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcbmNvbnN0IGZuVG9TdHIgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBwcmV2aW91c0NvbXBhcmlzb25zID0gbmV3IE1hcDxvYmplY3QsIFNldDxvYmplY3Q+PigpO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgZGVlcCBlcXVhbGl0eSBjaGVjayBvbiB0d28gSmF2YVNjcmlwdCB2YWx1ZXMsIHRvbGVyYXRpbmcgY3ljbGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWwoYTogYW55LCBiOiBhbnkpOiBib29sZWFuIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2hlY2soYSwgYik7XG4gIH0gZmluYWxseSB7XG4gICAgcHJldmlvdXNDb21wYXJpc29ucy5jbGVhcigpO1xuICB9XG59XG5cbi8vIEFsbG93IGRlZmF1bHQgaW1wb3J0cyBhcyB3ZWxsLlxuZXhwb3J0IGRlZmF1bHQgZXF1YWw7XG5cbmZ1bmN0aW9uIGNoZWNrKGE6IGFueSwgYjogYW55KTogYm9vbGVhbiB7XG4gIC8vIElmIHRoZSB0d28gdmFsdWVzIGFyZSBzdHJpY3RseSBlcXVhbCwgb3VyIGpvYiBpcyBlYXN5LlxuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bnRpbWUgdHlwZSBvZlxuICAvLyB0aGUgZ2l2ZW4gdmFsdWUgdGhhdCBpcyBjb25zaWRlcmFibHkgbW9yZSBwcmVjaXNlIHRoYW4gdHlwZW9mLlxuICBjb25zdCBhVGFnID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgY29uc3QgYlRhZyA9IHRvU3RyaW5nLmNhbGwoYik7XG5cbiAgLy8gSWYgdGhlIHJ1bnRpbWUgdHlwZXMgb2YgYSBhbmQgYiBhcmUgZGlmZmVyZW50LCB0aGV5IGNvdWxkIG1heWJlIGJlIGVxdWFsXG4gIC8vIHVuZGVyIHNvbWUgaW50ZXJwcmV0YXRpb24gb2YgZXF1YWxpdHksIGJ1dCBmb3Igc2ltcGxpY2l0eSBhbmQgcGVyZm9ybWFuY2VcbiAgLy8gd2UganVzdCByZXR1cm4gZmFsc2UgaW5zdGVhZC5cbiAgaWYgKGFUYWcgIT09IGJUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzd2l0Y2ggKGFUYWcpIHtcbiAgICBjYXNlICdbb2JqZWN0IEFycmF5XSc6XG4gICAgICAvLyBBcnJheXMgYXJlIGEgbG90IGxpa2Ugb3RoZXIgb2JqZWN0cywgYnV0IHdlIGNhbiBjaGVhcGx5IGNvbXBhcmUgdGhlaXJcbiAgICAgIC8vIGxlbmd0aHMgYXMgYSBzaG9ydC1jdXQgYmVmb3JlIGNvbXBhcmluZyB0aGVpciBlbGVtZW50cy5cbiAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBvYmplY3QgY2FzZS4uLlxuICAgIGNhc2UgJ1tvYmplY3QgT2JqZWN0XSc6IHtcbiAgICAgIGlmIChwcmV2aW91c2x5Q29tcGFyZWQoYSwgYikpIHJldHVybiB0cnVlO1xuXG4gICAgICBjb25zdCBhS2V5cyA9IGRlZmluZWRLZXlzKGEpO1xuICAgICAgY29uc3QgYktleXMgPSBkZWZpbmVkS2V5cyhiKTtcblxuICAgICAgLy8gSWYgYGFgIGFuZCBgYmAgaGF2ZSBhIGRpZmZlcmVudCBudW1iZXIgb2YgZW51bWVyYWJsZSBrZXlzLCB0aGV5XG4gICAgICAvLyBtdXN0IGJlIGRpZmZlcmVudC5cbiAgICAgIGNvbnN0IGtleUNvdW50ID0gYUtleXMubGVuZ3RoO1xuICAgICAgaWYgKGtleUNvdW50ICE9PSBiS2V5cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gTm93IG1ha2Ugc3VyZSB0aGV5IGhhdmUgdGhlIHNhbWUga2V5cy5cbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5Q291bnQ7ICsraykge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYiwgYUtleXNba10pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmFsbHksIGNoZWNrIGRlZXAgZXF1YWxpdHkgb2YgYWxsIGNoaWxkIHByb3BlcnRpZXMuXG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtleUNvdW50OyArK2spIHtcbiAgICAgICAgY29uc3Qga2V5ID0gYUtleXNba107XG4gICAgICAgIGlmICghY2hlY2soYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzpcbiAgICAgIHJldHVybiBhLm5hbWUgPT09IGIubmFtZSAmJiBhLm1lc3NhZ2UgPT09IGIubWVzc2FnZTtcblxuICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAvLyBIYW5kbGUgTmFOLCB3aGljaCBpcyAhPT0gaXRzZWxmLlxuICAgICAgaWYgKGEgIT09IGEpIHJldHVybiBiICE9PSBiO1xuICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIHNoYXJlZCArYSA9PT0gK2IgY2FzZS4uLlxuICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgcmV0dXJuICthID09PSArYjtcblxuICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgIHJldHVybiBhID09IGAke2J9YDtcblxuICAgIGNhc2UgJ1tvYmplY3QgTWFwXSc6XG4gICAgY2FzZSAnW29iamVjdCBTZXRdJzoge1xuICAgICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAocHJldmlvdXNseUNvbXBhcmVkKGEsIGIpKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgY29uc3QgYUl0ZXJhdG9yID0gYS5lbnRyaWVzKCk7XG4gICAgICBjb25zdCBpc01hcCA9IGFUYWcgPT09ICdbb2JqZWN0IE1hcF0nO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBpbmZvID0gYUl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKGluZm8uZG9uZSkgYnJlYWs7XG5cbiAgICAgICAgLy8gSWYgYSBpbnN0YW5jZW9mIFNldCwgYVZhbHVlID09PSBhS2V5LlxuICAgICAgICBjb25zdCBbYUtleSwgYVZhbHVlXSA9IGluZm8udmFsdWU7XG5cbiAgICAgICAgLy8gU28gdGhpcyB3b3JrcyB0aGUgc2FtZSB3YXkgZm9yIGJvdGggU2V0IGFuZCBNYXAuXG4gICAgICAgIGlmICghYi5oYXMoYUtleSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIb3dldmVyLCB3ZSBjYXJlIGFib3V0IGRlZXAgZXF1YWxpdHkgb2YgdmFsdWVzIG9ubHkgd2hlbiBkZWFsaW5nXG4gICAgICAgIC8vIHdpdGggTWFwIHN0cnVjdHVyZXMuXG4gICAgICAgIGlmIChpc01hcCAmJiAhY2hlY2soYVZhbHVlLCBiLmdldChhS2V5KSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY2FzZSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXSc6XG4gICAgY2FzZSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgQXN5bmNHZW5lcmF0b3JGdW5jdGlvbl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgRnVuY3Rpb25dJzoge1xuICAgICAgY29uc3QgYUNvZGUgPSBmblRvU3RyLmNhbGwoYSk7XG4gICAgICBpZiAoYUNvZGUgIT09IGZuVG9TdHIuY2FsbChiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGNvbnNpZGVyIG5vbi1uYXRpdmUgZnVuY3Rpb25zIGVxdWFsIGlmIHRoZXkgaGF2ZSB0aGUgc2FtZSBjb2RlXG4gICAgICAvLyAobmF0aXZlIGZ1bmN0aW9ucyByZXF1aXJlID09PSBiZWNhdXNlIHRoZWlyIGNvZGUgaXMgY2Vuc29yZWQpLlxuICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgYmVoYXZpb3IgaXMgbm90IGVudGlyZWx5IHNvdW5kLCBzaW5jZSAhPT0gZnVuY3Rpb25cbiAgICAgIC8vIG9iamVjdHMgd2l0aCB0aGUgc2FtZSBjb2RlIGNhbiBiZWhhdmUgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uXG4gICAgICAvLyB0aGVpciBjbG9zdXJlIHNjb3BlLiBIb3dldmVyLCBhbnkgZnVuY3Rpb24gY2FuIGJlaGF2ZSBkaWZmZXJlbnRseVxuICAgICAgLy8gZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZXMgb2YgaXRzIGlucHV0IGFyZ3VtZW50cyAoaW5jbHVkaW5nIHRoaXMpXG4gICAgICAvLyBhbmQgaXRzIGNhbGxpbmcgY29udGV4dCAoaW5jbHVkaW5nIGl0cyBjbG9zdXJlIHNjb3BlKSwgZXZlblxuICAgICAgLy8gdGhvdWdoIHRoZSBmdW5jdGlvbiBvYmplY3QgaXMgPT09IHRvIGl0c2VsZjsgYW5kIGl0IGlzIGVudGlyZWx5XG4gICAgICAvLyBwb3NzaWJsZSBmb3IgZnVuY3Rpb25zIHRoYXQgYXJlIG5vdCA9PT0gdG8gYmVoYXZlIGV4YWN0bHkgdGhlXG4gICAgICAvLyBzYW1lIHVuZGVyIGFsbCBjb25jZWl2YWJsZSBjaXJjdW1zdGFuY2VzLiBCZWNhdXNlIG5vbmUgb2YgdGhlc2VcbiAgICAgIC8vIGZhY3RvcnMgYXJlIHN0YXRpY2FsbHkgZGVjaWRhYmxlIGluIEphdmFTY3JpcHQsIEpTIGZ1bmN0aW9uXG4gICAgICAvLyBlcXVhbGl0eSBpcyBub3Qgd2VsbC1kZWZpbmVkLiBUaGlzIGFtYmlndWl0eSBhbGxvd3MgdXMgdG9cbiAgICAgIC8vIGNvbnNpZGVyIHRoZSBiZXN0IHBvc3NpYmxlIGhldXJpc3RpYyBhbW9uZyB2YXJpb3VzIGltcGVyZmVjdFxuICAgICAgLy8gb3B0aW9ucywgYW5kIGVxdWF0aW5nIG5vbi1uYXRpdmUgZnVuY3Rpb25zIHRoYXQgaGF2ZSB0aGUgc2FtZVxuICAgICAgLy8gY29kZSBoYXMgZW5vcm1vdXMgcHJhY3RpY2FsIGJlbmVmaXRzLCBzdWNoIGFzIHdoZW4gY29tcGFyaW5nXG4gICAgICAvLyBmdW5jdGlvbnMgdGhhdCBhcmUgcmVwZWF0ZWRseSBwYXNzZWQgYXMgZnJlc2ggZnVuY3Rpb25cbiAgICAgIC8vIGV4cHJlc3Npb25zIHdpdGhpbiBvYmplY3RzIHRoYXQgYXJlIG90aGVyd2lzZSBkZWVwbHkgZXF1YWwuIFNpbmNlXG4gICAgICAvLyBhbnkgZnVuY3Rpb24gY3JlYXRlZCBmcm9tIHRoZSBzYW1lIHN5bnRhY3RpYyBleHByZXNzaW9uIChpbiB0aGVcbiAgICAgIC8vIHNhbWUgY29kZSBsb2NhdGlvbikgd2lsbCBhbHdheXMgc3RyaW5naWZ5IHRvIHRoZSBzYW1lIGNvZGVcbiAgICAgIC8vIGFjY29yZGluZyB0byBmblRvU3RyLmNhbGwsIHdlIGNhbiByZWFzb25hYmx5IGV4cGVjdCB0aGVzZVxuICAgICAgLy8gcmVwZWF0ZWRseSBwYXNzZWQgZnVuY3Rpb24gZXhwcmVzc2lvbnMgdG8gaGF2ZSB0aGUgc2FtZSBjb2RlLCBhbmRcbiAgICAgIC8vIHRodXMgYmVoYXZlIFwidGhlIHNhbWVcIiAod2l0aCBhbGwgdGhlIGNhdmVhdHMgbWVudGlvbmVkIGFib3ZlKSxcbiAgICAgIC8vIGV2ZW4gdGhvdWdoIHRoZSBydW50aW1lIGZ1bmN0aW9uIG9iamVjdHMgYXJlICE9PSB0byBvbmUgYW5vdGhlci5cbiAgICAgIHJldHVybiAhZW5kc1dpdGgoYUNvZGUsIG5hdGl2ZUNvZGVTdWZmaXgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE90aGVyd2lzZSB0aGUgdmFsdWVzIGFyZSBub3QgZXF1YWwuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZGVmaW5lZEtleXM8VE9iamVjdCBleHRlbmRzIG9iamVjdD4ob2JqOiBUT2JqZWN0KSB7XG4gIC8vIFJlbWVtYmVyIHRoYXQgdGhlIHNlY29uZCBhcmd1bWVudCB0byBBcnJheS5wcm90b3R5cGUuZmlsdGVyIHdpbGwgYmVcbiAgLy8gdXNlZCBhcyBgdGhpc2Agd2l0aGluIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuZmlsdGVyKGlzRGVmaW5lZEtleSwgb2JqKTtcbn1cbmZ1bmN0aW9uIGlzRGVmaW5lZEtleTxUT2JqZWN0IGV4dGVuZHMgb2JqZWN0PihcbiAgdGhpczogVE9iamVjdCxcbiAga2V5OiBrZXlvZiBUT2JqZWN0LFxuKSB7XG4gIHJldHVybiB0aGlzW2tleV0gIT09IHZvaWQgMDtcbn1cblxuY29uc3QgbmF0aXZlQ29kZVN1ZmZpeCA9IFwieyBbbmF0aXZlIGNvZGVdIH1cIjtcblxuZnVuY3Rpb24gZW5kc1dpdGgoZnVsbDogc3RyaW5nLCBzdWZmaXg6IHN0cmluZykge1xuICBjb25zdCBmcm9tSW5kZXggPSBmdWxsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gIHJldHVybiBmcm9tSW5kZXggPj0gMCAmJlxuICAgIGZ1bGwuaW5kZXhPZihzdWZmaXgsIGZyb21JbmRleCkgPT09IGZyb21JbmRleDtcbn1cblxuZnVuY3Rpb24gcHJldmlvdXNseUNvbXBhcmVkKGE6IG9iamVjdCwgYjogb2JqZWN0KTogYm9vbGVhbiB7XG4gIC8vIFRob3VnaCBjeWNsaWMgcmVmZXJlbmNlcyBjYW4gbWFrZSBhbiBvYmplY3QgZ3JhcGggYXBwZWFyIGluZmluaXRlIGZyb20gdGhlXG4gIC8vIHBlcnNwZWN0aXZlIG9mIGEgZGVwdGgtZmlyc3QgdHJhdmVyc2FsLCB0aGUgZ3JhcGggc3RpbGwgY29udGFpbnMgYSBmaW5pdGVcbiAgLy8gbnVtYmVyIG9mIGRpc3RpbmN0IG9iamVjdCByZWZlcmVuY2VzLiBXZSB1c2UgdGhlIHByZXZpb3VzQ29tcGFyaXNvbnMgY2FjaGVcbiAgLy8gdG8gYXZvaWQgY29tcGFyaW5nIHRoZSBzYW1lIHBhaXIgb2Ygb2JqZWN0IHJlZmVyZW5jZXMgbW9yZSB0aGFuIG9uY2UsIHdoaWNoXG4gIC8vIGd1YXJhbnRlZXMgdGVybWluYXRpb24gKGV2ZW4gaWYgd2UgZW5kIHVwIGNvbXBhcmluZyBldmVyeSBvYmplY3QgaW4gb25lXG4gIC8vIGdyYXBoIHRvIGV2ZXJ5IG9iamVjdCBpbiB0aGUgb3RoZXIgZ3JhcGgsIHdoaWNoIGlzIGV4dHJlbWVseSB1bmxpa2VseSksXG4gIC8vIHdoaWxlIHN0aWxsIGFsbG93aW5nIHdlaXJkIGlzb21vcnBoaWMgc3RydWN0dXJlcyAobGlrZSByaW5ncyB3aXRoIGRpZmZlcmVudFxuICAvLyBsZW5ndGhzKSBhIGNoYW5jZSB0byBwYXNzIHRoZSBlcXVhbGl0eSB0ZXN0LlxuICBsZXQgYlNldCA9IHByZXZpb3VzQ29tcGFyaXNvbnMuZ2V0KGEpO1xuICBpZiAoYlNldCkge1xuICAgIC8vIFJldHVybiB0cnVlIGhlcmUgYmVjYXVzZSB3ZSBjYW4gYmUgc3VyZSBmYWxzZSB3aWxsIGJlIHJldHVybmVkIHNvbWV3aGVyZVxuICAgIC8vIGVsc2UgaWYgdGhlIG9iamVjdHMgYXJlIG5vdCBlcXVpdmFsZW50LlxuICAgIGlmIChiU2V0LmhhcyhiKSkgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcHJldmlvdXNDb21wYXJpc29ucy5zZXQoYSwgYlNldCA9IG5ldyBTZXQpO1xuICB9XG4gIGJTZXQuYWRkKGIpO1xuICByZXR1cm4gZmFsc2U7XG59XG4iLCJpbXBvcnQgeyBHcmFwaFFMRXJyb3IgfSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHsgaXNOb25FbXB0eUFycmF5IH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IFNlcnZlclBhcnNlRXJyb3IgfSBmcm9tICcuLi9saW5rL2h0dHAnO1xuaW1wb3J0IHsgU2VydmVyRXJyb3IgfSBmcm9tICcuLi9saW5rL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXBvbGxvRXJyb3IoZXJyOiBFcnJvcik6IGVyciBpcyBBcG9sbG9FcnJvciB7XG4gIHJldHVybiBlcnIuaGFzT3duUHJvcGVydHkoJ2dyYXBoUUxFcnJvcnMnKTtcbn1cblxuLy8gU2V0cyB0aGUgZXJyb3IgbWVzc2FnZSBvbiB0aGlzIGVycm9yIGFjY29yZGluZyB0byB0aGVcbi8vIHRoZSBHcmFwaFFMIGFuZCBuZXR3b3JrIGVycm9ycyB0aGF0IGFyZSBwcmVzZW50LlxuLy8gSWYgdGhlIGVycm9yIG1lc3NhZ2UgaGFzIGFscmVhZHkgYmVlbiBzZXQgdGhyb3VnaCB0aGVcbi8vIGNvbnN0cnVjdG9yIG9yIG90aGVyd2lzZSwgdGhpcyBmdW5jdGlvbiBpcyBhIG5vcC5cbmNvbnN0IGdlbmVyYXRlRXJyb3JNZXNzYWdlID0gKGVycjogQXBvbGxvRXJyb3IpID0+IHtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgLy8gSWYgd2UgaGF2ZSBHcmFwaFFMIGVycm9ycyBwcmVzZW50LCBhZGQgdGhhdCB0byB0aGUgZXJyb3IgbWVzc2FnZS5cbiAgaWYgKGlzTm9uRW1wdHlBcnJheShlcnIuZ3JhcGhRTEVycm9ycykpIHtcbiAgICBlcnIuZ3JhcGhRTEVycm9ycy5mb3JFYWNoKChncmFwaFFMRXJyb3I6IEdyYXBoUUxFcnJvcikgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZ3JhcGhRTEVycm9yXG4gICAgICAgID8gZ3JhcGhRTEVycm9yLm1lc3NhZ2VcbiAgICAgICAgOiAnRXJyb3IgbWVzc2FnZSBub3QgZm91bmQuJztcbiAgICAgIG1lc3NhZ2UgKz0gYCR7ZXJyb3JNZXNzYWdlfVxcbmA7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoZXJyLm5ldHdvcmtFcnJvcikge1xuICAgIG1lc3NhZ2UgKz0gYCR7ZXJyLm5ldHdvcmtFcnJvci5tZXNzYWdlfVxcbmA7XG4gIH1cblxuICAvLyBzdHJpcCBuZXdsaW5lIGZyb20gdGhlIGVuZCBvZiB0aGUgbWVzc2FnZVxuICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKC9cXG4kLywgJycpO1xuICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjbGFzcyBBcG9sbG9FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIG1lc3NhZ2U6IHN0cmluZztcbiAgcHVibGljIGdyYXBoUUxFcnJvcnM6IFJlYWRvbmx5QXJyYXk8R3JhcGhRTEVycm9yPjtcbiAgcHVibGljIG5ldHdvcmtFcnJvcjogRXJyb3IgfCBTZXJ2ZXJQYXJzZUVycm9yIHwgU2VydmVyRXJyb3IgfCBudWxsO1xuXG4gIC8vIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgc29tZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gIC8vIGFib3V0IGFuIGVycm9yLCBlLmcuIHNwZWNpZnlpbmcgdGhlIHR5cGUgb2YgZXJyb3IgdGhpcyBpcy4gVXNlZFxuICAvLyBpbnRlcm5hbGx5IHdpdGhpbiBBcG9sbG8gQ2xpZW50LlxuICBwdWJsaWMgZXh0cmFJbmZvOiBhbnk7XG5cbiAgLy8gQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBBcG9sbG9FcnJvciBnaXZlbiBhIEdyYXBoUUxFcnJvclxuICAvLyBvciBhIG5ldHdvcmsgZXJyb3IuIE5vdGUgdGhhdCBvbmUgb2YgdGhlc2UgaGFzIHRvIGJlIGEgdmFsaWRcbiAgLy8gdmFsdWUgb3IgdGhlIGNvbnN0cnVjdGVkIGVycm9yIHdpbGwgYmUgbWVhbmluZ2xlc3MuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBncmFwaFFMRXJyb3JzLFxuICAgIG5ldHdvcmtFcnJvcixcbiAgICBlcnJvck1lc3NhZ2UsXG4gICAgZXh0cmFJbmZvLFxuICB9OiB7XG4gICAgZ3JhcGhRTEVycm9ycz86IFJlYWRvbmx5QXJyYXk8R3JhcGhRTEVycm9yPjtcbiAgICBuZXR3b3JrRXJyb3I/OiBFcnJvciB8IFNlcnZlclBhcnNlRXJyb3IgfCBTZXJ2ZXJFcnJvciB8IG51bGw7XG4gICAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICAgIGV4dHJhSW5mbz86IGFueTtcbiAgfSkge1xuICAgIHN1cGVyKGVycm9yTWVzc2FnZSk7XG4gICAgdGhpcy5ncmFwaFFMRXJyb3JzID0gZ3JhcGhRTEVycm9ycyB8fCBbXTtcbiAgICB0aGlzLm5ldHdvcmtFcnJvciA9IG5ldHdvcmtFcnJvciB8fCBudWxsO1xuICAgIHRoaXMubWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBnZW5lcmF0ZUVycm9yTWVzc2FnZSh0aGlzKTtcbiAgICB0aGlzLmV4dHJhSW5mbyA9IGV4dHJhSW5mbztcblxuICAgIC8vIFdlJ3JlIG5vdCB1c2luZyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBoZXJlIGFzIGl0IGlzbid0IGZ1bGx5XG4gICAgLy8gc3VwcG9ydGVkIG9uIEFuZHJvaWQgKHNlZSBpc3N1ZSAjMzIzNikuXG4gICAgKHRoaXMgYXMgYW55KS5fX3Byb3RvX18gPSBBcG9sbG9FcnJvci5wcm90b3R5cGU7XG4gIH1cbn1cbiIsIi8qKlxuICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIGEgcXVlcnnigJlzIGV4ZWN1dGlvbiBpbiBvdXIgc3lzdGVtLlxuICovXG5leHBvcnQgZW51bSBOZXR3b3JrU3RhdHVzIHtcbiAgLyoqXG4gICAqIFRoZSBxdWVyeSBoYXMgbmV2ZXIgYmVlbiBydW4gYmVmb3JlIGFuZCB0aGUgcXVlcnkgaXMgbm93IGN1cnJlbnRseSBydW5uaW5nLiBBIHF1ZXJ5IHdpbGwgc3RpbGxcbiAgICogaGF2ZSB0aGlzIG5ldHdvcmsgc3RhdHVzIGV2ZW4gaWYgYSBwYXJ0aWFsIGRhdGEgcmVzdWx0IHdhcyByZXR1cm5lZCBmcm9tIHRoZSBjYWNoZSwgYnV0IGFcbiAgICogcXVlcnkgd2FzIGRpc3BhdGNoZWQgYW55d2F5LlxuICAgKi9cbiAgbG9hZGluZyA9IDEsXG5cbiAgLyoqXG4gICAqIElmIGBzZXRWYXJpYWJsZXNgIHdhcyBjYWxsZWQgYW5kIGEgcXVlcnkgd2FzIGZpcmVkIGJlY2F1c2Ugb2YgdGhhdCB0aGVuIHRoZSBuZXR3b3JrIHN0YXR1c1xuICAgKiB3aWxsIGJlIGBzZXRWYXJpYWJsZXNgIHVudGlsIHRoZSByZXN1bHQgb2YgdGhhdCBxdWVyeSBjb21lcyBiYWNrLlxuICAgKi9cbiAgc2V0VmFyaWFibGVzID0gMixcblxuICAvKipcbiAgICogSW5kaWNhdGVzIHRoYXQgYGZldGNoTW9yZWAgd2FzIGNhbGxlZCBvbiB0aGlzIHF1ZXJ5IGFuZCB0aGF0IHRoZSBxdWVyeSBjcmVhdGVkIGlzIGN1cnJlbnRseSBpblxuICAgKiBmbGlnaHQuXG4gICAqL1xuICBmZXRjaE1vcmUgPSAzLFxuXG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIHRoZSBgc2V0VmFyaWFibGVzYCBuZXR3b3JrIHN0YXR1cy4gSXQgbWVhbnMgdGhhdCBgcmVmZXRjaGAgd2FzIGNhbGxlZCBvbiBhIHF1ZXJ5XG4gICAqIGFuZCB0aGUgcmVmZXRjaCByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBmbGlnaHQuXG4gICAqL1xuICByZWZldGNoID0gNCxcblxuICAvKipcbiAgICogSW5kaWNhdGVzIHRoYXQgYSBwb2xsaW5nIHF1ZXJ5IGlzIGN1cnJlbnRseSBpbiBmbGlnaHQuIFNvIGZvciBleGFtcGxlIGlmIHlvdSBhcmUgcG9sbGluZyBhXG4gICAqIHF1ZXJ5IGV2ZXJ5IDEwIHNlY29uZHMgdGhlbiB0aGUgbmV0d29yayBzdGF0dXMgd2lsbCBzd2l0Y2ggdG8gYHBvbGxgIGV2ZXJ5IDEwIHNlY29uZHMgd2hlbmV2ZXJcbiAgICogYSBwb2xsIHJlcXVlc3QgaGFzIGJlZW4gc2VudCBidXQgbm90IHJlc29sdmVkLlxuICAgKi9cbiAgcG9sbCA9IDYsXG5cbiAgLyoqXG4gICAqIE5vIHJlcXVlc3QgaXMgaW4gZmxpZ2h0IGZvciB0aGlzIHF1ZXJ5LCBhbmQgbm8gZXJyb3JzIGhhcHBlbmVkLiBFdmVyeXRoaW5nIGlzIE9LLlxuICAgKi9cbiAgcmVhZHkgPSA3LFxuXG4gIC8qKlxuICAgKiBObyByZXF1ZXN0IGlzIGluIGZsaWdodCBmb3IgdGhpcyBxdWVyeSwgYnV0IG9uZSBvciBtb3JlIGVycm9ycyB3ZXJlIGRldGVjdGVkLlxuICAgKi9cbiAgZXJyb3IgPSA4LFxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBjdXJyZW50bHkgYSBuZXR3b3JrIHJlcXVlc3QgaW4gZmxpZ2h0IGFjY29yZGluZyB0byBhIGdpdmVuIG5ldHdvcmtcbiAqIHN0YXR1cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChcbiAgbmV0d29ya1N0YXR1cz86IE5ldHdvcmtTdGF0dXMsXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIG5ldHdvcmtTdGF0dXMgPyBuZXR3b3JrU3RhdHVzIDwgNyA6IGZhbHNlO1xufVxuIiwiaW1wb3J0IHsgV2F0Y2hRdWVyeU9wdGlvbnMgfSBmcm9tICcuL3dhdGNoUXVlcnlPcHRpb25zJztcbmltcG9ydCB7IE5ldHdvcmtTdGF0dXMgfSBmcm9tICcuL25ldHdvcmtTdGF0dXMnO1xuaW1wb3J0IHsgQXBvbGxvUXVlcnlSZXN1bHQgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IE9ic2VydmVyLCBDb25jYXN0LCBjb21wYWN0IH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbi8vIEdpdmVuIHRoYXQgUXVlcnlNYW5hZ2VyI2ZldGNoUXVlcnlPYnNlcnZhYmxlIHJldHVybnMgb25seSBhIHNpbmdsZVxuLy8gcXVlcnkncyB3b3J0aCBvZiByZXN1bHRzLCBvdGhlciBjb2RlIG11c3QgYmUgcmVzcG9uc2libGUgZm9yIHJlcGVhdGVkbHlcbi8vIGNhbGxpbmcgZmV0Y2hRdWVyeU9ic2VydmFibGUsIHdoaWxlIGVuc3VyaW5nIHRoYXQgdGhlIE9ic2VydmFibGVRdWVyeVxuLy8gY29uc3VtaW5nIHRob3NlIHJlc3VsdHMgcmVtYWlucyBzdWJzY3JpYmVkIHRvIHRoZSBjb25jYXRlbmF0aW9uIG9mIGFsbFxuLy8gdGhlIG9ic2VydmFibGVzIHJldHVybmVkIGJ5IGZldGNoUXVlcnlPYnNlcnZhYmxlLiBUaGF0IHJlc3BvbnNpYmlsaXR5XG4vLyBmYWxscyB0byB0aGlzIFJlb2JzZXJ2ZXIgY2xhc3MuIEFzIGEgYm9udXMsIHRoZSBSZW9ic2VydmVyIGNsYXNzIGlzXG4vLyBwZXJmZWN0bHkgcG9pc2VkIHRvIGhhbmRsZSBwb2xsaW5nIGxvZ2ljLCBzaW5jZSBwb2xsaW5nIGlzIGVzc2VudGlhbGx5XG4vLyByZXBlYXRlZCByZW9ic2VydmF0aW9uLiBJbiBwcmluY2lwbGUsIHRoaXMgY29kZSBjb3VsZCBoYXZlIHJlbWFpbmVkIGluXG4vLyB0aGUgT2JzZXJ2YWJsZVF1ZXJ5IGNsYXNzLCBidXQgSSBmZWx0IGl0IHdvdWxkIGJlIGVhc2llciB0byBleHBsYWluIGFuZFxuLy8gdW5kZXJzdGFuZCByZW9ic2VydmF0aW9uIGlmIGl0IHdhcyBjb25maW5lZCB0byBhIHNlcGFyYXRlIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFJlb2JzZXJ2ZXI8VERhdGEsIFRWYXJzPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgb2JzZXJ2ZXI6IE9ic2VydmVyPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4sXG4gICAgcHJpdmF0ZSBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFycywgVERhdGE+LFxuICAgIC8vIEFsbW9zdCBjZXJ0YWlubHkganVzdCBhIHdyYXBwZXIgZnVuY3Rpb24gYXJvdW5kXG4gICAgLy8gUXVlcnlNYW5hZ2VyI2ZldGNoUXVlcnlPYnNlcnZhYmxlLCBidXQgdGhpcyBzbWFsbCBkb3NlIG9mXG4gICAgLy8gaW5kaXJlY3Rpb24gbWVhbnMgdGhlIFJlb2JzZXJ2ZXIgZG9lc24ndCBoYXZlIHRvIGtub3cvYXNzdW1lXG4gICAgLy8gYW55dGhpbmcgYWJvdXQgdGhlIFF1ZXJ5TWFuYWdlciBjbGFzcy5cbiAgICBwcml2YXRlIGZldGNoOiAoXG4gICAgICBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFycywgVERhdGE+LFxuICAgICAgbmV3TmV0d29ya1N0YXR1cz86IE5ldHdvcmtTdGF0dXMsXG4gICAgKSA9PiBDb25jYXN0PEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4sXG4gICAgLy8gSWYgd2UncmUgcG9sbGluZywgdGhlcmUgbWF5IGJlIHRpbWVzIHdoZW4gd2Ugc2hvdWxkIGF2b2lkIGZldGNoaW5nLFxuICAgIC8vIHN1Y2ggYXMgd2hlbiB0aGUgcXVlcnkgaXMgYWxyZWFkeSBpbiBmbGlnaHQsIG9yIHBvbGxpbmcgaGFzIGJlZW5cbiAgICAvLyBjb21wbGV0ZWx5IGRpc2FibGVkIGZvciBzZXJ2ZXItc2lkZSByZW5kZXJpbmcuIFBhc3NpbmcgZmFsc2UgZm9yXG4gICAgLy8gdGhpcyBwYXJhbWV0ZXIgZGlzYWJsZXMgcG9sbGluZyBjb21wbGV0ZWx5LCBhbmQgcGFzc2luZyBhIGJvb2xlYW5cbiAgICAvLyBmdW5jdGlvbiBhbGxvd3MgZGV0ZXJtaW5pbmcgZmV0Y2ggc2FmZXR5IGR5bmFtaWNhbGx5LlxuICAgIHByaXZhdGUgc2hvdWxkRmV0Y2g6IGZhbHNlIHwgKCgpID0+IGJvb2xlYW4pLFxuICApIHt9XG5cbiAgcHJpdmF0ZSBjb25jYXN0PzogQ29uY2FzdDxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+O1xuXG4gIHB1YmxpYyByZW9ic2VydmUoXG4gICAgbmV3T3B0aW9ucz86IFBhcnRpYWw8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPj4sXG4gICAgbmV3TmV0d29ya1N0YXR1cz86IE5ldHdvcmtTdGF0dXMsXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgaWYgKG5ld09wdGlvbnMpIHtcbiAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyhuZXdPcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiB3ZSBjYWxsIHRoaXMudXBkYXRlT3B0aW9ucyhuZXdPcHRpb25zKSBpbiB0aGUgYnJhbmNoIGFib3ZlLFxuICAgICAgLy8gaXQgdGFrZXMgY2FyZSBvZiBjYWxsaW5nIHRoaXMudXBkYXRlUG9sbGluZygpLiBJbiB0aGlzIGJyYW5jaCwgd2VcbiAgICAgIC8vIHN0aWxsIG5lZWQgdG8gdXBkYXRlIHBvbGxpbmcsIGV2ZW4gaWYgdGhlcmUgd2VyZSBubyBuZXdPcHRpb25zLlxuICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29uY2FzdCA9IHRoaXMuZmV0Y2godGhpcy5vcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzKTtcblxuICAgIGlmICh0aGlzLmNvbmNhc3QpIHtcbiAgICAgIC8vIFdlIHVzZSB0aGUge2FkZCxyZW1vdmV9T2JzZXJ2ZXIgbWV0aG9kcyBkaXJlY3RseSB0byBhdm9pZFxuICAgICAgLy8gd3JhcHBpbmcgb2JzZXJ2ZXIgd2l0aCBhbiB1bm5lY2Vzc2FyeSBTdWJzY3JpcHRpb25PYnNlcnZlclxuICAgICAgLy8gb2JqZWN0LCBpbiBwYXJ0IHNvIHRoYXQgd2UgY2FuIHJlbW92ZSBpdCBoZXJlIHdpdGhvdXQgdHJpZ2dlcmluZ1xuICAgICAgLy8gYW55IHVuc3Vic2NyaXB0aW9ucywgYmVjYXVzZSB3ZSBqdXN0IHdhbnQgdG8gaWdub3JlIHRoZSBvbGRcbiAgICAgIC8vIG9ic2VydmFibGUsIG5vdCBwcmVtYXR1cmVseSBzaHV0IGl0IGRvd24sIHNpbmNlIG90aGVyIGNvbnN1bWVyc1xuICAgICAgLy8gbWF5IGJlIGF3YWl0aW5nIHRoaXMuY29uY2FzdC5wcm9taXNlLlxuICAgICAgdGhpcy5jb25jYXN0LnJlbW92ZU9ic2VydmVyKHRoaXMub2JzZXJ2ZXIsIHRydWUpO1xuICAgIH1cblxuICAgIGNvbmNhc3QuYWRkT2JzZXJ2ZXIodGhpcy5vYnNlcnZlcik7XG5cbiAgICByZXR1cm4gKHRoaXMuY29uY2FzdCA9IGNvbmNhc3QpLnByb21pc2U7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlT3B0aW9ucyhuZXdPcHRpb25zOiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPFRWYXJzLCBURGF0YT4+KSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIGNvbXBhY3QobmV3T3B0aW9ucykpO1xuICAgIHRoaXMudXBkYXRlUG9sbGluZygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuY29uY2FzdCkge1xuICAgICAgdGhpcy5jb25jYXN0LnJlbW92ZU9ic2VydmVyKHRoaXMub2JzZXJ2ZXIpO1xuICAgICAgZGVsZXRlIHRoaXMuY29uY2FzdDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wb2xsaW5nSW5mbykge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9sbGluZ0luZm8udGltZW91dCk7XG4gICAgICB0aGlzLm9wdGlvbnMucG9sbEludGVydmFsID0gMDtcbiAgICAgIHRoaXMudXBkYXRlUG9sbGluZygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcG9sbGluZ0luZm8/OiB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICB0aW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PjtcbiAgfTtcblxuICAvLyBUdXJucyBwb2xsaW5nIG9uIG9yIG9mZiBiYXNlZCBvbiB0aGlzLm9wdGlvbnMucG9sbEludGVydmFsLlxuICBwcml2YXRlIHVwZGF0ZVBvbGxpbmcoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcG9sbGluZ0luZm8sXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIHBvbGxJbnRlcnZhbCxcbiAgICAgIH0sXG4gICAgfSA9IHRoaXM7XG5cbiAgICBpZiAoIXBvbGxJbnRlcnZhbCkge1xuICAgICAgaWYgKHBvbGxpbmdJbmZvKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChwb2xsaW5nSW5mby50aW1lb3V0KTtcbiAgICAgICAgZGVsZXRlIHRoaXMucG9sbGluZ0luZm87XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHBvbGxpbmdJbmZvICYmXG4gICAgICAgIHBvbGxpbmdJbmZvLmludGVydmFsID09PSBwb2xsSW50ZXJ2YWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQoXG4gICAgICBwb2xsSW50ZXJ2YWwsXG4gICAgICAnQXR0ZW1wdGVkIHRvIHN0YXJ0IGEgcG9sbGluZyBxdWVyeSB3aXRob3V0IGEgcG9sbGluZyBpbnRlcnZhbC4nLFxuICAgICk7XG5cbiAgICAvLyBHbyBubyBmdXJ0aGVyIGlmIHBvbGxpbmcgaXMgZGlzYWJsZWQuXG4gICAgaWYgKHRoaXMuc2hvdWxkRmV0Y2ggPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW5mbyA9IHBvbGxpbmdJbmZvIHx8IChcbiAgICAgIHRoaXMucG9sbGluZ0luZm8gPSB7fSBhcyBSZW9ic2VydmVyPFREYXRhLCBUVmFycz5bXCJwb2xsaW5nSW5mb1wiXVxuICAgICkhO1xuXG4gICAgaW5mby5pbnRlcnZhbCA9IHBvbGxJbnRlcnZhbDtcblxuICAgIGNvbnN0IG1heWJlRmV0Y2ggPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wb2xsaW5nSW5mbykge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRGZXRjaCAmJiB0aGlzLnNob3VsZEZldGNoKCkpIHtcbiAgICAgICAgICB0aGlzLnJlb2JzZXJ2ZSh7XG4gICAgICAgICAgICBmZXRjaFBvbGljeTogXCJuZXR3b3JrLW9ubHlcIixcbiAgICAgICAgICAgIG5leHRGZXRjaFBvbGljeTogdGhpcy5vcHRpb25zLmZldGNoUG9saWN5IHx8IFwiY2FjaGUtZmlyc3RcIixcbiAgICAgICAgICB9LCBOZXR3b3JrU3RhdHVzLnBvbGwpLnRoZW4ocG9sbCwgcG9sbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcG9sbCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCBwb2xsID0gKCkgPT4ge1xuICAgICAgY29uc3QgaW5mbyA9IHRoaXMucG9sbGluZ0luZm87XG4gICAgICBpZiAoaW5mbykge1xuICAgICAgICBjbGVhclRpbWVvdXQoaW5mby50aW1lb3V0KTtcbiAgICAgICAgaW5mby50aW1lb3V0ID0gc2V0VGltZW91dChtYXliZUZldGNoLCBpbmZvLmludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcG9sbCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcblxuaW1wb3J0IHsgTmV0d29ya1N0YXR1cywgaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0IH0gZnJvbSAnLi9uZXR3b3JrU3RhdHVzJztcbmltcG9ydCB7XG4gIGNsb25lRGVlcCxcbiAgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbixcbiAgT2JzZXJ2YWJsZSxcbiAgT2JzZXJ2ZXIsXG4gIE9ic2VydmFibGVTdWJzY3JpcHRpb24sXG4gIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHksXG4gIGlzTm9uRW1wdHlBcnJheSxcbiAgZml4T2JzZXJ2YWJsZVN1YmNsYXNzLFxufSBmcm9tICcuLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgQXBvbGxvRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgUXVlcnlNYW5hZ2VyIH0gZnJvbSAnLi9RdWVyeU1hbmFnZXInO1xuaW1wb3J0IHsgQXBvbGxvUXVlcnlSZXN1bHQsIE9wZXJhdGlvblZhcmlhYmxlcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgV2F0Y2hRdWVyeU9wdGlvbnMsXG4gIEZldGNoTW9yZVF1ZXJ5T3B0aW9ucyxcbiAgU3Vic2NyaWJlVG9Nb3JlT3B0aW9ucyxcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5pbXBvcnQgeyBSZW9ic2VydmVyIH0gZnJvbSAnLi9SZW9ic2VydmVyJztcbmltcG9ydCB7IFF1ZXJ5SW5mbyB9IGZyb20gJy4vUXVlcnlJbmZvJztcblxuZXhwb3J0IGludGVyZmFjZSBGZXRjaE1vcmVPcHRpb25zPFxuICBURGF0YSA9IGFueSxcbiAgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlc1xuPiB7XG4gIHVwZGF0ZVF1ZXJ5PzogKFxuICAgIHByZXZpb3VzUXVlcnlSZXN1bHQ6IFREYXRhLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGZldGNoTW9yZVJlc3VsdD86IFREYXRhO1xuICAgICAgdmFyaWFibGVzPzogVFZhcmlhYmxlcztcbiAgICB9LFxuICApID0+IFREYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzPiB7XG4gIHZhcmlhYmxlcz86IFRWYXJpYWJsZXM7XG59XG5cbmxldCB3YXJuZWRBYm91dFVwZGF0ZVF1ZXJ5ID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlUXVlcnk8XG4gIFREYXRhID0gYW55LFxuICBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzXG4+IGV4dGVuZHMgT2JzZXJ2YWJsZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgcHVibGljIHJlYWRvbmx5IG9wdGlvbnM6IFdhdGNoUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFREYXRhPjtcbiAgcHVibGljIHJlYWRvbmx5IHF1ZXJ5SWQ6IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHF1ZXJ5TmFtZT86IHN0cmluZztcblxuICAvLyBDb21wdXRlZCBzaG9ydGhhbmQgZm9yIHRoaXMub3B0aW9ucy52YXJpYWJsZXMsIHByZXNlcnZlZCBmb3JcbiAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIHB1YmxpYyBnZXQgdmFyaWFibGVzKCk6IFRWYXJpYWJsZXMgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudmFyaWFibGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1Rvcm5Eb3duOiBib29sZWFuO1xuICBwcml2YXRlIHF1ZXJ5TWFuYWdlcjogUXVlcnlNYW5hZ2VyPGFueT47XG4gIHByaXZhdGUgb2JzZXJ2ZXJzID0gbmV3IFNldDxPYnNlcnZlcjxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+PigpO1xuICBwcml2YXRlIHN1YnNjcmlwdGlvbnMgPSBuZXcgU2V0PE9ic2VydmFibGVTdWJzY3JpcHRpb24+KCk7XG5cbiAgcHJpdmF0ZSBsYXN0UmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT47XG4gIHByaXZhdGUgbGFzdFJlc3VsdFNuYXBzaG90OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT47XG4gIHByaXZhdGUgbGFzdEVycm9yOiBBcG9sbG9FcnJvcjtcbiAgcHJpdmF0ZSBxdWVyeUluZm86IFF1ZXJ5SW5mbztcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgcXVlcnlNYW5hZ2VyLFxuICAgIHF1ZXJ5SW5mbyxcbiAgICBvcHRpb25zLFxuICB9OiB7XG4gICAgcXVlcnlNYW5hZ2VyOiBRdWVyeU1hbmFnZXI8YW55PjtcbiAgICBxdWVyeUluZm86IFF1ZXJ5SW5mbztcbiAgICBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT47XG4gIH0pIHtcbiAgICBzdXBlcigob2JzZXJ2ZXI6IE9ic2VydmVyPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4pID0+XG4gICAgICB0aGlzLm9uU3Vic2NyaWJlKG9ic2VydmVyKSxcbiAgICApO1xuXG4gICAgLy8gYWN0aXZlIHN0YXRlXG4gICAgdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG5cbiAgICAvLyBxdWVyeSBpbmZvcm1hdGlvblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5xdWVyeUlkID0gcXVlcnlNYW5hZ2VyLmdlbmVyYXRlUXVlcnlJZCgpO1xuXG4gICAgY29uc3Qgb3BEZWYgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKG9wdGlvbnMucXVlcnkpO1xuICAgIHRoaXMucXVlcnlOYW1lID0gb3BEZWYgJiYgb3BEZWYubmFtZSAmJiBvcERlZi5uYW1lLnZhbHVlO1xuXG4gICAgLy8gcmVsYXRlZCBjbGFzc2VzXG4gICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBxdWVyeU1hbmFnZXI7XG5cbiAgICB0aGlzLnF1ZXJ5SW5mbyA9IHF1ZXJ5SW5mbztcbiAgfVxuXG4gIHB1YmxpYyByZXN1bHQoKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXI6IE9ic2VydmVyPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4gPSB7XG4gICAgICAgIG5leHQ6IChyZXN1bHQ6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPikgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcblxuICAgICAgICAgIC8vIFN0b3AgdGhlIHF1ZXJ5IHdpdGhpbiB0aGUgUXVlcnlNYW5hZ2VyIGlmIHdlIGNhbiBiZWZvcmVcbiAgICAgICAgICAvLyB0aGlzIGZ1bmN0aW9uIHJldHVybnMuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBXZSBkbyB0aGlzIGluIG9yZGVyIHRvIHByZXZlbnQgb2JzZXJ2ZXJzIHBpbGluZyB1cCB3aXRoaW5cbiAgICAgICAgICAvLyB0aGUgUXVlcnlNYW5hZ2VyLiBOb3RpY2UgdGhhdCB3ZSBvbmx5IGZ1bGx5IHVuc3Vic2NyaWJlXG4gICAgICAgICAgLy8gZnJvbSB0aGUgc3Vic2NyaXB0aW9uIGluIGEgc2V0VGltZW91dCguLi4sIDApICBjYWxsLiBUaGlzIGNhbGwgY2FuXG4gICAgICAgICAgLy8gYWN0dWFsbHkgYmUgaGFuZGxlZCBieSB0aGUgYnJvd3NlciBhdCBhIG11Y2ggbGF0ZXIgdGltZS4gSWYgcXVlcmllc1xuICAgICAgICAgIC8vIGFyZSBmaXJlZCBpbiB0aGUgbWVhbnRpbWUsIG9ic2VydmVycyB0aGF0IHNob3VsZCBoYXZlIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgIC8vIGZyb20gdGhlIFF1ZXJ5TWFuYWdlciB3aWxsIGNvbnRpbnVlIHRvIGZpcmUsIGNhdXNpbmcgYW4gdW5uZWNlc3NhcnlcbiAgICAgICAgICAvLyBwZXJmb3JtYW5jZSBoaXQuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKTtcbiAgICAgICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLnNpemUpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnJlbW92ZVF1ZXJ5KHRoaXMucXVlcnlJZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgIH07XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3VycmVudFJlc3VsdChzYXZlQXNMYXN0UmVzdWx0ID0gdHJ1ZSk6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB7XG4gICAgY29uc3QgeyBsYXN0UmVzdWx0IH0gPSB0aGlzO1xuXG4gICAgY29uc3QgbmV0d29ya1N0YXR1cyA9XG4gICAgICB0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzIHx8XG4gICAgICAobGFzdFJlc3VsdCAmJiBsYXN0UmVzdWx0Lm5ldHdvcmtTdGF0dXMpIHx8XG4gICAgICBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuXG4gICAgY29uc3QgcmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4gPSB7XG4gICAgICAuLi5sYXN0UmVzdWx0LFxuICAgICAgbG9hZGluZzogaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpLFxuICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuaXNUb3JuRG93bikge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCB7IGZldGNoUG9saWN5ID0gJ2NhY2hlLWZpcnN0JyB9ID0gdGhpcy5vcHRpb25zO1xuICAgIGlmIChmZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJyB8fFxuICAgICAgICBmZXRjaFBvbGljeSA9PT0gJ25ldHdvcmstb25seScpIHtcbiAgICAgIC8vIFNpbWlsYXIgdG8gc2V0dGluZyByZXN1bHQucGFydGlhbCB0byBmYWxzZSwgYnV0IHRha2luZyBhZHZhbnRhZ2VcbiAgICAgIC8vIG9mIHRoZSBmYWxzaW5lc3Mgb2YgbWlzc2luZyBmaWVsZHMuXG4gICAgICBkZWxldGUgcmVzdWx0LnBhcnRpYWw7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgICFyZXN1bHQuZGF0YSB8fFxuICAgICAgLy8gSWYgdGhpcy5vcHRpb25zLnF1ZXJ5IGhhcyBAY2xpZW50KGFsd2F5czogdHJ1ZSkgZmllbGRzLCB3ZSBjYW5ub3RcbiAgICAgIC8vIHRydXN0IHJlc3VsdC5kYXRhLCBzaW5jZSBpdCB3YXMgcmVhZCBmcm9tIHRoZSBjYWNoZSB3aXRob3V0XG4gICAgICAvLyBydW5uaW5nIGxvY2FsIHJlc29sdmVycyAoYW5kIGl0J3MgdG9vIGxhdGUgdG8gcnVuIHJlc29sdmVycyBub3csXG4gICAgICAvLyBzaW5jZSB3ZSBtdXN0IHJldHVybiBhIHJlc3VsdCBzeW5jaHJvbm91c2x5KS4gVE9ETyBJbiB0aGUgZnV0dXJlXG4gICAgICAvLyAoYWZ0ZXIgQXBvbGxvIENsaWVudCAzLjApLCB3ZSBzaG91bGQgZmluZCBhIHdheSB0byB0cnVzdFxuICAgICAgLy8gdGhpcy5sYXN0UmVzdWx0IGluIG1vcmUgY2FzZXMsIGFuZCByZWFkIGZyb20gdGhlIGNhY2hlIG9ubHkgaW5cbiAgICAgIC8vIGNhc2VzIHdoZW4gbm8gcmVzdWx0IGhhcyBiZWVuIHJlY2VpdmVkIHlldC5cbiAgICAgICF0aGlzLnF1ZXJ5TWFuYWdlci50cmFuc2Zvcm0odGhpcy5vcHRpb25zLnF1ZXJ5KS5oYXNGb3JjZWRSZXNvbHZlcnNcbiAgICApIHtcbiAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLnF1ZXJ5SW5mby5nZXREaWZmKCk7XG4gICAgICByZXN1bHQuZGF0YSA9IChcbiAgICAgICAgZGlmZi5jb21wbGV0ZSB8fFxuICAgICAgICB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGFcbiAgICAgICkgPyBkaWZmLnJlc3VsdCA6IHZvaWQgMDtcbiAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgIC8vIElmIHRoZSBkaWZmIGlzIGNvbXBsZXRlLCBhbmQgd2UncmUgdXNpbmcgYSBGZXRjaFBvbGljeSB0aGF0XG4gICAgICAgIC8vIHRlcm1pbmF0ZXMgYWZ0ZXIgYSBjb21wbGV0ZSBjYWNoZSByZWFkLCB3ZSBjYW4gYXNzdW1lIHRoZSBuZXh0XG4gICAgICAgIC8vIHJlc3VsdCB3ZSByZWNlaXZlIHdpbGwgaGF2ZSBOZXR3b3JrU3RhdHVzLnJlYWR5IGFuZCAhbG9hZGluZy5cbiAgICAgICAgaWYgKHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcgJiZcbiAgICAgICAgICAgIChmZXRjaFBvbGljeSA9PT0gJ2NhY2hlLWZpcnN0JyB8fFxuICAgICAgICAgICAgIGZldGNoUG9saWN5ID09PSAnY2FjaGUtb25seScpKSB7XG4gICAgICAgICAgcmVzdWx0Lm5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuICAgICAgICAgIHJlc3VsdC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHJlc3VsdC5wYXJ0aWFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnBhcnRpYWwgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzYXZlQXNMYXN0UmVzdWx0KSB7XG4gICAgICB0aGlzLnVwZGF0ZUxhc3RSZXN1bHQocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gQ29tcGFyZXMgbmV3UmVzdWx0IHRvIHRoZSBzbmFwc2hvdCB3ZSB0b29rIG9mIHRoaXMubGFzdFJlc3VsdCB3aGVuIGl0IHdhc1xuICAvLyBmaXJzdCByZWNlaXZlZC5cbiAgcHVibGljIGlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQobmV3UmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4pIHtcbiAgICByZXR1cm4gIWVxdWFsKHRoaXMubGFzdFJlc3VsdFNuYXBzaG90LCBuZXdSZXN1bHQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgbGFzdCByZXN1bHQgdGhhdCBvYnNlcnZlci5uZXh0IHdhcyBjYWxsZWQgd2l0aC4gVGhpcyBpcyBub3QgdGhlIHNhbWUgYXNcbiAgLy8gZ2V0Q3VycmVudFJlc3VsdCEgSWYgeW91J3JlIG5vdCBzdXJlIHdoaWNoIHlvdSBuZWVkLCB0aGVuIHlvdSBwcm9iYWJseSBuZWVkIGdldEN1cnJlbnRSZXN1bHQuXG4gIHB1YmxpYyBnZXRMYXN0UmVzdWx0KCk6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB7XG4gICAgcmV0dXJuIHRoaXMubGFzdFJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMYXN0RXJyb3IoKTogQXBvbGxvRXJyb3Ige1xuICAgIHJldHVybiB0aGlzLmxhc3RFcnJvcjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldExhc3RSZXN1bHRzKCk6IHZvaWQge1xuICAgIGRlbGV0ZSB0aGlzLmxhc3RSZXN1bHQ7XG4gICAgZGVsZXRlIHRoaXMubGFzdFJlc3VsdFNuYXBzaG90O1xuICAgIGRlbGV0ZSB0aGlzLmxhc3RFcnJvcjtcbiAgICB0aGlzLmlzVG9ybkRvd24gPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldFF1ZXJ5U3RvcmVFcnJvcnMoKSB7XG4gICAgdGhpcy5xdWVyeU1hbmFnZXIucmVzZXRFcnJvcnModGhpcy5xdWVyeUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHZhcmlhYmxlcyBvZiB0aGlzIG9ic2VydmFibGUgcXVlcnksIGFuZCBmZXRjaCB0aGUgbmV3IHJlc3VsdHMuXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBwcmVmZXJyZWQgb3ZlciBgc2V0VmFyaWFibGVzYCBpbiBtb3N0IHVzZSBjYXNlcy5cbiAgICpcbiAgICogQHBhcmFtIHZhcmlhYmxlczogVGhlIG5ldyBzZXQgb2YgdmFyaWFibGVzLiBJZiB0aGVyZSBhcmUgbWlzc2luZyB2YXJpYWJsZXMsXG4gICAqIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhvc2UgdmFyaWFibGVzIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIHB1YmxpYyByZWZldGNoKHZhcmlhYmxlcz86IFBhcnRpYWw8VFZhcmlhYmxlcz4pOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4ge1xuICAgIGNvbnN0IHJlb2JzZXJ2ZU9wdGlvbnM6IFBhcnRpYWw8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVERhdGE+PiA9IHtcbiAgICAgIC8vIEFsd2F5cyBkaXNhYmxlIHBvbGxpbmcgZm9yIHJlZmV0Y2hlcy5cbiAgICAgIHBvbGxJbnRlcnZhbDogMCxcbiAgICB9O1xuXG4gICAgLy8gVW5sZXNzIHRoZSBwcm92aWRlZCBmZXRjaFBvbGljeSBhbHdheXMgY29uc3VsdHMgdGhlIG5ldHdvcmtcbiAgICAvLyAobm8tY2FjaGUsIG5ldHdvcmstb25seSwgb3IgY2FjaGUtYW5kLW5ldHdvcmspLCBvdmVycmlkZSBpdCB3aXRoXG4gICAgLy8gbmV0d29yay1vbmx5IHRvIGZvcmNlIHRoZSByZWZldGNoIGZvciB0aGlzIGZldGNoUXVlcnkgY2FsbC5cbiAgICBjb25zdCB7IGZldGNoUG9saWN5IH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKGZldGNoUG9saWN5ICE9PSAnbm8tY2FjaGUnICYmXG4gICAgICAgIGZldGNoUG9saWN5ICE9PSAnY2FjaGUtYW5kLW5ldHdvcmsnKSB7XG4gICAgICByZW9ic2VydmVPcHRpb25zLmZldGNoUG9saWN5ID0gJ25ldHdvcmstb25seSc7XG4gICAgICAvLyBHbyBiYWNrIHRvIHRoZSBvcmlnaW5hbCBvcHRpb25zLmZldGNoUG9saWN5IGFmdGVyIHRoaXMgcmVmZXRjaC5cbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMubmV4dEZldGNoUG9saWN5ID0gZmV0Y2hQb2xpY3kgfHwgXCJjYWNoZS1maXJzdFwiO1xuICAgIH1cblxuICAgIGlmICh2YXJpYWJsZXMgJiYgIWVxdWFsKHRoaXMub3B0aW9ucy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZXhpc3Rpbmcgb3B0aW9ucyB3aXRoIG5ldyB2YXJpYWJsZXNcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMudmFyaWFibGVzID0gdGhpcy5vcHRpb25zLnZhcmlhYmxlcyA9IHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgLi4udmFyaWFibGVzLFxuICAgICAgfSBhcyBUVmFyaWFibGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5ld1Jlb2JzZXJ2ZXIoZmFsc2UpLnJlb2JzZXJ2ZShcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMsXG4gICAgICBOZXR3b3JrU3RhdHVzLnJlZmV0Y2gsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBmZXRjaE1vcmU8SyBleHRlbmRzIGtleW9mIFRWYXJpYWJsZXM+KFxuICAgIGZldGNoTW9yZU9wdGlvbnM6IEZldGNoTW9yZVF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBLLCBURGF0YT4gJlxuICAgICAgRmV0Y2hNb3JlT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgY29uc3QgY29tYmluZWRPcHRpb25zID0ge1xuICAgICAgLi4uKGZldGNoTW9yZU9wdGlvbnMucXVlcnkgPyBmZXRjaE1vcmVPcHRpb25zIDoge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgIC4uLmZldGNoTW9yZU9wdGlvbnMsXG4gICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgIC4uLnRoaXMub3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgLi4uZmV0Y2hNb3JlT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICAgIC8vIFRoZSBmZXRjaE1vcmUgcmVxdWVzdCBnb2VzIGltbWVkaWF0ZWx5IHRvIHRoZSBuZXR3b3JrIGFuZCBkb2VzXG4gICAgICAvLyBub3QgYXV0b21hdGljYWxseSB3cml0ZSBpdHMgcmVzdWx0IHRvIHRoZSBjYWNoZSAoaGVuY2Ugbm8tY2FjaGVcbiAgICAgIC8vIGluc3RlYWQgb2YgbmV0d29yay1vbmx5KSwgYmVjYXVzZSB3ZSBhbGxvdyB0aGUgY2FsbGVyIG9mXG4gICAgICAvLyBmZXRjaE1vcmUgdG8gcHJvdmlkZSBhbiB1cGRhdGVRdWVyeSBjYWxsYmFjayB0aGF0IGRldGVybWluZXMgaG93XG4gICAgICAvLyB0aGUgZGF0YSBnZXRzIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLlxuICAgICAgZmV0Y2hQb2xpY3k6IFwibm8tY2FjaGVcIixcbiAgICB9IGFzIFdhdGNoUXVlcnlPcHRpb25zO1xuXG4gICAgY29uc3QgcWlkID0gdGhpcy5xdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG5cbiAgICAvLyBTaW11bGF0ZSBhIGxvYWRpbmcgcmVzdWx0IGZvciB0aGUgb3JpZ2luYWwgcXVlcnkgd2l0aFxuICAgIC8vIHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZS5cbiAgICBpZiAoY29tYmluZWRPcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSkge1xuICAgICAgdGhpcy5xdWVyeUluZm8ubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuZmV0Y2hNb3JlO1xuICAgICAgdGhpcy5vYnNlcnZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmZldGNoUXVlcnkoXG4gICAgICBxaWQsXG4gICAgICBjb21iaW5lZE9wdGlvbnMsXG4gICAgICBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZSxcbiAgICApLnRoZW4oZmV0Y2hNb3JlUmVzdWx0ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBmZXRjaE1vcmVSZXN1bHQuZGF0YSBhcyBURGF0YTtcbiAgICAgIGNvbnN0IHsgdXBkYXRlUXVlcnkgfSA9IGZldGNoTW9yZU9wdGlvbnM7XG5cbiAgICAgIGlmICh1cGRhdGVRdWVyeSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmXG4gICAgICAgICAgICAhd2FybmVkQWJvdXRVcGRhdGVRdWVyeSkge1xuICAgICAgICAgIGludmFyaWFudC53YXJuKFxuYFRoZSB1cGRhdGVRdWVyeSBjYWxsYmFjayBmb3IgZmV0Y2hNb3JlIGlzIGRlcHJlY2F0ZWQsIGFuZCB3aWxsIGJlIHJlbW92ZWRcbmluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgQXBvbGxvIENsaWVudC5cblxuUGxlYXNlIGNvbnZlcnQgdXBkYXRlUXVlcnkgZnVuY3Rpb25zIHRvIGZpZWxkIHBvbGljaWVzIHdpdGggYXBwcm9wcmlhdGVcbnJlYWQgYW5kIG1lcmdlIGZ1bmN0aW9ucywgb3IgdXNlL2FkYXB0IGEgaGVscGVyIGZ1bmN0aW9uIChzdWNoIGFzXG5jb25jYXRQYWdpbmF0aW9uLCBvZmZzZXRMaW1pdFBhZ2luYXRpb24sIG9yIHJlbGF5U3R5bGVQYWdpbmF0aW9uKSBmcm9tXG5AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMuXG5cblRoZSBmaWVsZCBwb2xpY3kgc3lzdGVtIGhhbmRsZXMgcGFnaW5hdGlvbiBtb3JlIGVmZmVjdGl2ZWx5IHRoYW4gYVxuaGFuZC13cml0dGVuIHVwZGF0ZVF1ZXJ5IGZ1bmN0aW9uLCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlIHBvbGljeVxub25jZSwgcmF0aGVyIHRoYW4gZXZlcnkgdGltZSB5b3UgY2FsbCBmZXRjaE1vcmUuYCk7XG4gICAgICAgICAgd2FybmVkQWJvdXRVcGRhdGVRdWVyeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVRdWVyeShwcmV2aW91cyA9PiB1cGRhdGVRdWVyeShwcmV2aW91cywge1xuICAgICAgICAgIGZldGNoTW9yZVJlc3VsdDogZGF0YSxcbiAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMgYXMgVFZhcmlhYmxlcyxcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgd2UncmUgdXNpbmcgYSBmaWVsZCBwb2xpY3kgaW5zdGVhZCBvZiB1cGRhdGVRdWVyeSwgdGhlIG9ubHlcbiAgICAgICAgLy8gdGhpbmcgd2UgbmVlZCB0byBkbyBpcyB3cml0ZSB0aGUgbmV3IGRhdGEgdG8gdGhlIGNhY2hlIHVzaW5nXG4gICAgICAgIC8vIGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMgKGluc3RlYWQgb2YgdGhpcy52YXJpYWJsZXMsIHdoaWNoIGlzXG4gICAgICAgIC8vIHdoYXQgdGhpcy51cGRhdGVRdWVyeSB1c2VzLCBiZWNhdXNlIGl0IHdvcmtzIGJ5IGFidXNpbmcgdGhlXG4gICAgICAgIC8vIG9yaWdpbmFsIGZpZWxkIHZhbHVlLCBrZXllZCBieSB0aGUgb3JpZ2luYWwgdmFyaWFibGVzKS5cbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuY2FjaGUud3JpdGVRdWVyeSh7XG4gICAgICAgICAgcXVlcnk6IGNvbWJpbmVkT3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmZXRjaE1vcmVSZXN1bHQgYXMgQXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+O1xuXG4gICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5zdG9wUXVlcnkocWlkKTtcbiAgICAgIHRoaXMucmVvYnNlcnZlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBYWFggdGhlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMgYXJlIHNlcGFyYXRlIGZyb20gdGhlIHF1ZXJ5IHZhcmlhYmxlcy5cbiAgLy8gaWYgeW91IHdhbnQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMsIHJpZ2h0IG5vdyB5b3UgaGF2ZSB0byBkbyB0aGF0IHNlcGFyYXRlbHksXG4gIC8vIGFuZCB5b3UgY2FuIG9ubHkgZG8gaXQgYnkgc3RvcHBpbmcgdGhlIHN1YnNjcmlwdGlvbiBhbmQgdGhlbiBzdWJzY3JpYmluZyBhZ2FpbiB3aXRoIG5ldyB2YXJpYWJsZXMuXG4gIHB1YmxpYyBzdWJzY3JpYmVUb01vcmU8XG4gICAgVFN1YnNjcmlwdGlvbkRhdGEgPSBURGF0YSxcbiAgICBUU3Vic2NyaXB0aW9uVmFyaWFibGVzID0gVFZhcmlhYmxlc1xuICA+KFxuICAgIG9wdGlvbnM6IFN1YnNjcmliZVRvTW9yZU9wdGlvbnM8XG4gICAgICBURGF0YSxcbiAgICAgIFRTdWJzY3JpcHRpb25WYXJpYWJsZXMsXG4gICAgICBUU3Vic2NyaXB0aW9uRGF0YVxuICAgID4sXG4gICkge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMucXVlcnlNYW5hZ2VyXG4gICAgICAuc3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uKHtcbiAgICAgICAgcXVlcnk6IG9wdGlvbnMuZG9jdW1lbnQsXG4gICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIGNvbnRleHQ6IG9wdGlvbnMuY29udGV4dCxcbiAgICAgIH0pXG4gICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKHN1YnNjcmlwdGlvbkRhdGE6IHsgZGF0YTogVFN1YnNjcmlwdGlvbkRhdGEgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUXVlcnkgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgaWYgKHVwZGF0ZVF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5PFRTdWJzY3JpcHRpb25WYXJpYWJsZXM+KFxuICAgICAgICAgICAgICAocHJldmlvdXMsIHsgdmFyaWFibGVzIH0pID0+XG4gICAgICAgICAgICAgICAgdXBkYXRlUXVlcnkocHJldmlvdXMsIHtcbiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkRhdGEsXG4gICAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChvcHRpb25zLm9uRXJyb3IpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25FcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnZhcmlhbnQuZXJyb3IoJ1VuaGFuZGxlZCBHcmFwaFFMIHN1YnNjcmlwdGlvbiBlcnJvcicsIGVycik7XG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoc3Vic2NyaXB0aW9uKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShzdWJzY3JpcHRpb24pKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc2V0T3B0aW9ucyhcbiAgICBuZXdPcHRpb25zOiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFREYXRhPj4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgcmV0dXJuIHRoaXMucmVvYnNlcnZlKG5ld09wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgZm9yICppbnRlcm5hbCogdXNlIG9ubHkuIE1vc3QgdXNlcnMgc2hvdWxkIGluc3RlYWQgdXNlIGByZWZldGNoYFxuICAgKiBpbiBvcmRlciB0byBiZSBwcm9wZXJseSBub3RpZmllZCBvZiByZXN1bHRzIGV2ZW4gd2hlbiB0aGV5IGNvbWUgZnJvbSBjYWNoZS5cbiAgICpcbiAgICogVXBkYXRlIHRoZSB2YXJpYWJsZXMgb2YgdGhpcyBvYnNlcnZhYmxlIHF1ZXJ5LCBhbmQgZmV0Y2ggdGhlIG5ldyByZXN1bHRzXG4gICAqIGlmIHRoZXkndmUgY2hhbmdlZC4gSWYgeW91IHdhbnQgdG8gZm9yY2UgbmV3IHJlc3VsdHMsIHVzZSBgcmVmZXRjaGAuXG4gICAqXG4gICAqIE5vdGU6IHRoZSBgbmV4dGAgY2FsbGJhY2sgd2lsbCAqbm90KiBmaXJlIGlmIHRoZSB2YXJpYWJsZXMgaGF2ZSBub3QgY2hhbmdlZFxuICAgKiBvciBpZiB0aGUgcmVzdWx0IGlzIGNvbWluZyBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBOb3RlOiB0aGUgcHJvbWlzZSB3aWxsIHJldHVybiB0aGUgb2xkIHJlc3VsdHMgaW1tZWRpYXRlbHkgaWYgdGhlIHZhcmlhYmxlc1xuICAgKiBoYXZlIG5vdCBjaGFuZ2VkLlxuICAgKlxuICAgKiBOb3RlOiB0aGUgcHJvbWlzZSB3aWxsIHJldHVybiBudWxsIGltbWVkaWF0ZWx5IGlmIHRoZSBxdWVyeSBpcyBub3QgYWN0aXZlXG4gICAqICh0aGVyZSBhcmUgbm8gc3Vic2NyaWJlcnMpLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0gdmFyaWFibGVzOiBUaGUgbmV3IHNldCBvZiB2YXJpYWJsZXMuIElmIHRoZXJlIGFyZSBtaXNzaW5nIHZhcmlhYmxlcyxcbiAgICogdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aG9zZSB2YXJpYWJsZXMgd2lsbCBiZSB1c2VkLlxuICAgKlxuICAgKiBAcGFyYW0gdHJ5RmV0Y2g6IFRyeSBhbmQgZmV0Y2ggbmV3IHJlc3VsdHMgZXZlbiBpZiB0aGUgdmFyaWFibGVzIGhhdmVuJ3RcbiAgICogY2hhbmdlZCAod2UgbWF5IHN0aWxsIGp1c3QgaGl0IHRoZSBzdG9yZSwgYnV0IGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGVyZVxuICAgKiB0aGlzIHdpbGwgcmVmZXRjaClcbiAgICovXG4gIHB1YmxpYyBzZXRWYXJpYWJsZXMoXG4gICAgdmFyaWFibGVzOiBUVmFyaWFibGVzLFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB8IHZvaWQ+IHtcbiAgICBpZiAoZXF1YWwodGhpcy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgbm8gb2JzZXJ2ZXJzLCB0aGVuIHdlIGRvbid0IGFjdHVhbGx5IHdhbnQgdG8gbWFrZSBhIG5ldHdvcmtcbiAgICAgIC8vIHJlcXVlc3QuIEFzIHNvb24gYXMgc29tZW9uZSBvYnNlcnZlcyB0aGUgcXVlcnksIHRoZSByZXF1ZXN0IHdpbGwga2lja1xuICAgICAgLy8gb2ZmLiBGb3Igbm93LCB3ZSBqdXN0IHN0b3JlIGFueSBjaGFuZ2VzLiAoU2VlICMxMDc3KVxuICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLnNpemVcbiAgICAgICAgPyB0aGlzLnJlc3VsdCgpXG4gICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zLnZhcmlhYmxlcyA9IHZhcmlhYmxlcztcblxuICAgIC8vIFNlZSBjb21tZW50IGFib3ZlXG4gICAgaWYgKCF0aGlzLm9ic2VydmVycy5zaXplKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgbGV0IHsgZmV0Y2hQb2xpY3kgPSAnY2FjaGUtZmlyc3QnIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgcmVvYnNlcnZlT3B0aW9uczogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT4+ID0ge1xuICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICB2YXJpYWJsZXMsXG4gICAgfTtcblxuICAgIGlmIChmZXRjaFBvbGljeSAhPT0gJ2NhY2hlLWZpcnN0JyAmJlxuICAgICAgICBmZXRjaFBvbGljeSAhPT0gJ25vLWNhY2hlJyAmJlxuICAgICAgICBmZXRjaFBvbGljeSAhPT0gJ25ldHdvcmstb25seScpIHtcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMuZmV0Y2hQb2xpY3kgPSAnY2FjaGUtYW5kLW5ldHdvcmsnO1xuICAgICAgcmVvYnNlcnZlT3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kgPSBmZXRjaFBvbGljeTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZW9ic2VydmUoXG4gICAgICByZW9ic2VydmVPcHRpb25zLFxuICAgICAgTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXMsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVRdWVyeTxUVmFycyA9IFRWYXJpYWJsZXM+KFxuICAgIG1hcEZuOiAoXG4gICAgICBwcmV2aW91c1F1ZXJ5UmVzdWx0OiBURGF0YSxcbiAgICAgIG9wdGlvbnM6IFBpY2s8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPiwgXCJ2YXJpYWJsZXNcIj4sXG4gICAgKSA9PiBURGF0YSxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBxdWVyeU1hbmFnZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHF1ZXJ5TWFuYWdlci5jYWNoZS5kaWZmPFREYXRhPih7XG4gICAgICBxdWVyeTogdGhpcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyxcbiAgICAgIHByZXZpb3VzUmVzdWx0OiB0aGlzLmxhc3RSZXN1bHQ/LmRhdGEsXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbmV3UmVzdWx0ID0gbWFwRm4ocmVzdWx0ISwge1xuICAgICAgdmFyaWFibGVzOiAodGhpcyBhcyBhbnkpLnZhcmlhYmxlcyxcbiAgICB9KTtcblxuICAgIGlmIChuZXdSZXN1bHQpIHtcbiAgICAgIHF1ZXJ5TWFuYWdlci5jYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgcXVlcnk6IHRoaXMub3B0aW9ucy5xdWVyeSxcbiAgICAgICAgZGF0YTogbmV3UmVzdWx0LFxuICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgfSk7XG5cbiAgICAgIHF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXJ0UG9sbGluZyhwb2xsSW50ZXJ2YWw6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0UmVvYnNlcnZlcigpLnVwZGF0ZU9wdGlvbnMoeyBwb2xsSW50ZXJ2YWwgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RvcFBvbGxpbmcoKSB7XG4gICAgaWYgKHRoaXMucmVvYnNlcnZlcikge1xuICAgICAgdGhpcy5yZW9ic2VydmVyLnVwZGF0ZU9wdGlvbnMoeyBwb2xsSW50ZXJ2YWw6IDAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVMYXN0UmVzdWx0KG5ld1Jlc3VsdDogQXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+KSB7XG4gICAgY29uc3QgcHJldmlvdXNSZXN1bHQgPSB0aGlzLmxhc3RSZXN1bHQ7XG4gICAgdGhpcy5sYXN0UmVzdWx0ID0gbmV3UmVzdWx0O1xuICAgIHRoaXMubGFzdFJlc3VsdFNuYXBzaG90ID0gdGhpcy5xdWVyeU1hbmFnZXIuYXNzdW1lSW1tdXRhYmxlUmVzdWx0c1xuICAgICAgPyBuZXdSZXN1bHRcbiAgICAgIDogY2xvbmVEZWVwKG5ld1Jlc3VsdCk7XG4gICAgaWYgKCFpc05vbkVtcHR5QXJyYXkobmV3UmVzdWx0LmVycm9ycykpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmxhc3RFcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHByZXZpb3VzUmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBvblN1YnNjcmliZShvYnNlcnZlcjogT2JzZXJ2ZXI8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+Pikge1xuICAgIC8vIFN1YnNjcmliaW5nIHVzaW5nIHRoaXMub2JzZXJ2ZXIgd2lsbCBjcmVhdGUgYW4gaW5maW5pdGUgbm90aWZpY2Fpb25cbiAgICAvLyBsb29wLCBidXQgdGhlIGludGVudCBvZiBicm9hZGNhc3RpbmcgcmVzdWx0cyB0byBhbGwgdGhlIG90aGVyXG4gICAgLy8gdGhpcy5vYnNlcnZlcnMgY2FuIGJlIHNhdGlzZmllZCB3aXRob3V0IGRvaW5nIGFueXRoaW5nLCB3aGljaCBpc1xuICAgIC8vIHdoeSB3ZSBkbyBub3QgYm90aGVyIHRocm93aW5nIGFuIGVycm9yIGhlcmUuXG4gICAgaWYgKG9ic2VydmVyID09PSB0aGlzLm9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuXG4gICAgLy8gWmVuIE9ic2VydmFibGUgaGFzIGl0cyBvd24gZXJyb3IgZnVuY3Rpb24sIHNvIGluIG9yZGVyIHRvIGxvZyBjb3JyZWN0bHlcbiAgICAvLyB3ZSBuZWVkIHRvIHByb3ZpZGUgYSBjdXN0b20gZXJyb3IgY2FsbGJhY2suXG4gICAgdHJ5IHtcbiAgICAgIHZhciBzdWJPYnNlcnZlciA9IChvYnNlcnZlciBhcyBhbnkpLl9zdWJzY3JpcHRpb24uX29ic2VydmVyO1xuICAgICAgaWYgKHN1Yk9ic2VydmVyICYmICFzdWJPYnNlcnZlci5lcnJvcikge1xuICAgICAgICBzdWJPYnNlcnZlci5lcnJvciA9IGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2s7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuXG4gICAgY29uc3QgZmlyc3QgPSAhdGhpcy5vYnNlcnZlcnMuc2l6ZTtcbiAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuXG4gICAgLy8gRGVsaXZlciBtb3N0IHJlY2VudCBlcnJvciBvciByZXN1bHQuXG4gICAgaWYgKHRoaXMubGFzdEVycm9yKSB7XG4gICAgICBvYnNlcnZlci5lcnJvciAmJiBvYnNlcnZlci5lcnJvcih0aGlzLmxhc3RFcnJvcik7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxhc3RSZXN1bHQpIHtcbiAgICAgIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dCh0aGlzLmxhc3RSZXN1bHQpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYXRlIG9ic2VydmF0aW9uIG9mIHRoaXMgcXVlcnkgaWYgaXQgaGFzbid0IGJlZW4gcmVwb3J0ZWQgdG9cbiAgICAvLyB0aGUgUXVlcnlNYW5hZ2VyIHlldC5cbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIHRoaXMucmVvYnNlcnZlKCkuY2F0Y2goXyA9PiB7XG4gICAgICAgIC8vIEJsaW5kbHkgY2F0Y2hpbmcgaGVyZSBwcmV2ZW50cyB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zLFxuICAgICAgICAvLyBhbmQgaXMgc2FmZSBiZWNhdXNlIHRoZSBPYnNlcnZhYmxlUXVlcnkgaGFuZGxlcyB0aGlzIGVycm9yIHdpdGhcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlci5lcnJvciwgc28gd2UncmUgbm90IGp1c3Qgc3dhbGxvd2luZyB0aGUgZXJyb3IgYnlcbiAgICAgICAgLy8gaWdub3JpbmcgaXQgaGVyZS5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKSAmJiAhdGhpcy5vYnNlcnZlcnMuc2l6ZSkge1xuICAgICAgICB0aGlzLnRlYXJEb3duUXVlcnkoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZW9ic2VydmVyPzogUmVvYnNlcnZlcjxURGF0YSwgVFZhcmlhYmxlcz47XG5cbiAgcHJpdmF0ZSBnZXRSZW9ic2VydmVyKCk6IFJlb2JzZXJ2ZXI8VERhdGEsIFRWYXJpYWJsZXM+IHtcbiAgICByZXR1cm4gdGhpcy5yZW9ic2VydmVyIHx8ICh0aGlzLnJlb2JzZXJ2ZXIgPSB0aGlzLm5ld1Jlb2JzZXJ2ZXIodHJ1ZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBuZXdSZW9ic2VydmVyKHNoYXJlT3B0aW9uczogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgcXVlcnlNYW5hZ2VyLCBxdWVyeUlkIH0gPSB0aGlzO1xuICAgIHF1ZXJ5TWFuYWdlci5zZXRPYnNlcnZhYmxlUXVlcnkodGhpcyk7XG4gICAgcmV0dXJuIG5ldyBSZW9ic2VydmVyPFREYXRhLCBUVmFyaWFibGVzPihcbiAgICAgIHRoaXMub2JzZXJ2ZXIsXG4gICAgICAvLyBTaGFyaW5nIG9wdGlvbnMgYWxsb3dzIHRoaXMucmVvYnNlcnZlci5vcHRpb25zIHRvIGJlID09PVxuICAgICAgLy8gdGhpcy5vcHRpb25zLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IHN5bmNocm9uaXppbmcgdGhlXG4gICAgICAvLyBwcm9wZXJ0aWVzIG9mIHR3byBkaXN0aW5jdCBvYmplY3RzLlxuICAgICAgc2hhcmVPcHRpb25zID8gdGhpcy5vcHRpb25zIDogeyAuLi50aGlzLm9wdGlvbnMgfSxcbiAgICAgIChjdXJyZW50T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cykgPT4ge1xuICAgICAgICBxdWVyeU1hbmFnZXIuc2V0T2JzZXJ2YWJsZVF1ZXJ5KHRoaXMpO1xuICAgICAgICByZXR1cm4gcXVlcnlNYW5hZ2VyLmZldGNoUXVlcnlPYnNlcnZhYmxlKFxuICAgICAgICAgIHF1ZXJ5SWQsXG4gICAgICAgICAgY3VycmVudE9wdGlvbnMsXG4gICAgICAgICAgbmV3TmV0d29ya1N0YXR1cyxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICAvLyBBdm9pZCBwb2xsaW5nIGR1cmluZyBTU1IgYW5kIHdoZW4gdGhlIHF1ZXJ5IGlzIGFscmVhZHkgaW4gZmxpZ2h0LlxuICAgICAgIXF1ZXJ5TWFuYWdlci5zc3JNb2RlICYmIChcbiAgICAgICAgKCkgPT4gIWlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCh0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzKSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHJlb2JzZXJ2ZShcbiAgICBuZXdPcHRpb25zPzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT4+LFxuICAgIG5ld05ldHdvcmtTdGF0dXM/OiBOZXR3b3JrU3RhdHVzLFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4ge1xuICAgIHRoaXMuaXNUb3JuRG93biA9IGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmdldFJlb2JzZXJ2ZXIoKS5yZW9ic2VydmUobmV3T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cyk7XG4gIH1cblxuICAvLyBQYXNzIHRoZSBjdXJyZW50IHJlc3VsdCB0byB0aGlzLm9ic2VydmVyLm5leHQgd2l0aG91dCBhcHBseWluZyBhbnlcbiAgLy8gZmV0Y2ggcG9saWNpZXMsIGJ5cGFzc2luZyB0aGUgUmVvYnNlcnZlci5cbiAgcHJpdmF0ZSBvYnNlcnZlKCkge1xuICAgIC8vIFBhc3NpbmcgZmFsc2UgaXMgaW1wb3J0YW50IHNvIHRoYXQgdGhpcy5nZXRDdXJyZW50UmVzdWx0IGRvZXNuJ3RcbiAgICAvLyBzYXZlIHRoZSBmZXRjaE1vcmUgcmVzdWx0IGFzIHRoaXMubGFzdFJlc3VsdCwgY2F1c2luZyBpdCB0byBiZVxuICAgIC8vIGlnbm9yZWQgZHVlIHRvIHRoZSB0aGlzLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQgY2hlY2sgaW5cbiAgICAvLyB0aGlzLm9ic2VydmVyLm5leHQuXG4gICAgdGhpcy5vYnNlcnZlci5uZXh0KHRoaXMuZ2V0Q3VycmVudFJlc3VsdChmYWxzZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBvYnNlcnZlciA9IHtcbiAgICBuZXh0OiAocmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4pID0+IHtcbiAgICAgIGlmICh0aGlzLmxhc3RFcnJvciB8fCB0aGlzLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQocmVzdWx0KSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ25leHQnLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlcnJvcjogKGVycm9yOiBBcG9sbG9FcnJvcikgPT4ge1xuICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgZ2V0IHRoZSBjdXJyZW50IHJlc3VsdCBvbiBlcnJvcnMsIG9ubHkgdGhlIGVycm9yLCB3ZVxuICAgICAgLy8gbXVzdCBtaXJyb3IgdGhlIHVwZGF0ZXMgdGhhdCBvY2N1ciBpbiBRdWVyeVN0b3JlLm1hcmtRdWVyeUVycm9yIGhlcmVcbiAgICAgIHRoaXMudXBkYXRlTGFzdFJlc3VsdCh7XG4gICAgICAgIC4uLnRoaXMubGFzdFJlc3VsdCxcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGVycm9yczogZXJyb3IuZ3JhcGhRTEVycm9ycyxcbiAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5lcnJvcixcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ2Vycm9yJywgdGhpcy5sYXN0RXJyb3IgPSBlcnJvcik7XG4gICAgfSxcbiAgfTtcblxuICBwdWJsaWMgaGFzT2JzZXJ2ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplID4gMDtcbiAgfVxuXG4gIHByaXZhdGUgdGVhckRvd25RdWVyeSgpIHtcbiAgICBpZiAodGhpcy5pc1Rvcm5Eb3duKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5yZW9ic2VydmVyKSB7XG4gICAgICB0aGlzLnJlb2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgZGVsZXRlIHRoaXMucmVvYnNlcnZlcjtcbiAgICB9XG5cbiAgICAvLyBzdG9wIGFsbCBhY3RpdmUgR3JhcGhRTCBzdWJzY3JpcHRpb25zXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3ViID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuY2xlYXIoKTtcblxuICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3BRdWVyeSh0aGlzLnF1ZXJ5SWQpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMuY2xlYXIoKTtcblxuICAgIHRoaXMuaXNUb3JuRG93biA9IHRydWU7XG4gIH1cbn1cblxuLy8gTmVjZXNzYXJ5IGJlY2F1c2UgdGhlIE9ic2VydmFibGVRdWVyeSBjb25zdHJ1Y3RvciBoYXMgYSBkaWZmZXJlbnRcbi8vIHNpZ25hdHVyZSB0aGFuIHRoZSBPYnNlcnZhYmxlIGNvbnN0cnVjdG9yLlxuZml4T2JzZXJ2YWJsZVN1YmNsYXNzKE9ic2VydmFibGVRdWVyeSk7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2soZXJyb3I6IEFwb2xsb0Vycm9yKSB7XG4gIGludmFyaWFudC5lcnJvcignVW5oYW5kbGVkIGVycm9yJywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spO1xufVxuIiwiLy8gQSBbdHJpZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpZSkgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBob2xkc1xuLy8gb2JqZWN0IGtleXMgd2Vha2x5LCB5ZXQgY2FuIGFsc28gaG9sZCBub24tb2JqZWN0IGtleXMsIHVubGlrZSB0aGVcbi8vIG5hdGl2ZSBgV2Vha01hcGAuXG5cbi8vIElmIG5vIG1ha2VEYXRhIGZ1bmN0aW9uIGlzIHN1cHBsaWVkLCB0aGUgbG9va2VkLXVwIGRhdGEgd2lsbCBiZSBhbiBlbXB0eSxcbi8vIG51bGwtcHJvdG90eXBlIE9iamVjdC5cbmNvbnN0IGRlZmF1bHRNYWtlRGF0YSA9ICgpID0+IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8vIFVzZWZ1bCBmb3IgcHJvY2Vzc2luZyBhcmd1bWVudHMgb2JqZWN0cyBhcyB3ZWxsIGFzIGFycmF5cy5cbmNvbnN0IHsgZm9yRWFjaCwgc2xpY2UgfSA9IEFycmF5LnByb3RvdHlwZTtcblxuZXhwb3J0IGNsYXNzIFRyaWU8RGF0YT4ge1xuICAvLyBTaW5jZSBhIGBXZWFrTWFwYCBjYW5ub3QgaG9sZCBwcmltaXRpdmUgdmFsdWVzIGFzIGtleXMsIHdlIG5lZWQgYVxuICAvLyBiYWNrdXAgYE1hcGAgaW5zdGFuY2UgdG8gaG9sZCBwcmltaXRpdmUga2V5cy4gQm90aCBgdGhpcy5fd2Vha01hcGBcbiAgLy8gYW5kIGB0aGlzLl9zdHJvbmdNYXBgIGFyZSBsYXppbHkgaW5pdGlhbGl6ZWQuXG4gIHByaXZhdGUgd2Vhaz86IFdlYWtNYXA8YW55LCBUcmllPERhdGE+PjtcbiAgcHJpdmF0ZSBzdHJvbmc/OiBNYXA8YW55LCBUcmllPERhdGE+PjtcbiAgcHJpdmF0ZSBkYXRhPzogRGF0YTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHdlYWtuZXNzID0gdHJ1ZSxcbiAgICBwcml2YXRlIG1ha2VEYXRhOiAoYXJyYXk6IGFueVtdKSA9PiBEYXRhID0gZGVmYXVsdE1ha2VEYXRhLFxuICApIHt9XG5cbiAgcHVibGljIGxvb2t1cDxUIGV4dGVuZHMgYW55W10+KC4uLmFycmF5OiBUKTogRGF0YSB7XG4gICAgcmV0dXJuIHRoaXMubG9va3VwQXJyYXkoYXJyYXkpO1xuICB9XG5cbiAgcHVibGljIGxvb2t1cEFycmF5PFQgZXh0ZW5kcyBJQXJndW1lbnRzIHwgYW55W10+KGFycmF5OiBUKTogRGF0YSB7XG4gICAgbGV0IG5vZGU6IFRyaWU8RGF0YT4gPSB0aGlzO1xuICAgIGZvckVhY2guY2FsbChhcnJheSwga2V5ID0+IG5vZGUgPSBub2RlLmdldENoaWxkVHJpZShrZXkpKTtcbiAgICByZXR1cm4gbm9kZS5kYXRhIHx8IChub2RlLmRhdGEgPSB0aGlzLm1ha2VEYXRhKHNsaWNlLmNhbGwoYXJyYXkpKSk7XG4gIH1cblxuICBwcml2YXRlIGdldENoaWxkVHJpZShrZXk6IGFueSkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMud2Vha25lc3MgJiYgaXNPYmpSZWYoa2V5KVxuICAgICAgPyB0aGlzLndlYWsgfHwgKHRoaXMud2VhayA9IG5ldyBXZWFrTWFwPGFueSwgVHJpZTxEYXRhPj4oKSlcbiAgICAgIDogdGhpcy5zdHJvbmcgfHwgKHRoaXMuc3Ryb25nID0gbmV3IE1hcDxhbnksIFRyaWU8RGF0YT4+KCkpO1xuICAgIGxldCBjaGlsZCA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWNoaWxkKSBtYXAuc2V0KGtleSwgY2hpbGQgPSBuZXcgVHJpZTxEYXRhPih0aGlzLndlYWtuZXNzLCB0aGlzLm1ha2VEYXRhKSk7XG4gICAgcmV0dXJuIGNoaWxkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzT2JqUmVmKHZhbHVlOiBhbnkpIHtcbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgY2FzZSBcIm9iamVjdFwiOlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgYnJlYWs7XG4gICAgLy8gRmFsbCB0aHJvdWdoIHRvIHJldHVybiB0cnVlLi4uXG4gIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsInR5cGUgQ29udGV4dCA9IHtcbiAgcGFyZW50OiBDb250ZXh0IHwgbnVsbDtcbiAgc2xvdHM6IHsgW3Nsb3RJZDogc3RyaW5nXTogYW55IH07XG59XG5cbi8vIFRoaXMgY3VycmVudENvbnRleHQgdmFyaWFibGUgd2lsbCBvbmx5IGJlIHVzZWQgaWYgdGhlIG1ha2VTbG90Q2xhc3Ncbi8vIGZ1bmN0aW9uIGlzIGNhbGxlZCwgd2hpY2ggaGFwcGVucyBvbmx5IGlmIHRoaXMgaXMgdGhlIGZpcnN0IGNvcHkgb2YgdGhlXG4vLyBAd3J5L2NvbnRleHQgcGFja2FnZSB0byBiZSBpbXBvcnRlZC5cbmxldCBjdXJyZW50Q29udGV4dDogQ29udGV4dCB8IG51bGwgPSBudWxsO1xuXG4vLyBUaGlzIHVuaXF1ZSBpbnRlcm5hbCBvYmplY3QgaXMgdXNlZCB0byBkZW5vdGUgdGhlIGFic2VuY2Ugb2YgYSB2YWx1ZVxuLy8gZm9yIGEgZ2l2ZW4gU2xvdCwgYW5kIGlzIG5ldmVyIGV4cG9zZWQgdG8gb3V0c2lkZSBjb2RlLlxuY29uc3QgTUlTU0lOR19WQUxVRTogYW55ID0ge307XG5cbmxldCBpZENvdW50ZXIgPSAxO1xuXG4vLyBBbHRob3VnaCB3ZSBjYW4ndCBkbyBhbnl0aGluZyBhYm91dCB0aGUgY29zdCBvZiBkdXBsaWNhdGVkIGNvZGUgZnJvbVxuLy8gYWNjaWRlbnRhbGx5IGJ1bmRsaW5nIG11bHRpcGxlIGNvcGllcyBvZiB0aGUgQHdyeS9jb250ZXh0IHBhY2thZ2UsIHdlIGNhblxuLy8gYXZvaWQgY3JlYXRpbmcgdGhlIFNsb3QgY2xhc3MgbW9yZSB0aGFuIG9uY2UgdXNpbmcgbWFrZVNsb3RDbGFzcy5cbmNvbnN0IG1ha2VTbG90Q2xhc3MgPSAoKSA9PiBjbGFzcyBTbG90PFRWYWx1ZT4ge1xuICAvLyBJZiB5b3UgaGF2ZSBhIFNsb3Qgb2JqZWN0LCB5b3UgY2FuIGZpbmQgb3V0IGl0cyBzbG90LmlkLCBidXQgeW91IGNhbm5vdFxuICAvLyBndWVzcyB0aGUgc2xvdC5pZCBvZiBhIFNsb3QgeW91IGRvbid0IGhhdmUgYWNjZXNzIHRvLCB0aGFua3MgdG8gdGhlXG4gIC8vIHJhbmRvbWl6ZWQgc3VmZml4LlxuICBwdWJsaWMgcmVhZG9ubHkgaWQgPSBbXG4gICAgXCJzbG90XCIsXG4gICAgaWRDb3VudGVyKyssXG4gICAgRGF0ZS5ub3coKSxcbiAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSxcbiAgXS5qb2luKFwiOlwiKTtcblxuICBwdWJsaWMgaGFzVmFsdWUoKSB7XG4gICAgZm9yIChsZXQgY29udGV4dCA9IGN1cnJlbnRDb250ZXh0OyBjb250ZXh0OyBjb250ZXh0ID0gY29udGV4dC5wYXJlbnQpIHtcbiAgICAgIC8vIFdlIHVzZSB0aGUgU2xvdCBvYmplY3QgaXNlbGYgYXMgYSBrZXkgdG8gaXRzIHZhbHVlLCB3aGljaCBtZWFucyB0aGVcbiAgICAgIC8vIHZhbHVlIGNhbm5vdCBiZSBvYnRhaW5lZCB3aXRob3V0IGEgcmVmZXJlbmNlIHRvIHRoZSBTbG90IG9iamVjdC5cbiAgICAgIGlmICh0aGlzLmlkIGluIGNvbnRleHQuc2xvdHMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjb250ZXh0LnNsb3RzW3RoaXMuaWRdO1xuICAgICAgICBpZiAodmFsdWUgPT09IE1JU1NJTkdfVkFMVUUpIGJyZWFrO1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgICAvLyBDYWNoZSB0aGUgdmFsdWUgaW4gY3VycmVudENvbnRleHQuc2xvdHMgc28gdGhlIG5leHQgbG9va3VwIHdpbGxcbiAgICAgICAgICAvLyBiZSBmYXN0ZXIuIFRoaXMgY2FjaGluZyBpcyBzYWZlIGJlY2F1c2UgdGhlIHRyZWUgb2YgY29udGV4dHMgYW5kXG4gICAgICAgICAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgc2xvdHMgYXJlIGxvZ2ljYWxseSBpbW11dGFibGUuXG4gICAgICAgICAgY3VycmVudENvbnRleHQhLnNsb3RzW3RoaXMuaWRdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgICAgLy8gSWYgYSB2YWx1ZSB3YXMgbm90IGZvdW5kIGZvciB0aGlzIFNsb3QsIGl0J3MgbmV2ZXIgZ29pbmcgdG8gYmUgZm91bmRcbiAgICAgIC8vIG5vIG1hdHRlciBob3cgbWFueSB0aW1lcyB3ZSBsb29rIGl0IHVwLCBzbyB3ZSBtaWdodCBhcyB3ZWxsIGNhY2hlXG4gICAgICAvLyB0aGUgYWJzZW5jZSBvZiB0aGUgdmFsdWUsIHRvby5cbiAgICAgIGN1cnJlbnRDb250ZXh0LnNsb3RzW3RoaXMuaWRdID0gTUlTU0lOR19WQUxVRTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKCk6IFRWYWx1ZSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuaGFzVmFsdWUoKSkge1xuICAgICAgcmV0dXJuIGN1cnJlbnRDb250ZXh0IS5zbG90c1t0aGlzLmlkXSBhcyBUVmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHdpdGhWYWx1ZTxUUmVzdWx0LCBUQXJncyBleHRlbmRzIGFueVtdLCBUVGhpcyA9IGFueT4oXG4gICAgdmFsdWU6IFRWYWx1ZSxcbiAgICBjYWxsYmFjazogKHRoaXM6IFRUaGlzLCAuLi5hcmdzOiBUQXJncykgPT4gVFJlc3VsdCxcbiAgICAvLyBHaXZlbiB0aGUgcHJldmFsZW5jZSBvZiBhcnJvdyBmdW5jdGlvbnMsIHNwZWNpZnlpbmcgYXJndW1lbnRzIGlzIGxpa2VseVxuICAgIC8vIHRvIGJlIG11Y2ggbW9yZSBjb21tb24gdGhhbiBzcGVjaWZ5aW5nIGB0aGlzYCwgaGVuY2UgdGhpcyBvcmRlcmluZzpcbiAgICBhcmdzPzogVEFyZ3MsXG4gICAgdGhpc0FyZz86IFRUaGlzLFxuICApOiBUUmVzdWx0IHtcbiAgICBjb25zdCBzbG90cyA9IHtcbiAgICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAgIFt0aGlzLmlkXTogdmFsdWUsXG4gICAgfTtcbiAgICBjb25zdCBwYXJlbnQgPSBjdXJyZW50Q29udGV4dDtcbiAgICBjdXJyZW50Q29udGV4dCA9IHsgcGFyZW50LCBzbG90cyB9O1xuICAgIHRyeSB7XG4gICAgICAvLyBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkgYWxsb3dzIHRoZSBhcmd1bWVudHMgYXJyYXkgYXJndW1lbnQgdG8gYmVcbiAgICAgIC8vIG9taXR0ZWQgb3IgdW5kZWZpbmVkLCBzbyBhcmdzISBpcyBmaW5lIGhlcmUuXG4gICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpc0FyZyEsIGFyZ3MhKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY3VycmVudENvbnRleHQgPSBwYXJlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FwdHVyZSB0aGUgY3VycmVudCBjb250ZXh0IGFuZCB3cmFwIGEgY2FsbGJhY2sgZnVuY3Rpb24gc28gdGhhdCBpdFxuICAvLyByZWVzdGFibGlzaGVzIHRoZSBjYXB0dXJlZCBjb250ZXh0IHdoZW4gY2FsbGVkLlxuICBzdGF0aWMgYmluZDxUQXJncyBleHRlbmRzIGFueVtdLCBUUmVzdWx0PihcbiAgICBjYWxsYmFjazogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUUmVzdWx0LFxuICApIHtcbiAgICBjb25zdCBjb250ZXh0ID0gY3VycmVudENvbnRleHQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcbiAgICAgIGNvbnN0IHNhdmVkID0gY3VycmVudENvbnRleHQ7XG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50Q29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMgYXMgYW55KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gc2F2ZWQ7XG4gICAgICB9XG4gICAgfSBhcyB0eXBlb2YgY2FsbGJhY2s7XG4gIH1cblxuICAvLyBJbW1lZGlhdGVseSBydW4gYSBjYWxsYmFjayBmdW5jdGlvbiB3aXRob3V0IGFueSBjYXB0dXJlZCBjb250ZXh0LlxuICBzdGF0aWMgbm9Db250ZXh0PFRSZXN1bHQsIFRBcmdzIGV4dGVuZHMgYW55W10sIFRUaGlzID0gYW55PihcbiAgICBjYWxsYmFjazogKHRoaXM6IFRUaGlzLCAuLi5hcmdzOiBUQXJncykgPT4gVFJlc3VsdCxcbiAgICAvLyBHaXZlbiB0aGUgcHJldmFsZW5jZSBvZiBhcnJvdyBmdW5jdGlvbnMsIHNwZWNpZnlpbmcgYXJndW1lbnRzIGlzIGxpa2VseVxuICAgIC8vIHRvIGJlIG11Y2ggbW9yZSBjb21tb24gdGhhbiBzcGVjaWZ5aW5nIGB0aGlzYCwgaGVuY2UgdGhpcyBvcmRlcmluZzpcbiAgICBhcmdzPzogVEFyZ3MsXG4gICAgdGhpc0FyZz86IFRUaGlzLFxuICApIHtcbiAgICBpZiAoY3VycmVudENvbnRleHQpIHtcbiAgICAgIGNvbnN0IHNhdmVkID0gY3VycmVudENvbnRleHQ7XG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50Q29udGV4dCA9IG51bGw7XG4gICAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSBhbGxvd3MgdGhlIGFyZ3VtZW50cyBhcnJheSBhcmd1bWVudCB0byBiZVxuICAgICAgICAvLyBvbWl0dGVkIG9yIHVuZGVmaW5lZCwgc28gYXJncyEgaXMgZmluZSBoZXJlLlxuICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpc0FyZyEsIGFyZ3MhKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gc2F2ZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnISwgYXJncyEpO1xuICAgIH1cbiAgfVxufTtcblxuLy8gV2Ugc3RvcmUgYSBzaW5nbGUgZ2xvYmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBTbG90IGNsYXNzIGFzIGEgcGVybWFuZW50XG4vLyBub24tZW51bWVyYWJsZSBzeW1ib2wgcHJvcGVydHkgb2YgdGhlIEFycmF5IGNvbnN0cnVjdG9yLiBUaGlzIG9iZnVzY2F0aW9uXG4vLyBkb2VzIG5vdGhpbmcgdG8gcHJldmVudCBhY2Nlc3MgdG8gdGhlIFNsb3QgY2xhc3MsIGJ1dCBhdCBsZWFzdCBpdCBlbnN1cmVzXG4vLyB0aGUgaW1wbGVtZW50YXRpb24gKGkuZS4gY3VycmVudENvbnRleHQpIGNhbm5vdCBiZSB0YW1wZXJlZCB3aXRoLCBhbmQgYWxsXG4vLyBjb3BpZXMgb2YgdGhlIEB3cnkvY29udGV4dCBwYWNrYWdlIChob3BlZnVsbHkganVzdCBvbmUpIHdpbGwgc2hhcmUgdGhlXG4vLyBzYW1lIFNsb3QgaW1wbGVtZW50YXRpb24uIFNpbmNlIHRoZSBmaXJzdCBjb3B5IG9mIHRoZSBAd3J5L2NvbnRleHQgcGFja2FnZVxuLy8gdG8gYmUgaW1wb3J0ZWQgd2lucywgdGhpcyB0ZWNobmlxdWUgaW1wb3NlcyBhIHZlcnkgaGlnaCBjb3N0IGZvciBhbnlcbi8vIGZ1dHVyZSBicmVha2luZyBjaGFuZ2VzIHRvIHRoZSBTbG90IGNsYXNzLlxuY29uc3QgZ2xvYmFsS2V5ID0gXCJAd3J5L2NvbnRleHQ6U2xvdFwiO1xuY29uc3QgaG9zdCA9IEFycmF5IGFzIGFueTtcblxuZXhwb3J0IGNvbnN0IFNsb3Q6IFJldHVyblR5cGU8dHlwZW9mIG1ha2VTbG90Q2xhc3M+ID0gaG9zdFtnbG9iYWxLZXldIHx8IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgU2xvdCA9IG1ha2VTbG90Q2xhc3MoKTtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaG9zdCwgZ2xvYmFsS2V5LCB7XG4gICAgICB2YWx1ZTogaG9zdFtnbG9iYWxLZXldID0gU2xvdCxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gU2xvdDtcbiAgfVxufSgpO1xuIiwiaW50ZXJmYWNlIE5vZGU8SywgVj4ge1xuICBrZXk6IEs7XG4gIHZhbHVlOiBWO1xuICBuZXdlcjogTm9kZTxLLCBWPiB8IG51bGw7XG4gIG9sZGVyOiBOb2RlPEssIFY+IHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdERpc3Bvc2UoKSB7fVxuXG5leHBvcnQgY2xhc3MgQ2FjaGU8SyA9IGFueSwgViA9IGFueT4ge1xuICBwcml2YXRlIG1hcCA9IG5ldyBNYXA8SywgTm9kZTxLLCBWPj4oKTtcbiAgcHJpdmF0ZSBuZXdlc3Q6IE5vZGU8SywgVj4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbGRlc3Q6IE5vZGU8SywgVj4gfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1heCA9IEluZmluaXR5LFxuICAgIHB1YmxpYyBkaXNwb3NlOiAodmFsdWU6IFYsIGtleTogSykgPT4gdm9pZCA9IGRlZmF1bHREaXNwb3NlLFxuICApIHt9XG5cbiAgcHVibGljIGhhcyhrZXk6IEspOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzKGtleSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0KGtleTogSyk6IFYgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldE5vZGUoa2V5KTtcbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROb2RlKGtleTogSyk6IE5vZGU8SywgVj4gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcblxuICAgIGlmIChub2RlICYmIG5vZGUgIT09IHRoaXMubmV3ZXN0KSB7XG4gICAgICBjb25zdCB7IG9sZGVyLCBuZXdlciB9ID0gbm9kZTtcblxuICAgICAgaWYgKG5ld2VyKSB7XG4gICAgICAgIG5ld2VyLm9sZGVyID0gb2xkZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbGRlcikge1xuICAgICAgICBvbGRlci5uZXdlciA9IG5ld2VyO1xuICAgICAgfVxuXG4gICAgICBub2RlLm9sZGVyID0gdGhpcy5uZXdlc3Q7XG4gICAgICBub2RlLm9sZGVyIS5uZXdlciA9IG5vZGU7XG5cbiAgICAgIG5vZGUubmV3ZXIgPSBudWxsO1xuICAgICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuXG4gICAgICBpZiAobm9kZSA9PT0gdGhpcy5vbGRlc3QpIHtcbiAgICAgICAgdGhpcy5vbGRlc3QgPSBuZXdlcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQoa2V5OiBLLCB2YWx1ZTogVik6IFYge1xuICAgIGxldCBub2RlID0gdGhpcy5nZXROb2RlKGtleSk7XG4gICAgaWYgKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgbm9kZSA9IHtcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlLFxuICAgICAgbmV3ZXI6IG51bGwsXG4gICAgICBvbGRlcjogdGhpcy5uZXdlc3RcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMubmV3ZXN0KSB7XG4gICAgICB0aGlzLm5ld2VzdC5uZXdlciA9IG5vZGU7XG4gICAgfVxuXG4gICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuICAgIHRoaXMub2xkZXN0ID0gdGhpcy5vbGRlc3QgfHwgbm9kZTtcblxuICAgIHRoaXMubWFwLnNldChrZXksIG5vZGUpO1xuXG4gICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgY2xlYW4oKSB7XG4gICAgd2hpbGUgKHRoaXMub2xkZXN0ICYmIHRoaXMubWFwLnNpemUgPiB0aGlzLm1heCkge1xuICAgICAgdGhpcy5kZWxldGUodGhpcy5vbGRlc3Qua2V5KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKGtleTogSyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICBpZiAobm9kZSkge1xuICAgICAgaWYgKG5vZGUgPT09IHRoaXMubmV3ZXN0KSB7XG4gICAgICAgIHRoaXMubmV3ZXN0ID0gbm9kZS5vbGRlcjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUgPT09IHRoaXMub2xkZXN0KSB7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gbm9kZS5uZXdlcjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUubmV3ZXIpIHtcbiAgICAgICAgbm9kZS5uZXdlci5vbGRlciA9IG5vZGUub2xkZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLm9sZGVyKSB7XG4gICAgICAgIG5vZGUub2xkZXIubmV3ZXIgPSBub2RlLm5ld2VyO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hcC5kZWxldGUoa2V5KTtcbiAgICAgIHRoaXMuZGlzcG9zZShub2RlLnZhbHVlLCBrZXkpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCB7IFNsb3QgfSBmcm9tIFwiLi9zbG90XCI7XG5leHBvcnQgeyBTbG90IH1cbmV4cG9ydCBjb25zdCB7IGJpbmQsIG5vQ29udGV4dCB9ID0gU2xvdDtcblxuLy8gUmVseWluZyBvbiB0aGUgQHR5cGVzL25vZGUgZGVjbGFyYXRpb24gb2YgZ2xvYmFsLnNldFRpbWVvdXQgY2FuIG1ha2Vcbi8vIHRoaW5ncyB0cmlja3kgZm9yIGRvd3N0cmVhbSBwcm9qZWN0cyAoc2VlIFBSICM3KS5cbmRlY2xhcmUgZnVuY3Rpb24gc2V0VGltZW91dChcbiAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55LFxuICBtcz86IG51bWJlcixcbiAgLi4uYXJnczogYW55W11cbik6IGFueTtcblxuLy8gTGlrZSBnbG9iYWwuc2V0VGltZW91dCwgZXhjZXB0IHRoZSBjYWxsYmFjayBydW5zIHdpdGggY2FwdHVyZWQgY29udGV4dC5cbmV4cG9ydCB7IHNldFRpbWVvdXRXaXRoQ29udGV4dCBhcyBzZXRUaW1lb3V0IH07XG5mdW5jdGlvbiBzZXRUaW1lb3V0V2l0aENvbnRleHQoY2FsbGJhY2s6ICgpID0+IGFueSwgZGVsYXk6IG51bWJlcikge1xuICByZXR1cm4gc2V0VGltZW91dChiaW5kKGNhbGxiYWNrKSwgZGVsYXkpO1xufVxuXG4vLyBUdXJuIGFueSBnZW5lcmF0b3IgZnVuY3Rpb24gaW50byBhbiBhc3luYyBmdW5jdGlvbiAodXNpbmcgeWllbGQgaW5zdGVhZFxuLy8gb2YgYXdhaXQpLCB3aXRoIGNvbnRleHQgYXV0b21hdGljYWxseSBwcmVzZXJ2ZWQgYWNyb3NzIHlpZWxkcy5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY0Zyb21HZW48VEFyZ3MgZXh0ZW5kcyBhbnlbXT4oXG4gIGdlbkZuOiAoLi4uYXJnczogVEFyZ3MpID0+IGFueVxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGhpczogYW55KSB7XG4gICAgY29uc3QgZ2VuID0gZ2VuRm4uYXBwbHkodGhpcywgYXJndW1lbnRzIGFzIGFueSk7XG4gICAgY29uc3QgYm91bmROZXh0ID0gYmluZChnZW4ubmV4dCk7XG4gICAgY29uc3QgYm91bmRUaHJvdyA9IGJpbmQoZ2VuLnRocm93ISk7XG4gICAgdHlwZSBNZXRob2QgPSB0eXBlb2YgYm91bmROZXh0IHwgdHlwZW9mIGJvdW5kVGhyb3c7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZDogTWV0aG9kLCBhcmd1bWVudDogYW55KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDogYW55ID0gbWV0aG9kLmNhbGwoZ2VuLCBhcmd1bWVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dCA9IHJlc3VsdC5kb25lID8gcmVzb2x2ZSA6IGludm9rZU5leHQ7XG4gICAgICAgIGlmIChpc1Byb21pc2VMaWtlKHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgICAgICByZXN1bHQudmFsdWUudGhlbihuZXh0LCByZXN1bHQuZG9uZSA/IHJlamVjdCA6IGludm9rZVRocm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0KHJlc3VsdC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGludm9rZU5leHQgPSAodmFsdWU/OiBhbnkpID0+IGludm9rZShib3VuZE5leHQsIHZhbHVlKTtcbiAgICAgIGNvbnN0IGludm9rZVRocm93ID0gKGVycm9yOiBhbnkpID0+IGludm9rZShib3VuZFRocm93LCBlcnJvcik7XG4gICAgICBpbnZva2VOZXh0KCk7XG4gICAgfSk7XG4gIH0gYXMgKC4uLmFyZ3M6IFRBcmdzKSA9PiBQcm9taXNlPGFueT47XG59XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2UodmFsdWU6IGFueSk6IHZhbHVlIGlzIFByb21pc2VMaWtlPGFueT4ge1xuICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLy8gSWYgeW91IHVzZSB0aGUgZmliZXJzIG5wbSBwYWNrYWdlIHRvIGltcGxlbWVudCBjb3JvdXRpbmVzIGluIE5vZGUuanMsXG4vLyB5b3Ugc2hvdWxkIGNhbGwgdGhpcyBmdW5jdGlvbiBhdCBsZWFzdCBvbmNlIHRvIGVuc3VyZSBjb250ZXh0IG1hbmFnZW1lbnRcbi8vIHJlbWFpbnMgY29oZXJlbnQgYWNyb3NzIGFueSB5aWVsZHMuXG5jb25zdCB3cmFwcGVkRmliZXJzOiBGdW5jdGlvbltdID0gW107XG5leHBvcnQgZnVuY3Rpb24gd3JhcFlpZWxkaW5nRmliZXJNZXRob2RzPEYgZXh0ZW5kcyBGdW5jdGlvbj4oRmliZXI6IEYpOiBGIHtcbiAgLy8gVGhlcmUgY2FuIGJlIG9ubHkgb25lIGltcGxlbWVudGF0aW9uIG9mIEZpYmVyIHBlciBwcm9jZXNzLCBzbyB0aGlzIGFycmF5XG4gIC8vIHNob3VsZCBuZXZlciBncm93IGxvbmdlciB0aGFuIG9uZSBlbGVtZW50LlxuICBpZiAod3JhcHBlZEZpYmVycy5pbmRleE9mKEZpYmVyKSA8IDApIHtcbiAgICBjb25zdCB3cmFwID0gKG9iajogYW55LCBtZXRob2Q6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZm4gPSBvYmpbbWV0aG9kXTtcbiAgICAgIG9ialttZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbm9Db250ZXh0KGZuLCBhcmd1bWVudHMgYXMgYW55LCB0aGlzKTtcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIFRoZXNlIG1ldGhvZHMgY2FuIHlpZWxkLCBhY2NvcmRpbmcgdG9cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGF2ZXJkZXQvbm9kZS1maWJlcnMvYmxvYi9kZGViZWQ5YjhhZTM4ODNlNTdmODIyZTIxMDhlNjk0M2U1YzhkMmE4L2ZpYmVycy5qcyNMOTctTDEwMFxuICAgIHdyYXAoRmliZXIsIFwieWllbGRcIik7XG4gICAgd3JhcChGaWJlci5wcm90b3R5cGUsIFwicnVuXCIpO1xuICAgIHdyYXAoRmliZXIucHJvdG90eXBlLCBcInRocm93SW50b1wiKTtcbiAgICB3cmFwcGVkRmliZXJzLnB1c2goRmliZXIpO1xuICB9XG4gIHJldHVybiBGaWJlcjtcbn1cbiIsImltcG9ydCB7IEFueUVudHJ5IH0gZnJvbSBcIi4vZW50cnlcIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwiQHdyeS9jb250ZXh0XCI7XG5cbmV4cG9ydCBjb25zdCBwYXJlbnRFbnRyeVNsb3QgPSBuZXcgU2xvdDxBbnlFbnRyeT4oKTtcblxuZXhwb3J0IHtcbiAgYmluZCBhcyBiaW5kQ29udGV4dCxcbiAgbm9Db250ZXh0LFxuICBzZXRUaW1lb3V0LFxuICBhc3luY0Zyb21HZW4sXG59IGZyb20gXCJAd3J5L2NvbnRleHRcIjtcbiIsImV4cG9ydCBjb25zdCB7XG4gIGhhc093blByb3BlcnR5LFxufSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbmV4cG9ydCBjb25zdCB7XG4gIC8vIFRoaXMgQXJyYXkuZnJvbSBwb2x5ZmlsbCBpcyByZXN0cmljdGVkIHRvIHdvcmtpbmcgd2l0aCBTZXQ8YW55PiBmb3Igbm93LFxuICAvLyBidXQgd2UgY2FuIGltcHJvdmUgdGhlIHBvbHlmaWxsIGFuZCBhZGQgb3RoZXIgaW5wdXQgdHlwZXMsIGFzIG5lZWRlZC4gTm90ZVxuICAvLyB0aGF0IHRoaXMgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gd2lsbCBvbmx5IGJlIHVzZWQgaWYgdGhlIGhvc3QgZW52aXJvbm1lbnRcbiAgLy8gZG9lcyBub3Qgc3VwcG9ydCBhIG5hdGl2ZSBBcnJheS5mcm9tIGZ1bmN0aW9uLiBJbiBtb3N0IG1vZGVybiBKUyBydW50aW1lcyxcbiAgLy8gdGhlIHRvQXJyYXkgZnVuY3Rpb24gZXhwb3J0ZWQgaGVyZSB3aWxsIGJlID09PSBBcnJheS5mcm9tLlxuICBmcm9tOiB0b0FycmF5ID0gKGNvbGxlY3Rpb246IFNldDxhbnk+KSA9PiB7XG4gICAgY29uc3QgYXJyYXk6IGFueVtdID0gW107XG4gICAgY29sbGVjdGlvbi5mb3JFYWNoKGl0ZW0gPT4gYXJyYXkucHVzaChpdGVtKSk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9LFxufSA9IEFycmF5O1xuXG5leHBvcnQgdHlwZSBVbnN1YnNjcmliYWJsZSA9IHtcbiAgdW5zdWJzY3JpYmU/OiB2b2lkIHwgKCgpID0+IGFueSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVVuc3Vic2NyaWJlKGVudHJ5T3JEZXA6IFVuc3Vic2NyaWJhYmxlKSB7XG4gIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IGVudHJ5T3JEZXA7XG4gIGlmICh0eXBlb2YgdW5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGVudHJ5T3JEZXAudW5zdWJzY3JpYmUgPSB2b2lkIDA7XG4gICAgdW5zdWJzY3JpYmUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuaW1wb3J0IHsgT3B0aW1pc3RpY1dyYXBPcHRpb25zIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IERlcCB9IGZyb20gXCIuL2RlcFwiO1xuaW1wb3J0IHsgbWF5YmVVbnN1YnNjcmliZSwgdG9BcnJheSwgVW5zdWJzY3JpYmFibGUgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmNvbnN0IGVtcHR5U2V0UG9vbDogU2V0PGFueT5bXSA9IFtdO1xuY29uc3QgUE9PTF9UQVJHRVRfU0laRSA9IDEwMDtcblxuLy8gU2luY2UgdGhpcyBwYWNrYWdlIG1pZ2h0IGJlIHVzZWQgYnJvd3NlcnMsIHdlIHNob3VsZCBhdm9pZCB1c2luZyB0aGVcbi8vIE5vZGUgYnVpbHQtaW4gYXNzZXJ0IG1vZHVsZS5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb246IGFueSwgb3B0aW9uYWxNZXNzYWdlPzogc3RyaW5nKSB7XG4gIGlmICghIGNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihvcHRpb25hbE1lc3NhZ2UgfHwgXCJhc3NlcnRpb24gZmFpbHVyZVwiKTtcbiAgfVxufVxuXG4vLyBTaW5jZSBleGNlcHRpb25zIGFyZSBjYWNoZWQganVzdCBsaWtlIG5vcm1hbCB2YWx1ZXMsIHdlIG5lZWQgYW4gZWZmaWNpZW50XG4vLyB3YXkgb2YgcmVwcmVzZW50aW5nIHVua25vd24sIG9yZGluYXJ5LCBhbmQgZXhjZXB0aW9uYWwgdmFsdWVzLlxudHlwZSBWYWx1ZTxUPiA9XG4gIHwgW10gICAgICAgICAgIC8vIHVua25vd25cbiAgfCBbVF0gICAgICAgICAgLy8ga25vd24gdmFsdWVcbiAgfCBbdm9pZCwgYW55XTsgLy8ga25vd24gZXhjZXB0aW9uXG5cbmZ1bmN0aW9uIHZhbHVlSXMoYTogVmFsdWU8YW55PiwgYjogVmFsdWU8YW55Pikge1xuICBjb25zdCBsZW4gPSBhLmxlbmd0aDtcbiAgcmV0dXJuIChcbiAgICAvLyBVbmtub3duIHZhbHVlcyBhcmUgbm90IGVxdWFsIHRvIGVhY2ggb3RoZXIuXG4gICAgbGVuID4gMCAmJlxuICAgIC8vIEJvdGggdmFsdWVzIG11c3QgYmUgb3JkaW5hcnkgKG9yIGJvdGggZXhjZXB0aW9uYWwpIHRvIGJlIGVxdWFsLlxuICAgIGxlbiA9PT0gYi5sZW5ndGggJiZcbiAgICAvLyBUaGUgdW5kZXJseWluZyB2YWx1ZSBvciBleGNlcHRpb24gbXVzdCBiZSB0aGUgc2FtZS5cbiAgICBhW2xlbiAtIDFdID09PSBiW2xlbiAtIDFdXG4gICk7XG59XG5cbmZ1bmN0aW9uIHZhbHVlR2V0PFQ+KHZhbHVlOiBWYWx1ZTxUPik6IFQge1xuICBzd2l0Y2ggKHZhbHVlLmxlbmd0aCkge1xuICAgIGNhc2UgMDogdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB2YWx1ZVwiKTtcbiAgICBjYXNlIDE6IHJldHVybiB2YWx1ZVswXTtcbiAgICBjYXNlIDI6IHRocm93IHZhbHVlWzFdO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbHVlQ29weTxUPih2YWx1ZTogVmFsdWU8VD4pOiBWYWx1ZTxUPiB7XG4gIHJldHVybiB2YWx1ZS5zbGljZSgwKSBhcyBWYWx1ZTxUPjtcbn1cblxuZXhwb3J0IHR5cGUgQW55RW50cnkgPSBFbnRyeTxhbnksIGFueT47XG5cbmV4cG9ydCBjbGFzcyBFbnRyeTxUQXJncyBleHRlbmRzIGFueVtdLCBUVmFsdWU+IHtcbiAgcHVibGljIHN0YXRpYyBjb3VudCA9IDA7XG5cbiAgcHVibGljIHN1YnNjcmliZTogT3B0aW1pc3RpY1dyYXBPcHRpb25zPFRBcmdzPltcInN1YnNjcmliZVwiXTtcbiAgcHVibGljIHVuc3Vic2NyaWJlOiBVbnN1YnNjcmliYWJsZVtcInVuc3Vic2NyaWJlXCJdO1xuXG4gIHB1YmxpYyByZWFkb25seSBwYXJlbnRzID0gbmV3IFNldDxBbnlFbnRyeT4oKTtcbiAgcHVibGljIHJlYWRvbmx5IGNoaWxkVmFsdWVzID0gbmV3IE1hcDxBbnlFbnRyeSwgVmFsdWU8YW55Pj4oKTtcblxuICAvLyBXaGVuIHRoaXMgRW50cnkgaGFzIGNoaWxkcmVuIHRoYXQgYXJlIGRpcnR5LCB0aGlzIHByb3BlcnR5IGJlY29tZXNcbiAgLy8gYSBTZXQgY29udGFpbmluZyBvdGhlciBFbnRyeSBvYmplY3RzLCBib3Jyb3dlZCBmcm9tIGVtcHR5U2V0UG9vbC5cbiAgLy8gV2hlbiB0aGUgc2V0IGJlY29tZXMgZW1wdHksIGl0IGdldHMgcmVjeWNsZWQgYmFjayB0byBlbXB0eVNldFBvb2wuXG4gIHB1YmxpYyBkaXJ0eUNoaWxkcmVuOiBTZXQ8QW55RW50cnk+IHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGRpcnR5ID0gdHJ1ZTtcbiAgcHVibGljIHJlY29tcHV0aW5nID0gZmFsc2U7XG4gIHB1YmxpYyByZWFkb25seSB2YWx1ZTogVmFsdWU8VFZhbHVlPiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBmbjogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUVmFsdWUsXG4gICkge1xuICAgICsrRW50cnkuY291bnQ7XG4gIH1cblxuICBwdWJsaWMgcGVlaygpOiBUVmFsdWUgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMSAmJiAhbWlnaHRCZURpcnR5KHRoaXMpKSB7XG4gICAgICByZW1lbWJlclBhcmVudCh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgaXMgdGhlIG1vc3QgaW1wb3J0YW50IG1ldGhvZCBvZiB0aGUgRW50cnkgQVBJLCBiZWNhdXNlIGl0XG4gIC8vIGRldGVybWluZXMgd2hldGhlciB0aGUgY2FjaGVkIHRoaXMudmFsdWUgY2FuIGJlIHJldHVybmVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBtdXN0IGJlIHJlY29tcHV0ZWQuIFRoZSBvdmVyYWxsIHBlcmZvcm1hbmNlIG9mIHRoZSBjYWNoaW5nIHN5c3RlbVxuICAvLyBkZXBlbmRzIG9uIHRoZSB0cnV0aCBvZiB0aGUgZm9sbG93aW5nIG9ic2VydmF0aW9uczogKDEpIHRoaXMuZGlydHkgaXNcbiAgLy8gdXN1YWxseSBmYWxzZSwgKDIpIHRoaXMuZGlydHlDaGlsZHJlbiBpcyB1c3VhbGx5IG51bGwvZW1wdHksIGFuZCB0aHVzXG4gIC8vICgzKSB2YWx1ZUdldCh0aGlzLnZhbHVlKSBpcyB1c3VhbGx5IHJldHVybmVkIHdpdGhvdXQgcmVjb21wdXRhdGlvbi5cbiAgcHVibGljIHJlY29tcHV0ZShhcmdzOiBUQXJncyk6IFRWYWx1ZSB7XG4gICAgYXNzZXJ0KCEgdGhpcy5yZWNvbXB1dGluZywgXCJhbHJlYWR5IHJlY29tcHV0aW5nXCIpO1xuICAgIHJlbWVtYmVyUGFyZW50KHRoaXMpO1xuICAgIHJldHVybiBtaWdodEJlRGlydHkodGhpcylcbiAgICAgID8gcmVhbGx5UmVjb21wdXRlKHRoaXMsIGFyZ3MpXG4gICAgICA6IHZhbHVlR2V0KHRoaXMudmFsdWUpO1xuICB9XG5cbiAgcHVibGljIHNldERpcnR5KCkge1xuICAgIGlmICh0aGlzLmRpcnR5KSByZXR1cm47XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgdGhpcy52YWx1ZS5sZW5ndGggPSAwO1xuICAgIHJlcG9ydERpcnR5KHRoaXMpO1xuICAgIC8vIFdlIGNhbiBnbyBhaGVhZCBhbmQgdW5zdWJzY3JpYmUgaGVyZSwgc2luY2UgYW55IGZ1cnRoZXIgZGlydHlcbiAgICAvLyBub3RpZmljYXRpb25zIHdlIHJlY2VpdmUgd2lsbCBiZSByZWR1bmRhbnQsIGFuZCB1bnN1YnNjcmliaW5nIG1heVxuICAgIC8vIGZyZWUgdXAgc29tZSByZXNvdXJjZXMsIGUuZy4gZmlsZSB3YXRjaGVycy5cbiAgICBtYXliZVVuc3Vic2NyaWJlKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5zZXREaXJ0eSgpO1xuXG4gICAgLy8gU2V2ZXIgYW55IGRlcGVuZGVuY3kgcmVsYXRpb25zaGlwcyB3aXRoIG91ciBvd24gY2hpbGRyZW4sIHNvIHRob3NlXG4gICAgLy8gY2hpbGRyZW4gZG9uJ3QgcmV0YWluIHRoaXMgcGFyZW50IEVudHJ5IGluIHRoZWlyIGNoaWxkLnBhcmVudHMgc2V0cyxcbiAgICAvLyB0aGVyZWJ5IHByZXZlbnRpbmcgaXQgZnJvbSBiZWluZyBmdWxseSBnYXJiYWdlIGNvbGxlY3RlZC5cbiAgICBmb3JnZXRDaGlsZHJlbih0aGlzKTtcblxuICAgIC8vIEJlY2F1c2UgdGhpcyBlbnRyeSBoYXMgYmVlbiBraWNrZWQgb3V0IG9mIHRoZSBjYWNoZSAoaW4gaW5kZXguanMpLFxuICAgIC8vIHdlJ3ZlIGxvc3QgdGhlIGFiaWxpdHkgdG8gZmluZCBvdXQgaWYvd2hlbiB0aGlzIGVudHJ5IGJlY29tZXMgZGlydHksXG4gICAgLy8gd2hldGhlciB0aGF0IGhhcHBlbnMgdGhyb3VnaCBhIHN1YnNjcmlwdGlvbiwgYmVjYXVzZSBvZiBhIGRpcmVjdCBjYWxsXG4gICAgLy8gdG8gZW50cnkuc2V0RGlydHkoKSwgb3IgYmVjYXVzZSBvbmUgb2YgaXRzIGNoaWxkcmVuIGJlY29tZXMgZGlydHkuXG4gICAgLy8gQmVjYXVzZSBvZiB0aGlzIGxvc3Mgb2YgZnV0dXJlIGluZm9ybWF0aW9uLCB3ZSBoYXZlIHRvIGFzc3VtZSB0aGVcbiAgICAvLyB3b3JzdCAodGhhdCB0aGlzIGVudHJ5IG1pZ2h0IGhhdmUgYmVjb21lIGRpcnR5IHZlcnkgc29vbiksIHNvIHdlIG11c3RcbiAgICAvLyBpbW1lZGlhdGVseSBtYXJrIHRoaXMgZW50cnkncyBwYXJlbnRzIGFzIGRpcnR5LiBOb3JtYWxseSB3ZSBjb3VsZFxuICAgIC8vIGp1c3QgY2FsbCBlbnRyeS5zZXREaXJ0eSgpIHJhdGhlciB0aGFuIGNhbGxpbmcgcGFyZW50LnNldERpcnR5KCkgZm9yXG4gICAgLy8gZWFjaCBwYXJlbnQsIGJ1dCB0aGF0IHdvdWxkIGxlYXZlIHRoaXMgZW50cnkgaW4gcGFyZW50LmNoaWxkVmFsdWVzXG4gICAgLy8gYW5kIHBhcmVudC5kaXJ0eUNoaWxkcmVuLCB3aGljaCB3b3VsZCBwcmV2ZW50IHRoZSBjaGlsZCBmcm9tIGJlaW5nXG4gICAgLy8gdHJ1bHkgZm9yZ290dGVuLlxuICAgIGVhY2hQYXJlbnQodGhpcywgKHBhcmVudCwgY2hpbGQpID0+IHtcbiAgICAgIHBhcmVudC5zZXREaXJ0eSgpO1xuICAgICAgZm9yZ2V0Q2hpbGQocGFyZW50LCB0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBmb3JnZXQoKSB7XG4gICAgLy8gVGhlIGNvZGUgdGhhdCBjcmVhdGVzIEVudHJ5IG9iamVjdHMgaW4gaW5kZXgudHMgd2lsbCByZXBsYWNlIHRoaXMgbWV0aG9kXG4gICAgLy8gd2l0aCBvbmUgdGhhdCBhY3R1YWxseSByZW1vdmVzIHRoZSBFbnRyeSBmcm9tIHRoZSBjYWNoZSwgd2hpY2ggd2lsbCBhbHNvXG4gICAgLy8gdHJpZ2dlciB0aGUgZW50cnkuZGlzcG9zZSBtZXRob2QuXG4gICAgdGhpcy5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIGRlcHM6IFNldDxEZXA8YW55Pj4gfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgZGVwZW5kT24oZGVwOiBEZXA8YW55Pikge1xuICAgIGRlcC5hZGQodGhpcyk7XG4gICAgaWYgKCEgdGhpcy5kZXBzKSB7XG4gICAgICB0aGlzLmRlcHMgPSBlbXB0eVNldFBvb2wucG9wKCkgfHwgbmV3IFNldDxTZXQ8QW55RW50cnk+PigpO1xuICAgIH1cbiAgICB0aGlzLmRlcHMuYWRkKGRlcCk7XG4gIH1cblxuICBwdWJsaWMgZm9yZ2V0RGVwcygpIHtcbiAgICBpZiAodGhpcy5kZXBzKSB7XG4gICAgICB0b0FycmF5KHRoaXMuZGVwcykuZm9yRWFjaChkZXAgPT4gZGVwLmRlbGV0ZSh0aGlzKSk7XG4gICAgICB0aGlzLmRlcHMuY2xlYXIoKTtcbiAgICAgIGVtcHR5U2V0UG9vbC5wdXNoKHRoaXMuZGVwcyk7XG4gICAgICB0aGlzLmRlcHMgPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW1lbWJlclBhcmVudChjaGlsZDogQW55RW50cnkpIHtcbiAgY29uc3QgcGFyZW50ID0gcGFyZW50RW50cnlTbG90LmdldFZhbHVlKCk7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBjaGlsZC5wYXJlbnRzLmFkZChwYXJlbnQpO1xuXG4gICAgaWYgKCEgcGFyZW50LmNoaWxkVmFsdWVzLmhhcyhjaGlsZCkpIHtcbiAgICAgIHBhcmVudC5jaGlsZFZhbHVlcy5zZXQoY2hpbGQsIFtdKTtcbiAgICB9XG5cbiAgICBpZiAobWlnaHRCZURpcnR5KGNoaWxkKSkge1xuICAgICAgcmVwb3J0RGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWxseVJlY29tcHV0ZShlbnRyeTogQW55RW50cnksIGFyZ3M6IGFueVtdKSB7XG4gIGZvcmdldENoaWxkcmVuKGVudHJ5KTtcblxuICAvLyBTZXQgZW50cnkgYXMgdGhlIHBhcmVudCBlbnRyeSB3aGlsZSBjYWxsaW5nIHJlY29tcHV0ZU5ld1ZhbHVlKGVudHJ5KS5cbiAgcGFyZW50RW50cnlTbG90LndpdGhWYWx1ZShlbnRyeSwgcmVjb21wdXRlTmV3VmFsdWUsIFtlbnRyeSwgYXJnc10pO1xuXG4gIGlmIChtYXliZVN1YnNjcmliZShlbnRyeSwgYXJncykpIHtcbiAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgcmVjb21wdXRlZCBlbnRyeS52YWx1ZSBhbmQgZGlkIG5vdCBmYWlsIHRvXG4gICAgLy8gKHJlKXN1YnNjcmliZSwgdGhlbiB0aGlzIEVudHJ5IGlzIG5vIGxvbmdlciBleHBsaWNpdGx5IGRpcnR5LlxuICAgIHNldENsZWFuKGVudHJ5KTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZUdldChlbnRyeS52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHJlY29tcHV0ZU5ld1ZhbHVlKGVudHJ5OiBBbnlFbnRyeSwgYXJnczogYW55W10pIHtcbiAgZW50cnkucmVjb21wdXRpbmcgPSB0cnVlO1xuICAvLyBTZXQgZW50cnkudmFsdWUgYXMgdW5rbm93bi5cbiAgZW50cnkudmFsdWUubGVuZ3RoID0gMDtcbiAgdHJ5IHtcbiAgICAvLyBJZiBlbnRyeS5mbiBzdWNjZWVkcywgZW50cnkudmFsdWUgd2lsbCBiZWNvbWUgYSBub3JtYWwgVmFsdWUuXG4gICAgZW50cnkudmFsdWVbMF0gPSBlbnRyeS5mbi5hcHBseShudWxsLCBhcmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElmIGVudHJ5LmZuIHRocm93cywgZW50cnkudmFsdWUgd2lsbCBiZWNvbWUgZXhjZXB0aW9uYWwuXG4gICAgZW50cnkudmFsdWVbMV0gPSBlO1xuICB9XG4gIC8vIEVpdGhlciB3YXksIHRoaXMgbGluZSBpcyBhbHdheXMgcmVhY2hlZC5cbiAgZW50cnkucmVjb21wdXRpbmcgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbWlnaHRCZURpcnR5KGVudHJ5OiBBbnlFbnRyeSkge1xuICByZXR1cm4gZW50cnkuZGlydHkgfHwgISEoZW50cnkuZGlydHlDaGlsZHJlbiAmJiBlbnRyeS5kaXJ0eUNoaWxkcmVuLnNpemUpO1xufVxuXG5mdW5jdGlvbiBzZXRDbGVhbihlbnRyeTogQW55RW50cnkpIHtcbiAgZW50cnkuZGlydHkgPSBmYWxzZTtcblxuICBpZiAobWlnaHRCZURpcnR5KGVudHJ5KSkge1xuICAgIC8vIFRoaXMgRW50cnkgbWF5IHN0aWxsIGhhdmUgZGlydHkgY2hpbGRyZW4sIGluIHdoaWNoIGNhc2Ugd2UgY2FuJ3RcbiAgICAvLyBsZXQgb3VyIHBhcmVudHMga25vdyB3ZSdyZSBjbGVhbiBqdXN0IHlldC5cbiAgICByZXR1cm47XG4gIH1cblxuICByZXBvcnRDbGVhbihlbnRyeSk7XG59XG5cbmZ1bmN0aW9uIHJlcG9ydERpcnR5KGNoaWxkOiBBbnlFbnRyeSkge1xuICBlYWNoUGFyZW50KGNoaWxkLCByZXBvcnREaXJ0eUNoaWxkKTtcbn1cblxuZnVuY3Rpb24gcmVwb3J0Q2xlYW4oY2hpbGQ6IEFueUVudHJ5KSB7XG4gIGVhY2hQYXJlbnQoY2hpbGQsIHJlcG9ydENsZWFuQ2hpbGQpO1xufVxuXG5mdW5jdGlvbiBlYWNoUGFyZW50KFxuICBjaGlsZDogQW55RW50cnksXG4gIGNhbGxiYWNrOiAocGFyZW50OiBBbnlFbnRyeSwgY2hpbGQ6IEFueUVudHJ5KSA9PiBhbnksXG4pIHtcbiAgY29uc3QgcGFyZW50Q291bnQgPSBjaGlsZC5wYXJlbnRzLnNpemU7XG4gIGlmIChwYXJlbnRDb3VudCkge1xuICAgIGNvbnN0IHBhcmVudHMgPSB0b0FycmF5KGNoaWxkLnBhcmVudHMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50Q291bnQ7ICsraSkge1xuICAgICAgY2FsbGJhY2socGFyZW50c1tpXSwgY2hpbGQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBMZXQgYSBwYXJlbnQgRW50cnkga25vdyB0aGF0IG9uZSBvZiBpdHMgY2hpbGRyZW4gbWF5IGJlIGRpcnR5LlxuZnVuY3Rpb24gcmVwb3J0RGlydHlDaGlsZChwYXJlbnQ6IEFueUVudHJ5LCBjaGlsZDogQW55RW50cnkpIHtcbiAgLy8gTXVzdCBoYXZlIGNhbGxlZCByZW1lbWJlclBhcmVudChjaGlsZCkgYmVmb3JlIGNhbGxpbmdcbiAgLy8gcmVwb3J0RGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKS5cbiAgYXNzZXJ0KHBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKTtcbiAgYXNzZXJ0KG1pZ2h0QmVEaXJ0eShjaGlsZCkpO1xuICBjb25zdCBwYXJlbnRXYXNDbGVhbiA9ICFtaWdodEJlRGlydHkocGFyZW50KTtcblxuICBpZiAoISBwYXJlbnQuZGlydHlDaGlsZHJlbikge1xuICAgIHBhcmVudC5kaXJ0eUNoaWxkcmVuID0gZW1wdHlTZXRQb29sLnBvcCgpIHx8IG5ldyBTZXQ7XG5cbiAgfSBlbHNlIGlmIChwYXJlbnQuZGlydHlDaGlsZHJlbi5oYXMoY2hpbGQpKSB7XG4gICAgLy8gSWYgd2UgYWxyZWFkeSBrbm93IHRoaXMgY2hpbGQgaXMgZGlydHksIHRoZW4gd2UgbXVzdCBoYXZlIGFscmVhZHlcbiAgICAvLyBpbmZvcm1lZCBvdXIgb3duIHBhcmVudHMgdGhhdCB3ZSBhcmUgZGlydHksIHNvIHdlIGNhbiB0ZXJtaW5hdGVcbiAgICAvLyB0aGUgcmVjdXJzaW9uIGVhcmx5LlxuICAgIHJldHVybjtcbiAgfVxuXG4gIHBhcmVudC5kaXJ0eUNoaWxkcmVuLmFkZChjaGlsZCk7XG5cbiAgLy8gSWYgcGFyZW50IHdhcyBjbGVhbiBiZWZvcmUsIGl0IGp1c3QgYmVjYW1lIChwb3NzaWJseSkgZGlydHkgKGFjY29yZGluZyB0b1xuICAvLyBtaWdodEJlRGlydHkpLCBzaW5jZSB3ZSBqdXN0IGFkZGVkIGNoaWxkIHRvIHBhcmVudC5kaXJ0eUNoaWxkcmVuLlxuICBpZiAocGFyZW50V2FzQ2xlYW4pIHtcbiAgICByZXBvcnREaXJ0eShwYXJlbnQpO1xuICB9XG59XG5cbi8vIExldCBhIHBhcmVudCBFbnRyeSBrbm93IHRoYXQgb25lIG9mIGl0cyBjaGlsZHJlbiBpcyBubyBsb25nZXIgZGlydHkuXG5mdW5jdGlvbiByZXBvcnRDbGVhbkNoaWxkKHBhcmVudDogQW55RW50cnksIGNoaWxkOiBBbnlFbnRyeSkge1xuICAvLyBNdXN0IGhhdmUgY2FsbGVkIHJlbWVtYmVyQ2hpbGQoY2hpbGQpIGJlZm9yZSBjYWxsaW5nXG4gIC8vIHJlcG9ydENsZWFuQ2hpbGQocGFyZW50LCBjaGlsZCkuXG4gIGFzc2VydChwYXJlbnQuY2hpbGRWYWx1ZXMuaGFzKGNoaWxkKSk7XG4gIGFzc2VydCghIG1pZ2h0QmVEaXJ0eShjaGlsZCkpO1xuXG4gIGNvbnN0IGNoaWxkVmFsdWUgPSBwYXJlbnQuY2hpbGRWYWx1ZXMuZ2V0KGNoaWxkKSE7XG4gIGlmIChjaGlsZFZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgIHBhcmVudC5jaGlsZFZhbHVlcy5zZXQoY2hpbGQsIHZhbHVlQ29weShjaGlsZC52YWx1ZSkpO1xuICB9IGVsc2UgaWYgKCEgdmFsdWVJcyhjaGlsZFZhbHVlLCBjaGlsZC52YWx1ZSkpIHtcbiAgICBwYXJlbnQuc2V0RGlydHkoKTtcbiAgfVxuXG4gIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XG5cbiAgaWYgKG1pZ2h0QmVEaXJ0eShwYXJlbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVwb3J0Q2xlYW4ocGFyZW50KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQ6IEFueUVudHJ5LCBjaGlsZDogQW55RW50cnkpIHtcbiAgY29uc3QgZGMgPSBwYXJlbnQuZGlydHlDaGlsZHJlbjtcbiAgaWYgKGRjKSB7XG4gICAgZGMuZGVsZXRlKGNoaWxkKTtcbiAgICBpZiAoZGMuc2l6ZSA9PT0gMCkge1xuICAgICAgaWYgKGVtcHR5U2V0UG9vbC5sZW5ndGggPCBQT09MX1RBUkdFVF9TSVpFKSB7XG4gICAgICAgIGVtcHR5U2V0UG9vbC5wdXNoKGRjKTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5kaXJ0eUNoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLy8gUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGlzIGVudHJ5IGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZVxuLy8gcmVtb3ZlZCBjaGlsZHJlbi5cbmZ1bmN0aW9uIGZvcmdldENoaWxkcmVuKHBhcmVudDogQW55RW50cnkpIHtcbiAgaWYgKHBhcmVudC5jaGlsZFZhbHVlcy5zaXplID4gMCkge1xuICAgIHBhcmVudC5jaGlsZFZhbHVlcy5mb3JFYWNoKChfdmFsdWUsIGNoaWxkKSA9PiB7XG4gICAgICBmb3JnZXRDaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGlzIHBhcmVudCBFbnRyeSBmcm9tIGFueSBzZXRzIHRvIHdoaWNoIGl0IHdhcyBhZGRlZCBieSB0aGVcbiAgLy8gYWRkVG9TZXQgbWV0aG9kLlxuICBwYXJlbnQuZm9yZ2V0RGVwcygpO1xuXG4gIC8vIEFmdGVyIHdlIGZvcmdldCBhbGwgb3VyIGNoaWxkcmVuLCB0aGlzLmRpcnR5Q2hpbGRyZW4gbXVzdCBiZSBlbXB0eVxuICAvLyBhbmQgdGhlcmVmb3JlIG11c3QgaGF2ZSBiZWVuIHJlc2V0IHRvIG51bGwuXG4gIGFzc2VydChwYXJlbnQuZGlydHlDaGlsZHJlbiA9PT0gbnVsbCk7XG59XG5cbmZ1bmN0aW9uIGZvcmdldENoaWxkKHBhcmVudDogQW55RW50cnksIGNoaWxkOiBBbnlFbnRyeSkge1xuICBjaGlsZC5wYXJlbnRzLmRlbGV0ZShwYXJlbnQpO1xuICBwYXJlbnQuY2hpbGRWYWx1ZXMuZGVsZXRlKGNoaWxkKTtcbiAgcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKTtcbn1cblxuZnVuY3Rpb24gbWF5YmVTdWJzY3JpYmUoZW50cnk6IEFueUVudHJ5LCBhcmdzOiBhbnlbXSkge1xuICBpZiAodHlwZW9mIGVudHJ5LnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1heWJlVW5zdWJzY3JpYmUoZW50cnkpOyAvLyBQcmV2ZW50IGRvdWJsZSBzdWJzY3JpcHRpb25zLlxuICAgICAgZW50cnkudW5zdWJzY3JpYmUgPSBlbnRyeS5zdWJzY3JpYmUuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWYgdGhpcyBFbnRyeSBoYXMgYSBzdWJzY3JpYmUgZnVuY3Rpb24gYW5kIGl0IHRocmV3IGFuIGV4Y2VwdGlvblxuICAgICAgLy8gKG9yIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGl0IHByZXZpb3VzbHkgcmV0dXJuZWQgbm93IHRocm93cyksXG4gICAgICAvLyByZXR1cm4gZmFsc2UgdG8gaW5kaWNhdGUgdGhhdCB3ZSB3ZXJlIG5vdCBhYmxlIHRvIHN1YnNjcmliZSAob3JcbiAgICAgIC8vIHVuc3Vic2NyaWJlKSwgYW5kIHRoaXMgRW50cnkgc2hvdWxkIHJlbWFpbiBkaXJ0eS5cbiAgICAgIGVudHJ5LnNldERpcnR5KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuaW5nIHRydWUgaW5kaWNhdGVzIGVpdGhlciB0aGF0IHRoZXJlIHdhcyBubyBlbnRyeS5zdWJzY3JpYmVcbiAgLy8gZnVuY3Rpb24gb3IgdGhhdCBpdCBzdWNjZWVkZWQuXG4gIHJldHVybiB0cnVlO1xufVxuIiwiaW1wb3J0IHsgQW55RW50cnkgfSBmcm9tIFwiLi9lbnRyeVwiO1xuaW1wb3J0IHsgT3B0aW1pc3RpY1dyYXBPcHRpb25zIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IHBhcmVudEVudHJ5U2xvdCB9IGZyb20gXCIuL2NvbnRleHRcIjtcbmltcG9ydCB7IGhhc093blByb3BlcnR5LCBVbnN1YnNjcmliYWJsZSwgbWF5YmVVbnN1YnNjcmliZSwgdG9BcnJheSB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxudHlwZSBFbnRyeU1ldGhvZE5hbWUgPSBrZXlvZiB0eXBlb2YgRW50cnlNZXRob2RzO1xuY29uc3QgRW50cnlNZXRob2RzID0ge1xuICBzZXREaXJ0eTogdHJ1ZSwgLy8gTWFyayBwYXJlbnQgRW50cnkgYXMgbmVlZGluZyB0byBiZSByZWNvbXB1dGVkIChkZWZhdWx0KVxuICBkaXNwb3NlOiB0cnVlLCAgLy8gRGV0YWNoIHBhcmVudCBFbnRyeSBmcm9tIHBhcmVudHMgYW5kIGNoaWxkcmVuLCBidXQgbGVhdmUgaW4gTFJVIGNhY2hlXG4gIGZvcmdldDogdHJ1ZSwgICAvLyBGdWxseSByZW1vdmUgcGFyZW50IEVudHJ5IGZyb20gTFJVIGNhY2hlIGFuZCBjb21wdXRhdGlvbiBncmFwaFxufTtcblxuZXhwb3J0IHR5cGUgT3B0aW1pc3RpY0RlcGVuZGVuY3lGdW5jdGlvbjxUS2V5PiA9XG4gICgoa2V5OiBUS2V5KSA9PiB2b2lkKSAmIHtcbiAgICBkaXJ0eTogKGtleTogVEtleSwgZW50cnlNZXRob2ROYW1lPzogRW50cnlNZXRob2ROYW1lKSA9PiB2b2lkO1xuICB9O1xuXG5leHBvcnQgdHlwZSBEZXA8VEtleT4gPSBTZXQ8QW55RW50cnk+ICYge1xuICBzdWJzY3JpYmU6IE9wdGltaXN0aWNXcmFwT3B0aW9uczxbVEtleV0+W1wic3Vic2NyaWJlXCJdO1xufSAmIFVuc3Vic2NyaWJhYmxlO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVwPFRLZXk+KG9wdGlvbnM/OiB7XG4gIHN1YnNjcmliZTogRGVwPFRLZXk+W1wic3Vic2NyaWJlXCJdO1xufSkge1xuICBjb25zdCBkZXBzQnlLZXkgPSBuZXcgTWFwPFRLZXksIERlcDxUS2V5Pj4oKTtcbiAgY29uc3Qgc3Vic2NyaWJlID0gb3B0aW9ucyAmJiBvcHRpb25zLnN1YnNjcmliZTtcblxuICBmdW5jdGlvbiBkZXBlbmQoa2V5OiBUS2V5KSB7XG4gICAgY29uc3QgcGFyZW50ID0gcGFyZW50RW50cnlTbG90LmdldFZhbHVlKCk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgbGV0IGRlcCA9IGRlcHNCeUtleS5nZXQoa2V5KTtcbiAgICAgIGlmICghZGVwKSB7XG4gICAgICAgIGRlcHNCeUtleS5zZXQoa2V5LCBkZXAgPSBuZXcgU2V0IGFzIERlcDxUS2V5Pik7XG4gICAgICB9XG4gICAgICBwYXJlbnQuZGVwZW5kT24oZGVwKTtcbiAgICAgIGlmICh0eXBlb2Ygc3Vic2NyaWJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgbWF5YmVVbnN1YnNjcmliZShkZXApO1xuICAgICAgICBkZXAudW5zdWJzY3JpYmUgPSBzdWJzY3JpYmUoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXBlbmQuZGlydHkgPSBmdW5jdGlvbiBkaXJ0eShcbiAgICBrZXk6IFRLZXksXG4gICAgZW50cnlNZXRob2ROYW1lPzogRW50cnlNZXRob2ROYW1lLFxuICApIHtcbiAgICBjb25zdCBkZXAgPSBkZXBzQnlLZXkuZ2V0KGtleSk7XG4gICAgaWYgKGRlcCkge1xuICAgICAgY29uc3QgbTogRW50cnlNZXRob2ROYW1lID0gKFxuICAgICAgICBlbnRyeU1ldGhvZE5hbWUgJiZcbiAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbChFbnRyeU1ldGhvZHMsIGVudHJ5TWV0aG9kTmFtZSlcbiAgICAgICkgPyBlbnRyeU1ldGhvZE5hbWUgOiBcInNldERpcnR5XCI7XG4gICAgICAvLyBXZSBoYXZlIHRvIHVzZSB0b0FycmF5KGRlcCkuZm9yRWFjaCBpbnN0ZWFkIG9mIGRlcC5mb3JFYWNoLCBiZWNhdXNlXG4gICAgICAvLyBtb2RpZnlpbmcgYSBTZXQgd2hpbGUgaXRlcmF0aW5nIG92ZXIgaXQgY2FuIGNhdXNlIGVsZW1lbnRzIGluIHRoZSBTZXRcbiAgICAgIC8vIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgU2V0IGJlZm9yZSB0aGV5J3ZlIGJlZW4gaXRlcmF0ZWQgb3Zlci5cbiAgICAgIHRvQXJyYXkoZGVwKS5mb3JFYWNoKGVudHJ5ID0+IGVudHJ5W21dKCkpO1xuICAgICAgZGVwc0J5S2V5LmRlbGV0ZShrZXkpO1xuICAgICAgbWF5YmVVbnN1YnNjcmliZShkZXApO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZGVwZW5kIGFzIE9wdGltaXN0aWNEZXBlbmRlbmN5RnVuY3Rpb248VEtleT47XG59XG4iLCJpbXBvcnQgeyBUcmllIH0gZnJvbSBcIkB3cnkvdHJpZVwiO1xuXG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCIuL2NhY2hlXCI7XG5pbXBvcnQgeyBFbnRyeSwgQW55RW50cnkgfSBmcm9tIFwiLi9lbnRyeVwiO1xuaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuXG4vLyBUaGVzZSBoZWxwZXIgZnVuY3Rpb25zIGFyZSBpbXBvcnRhbnQgZm9yIG1ha2luZyBvcHRpbWlzbSB3b3JrIHdpdGhcbi8vIGFzeW5jaHJvbm91cyBjb2RlLiBJbiBvcmRlciB0byByZWdpc3RlciBwYXJlbnQtY2hpbGQgZGVwZW5kZW5jaWVzLFxuLy8gb3B0aW1pc20gbmVlZHMgdG8ga25vdyBhYm91dCBhbnkgY3VycmVudGx5IGFjdGl2ZSBwYXJlbnQgY29tcHV0YXRpb25zLlxuLy8gSW4gb3JkaW5hcnkgc3luY2hyb25vdXMgY29kZSwgdGhlIHBhcmVudCBjb250ZXh0IGlzIGltcGxpY2l0IGluIHRoZVxuLy8gZXhlY3V0aW9uIHN0YWNrLCBidXQgYXN5bmNocm9ub3VzIGNvZGUgcmVxdWlyZXMgc29tZSBleHRyYSBndWlkYW5jZSBpblxuLy8gb3JkZXIgdG8gcHJvcGFnYXRlIGNvbnRleHQgZnJvbSBvbmUgYXN5bmMgdGFzayBzZWdtZW50IHRvIHRoZSBuZXh0LlxuZXhwb3J0IHtcbiAgYmluZENvbnRleHQsXG4gIG5vQ29udGV4dCxcbiAgc2V0VGltZW91dCxcbiAgYXN5bmNGcm9tR2VuLFxufSBmcm9tIFwiLi9jb250ZXh0XCI7XG5cbi8vIEEgbGlnaHRlci13ZWlnaHQgZGVwZW5kZW5jeSwgc2ltaWxhciB0byBPcHRpbWlzdGljV3JhcHBlckZ1bmN0aW9uLCBleGNlcHRcbi8vIHdpdGggb25seSBvbmUgYXJndW1lbnQsIG5vIG1ha2VDYWNoZUtleSwgbm8gd3JhcHBlZCBmdW5jdGlvbiB0byByZWNvbXB1dGUsXG4vLyBhbmQgbm8gcmVzdWx0IHZhbHVlLiBVc2VmdWwgZm9yIHJlcHJlc2VudGluZyBkZXBlbmRlbmN5IGxlYXZlcyBpbiB0aGUgZ3JhcGhcbi8vIG9mIGNvbXB1dGF0aW9uLiBTdWJzY3JpcHRpb25zIGFyZSBzdXBwb3J0ZWQuXG5leHBvcnQgeyBkZXAsIE9wdGltaXN0aWNEZXBlbmRlbmN5RnVuY3Rpb24gfSBmcm9tIFwiLi9kZXBcIjtcblxuZnVuY3Rpb24gbWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbjxcbiAgVEtleUFyZ3MgZXh0ZW5kcyBhbnlbXSxcbiAgVENhY2hlS2V5ID0gYW55LFxuPigpOiAoLi4uYXJnczogVEtleUFyZ3MpID0+IFRDYWNoZUtleSB7XG4gIGNvbnN0IGtleVRyaWUgPSBuZXcgVHJpZTxUQ2FjaGVLZXk+KHR5cGVvZiBXZWFrTWFwID09PSBcImZ1bmN0aW9uXCIpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrZXlUcmllLmxvb2t1cEFycmF5KGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbi8vIFRoZSBkZWZhdWx0TWFrZUNhY2hlS2V5IGZ1bmN0aW9uIGlzIHJlbWFya2FibHkgcG93ZXJmdWwsIGJlY2F1c2UgaXQgZ2l2ZXNcbi8vIGEgdW5pcXVlIG9iamVjdCBmb3IgYW55IHNoYWxsb3ctaWRlbnRpY2FsIGxpc3Qgb2YgYXJndW1lbnRzLiBJZiB5b3UgbmVlZFxuLy8gdG8gaW1wbGVtZW50IGEgY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbiwgeW91IG1heSBmaW5kIGl0IGhlbHBmdWwgdG9cbi8vIGRlbGVnYXRlIHRoZSBmaW5hbCB3b3JrIHRvIGRlZmF1bHRNYWtlQ2FjaGVLZXksIHdoaWNoIGlzIHdoeSB3ZSBleHBvcnQgaXRcbi8vIGhlcmUuIEhvd2V2ZXIsIHlvdSBtYXkgd2FudCB0byBhdm9pZCBkZWZhdWx0TWFrZUNhY2hlS2V5IGlmIHlvdXIgcnVudGltZVxuLy8gZG9lcyBub3Qgc3VwcG9ydCBXZWFrTWFwLCBvciB5b3UgaGF2ZSB0aGUgYWJpbGl0eSB0byByZXR1cm4gYSBzdHJpbmcga2V5LlxuLy8gSW4gdGhvc2UgY2FzZXMsIGp1c3Qgd3JpdGUgeW91ciBvd24gY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbnMuXG5leHBvcnQgY29uc3QgZGVmYXVsdE1ha2VDYWNoZUtleSA9IG1ha2VEZWZhdWx0TWFrZUNhY2hlS2V5RnVuY3Rpb24oKTtcblxuLy8gSWYgeW91J3JlIHBhcmFub2lkIGFib3V0IG1lbW9yeSBsZWFrcywgb3IgeW91IHdhbnQgdG8gYXZvaWQgdXNpbmcgV2Vha01hcFxuLy8gdW5kZXIgdGhlIGhvb2QsIGJ1dCB5b3Ugc3RpbGwgbmVlZCB0aGUgYmVoYXZpb3Igb2YgZGVmYXVsdE1ha2VDYWNoZUtleSxcbi8vIGltcG9ydCB0aGlzIGNvbnN0cnVjdG9yIHRvIGNyZWF0ZSB5b3VyIG93biB0cmllcy5cbmV4cG9ydCB7IFRyaWUgYXMgS2V5VHJpZSB9XG5cbmV4cG9ydCB0eXBlIE9wdGltaXN0aWNXcmFwcGVyRnVuY3Rpb248XG4gIFRBcmdzIGV4dGVuZHMgYW55W10sXG4gIFRSZXN1bHQsXG4gIFRLZXlBcmdzIGV4dGVuZHMgYW55W10gPSBUQXJncyxcbiAgVENhY2hlS2V5ID0gYW55LFxuPiA9ICgoLi4uYXJnczogVEFyZ3MpID0+IFRSZXN1bHQpICYge1xuICAvLyBHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIEVudHJ5IG9iamVjdHMgaW4gdGhlIExSVSBjYWNoZS5cbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xuXG4gIC8vIFwiRGlydHlcIiBhbnkgY2FjaGVkIEVudHJ5IHN0b3JlZCBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50cywgbWFya2luZyB0aGF0IEVudHJ5XG4gIC8vIGFuZCBpdHMgYW5jZXN0b3JzIGFzIHBvdGVudGlhbGx5IG5lZWRpbmcgdG8gYmUgcmVjb21wdXRlZC4gVGhlIC5kaXJ0eSguLi4pXG4gIC8vIG1ldGhvZCBvZiBhbiBvcHRpbWlzdGljIGZ1bmN0aW9uIHRha2VzIHRoZSBzYW1lIHBhcmFtZXRlciB0eXBlcyBhcyB0aGVcbiAgLy8gb3JpZ2luYWwgZnVuY3Rpb24gYnkgZGVmYXVsdCwgdW5sZXNzIGEga2V5QXJncyBmdW5jdGlvbiBpcyBjb25maWd1cmVkLCBhbmRcbiAgLy8gdGhlbiBpdCBtYXR0ZXJzIHRoYXQgLmRpcnR5IHRha2VzIFRLZXlBcmdzIGluc3RlYWQgb2YgVEFyZ3MuXG4gIGRpcnR5OiAoLi4uYXJnczogVEtleUFyZ3MpID0+IHZvaWQ7XG4gIC8vIEEgdmVyc2lvbiBvZiAuZGlydHkgdGhhdCBhY2NlcHRzIGEga2V5IHJldHVybmVkIGJ5IC5nZXRLZXkuXG4gIGRpcnR5S2V5OiAoa2V5OiBUQ2FjaGVLZXkpID0+IHZvaWQ7XG5cbiAgLy8gRXhhbWluZSB0aGUgY3VycmVudCB2YWx1ZSB3aXRob3V0IHJlY29tcHV0aW5nIGl0LlxuICBwZWVrOiAoLi4uYXJnczogVEtleUFyZ3MpID0+IFRSZXN1bHQgfCB1bmRlZmluZWQ7XG4gIC8vIEEgdmVyc2lvbiBvZiAucGVlayB0aGF0IGFjY2VwdHMgYSBrZXkgcmV0dXJuZWQgYnkgLmdldEtleS5cbiAgcGVla0tleTogKGtleTogVENhY2hlS2V5KSA9PiBUUmVzdWx0IHwgdW5kZWZpbmVkO1xuXG4gIC8vIENvbXBsZXRlbHkgcmVtb3ZlIHRoZSBlbnRyeSBmcm9tIHRoZSBjYWNoZSwgZGlydHlpbmcgYW55IHBhcmVudCBlbnRyaWVzLlxuICBmb3JnZXQ6ICguLi5hcmdzOiBUS2V5QXJncykgPT4gYm9vbGVhbjtcbiAgLy8gQSB2ZXJzaW9uIG9mIC5mb3JnZXQgdGhhdCBhY2NlcHRzIGEga2V5IHJldHVybmVkIGJ5IC5nZXRLZXkuXG4gIGZvcmdldEtleTogKGtleTogVENhY2hlS2V5KSA9PiBib29sZWFuO1xuXG4gIC8vIEluIG9yZGVyIHRvIHVzZSB0aGUgLUtleSB2ZXJzaW9uIG9mIHRoZSBhYm92ZSBmdW5jdGlvbnMsIHlvdSBuZWVkIGEga2V5XG4gIC8vIHJhdGhlciB0aGFuIHRoZSBhcmd1bWVudHMgdXNlZCB0byBjb21wdXRlIHRoZSBrZXkuIFRoZXNlIHR3byBmdW5jdGlvbnMgdGFrZVxuICAvLyBUQXJncyBvciBUS2V5QXJncyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIFRDYWNoZUtleS4gSWYgbm8ga2V5QXJnc1xuICAvLyBmdW5jdGlvbiBoYXMgYmVlbiBjb25maWd1cmVkLCBUQXJncyB3aWxsIGJlIHRoZSBzYW1lIGFzIFRLZXlBcmdzLCBhbmQgdGh1c1xuICAvLyBnZXRLZXkgYW5kIG1ha2VDYWNoZUtleSB3aWxsIGJlIHN5bm9ueW1vdXMuXG4gIGdldEtleTogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUQ2FjaGVLZXk7XG5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBpcyBlcXVpdmFsZW50IHRvIHRoZSBtYWtlQ2FjaGVLZXkgZnVuY3Rpb24gcHJvdmlkZWQgaW4gdGhlXG4gIC8vIE9wdGltaXN0aWNXcmFwT3B0aW9ucywgb3IgKGlmIG5vIG9wdGlvbnMubWFrZUNhY2hlS2V5IGZ1bmN0aW9uIGlzIHByb3ZpZGVkKVxuICAvLyBhIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgbWFrZUNhY2hlS2V5LlxuICBtYWtlQ2FjaGVLZXk6ICguLi5hcmdzOiBUS2V5QXJncykgPT4gVENhY2hlS2V5O1xufTtcblxuZXhwb3J0IHR5cGUgT3B0aW1pc3RpY1dyYXBPcHRpb25zPFxuICBUQXJncyBleHRlbmRzIGFueVtdLFxuICBUS2V5QXJncyBleHRlbmRzIGFueVtdID0gVEFyZ3MsXG4gIFRDYWNoZUtleSA9IGFueSxcbj4gPSB7XG4gIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBjYWNoZSBlbnRyaWVzIHRoYXQgc2hvdWxkIGJlIHJldGFpbmVkIGJlZm9yZSB0aGVcbiAgLy8gY2FjaGUgYmVnaW5zIGV2aWN0aW5nIHRoZSBvbGRlc3Qgb25lcy5cbiAgbWF4PzogbnVtYmVyO1xuICAvLyBUcmFuc2Zvcm0gdGhlIHJhdyBhcmd1bWVudHMgdG8gc29tZSBvdGhlciB0eXBlIG9mIGFycmF5LCB3aGljaCB3aWxsIHRoZW5cbiAgLy8gYmUgcGFzc2VkIHRvIG1ha2VDYWNoZUtleS5cbiAga2V5QXJncz86ICguLi5hcmdzOiBUQXJncykgPT4gVEtleUFyZ3M7XG4gIC8vIFRoZSBtYWtlQ2FjaGVLZXkgZnVuY3Rpb24gdGFrZXMgdGhlIHNhbWUgYXJndW1lbnRzIHRoYXQgd2VyZSBwYXNzZWQgdG9cbiAgLy8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gYW5kIHJldHVybnMgYSBzaW5nbGUgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIGtleVxuICAvLyBpbiBhIE1hcCB0byBpZGVudGlmeSB0aGUgY2FjaGVkIHJlc3VsdC5cbiAgbWFrZUNhY2hlS2V5PzogKC4uLmFyZ3M6IFRLZXlBcmdzKSA9PiBUQ2FjaGVLZXk7XG4gIC8vIElmIHByb3ZpZGVkLCB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uIHNob3VsZCBlaXRoZXIgcmV0dXJuIGFuIHVuc3Vic2NyaWJlXG4gIC8vIGZ1bmN0aW9uIG9yIHJldHVybiBub3RoaW5nLlxuICBzdWJzY3JpYmU/OiAoLi4uYXJnczogVEFyZ3MpID0+IHZvaWQgfCAoKCkgPT4gYW55KTtcbn07XG5cbmNvbnN0IGNhY2hlcyA9IG5ldyBTZXQ8Q2FjaGU8YW55LCBBbnlFbnRyeT4+KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwPFxuICBUQXJncyBleHRlbmRzIGFueVtdLFxuICBUUmVzdWx0LFxuICBUS2V5QXJncyBleHRlbmRzIGFueVtdID0gVEFyZ3MsXG4gIFRDYWNoZUtleSA9IGFueSxcbj4oXG4gIG9yaWdpbmFsRnVuY3Rpb246ICguLi5hcmdzOiBUQXJncykgPT4gVFJlc3VsdCxcbiAgb3B0aW9uczogT3B0aW1pc3RpY1dyYXBPcHRpb25zPFRBcmdzLCBUS2V5QXJncz4gPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlPFRDYWNoZUtleSwgRW50cnk8VEFyZ3MsIFRSZXN1bHQ+PihcbiAgICBvcHRpb25zLm1heCB8fCBNYXRoLnBvdygyLCAxNiksXG4gICAgZW50cnkgPT4gZW50cnkuZGlzcG9zZSgpLFxuICApO1xuXG4gIGNvbnN0IGtleUFyZ3MgPSBvcHRpb25zLmtleUFyZ3M7XG4gIGNvbnN0IG1ha2VDYWNoZUtleSA9IG9wdGlvbnMubWFrZUNhY2hlS2V5IHx8XG4gICAgbWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbjxUS2V5QXJncywgVENhY2hlS2V5PigpO1xuXG4gIGNvbnN0IG9wdGltaXN0aWMgPSBmdW5jdGlvbiAoKTogVFJlc3VsdCB7XG4gICAgY29uc3Qga2V5ID0gbWFrZUNhY2hlS2V5LmFwcGx5KFxuICAgICAgbnVsbCxcbiAgICAgIGtleUFyZ3MgPyBrZXlBcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpIDogYXJndW1lbnRzIGFzIGFueVxuICAgICk7XG5cbiAgICBpZiAoa2V5ID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbEZ1bmN0aW9uLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIH1cblxuICAgIGxldCBlbnRyeSA9IGNhY2hlLmdldChrZXkpITtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSA9IG5ldyBFbnRyeShvcmlnaW5hbEZ1bmN0aW9uKSk7XG4gICAgICBlbnRyeS5zdWJzY3JpYmUgPSBvcHRpb25zLnN1YnNjcmliZTtcbiAgICAgIC8vIEdpdmUgdGhlIEVudHJ5IHRoZSBhYmlsaXR5IHRvIHRyaWdnZXIgY2FjaGUuZGVsZXRlKGtleSksIGV2ZW4gdGhvdWdoXG4gICAgICAvLyB0aGUgRW50cnkgaXRzZWxmIGRvZXMgbm90IGtub3cgYWJvdXQga2V5IG9yIGNhY2hlLlxuICAgICAgZW50cnkuZm9yZ2V0ID0gKCkgPT4gY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWUgPSBlbnRyeS5yZWNvbXB1dGUoXG4gICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpIGFzIFRBcmdzLFxuICAgICk7XG5cbiAgICAvLyBNb3ZlIHRoaXMgZW50cnkgdG8gdGhlIGZyb250IG9mIHRoZSBsZWFzdC1yZWNlbnRseSB1c2VkIHF1ZXVlLFxuICAgIC8vIHNpbmNlIHdlIGp1c3QgZmluaXNoZWQgY29tcHV0aW5nIGl0cyB2YWx1ZS5cbiAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSk7XG5cbiAgICBjYWNoZXMuYWRkKGNhY2hlKTtcblxuICAgIC8vIENsZWFuIHVwIGFueSBleGNlc3MgZW50cmllcyBpbiB0aGUgY2FjaGUsIGJ1dCBvbmx5IGlmIHRoZXJlIGlzIG5vXG4gICAgLy8gYWN0aXZlIHBhcmVudCBlbnRyeSwgbWVhbmluZyB3ZSdyZSBub3QgaW4gdGhlIG1pZGRsZSBvZiBhIGxhcmdlclxuICAgIC8vIGNvbXB1dGF0aW9uIHRoYXQgbWlnaHQgYmUgZmx1bW1veGVkIGJ5IHRoZSBjbGVhbmluZy5cbiAgICBpZiAoISBwYXJlbnRFbnRyeVNsb3QuaGFzVmFsdWUoKSkge1xuICAgICAgY2FjaGVzLmZvckVhY2goY2FjaGUgPT4gY2FjaGUuY2xlYW4oKSk7XG4gICAgICBjYWNoZXMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gYXMgT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbjxUQXJncywgVFJlc3VsdCwgVEtleUFyZ3MsIFRDYWNoZUtleT47XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdGltaXN0aWMsIFwic2l6ZVwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIGNhY2hlW1wibWFwXCJdLnNpemU7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICB9KTtcblxuICBmdW5jdGlvbiBkaXJ0eUtleShrZXk6IFRDYWNoZUtleSkge1xuICAgIGNvbnN0IGVudHJ5ID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBlbnRyeS5zZXREaXJ0eSgpO1xuICAgIH1cbiAgfVxuICBvcHRpbWlzdGljLmRpcnR5S2V5ID0gZGlydHlLZXk7XG4gIG9wdGltaXN0aWMuZGlydHkgPSBmdW5jdGlvbiBkaXJ0eSgpIHtcbiAgICBkaXJ0eUtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzIGFzIGFueSkpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBlZWtLZXkoa2V5OiBUQ2FjaGVLZXkpIHtcbiAgICBjb25zdCBlbnRyeSA9IGNhY2hlLmdldChrZXkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgcmV0dXJuIGVudHJ5LnBlZWsoKTtcbiAgICB9XG4gIH1cbiAgb3B0aW1pc3RpYy5wZWVrS2V5ID0gcGVla0tleTtcbiAgb3B0aW1pc3RpYy5wZWVrID0gZnVuY3Rpb24gcGVlaygpIHtcbiAgICByZXR1cm4gcGVla0tleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzIGFzIGFueSkpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGZvcmdldEtleShrZXk6IFRDYWNoZUtleSkge1xuICAgIHJldHVybiBjYWNoZS5kZWxldGUoa2V5KTtcbiAgfVxuICBvcHRpbWlzdGljLmZvcmdldEtleSA9IGZvcmdldEtleTtcbiAgb3B0aW1pc3RpYy5mb3JnZXQgPSBmdW5jdGlvbiBmb3JnZXQoKSB7XG4gICAgcmV0dXJuIGZvcmdldEtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzIGFzIGFueSkpO1xuICB9O1xuXG4gIG9wdGltaXN0aWMubWFrZUNhY2hlS2V5ID0gbWFrZUNhY2hlS2V5O1xuICBvcHRpbWlzdGljLmdldEtleSA9IGtleUFyZ3MgPyBmdW5jdGlvbiBnZXRLZXkoKSB7XG4gICAgcmV0dXJuIG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBrZXlBcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpKTtcbiAgfSA6IG1ha2VDYWNoZUtleSBhcyAoLi4uYXJnczogYW55W10pID0+IFRDYWNoZUtleTtcblxuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvcHRpbWlzdGljKTtcbn1cbiIsImltcG9ydCB7IERvY3VtZW50Tm9kZSB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJ29wdGltaXNtJztcblxuaW1wb3J0IHtcbiAgU3RvcmVPYmplY3QsXG4gIFJlZmVyZW5jZSxcbiAgZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50LFxufSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgRGF0YVByb3h5IH0gZnJvbSAnLi90eXBlcy9EYXRhUHJveHknO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tICcuL3R5cGVzL0NhY2hlJztcblxuZXhwb3J0IHR5cGUgVHJhbnNhY3Rpb248VD4gPSAoYzogQXBvbGxvQ2FjaGU8VD4pID0+IHZvaWQ7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBcG9sbG9DYWNoZTxUU2VyaWFsaXplZD4gaW1wbGVtZW50cyBEYXRhUHJveHkge1xuICAvLyByZXF1aXJlZCB0byBpbXBsZW1lbnRcbiAgLy8gY29yZSBBUElcbiAgcHVibGljIGFic3RyYWN0IHJlYWQ8VCwgVFZhcmlhYmxlcyA9IGFueT4oXG4gICAgcXVlcnk6IENhY2hlLlJlYWRPcHRpb25zPFRWYXJpYWJsZXMsIFQ+LFxuICApOiBUIHwgbnVsbDtcbiAgcHVibGljIGFic3RyYWN0IHdyaXRlPFRSZXN1bHQgPSBhbnksIFRWYXJpYWJsZXMgPSBhbnk+KFxuICAgIHdyaXRlOiBDYWNoZS5Xcml0ZU9wdGlvbnM8VFJlc3VsdCwgVFZhcmlhYmxlcz4sXG4gICk6IFJlZmVyZW5jZSB8IHVuZGVmaW5lZDtcbiAgcHVibGljIGFic3RyYWN0IGRpZmY8VD4ocXVlcnk6IENhY2hlLkRpZmZPcHRpb25zKTogQ2FjaGUuRGlmZlJlc3VsdDxUPjtcbiAgcHVibGljIGFic3RyYWN0IHdhdGNoKHdhdGNoOiBDYWNoZS5XYXRjaE9wdGlvbnMpOiAoKSA9PiB2b2lkO1xuICBwdWJsaWMgYWJzdHJhY3QgcmVzZXQoKTogUHJvbWlzZTx2b2lkPjtcblxuICAvLyBSZW1vdmUgd2hvbGUgb2JqZWN0cyBmcm9tIHRoZSBjYWNoZSBieSBwYXNzaW5nIGp1c3Qgb3B0aW9ucy5pZCwgb3JcbiAgLy8gc3BlY2lmaWMgZmllbGRzIGJ5IHBhc3Npbmcgb3B0aW9ucy5maWVsZCBhbmQvb3Igb3B0aW9ucy5hcmdzLiBJZiBub1xuICAvLyBvcHRpb25zLmFyZ3MgYXJlIHByb3ZpZGVkLCBhbGwgZmllbGRzIG1hdGNoaW5nIG9wdGlvbnMuZmllbGQgKGV2ZW5cbiAgLy8gdGhvc2Ugd2l0aCBhcmd1bWVudHMpIHdpbGwgYmUgcmVtb3ZlZC4gUmV0dXJucyB0cnVlIGlmZiBhbnkgZGF0YSB3YXNcbiAgLy8gcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZS5cbiAgcHVibGljIGFic3RyYWN0IGV2aWN0KG9wdGlvbnM6IENhY2hlLkV2aWN0T3B0aW9ucyk6IGJvb2xlYW47XG5cbiAgLy8gaW50aWFsaXplciAvIG9mZmxpbmUgLyBzc3IgQVBJXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBleGlzdGluZyBzdGF0ZSBpbiB0aGUgY2FjaGUgKGlmIGFueSkgd2l0aCB0aGUgdmFsdWVzIGV4cHJlc3NlZCBieVxuICAgKiBgc2VyaWFsaXplZFN0YXRlYC5cbiAgICpcbiAgICogQ2FsbGVkIHdoZW4gaHlkcmF0aW5nIGEgY2FjaGUgKHNlcnZlciBzaWRlIHJlbmRlcmluZywgb3Igb2ZmbGluZSBzdG9yYWdlKSxcbiAgICogYW5kIGFsc28gKHBvdGVudGlhbGx5KSBkdXJpbmcgaG90IHJlbG9hZHMuXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgcmVzdG9yZShcbiAgICBzZXJpYWxpemVkU3RhdGU6IFRTZXJpYWxpemVkLFxuICApOiBBcG9sbG9DYWNoZTxUU2VyaWFsaXplZD47XG5cbiAgLyoqXG4gICAqIEV4cG9zZXMgdGhlIGNhY2hlJ3MgY29tcGxldGUgc3RhdGUsIGluIGEgc2VyaWFsaXphYmxlIGZvcm1hdCBmb3IgbGF0ZXIgcmVzdG9yYXRpb24uXG4gICAqL1xuICBwdWJsaWMgYWJzdHJhY3QgZXh0cmFjdChvcHRpbWlzdGljPzogYm9vbGVhbik6IFRTZXJpYWxpemVkO1xuXG4gIC8vIE9wdGltaXN0aWMgQVBJXG5cbiAgcHVibGljIGFic3RyYWN0IHJlbW92ZU9wdGltaXN0aWMoaWQ6IHN0cmluZyk6IHZvaWQ7XG5cbiAgLy8gVHJhbnNhY3Rpb25hbCBBUElcblxuICBwdWJsaWMgYWJzdHJhY3QgcGVyZm9ybVRyYW5zYWN0aW9uKFxuICAgIHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbjxUU2VyaWFsaXplZD4sXG4gICAgLy8gQWx0aG91Z2ggc3ViY2xhc3NlcyBtYXkgaW1wbGVtZW50IHJlY29yZE9wdGltaXN0aWNUcmFuc2FjdGlvblxuICAgIC8vIGhvd2V2ZXIgdGhleSBjaG9vc2UsIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSBjYWxsc1xuICAgIC8vIHBlcmZvcm1UcmFuc2FjdGlvbiB3aXRoIGEgc3RyaW5nIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQsIGFsbG93aW5nXG4gICAgLy8gcGVyZm9ybVRyYW5zYWN0aW9uIHRvIGhhbmRsZSBib3RoIG9wdGltaXN0aWMgYW5kIG5vbi1vcHRpbWlzdGljXG4gICAgLy8gKGJyb2FkY2FzdC1iYXRjaGluZykgdHJhbnNhY3Rpb25zLiBQYXNzaW5nIG51bGwgZm9yIG9wdGltaXN0aWNJZCBpc1xuICAgIC8vIGFsc28gYWxsb3dlZCwgYW5kIGluZGljYXRlcyB0aGF0IHBlcmZvcm1UcmFuc2FjdGlvbiBzaG91bGQgYXBwbHlcbiAgICAvLyB0aGUgdHJhbnNhY3Rpb24gbm9uLW9wdGltaXN0aWNhbGx5IChpZ25vcmluZyBvcHRpbWlzdGljIGRhdGEpLlxuICAgIG9wdGltaXN0aWNJZD86IHN0cmluZyB8IG51bGwsXG4gICk6IHZvaWQ7XG5cbiAgcHVibGljIHJlY29yZE9wdGltaXN0aWNUcmFuc2FjdGlvbihcbiAgICB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb248VFNlcmlhbGl6ZWQ+LFxuICAgIG9wdGltaXN0aWNJZDogc3RyaW5nLFxuICApIHtcbiAgICB0aGlzLnBlcmZvcm1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiwgb3B0aW1pc3RpY0lkKTtcbiAgfVxuXG4gIC8vIE9wdGlvbmFsIEFQSVxuXG4gIHB1YmxpYyB0cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudDogRG9jdW1lbnROb2RlKTogRG9jdW1lbnROb2RlIHtcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIH1cblxuICBwdWJsaWMgaWRlbnRpZnkob2JqZWN0OiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHVibGljIGdjKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwdWJsaWMgbW9kaWZ5KG9wdGlvbnM6IENhY2hlLk1vZGlmeU9wdGlvbnMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBFeHBlcmltZW50YWwgQVBJXG5cbiAgcHVibGljIHRyYW5zZm9ybUZvckxpbmsoZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSk6IERvY3VtZW50Tm9kZSB7XG4gICAgcmV0dXJuIGRvY3VtZW50O1xuICB9XG5cbiAgLy8gRGF0YVByb3h5IEFQSVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnNcbiAgICogQHBhcmFtIG9wdGltaXN0aWNcbiAgICovXG4gIHB1YmxpYyByZWFkUXVlcnk8UXVlcnlUeXBlLCBUVmFyaWFibGVzID0gYW55PihcbiAgICBvcHRpb25zOiBDYWNoZS5SZWFkUXVlcnlPcHRpb25zPFF1ZXJ5VHlwZSwgVFZhcmlhYmxlcz4sXG4gICAgb3B0aW1pc3RpYyA9ICEhb3B0aW9ucy5vcHRpbWlzdGljLFxuICApOiBRdWVyeVR5cGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkKHtcbiAgICAgIHJvb3RJZDogb3B0aW9ucy5pZCB8fCAnUk9PVF9RVUVSWScsXG4gICAgICBxdWVyeTogb3B0aW9ucy5xdWVyeSxcbiAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YTogb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSxcbiAgICAgIG9wdGltaXN0aWMsXG4gICAgfSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgd2UgY29tcHV0ZSB0aGUgc2FtZSAoPT09KSBmcmFnbWVudCBxdWVyeSBkb2N1bWVudCBldmVyeVxuICAvLyB0aW1lIHdlIHJlY2VpdmUgdGhlIHNhbWUgZnJhZ21lbnQgaW4gcmVhZEZyYWdtZW50LlxuICBwcml2YXRlIGdldEZyYWdtZW50RG9jID0gd3JhcChnZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQpO1xuXG4gIHB1YmxpYyByZWFkRnJhZ21lbnQ8RnJhZ21lbnRUeXBlLCBUVmFyaWFibGVzID0gYW55PihcbiAgICBvcHRpb25zOiBDYWNoZS5SZWFkRnJhZ21lbnRPcHRpb25zPEZyYWdtZW50VHlwZSwgVFZhcmlhYmxlcz4sXG4gICAgb3B0aW1pc3RpYyA9ICEhb3B0aW9ucy5vcHRpbWlzdGljLFxuICApOiBGcmFnbWVudFR5cGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkKHtcbiAgICAgIHF1ZXJ5OiB0aGlzLmdldEZyYWdtZW50RG9jKG9wdGlvbnMuZnJhZ21lbnQsIG9wdGlvbnMuZnJhZ21lbnROYW1lKSxcbiAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICByb290SWQ6IG9wdGlvbnMuaWQsXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YTogb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSxcbiAgICAgIG9wdGltaXN0aWMsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgd3JpdGVRdWVyeTxURGF0YSA9IGFueSwgVFZhcmlhYmxlcyA9IGFueT4oXG4gICAgb3B0aW9uczogQ2FjaGUuV3JpdGVRdWVyeU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+LFxuICApOiBSZWZlcmVuY2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLndyaXRlKHtcbiAgICAgIGRhdGFJZDogb3B0aW9ucy5pZCB8fCAnUk9PVF9RVUVSWScsXG4gICAgICByZXN1bHQ6IG9wdGlvbnMuZGF0YSxcbiAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIGJyb2FkY2FzdDogb3B0aW9ucy5icm9hZGNhc3QsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgd3JpdGVGcmFnbWVudDxURGF0YSA9IGFueSwgVFZhcmlhYmxlcyA9IGFueT4oXG4gICAgb3B0aW9uczogQ2FjaGUuV3JpdGVGcmFnbWVudE9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+LFxuICApOiBSZWZlcmVuY2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLndyaXRlKHtcbiAgICAgIGRhdGFJZDogb3B0aW9ucy5pZCxcbiAgICAgIHJlc3VsdDogb3B0aW9ucy5kYXRhLFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIHF1ZXJ5OiB0aGlzLmdldEZyYWdtZW50RG9jKG9wdGlvbnMuZnJhZ21lbnQsIG9wdGlvbnMuZnJhZ21lbnROYW1lKSxcbiAgICAgIGJyb2FkY2FzdDogb3B0aW9ucy5icm9hZGNhc3QsXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZpZWxkTm9kZSB9IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQge1xuICBSZWZlcmVuY2UsXG4gIFN0b3JlT2JqZWN0LFxuICBTdG9yZVZhbHVlLFxuICBpc1JlZmVyZW5jZSxcbn0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzJztcblxuaW1wb3J0IHsgU3RvcmFnZVR5cGUgfSBmcm9tICcuLi8uLi9pbm1lbW9yeS9wb2xpY2llcyc7XG5cbi8vIFRoZSBSZWFkb25seTxUPiB0eXBlIG9ubHkgcmVhbGx5IHdvcmtzIGZvciBvYmplY3QgdHlwZXMsIHNpbmNlIGl0IG1hcmtzXG4vLyBhbGwgb2YgdGhlIG9iamVjdCdzIHByb3BlcnRpZXMgYXMgcmVhZG9ubHksIGJ1dCB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVuXG4vLyBhIGdlbmVyaWMgdHlwZSBwYXJhbWV0ZXIgbGlrZSBURXhpc3RpbmcgbWlnaHQgYmUgYSBzdHJpbmcgb3Igc29tZSBvdGhlclxuLy8gcHJpbWl0aXZlIHR5cGUsIGluIHdoaWNoIGNhc2Ugd2UgbmVlZCB0byBhdm9pZCB3cmFwcGluZyBpdCB3aXRoIFJlYWRvbmx5LlxuLy8gU2FmZVJlYWRvbmx5PHN0cmluZz4gY29sbGFwc2VzIHRvIGp1c3Qgc3RyaW5nLCB3aGljaCBtYWtlcyBzdHJpbmdcbi8vIGFzc2lnbmFibGUgdG8gU2FmZVJlYWRvbmx5PGFueT4sIHdoZXJlYXMgc3RyaW5nIGlzIG5vdCBhc3NpZ25hYmxlIHRvXG4vLyBSZWFkb25seTxhbnk+LCBzb21ld2hhdCBzdXJwcmlzaW5nbHkuXG5leHBvcnQgdHlwZSBTYWZlUmVhZG9ubHk8VD4gPSBUIGV4dGVuZHMgb2JqZWN0ID8gUmVhZG9ubHk8VD4gOiBUO1xuXG5leHBvcnQgY2xhc3MgTWlzc2luZ0ZpZWxkRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyByZWFkb25seSBwYXRoOiAoc3RyaW5nIHwgbnVtYmVyKVtdLFxuICAgIHB1YmxpYyByZWFkb25seSBxdWVyeTogaW1wb3J0KCdncmFwaHFsJykuRG9jdW1lbnROb2RlLFxuICAgIHB1YmxpYyByZWFkb25seSBjbGllbnRPbmx5OiBib29sZWFuLFxuICAgIHB1YmxpYyByZWFkb25seSB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApIHt9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRTcGVjaWZpZXIge1xuICB0eXBlbmFtZT86IHN0cmluZztcbiAgZmllbGROYW1lOiBzdHJpbmc7XG4gIGZpZWxkPzogRmllbGROb2RlO1xuICBhcmdzPzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWFkRmllbGRPcHRpb25zIGV4dGVuZHMgRmllbGRTcGVjaWZpZXIge1xuICBmcm9tPzogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZEZpZWxkRnVuY3Rpb24ge1xuICA8ViA9IFN0b3JlVmFsdWU+KG9wdGlvbnM6IFJlYWRGaWVsZE9wdGlvbnMpOiBTYWZlUmVhZG9ubHk8Vj4gfCB1bmRlZmluZWQ7XG4gIDxWID0gU3RvcmVWYWx1ZT4oXG4gICAgZmllbGROYW1lOiBzdHJpbmcsXG4gICAgZnJvbT86IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLFxuICApOiBTYWZlUmVhZG9ubHk8Vj4gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCB0eXBlIFRvUmVmZXJlbmNlRnVuY3Rpb24gPSAoXG4gIG9iak9ySWRPclJlZjogU3RvcmVPYmplY3QgfCBzdHJpbmcgfCBSZWZlcmVuY2UsXG4gIG1lcmdlSW50b1N0b3JlPzogYm9vbGVhbixcbikgPT4gUmVmZXJlbmNlIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBDYW5SZWFkRnVuY3Rpb24gPSAodmFsdWU6IFN0b3JlVmFsdWUpID0+IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIE1vZGlmaWVyPFQ+ID0gKHZhbHVlOiBULCBkZXRhaWxzOiB7XG4gIERFTEVURTogYW55O1xuICBJTlZBTElEQVRFOiBhbnk7XG4gIGZpZWxkTmFtZTogc3RyaW5nO1xuICBzdG9yZUZpZWxkTmFtZTogc3RyaW5nO1xuICByZWFkRmllbGQ6IFJlYWRGaWVsZEZ1bmN0aW9uO1xuICBjYW5SZWFkOiBDYW5SZWFkRnVuY3Rpb247XG4gIGlzUmVmZXJlbmNlOiB0eXBlb2YgaXNSZWZlcmVuY2U7XG4gIHRvUmVmZXJlbmNlOiBUb1JlZmVyZW5jZUZ1bmN0aW9uO1xuICBzdG9yYWdlOiBTdG9yYWdlVHlwZTtcbn0pID0+IFQ7XG5cbmV4cG9ydCB0eXBlIE1vZGlmaWVycyA9IHtcbiAgW2ZpZWxkTmFtZTogc3RyaW5nXTogTW9kaWZpZXI8YW55Pjtcbn07XG4iLCJpbXBvcnQgeyBTZWxlY3Rpb25TZXROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5cbmltcG9ydCB7IE5vcm1hbGl6ZWRDYWNoZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgUmVmZXJlbmNlLFxuICBpc1JlZmVyZW5jZSxcbiAgU3RvcmVWYWx1ZSxcbiAgU3RvcmVPYmplY3QsXG4gIGlzRmllbGQsXG4gIERlZXBNZXJnZXIsXG4gIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsXG4gIHNob3VsZEluY2x1ZGUsXG59IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBjb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3QoXG4gIHN0b3JlOiBOb3JtYWxpemVkQ2FjaGUsXG4gIG9iamVjdE9yUmVmZXJlbmNlOiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSxcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSlcbiAgICA/IHN0b3JlLmdldChvYmplY3RPclJlZmVyZW5jZS5fX3JlZiwgXCJfX3R5cGVuYW1lXCIpIGFzIHN0cmluZ1xuICAgIDogb2JqZWN0T3JSZWZlcmVuY2UgJiYgb2JqZWN0T3JSZWZlcmVuY2UuX190eXBlbmFtZTtcbn1cblxuZXhwb3J0IGNvbnN0IFR5cGVPckZpZWxkTmFtZVJlZ0V4cCA9IC9eW19hLXpdW18wLTlhLXpdKi9pO1xuXG5leHBvcnQgZnVuY3Rpb24gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbWF0Y2ggPSBzdG9yZUZpZWxkTmFtZS5tYXRjaChUeXBlT3JGaWVsZE5hbWVSZWdFeHApO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6IHN0b3JlRmllbGROYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChcbiAgc2VsZWN0aW9uU2V0OiBTZWxlY3Rpb25TZXROb2RlLFxuICByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT4sXG4pOiBib29sZWFuIHtcbiAgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocmVzdWx0KVxuICAgICAgPyByZXN1bHQuZXZlcnkoaXRlbSA9PiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KHNlbGVjdGlvblNldCwgaXRlbSwgdmFyaWFibGVzKSlcbiAgICAgIDogc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoZmllbGQgPT4ge1xuICAgICAgICBpZiAoaXNGaWVsZChmaWVsZCkgJiYgc2hvdWxkSW5jbHVkZShmaWVsZCwgdmFyaWFibGVzKSkge1xuICAgICAgICAgIGNvbnN0IGtleSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQpO1xuICAgICAgICAgIHJldHVybiBoYXNPd24uY2FsbChyZXN1bHQsIGtleSkgJiZcbiAgICAgICAgICAgICghZmllbGQuc2VsZWN0aW9uU2V0IHx8XG4gICAgICAgICAgICAgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChmaWVsZC5zZWxlY3Rpb25TZXQsIHJlc3VsdFtrZXldLCB2YXJpYWJsZXMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0aW9uIGhhcyBiZWVuIHNraXBwZWQgd2l0aCBAc2tpcCh0cnVlKSBvclxuICAgICAgICAvLyBAaW5jbHVkZShmYWxzZSksIGl0IHNob3VsZCBub3QgY291bnQgYWdhaW5zdCB0aGUgbWF0Y2hpbmcuIElmXG4gICAgICAgIC8vIHRoZSBzZWxlY3Rpb24gaXMgbm90IGEgZmllbGQsIGl0IG11c3QgYmUgYSBmcmFnbWVudCAoaW5saW5lIG9yXG4gICAgICAgIC8vIG5hbWVkKS4gV2Ugd2lsbCBkZXRlcm1pbmUgaWYgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCBmb3IgdGhhdFxuICAgICAgICAvLyBmcmFnbWVudCB3aGVuIHdlIGdldCB0byBpdCwgc28gZm9yIG5vdyB3ZSByZXR1cm4gdHJ1ZS5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChcbiAgdmFsdWU6IFN0b3JlVmFsdWUsXG4pOiB2YWx1ZSBpcyBTdG9yZU9iamVjdCB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICFpc1JlZmVyZW5jZSh2YWx1ZSkgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyKCkge1xuICByZXR1cm4gbmV3IERlZXBNZXJnZXI7XG59XG4iLCJpbXBvcnQgeyBkZXAsIE9wdGltaXN0aWNEZXBlbmRlbmN5RnVuY3Rpb24sIEtleVRyaWUgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuXG5pbXBvcnQge1xuICBpc1JlZmVyZW5jZSxcbiAgU3RvcmVWYWx1ZSxcbiAgU3RvcmVPYmplY3QsXG4gIFJlZmVyZW5jZSxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgRGVlcE1lcmdlcixcbiAgbWF5YmVEZWVwRnJlZXplLFxuICBjYW5Vc2VXZWFrTWFwLFxufSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgTm9ybWFsaXplZENhY2hlLCBOb3JtYWxpemVkQ2FjaGVPYmplY3QgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGhhc093biwgZmllbGROYW1lRnJvbVN0b3JlTmFtZSB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBQb2xpY2llcywgU3RvcmFnZVR5cGUgfSBmcm9tICcuL3BvbGljaWVzJztcbmltcG9ydCB7IENhY2hlIH0gZnJvbSAnLi4vY29yZS90eXBlcy9DYWNoZSc7XG5pbXBvcnQge1xuICBTYWZlUmVhZG9ubHksXG4gIE1vZGlmaWVyLFxuICBNb2RpZmllcnMsXG4gIFJlYWRGaWVsZE9wdGlvbnMsXG4gIFRvUmVmZXJlbmNlRnVuY3Rpb24sXG4gIENhblJlYWRGdW5jdGlvbixcbn0gZnJvbSAnLi4vY29yZS90eXBlcy9jb21tb24nO1xuXG5jb25zdCBERUxFVEU6IGFueSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCBkZWxNb2RpZmllcjogTW9kaWZpZXI8YW55PiA9ICgpID0+IERFTEVURTtcbmNvbnN0IElOVkFMSURBVEU6IGFueSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFbnRpdHlTdG9yZSBpbXBsZW1lbnRzIE5vcm1hbGl6ZWRDYWNoZSB7XG4gIHByb3RlY3RlZCBkYXRhOiBOb3JtYWxpemVkQ2FjaGVPYmplY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBwb2xpY2llczogUG9saWNpZXMsXG4gICAgcHVibGljIHJlYWRvbmx5IGdyb3VwOiBDYWNoZUdyb3VwLFxuICApIHt9XG5cbiAgcHVibGljIGFic3RyYWN0IGFkZExheWVyKFxuICAgIGxheWVySWQ6IHN0cmluZyxcbiAgICByZXBsYXk6IChsYXllcjogRW50aXR5U3RvcmUpID0+IGFueSxcbiAgKTogTGF5ZXI7XG5cbiAgcHVibGljIGFic3RyYWN0IHJlbW92ZUxheWVyKGxheWVySWQ6IHN0cmluZyk6IEVudGl0eVN0b3JlO1xuXG4gIC8vIEFsdGhvdWdoIHRoZSBFbnRpdHlTdG9yZSBjbGFzcyBpcyBhYnN0cmFjdCwgaXQgY29udGFpbnMgY29uY3JldGVcbiAgLy8gaW1wbGVtZW50YXRpb25zIG9mIHRoZSB2YXJpb3VzIE5vcm1hbGl6ZWRDYWNoZSBpbnRlcmZhY2UgbWV0aG9kcyB0aGF0XG4gIC8vIGFyZSBpbmhlcml0ZWQgYnkgdGhlIFJvb3QgYW5kIExheWVyIHN1YmNsYXNzZXMuXG5cbiAgcHVibGljIHRvT2JqZWN0KCk6IE5vcm1hbGl6ZWRDYWNoZU9iamVjdCB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5kYXRhIH07XG4gIH1cblxuICBwdWJsaWMgaGFzKGRhdGFJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubG9va3VwKGRhdGFJZCwgdHJ1ZSkgIT09IHZvaWQgMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQoZGF0YUlkOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nKTogU3RvcmVWYWx1ZSB7XG4gICAgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICBpZiAoc3RvcmVPYmplY3QgJiYgaGFzT3duLmNhbGwoc3RvcmVPYmplY3QsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlT2JqZWN0W2ZpZWxkTmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWVsZE5hbWUgPT09IFwiX190eXBlbmFtZVwiICYmXG4gICAgICAgIGhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGRhdGFJZCkpIHtcbiAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF07XG4gICAgfVxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBsb29rdXAoZGF0YUlkOiBzdHJpbmcsIGRlcGVuZE9uRXhpc3RlbmNlPzogYm9vbGVhbik6IFN0b3JlT2JqZWN0IHwgdW5kZWZpbmVkIHtcbiAgICAvLyBUaGUgaGFzIG1ldGhvZCAoYWJvdmUpIGNhbGxzIGxvb2t1cCB3aXRoIGRlcGVuZE9uRXhpc3RlbmNlID0gdHJ1ZSwgc29cbiAgICAvLyB0aGF0IGl0IGNhbiBsYXRlciBiZSBpbnZhbGlkYXRlZCB3aGVuIHdlIGFkZCBvciByZW1vdmUgYSBTdG9yZU9iamVjdCBmb3JcbiAgICAvLyB0aGlzIGRhdGFJZC4gQW55IGNvbnN1bWVyIHdobyBjYXJlcyBhYm91dCB0aGUgY29udGVudHMgb2YgdGhlIFN0b3JlT2JqZWN0XG4gICAgLy8gc2hvdWxkIG5vdCByZWx5IG9uIHRoaXMgZGVwZW5kZW5jeSwgc2luY2UgdGhlIGNvbnRlbnRzIGNvdWxkIGNoYW5nZVxuICAgIC8vIHdpdGhvdXQgdGhlIG9iamVjdCBiZWluZyBhZGRlZCBvciByZW1vdmVkLlxuICAgIGlmIChkZXBlbmRPbkV4aXN0ZW5jZSkgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBcIl9fZXhpc3RzXCIpO1xuXG4gICAgaWYgKGhhc093bi5jYWxsKHRoaXMuZGF0YSwgZGF0YUlkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgIH1cblxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5sb29rdXAoZGF0YUlkLCBkZXBlbmRPbkV4aXN0ZW5jZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1lcmdlKGRhdGFJZDogc3RyaW5nLCBpbmNvbWluZzogU3RvcmVPYmplY3QpOiB2b2lkIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMubG9va3VwKGRhdGFJZCk7XG4gICAgY29uc3QgbWVyZ2VkOiBTdG9yZU9iamVjdCA9XG4gICAgICBuZXcgRGVlcE1lcmdlcihzdG9yZU9iamVjdFJlY29uY2lsZXIpLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZyk7XG4gICAgLy8gRXZlbiBpZiBtZXJnZWQgPT09IGV4aXN0aW5nLCBleGlzdGluZyBtYXkgaGF2ZSBjb21lIGZyb20gYSBsb3dlclxuICAgIC8vIGxheWVyLCBzbyB3ZSBhbHdheXMgbmVlZCB0byBzZXQgdGhpcy5kYXRhW2RhdGFJZF0gb24gdGhpcyBsZXZlbC5cbiAgICB0aGlzLmRhdGFbZGF0YUlkXSA9IG1lcmdlZDtcbiAgICBpZiAobWVyZ2VkICE9PSBleGlzdGluZykge1xuICAgICAgZGVsZXRlIHRoaXMucmVmc1tkYXRhSWRdO1xuICAgICAgaWYgKHRoaXMuZ3JvdXAuY2FjaGluZykge1xuICAgICAgICBjb25zdCBmaWVsZHNUb0RpcnR5OiBSZWNvcmQ8c3RyaW5nLCAxPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgICAgLy8gSWYgd2UgYWRkZWQgYSBuZXcgU3RvcmVPYmplY3Qgd2hlcmUgdGhlcmUgd2FzIHByZXZpb3VzbHkgbm9uZSwgZGlydHlcbiAgICAgICAgLy8gYW55dGhpbmcgdGhhdCBkZXBlbmRlZCBvbiB0aGUgZXhpc3RlbmNlIG9mIHRoaXMgZGF0YUlkLCBzdWNoIGFzIHRoZVxuICAgICAgICAvLyBFbnRpdHlTdG9yZSNoYXMgbWV0aG9kLlxuICAgICAgICBpZiAoIWV4aXN0aW5nKSBmaWVsZHNUb0RpcnR5Ll9fZXhpc3RzID0gMTtcblxuICAgICAgICAvLyBOb3cgaW52YWxpZGF0ZSBkZXBlbmRlbnRzIHdobyBjYWxsZWQgZ2V0RmllbGRWYWx1ZSBmb3IgYW55IGZpZWxkc1xuICAgICAgICAvLyB0aGF0IGFyZSBjaGFuZ2luZyBhcyBhIHJlc3VsdCBvZiB0aGlzIG1lcmdlLlxuICAgICAgICBPYmplY3Qua2V5cyhpbmNvbWluZykuZm9yRWFjaChzdG9yZUZpZWxkTmFtZSA9PiB7XG4gICAgICAgICAgaWYgKCFleGlzdGluZyB8fCBleGlzdGluZ1tzdG9yZUZpZWxkTmFtZV0gIT09IG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0pIHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyBkaXJ0eSB0aGUgZnVsbCBzdG9yZUZpZWxkTmFtZSwgd2hpY2ggbWF5IGluY2x1ZGVcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZWQgYXJndW1lbnRzIGZvbGxvd2luZyB0aGUgZmllbGROYW1lIHByZWZpeC5cbiAgICAgICAgICAgIGZpZWxkc1RvRGlydHlbc3RvcmVGaWVsZE5hbWVdID0gMTtcblxuICAgICAgICAgICAgLy8gQWxzbyBkaXJ0eSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKSBpZiBpdCdzXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJvbSBzdG9yZUZpZWxkTmFtZSBhbmQgdGhpcyBmaWVsZCBkb2VzIG5vdCBoYXZlXG4gICAgICAgICAgICAvLyBrZXlBcmdzIGNvbmZpZ3VyZWQsIGJlY2F1c2UgdGhhdCBtZWFucyB0aGUgY2FjaGUgY2FuJ3QgbWFrZVxuICAgICAgICAgICAgLy8gYW55IGFzc3VtcHRpb25zIGFib3V0IGhvdyBmaWVsZCB2YWx1ZXMgd2l0aCB0aGUgc2FtZSBmaWVsZFxuICAgICAgICAgICAgLy8gbmFtZSBidXQgZGlmZmVyZW50IGFyZ3VtZW50cyBtaWdodCBiZSBpbnRlcnJlbGF0ZWQsIHNvIGl0XG4gICAgICAgICAgICAvLyBtdXN0IGVyciBvbiB0aGUgc2lkZSBvZiBpbnZhbGlkYXRpbmcgYWxsIGZpZWxkIHZhbHVlcyB0aGF0XG4gICAgICAgICAgICAvLyBzaGFyZSB0aGUgc2FtZSBzaG9ydCBmaWVsZE5hbWUsIHJlZ2FyZGxlc3Mgb2YgYXJndW1lbnRzLlxuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoZmllbGROYW1lICE9PSBzdG9yZUZpZWxkTmFtZSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLnBvbGljaWVzLmhhc0tleUFyZ3MobWVyZ2VkLl9fdHlwZW5hbWUsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgZmllbGRzVG9EaXJ0eVtmaWVsZE5hbWVdID0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgbWVyZ2VkW3N0b3JlRmllbGROYW1lXSBoYXMgYmVjb21lIHVuZGVmaW5lZCwgYW5kIHRoaXMgaXMgdGhlXG4gICAgICAgICAgICAvLyBSb290IGxheWVyLCBhY3R1YWxseSBkZWxldGUgdGhlIHByb3BlcnR5IGZyb20gdGhlIG1lcmdlZCBvYmplY3QsXG4gICAgICAgICAgICAvLyB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGhhdmUgYmVlbiBjcmVhdGVkIGZyZXNoIGluIHRoaXMgbWV0aG9kLlxuICAgICAgICAgICAgaWYgKG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0gPT09IHZvaWQgMCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIG1lcmdlZFtzdG9yZUZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBPYmplY3Qua2V5cyhmaWVsZHNUb0RpcnR5KS5mb3JFYWNoKFxuICAgICAgICAgIGZpZWxkTmFtZSA9PiB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgZmllbGROYW1lKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1vZGlmeShcbiAgICBkYXRhSWQ6IHN0cmluZyxcbiAgICBmaWVsZHM6IE1vZGlmaWVyPGFueT4gfCBNb2RpZmllcnMsXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5sb29rdXAoZGF0YUlkKTtcblxuICAgIGlmIChzdG9yZU9iamVjdCkge1xuICAgICAgY29uc3QgY2hhbmdlZEZpZWxkczogUmVjb3JkPHN0cmluZywgYW55PiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBsZXQgbmVlZFRvTWVyZ2UgPSBmYWxzZTtcbiAgICAgIGxldCBhbGxEZWxldGVkID0gdHJ1ZTtcblxuICAgICAgY29uc3Qgc2hhcmVkRGV0YWlscyA9IHtcbiAgICAgICAgREVMRVRFLFxuICAgICAgICBJTlZBTElEQVRFLFxuICAgICAgICBpc1JlZmVyZW5jZSxcbiAgICAgICAgdG9SZWZlcmVuY2U6IHRoaXMudG9SZWZlcmVuY2UsXG4gICAgICAgIGNhblJlYWQ6IHRoaXMuY2FuUmVhZCxcbiAgICAgICAgcmVhZEZpZWxkOiA8ViA9IFN0b3JlVmFsdWU+KFxuICAgICAgICAgIGZpZWxkTmFtZU9yT3B0aW9uczogc3RyaW5nIHwgUmVhZEZpZWxkT3B0aW9ucyxcbiAgICAgICAgICBmcm9tPzogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UsXG4gICAgICAgICkgPT4gdGhpcy5wb2xpY2llcy5yZWFkRmllbGQ8Vj4oXG4gICAgICAgICAgdHlwZW9mIGZpZWxkTmFtZU9yT3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/IHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lT3JPcHRpb25zLFxuICAgICAgICAgICAgZnJvbTogZnJvbSB8fCBtYWtlUmVmZXJlbmNlKGRhdGFJZCksXG4gICAgICAgICAgfSA6IGZpZWxkTmFtZU9yT3B0aW9ucyxcbiAgICAgICAgICB7IHN0b3JlOiB0aGlzIH0sXG4gICAgICAgICksXG4gICAgICB9O1xuXG4gICAgICBPYmplY3Qua2V5cyhzdG9yZU9iamVjdCkuZm9yRWFjaChzdG9yZUZpZWxkTmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IHN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXTtcbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBtb2RpZnk6IE1vZGlmaWVyPFN0b3JlVmFsdWU+ID0gdHlwZW9mIGZpZWxkcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBmaWVsZHNcbiAgICAgICAgICA6IGZpZWxkc1tzdG9yZUZpZWxkTmFtZV0gfHwgZmllbGRzW2ZpZWxkTmFtZV07XG4gICAgICAgIGlmIChtb2RpZnkpIHtcbiAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBtb2RpZnkgPT09IGRlbE1vZGlmaWVyID8gREVMRVRFIDpcbiAgICAgICAgICAgIG1vZGlmeShtYXliZURlZXBGcmVlemUoZmllbGRWYWx1ZSksIHtcbiAgICAgICAgICAgICAgLi4uc2hhcmVkRGV0YWlscyxcbiAgICAgICAgICAgICAgZmllbGROYW1lLFxuICAgICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgc3RvcmFnZTogdGhpcy5nZXRTdG9yYWdlKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBJTlZBTElEQVRFKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IERFTEVURSkgbmV3VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc1tzdG9yZUZpZWxkTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgbmVlZFRvTWVyZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBhbGxEZWxldGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobmVlZFRvTWVyZ2UpIHtcbiAgICAgICAgdGhpcy5tZXJnZShkYXRhSWQsIGNoYW5nZWRGaWVsZHMpO1xuXG4gICAgICAgIGlmIChhbGxEZWxldGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2RhdGFJZF0gPSB2b2lkIDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBJZiBjYWxsZWQgd2l0aCBvbmx5IG9uZSBhcmd1bWVudCwgcmVtb3ZlcyB0aGUgZW50aXJlIGVudGl0eVxuICAvLyBpZGVudGlmaWVkIGJ5IGRhdGFJZC4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWUgYXMgd2VsbCwgcmVtb3ZlcyBhbGxcbiAgLy8gZmllbGRzIG9mIHRoYXQgZW50aXR5IHdob3NlIG5hbWVzIG1hdGNoIGZpZWxkTmFtZSBhY2NvcmRpbmcgdG8gdGhlXG4gIC8vIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUgaGVscGVyIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBhIGZpZWxkTmFtZVxuICAvLyBhbmQgdmFyaWFibGVzLCByZW1vdmVzIGFsbCBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lXG4gIC8vIGFuZCB3aG9zZSBhcmd1bWVudHMgd2hlbiBjYWNoZWQgZXhhY3RseSBtYXRjaCB0aGUgdmFyaWFibGVzIHBhc3NlZC5cbiAgcHVibGljIGRlbGV0ZShcbiAgICBkYXRhSWQ6IHN0cmluZyxcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmcsXG4gICAgYXJncz86IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICkge1xuICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5sb29rdXAoZGF0YUlkKTtcbiAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgIGNvbnN0IHR5cGVuYW1lID0gdGhpcy5nZXRGaWVsZFZhbHVlPHN0cmluZz4oc3RvcmVPYmplY3QsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgIGNvbnN0IHN0b3JlRmllbGROYW1lID0gZmllbGROYW1lICYmIGFyZ3NcbiAgICAgICAgPyB0aGlzLnBvbGljaWVzLmdldFN0b3JlRmllbGROYW1lKHsgdHlwZW5hbWUsIGZpZWxkTmFtZSwgYXJncyB9KVxuICAgICAgICA6IGZpZWxkTmFtZTtcbiAgICAgIHJldHVybiB0aGlzLm1vZGlmeShkYXRhSWQsIHN0b3JlRmllbGROYW1lID8ge1xuICAgICAgICBbc3RvcmVGaWVsZE5hbWVdOiBkZWxNb2RpZmllcixcbiAgICAgIH0gOiBkZWxNb2RpZmllcik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBldmljdChvcHRpb25zOiBDYWNoZS5FdmljdE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBsZXQgZXZpY3RlZCA9IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLmlkKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy5kYXRhLCBvcHRpb25zLmlkKSkge1xuICAgICAgICBldmljdGVkID0gdGhpcy5kZWxldGUob3B0aW9ucy5pZCwgb3B0aW9ucy5maWVsZE5hbWUsIG9wdGlvbnMuYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgIGV2aWN0ZWQgPSB0aGlzLnBhcmVudC5ldmljdChvcHRpb25zKSB8fCBldmljdGVkO1xuICAgICAgfVxuICAgICAgLy8gQWx3YXlzIGludmFsaWRhdGUgdGhlIGZpZWxkIHRvIHRyaWdnZXIgcmVyZWFkaW5nIG9mIHdhdGNoZWRcbiAgICAgIC8vIHF1ZXJpZXMsIGV2ZW4gaWYgbm8gY2FjaGUgZGF0YSB3YXMgbW9kaWZpZWQgYnkgdGhlIGV2aWN0aW9uLFxuICAgICAgLy8gYmVjYXVzZSBxdWVyaWVzIG1heSBkZXBlbmQgb24gY29tcHV0ZWQgZmllbGRzIHdpdGggY3VzdG9tIHJlYWRcbiAgICAgIC8vIGZ1bmN0aW9ucywgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIGluIHRoZSBFbnRpdHlTdG9yZS5cbiAgICAgIGlmIChvcHRpb25zLmZpZWxkTmFtZSB8fCBldmljdGVkKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAuZGlydHkob3B0aW9ucy5pZCwgb3B0aW9ucy5maWVsZE5hbWUgfHwgXCJfX2V4aXN0c1wiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV2aWN0ZWQ7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5yZXBsYWNlKG51bGwpO1xuICB9XG5cbiAgcHVibGljIGV4dHJhY3QoKTogTm9ybWFsaXplZENhY2hlT2JqZWN0IHtcbiAgICBjb25zdCBvYmogPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgY29uc3QgZXh0cmFSb290SWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHRoaXMuZ2V0Um9vdElkU2V0KCkuZm9yRWFjaChpZCA9PiB7XG4gICAgICBpZiAoIWhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGlkKSkge1xuICAgICAgICBleHRyYVJvb3RJZHMucHVzaChpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGV4dHJhUm9vdElkcy5sZW5ndGgpIHtcbiAgICAgIG9iai5fX01FVEEgPSB7IGV4dHJhUm9vdElkczogZXh0cmFSb290SWRzLnNvcnQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgcHVibGljIHJlcGxhY2UobmV3RGF0YTogTm9ybWFsaXplZENhY2hlT2JqZWN0IHwgbnVsbCk6IHZvaWQge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChkYXRhSWQgPT4ge1xuICAgICAgaWYgKCEobmV3RGF0YSAmJiBoYXNPd24uY2FsbChuZXdEYXRhLCBkYXRhSWQpKSkge1xuICAgICAgICB0aGlzLmRlbGV0ZShkYXRhSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChuZXdEYXRhKSB7XG4gICAgICBjb25zdCB7IF9fTUVUQSwgLi4ucmVzdCB9ID0gbmV3RGF0YTtcbiAgICAgIE9iamVjdC5rZXlzKHJlc3QpLmZvckVhY2goZGF0YUlkID0+IHtcbiAgICAgICAgdGhpcy5tZXJnZShkYXRhSWQsIHJlc3RbZGF0YUlkXSBhcyBTdG9yZU9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIGlmIChfX01FVEEpIHtcbiAgICAgICAgX19NRVRBLmV4dHJhUm9vdElkcy5mb3JFYWNoKHRoaXMucmV0YWluLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgZ2V0U3RvcmFnZShcbiAgICBpZE9yT2JqOiBzdHJpbmcgfCBTdG9yZU9iamVjdCxcbiAgICAuLi5zdG9yZUZpZWxkTmFtZXM6IChzdHJpbmcgfCBudW1iZXIpW11cbiAgKTogU3RvcmFnZVR5cGU7XG5cbiAgLy8gTWFwcyByb290IGVudGl0eSBJRHMgdG8gdGhlIG51bWJlciBvZiB0aW1lcyB0aGV5IGhhdmUgYmVlbiByZXRhaW5lZCwgbWludXNcbiAgLy8gdGhlIG51bWJlciBvZiB0aW1lcyB0aGV5IGhhdmUgYmVlbiByZWxlYXNlZC4gUmV0YWluZWQgZW50aXRpZXMga2VlcCBvdGhlclxuICAvLyBlbnRpdGllcyB0aGV5IHJlZmVyZW5jZSAoZXZlbiBpbmRpcmVjdGx5KSBmcm9tIGJlaW5nIGdhcmJhZ2UgY29sbGVjdGVkLlxuICBwcml2YXRlIHJvb3RJZHM6IHtcbiAgICBbcm9vdElkOiBzdHJpbmddOiBudW1iZXI7XG4gIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHB1YmxpYyByZXRhaW4ocm9vdElkOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJvb3RJZHNbcm9vdElkXSA9ICh0aGlzLnJvb3RJZHNbcm9vdElkXSB8fCAwKSArIDE7XG4gIH1cblxuICBwdWJsaWMgcmVsZWFzZShyb290SWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMucm9vdElkc1tyb290SWRdID4gMCkge1xuICAgICAgY29uc3QgY291bnQgPSAtLXRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgaWYgKCFjb3VudCkgZGVsZXRlIHRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vIFJldHVybiBhIFNldDxzdHJpbmc+IG9mIGFsbCB0aGUgSUQgc3RyaW5ncyB0aGF0IGhhdmUgYmVlbiByZXRhaW5lZCBieVxuICAvLyB0aGlzIGxheWVyL3Jvb3QgKmFuZCogYW55IGxheWVycy9yb290cyBiZW5lYXRoIGl0LlxuICBwdWJsaWMgZ2V0Um9vdElkU2V0KGlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5yb290SWRzKS5mb3JFYWNoKGlkcy5hZGQsIGlkcyk7XG4gICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgdGhpcy5wYXJlbnQuZ2V0Um9vdElkU2V0KGlkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9mZmljaWFsIHNpbmdsZXRvbiBJRHMgbGlrZSBST09UX1FVRVJZIGFuZCBST09UX01VVEFUSU9OIGFyZVxuICAgICAgLy8gYWx3YXlzIGNvbnNpZGVyZWQgcm9vdHMgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgICAgLy8gdGhlaXIgcmV0YWlubWVudCBjb3VudHMgaW4gdGhpcy5yb290SWRzLlxuICAgICAgT2JqZWN0LmtleXModGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZCkuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgIH1cbiAgICByZXR1cm4gaWRzO1xuICB9XG5cbiAgLy8gVGhlIGdvYWwgb2YgZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIHRvIHJlbW92ZSBJRHMgZnJvbSB0aGUgUm9vdCBsYXllciBvZiB0aGVcbiAgLy8gc3RvcmUgdGhhdCBhcmUgbm8gbG9uZ2VyIHJlYWNoYWJsZSBzdGFydGluZyBmcm9tIGFueSBJRHMgdGhhdCBoYXZlIGJlZW5cbiAgLy8gZXhwbGljaXRseSByZXRhaW5lZCAoc2VlIHJldGFpbiBhbmQgcmVsZWFzZSwgYWJvdmUpLiBSZXR1cm5zIGFuIGFycmF5IG9mXG4gIC8vIGRhdGFJZCBzdHJpbmdzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhlIHN0b3JlLlxuICBwdWJsaWMgZ2MoKSB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5nZXRSb290SWRTZXQoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMudG9PYmplY3QoKTtcbiAgICBpZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwoc25hcHNob3QsIGlkKSkge1xuICAgICAgICAvLyBCZWNhdXNlIHdlIGFyZSBpdGVyYXRpbmcgb3ZlciBhbiBFQ01BU2NyaXB0IFNldCwgdGhlIElEcyB3ZSBhZGQgaGVyZVxuICAgICAgICAvLyB3aWxsIGJlIHZpc2l0ZWQgaW4gbGF0ZXIgaXRlcmF0aW9ucyBvZiB0aGUgZm9yRWFjaCBsb29wIG9ubHkgaWYgdGhleVxuICAgICAgICAvLyB3ZXJlIG5vdCBwcmV2aW91c2x5IGNvbnRhaW5lZCBieSB0aGUgU2V0LlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZpbmRDaGlsZFJlZklkcyhpZCkpLmZvckVhY2goaWRzLmFkZCwgaWRzKTtcbiAgICAgICAgLy8gQnkgcmVtb3ZpbmcgSURzIGZyb20gdGhlIHNuYXBzaG90IG9iamVjdCBoZXJlLCB3ZSBwcm90ZWN0IHRoZW0gZnJvbVxuICAgICAgICAvLyBnZXR0aW5nIHJlbW92ZWQgZnJvbSB0aGUgcm9vdCBzdG9yZSBsYXllciBiZWxvdy5cbiAgICAgICAgZGVsZXRlIHNuYXBzaG90W2lkXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBpZHNUb1JlbW92ZSA9IE9iamVjdC5rZXlzKHNuYXBzaG90KTtcbiAgICBpZiAoaWRzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICBsZXQgcm9vdDogRW50aXR5U3RvcmUgPSB0aGlzO1xuICAgICAgd2hpbGUgKHJvb3QgaW5zdGFuY2VvZiBMYXllcikgcm9vdCA9IHJvb3QucGFyZW50O1xuICAgICAgaWRzVG9SZW1vdmUuZm9yRWFjaChpZCA9PiByb290LmRlbGV0ZShpZCkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRzVG9SZW1vdmU7XG4gIH1cblxuICAvLyBMYXppbHkgdHJhY2tzIHsgX19yZWY6IDxkYXRhSWQ+IH0gc3RyaW5ncyBjb250YWluZWQgYnkgdGhpcy5kYXRhW2RhdGFJZF0uXG4gIHByaXZhdGUgcmVmczoge1xuICAgIFtkYXRhSWQ6IHN0cmluZ106IFJlY29yZDxzdHJpbmcsIHRydWU+O1xuICB9ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBwdWJsaWMgZmluZENoaWxkUmVmSWRzKGRhdGFJZDogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgdHJ1ZT4ge1xuICAgIGlmICghaGFzT3duLmNhbGwodGhpcy5yZWZzLCBkYXRhSWQpKSB7XG4gICAgICBjb25zdCBmb3VuZCA9IHRoaXMucmVmc1tkYXRhSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFt0aGlzLmRhdGFbZGF0YUlkXV0pO1xuICAgICAgLy8gV2l0aGluIHRoZSBzdG9yZSwgb25seSBhcnJheXMgYW5kIG9iamVjdHMgY2FuIGNvbnRhaW4gY2hpbGQgZW50aXR5XG4gICAgICAvLyByZWZlcmVuY2VzLCBzbyB3ZSBjYW4gcHJ1bmUgdGhlIHRyYXZlcnNhbCB1c2luZyB0aGlzIHByZWRpY2F0ZTpcbiAgICAgIGNvbnN0IGNhblRyYXZlcnNlID0gKG9iajogYW55KSA9PiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG4gICAgICB3b3JrU2V0LmZvckVhY2gob2JqID0+IHtcbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9iaikpIHtcbiAgICAgICAgICBmb3VuZFtvYmouX19yZWZdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5UcmF2ZXJzZShvYmopKSB7XG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmohKVxuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBhZGQgcHJpbWl0aXZlIHZhbHVlcyB0byB0aGUgd29ya1NldCwgc2luY2UgdGhleSBjYW5ub3RcbiAgICAgICAgICAgIC8vIGNvbnRhaW4gcmVmZXJlbmNlIG9iamVjdHMuXG4gICAgICAgICAgICAuZmlsdGVyKGNhblRyYXZlcnNlKVxuICAgICAgICAgICAgLmZvckVhY2god29ya1NldC5hZGQsIHdvcmtTZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVmc1tkYXRhSWRdO1xuICB9XG5cbiAgLy8gVXNlZCB0byBjb21wdXRlIGNhY2hlIGtleXMgc3BlY2lmaWMgdG8gdGhpcy5ncm91cC5cbiAgcHVibGljIG1ha2VDYWNoZUtleSguLi5hcmdzOiBhbnlbXSkge1xuICAgIHJldHVybiB0aGlzLmdyb3VwLmtleU1ha2VyLmxvb2t1cEFycmF5KGFyZ3MpO1xuICB9XG5cbiAgLy8gQm91bmQgZnVuY3Rpb24gdGhhdCBjYW4gYmUgcGFzc2VkIGFyb3VuZCB0byBwcm92aWRlIGVhc3kgYWNjZXNzIHRvIGZpZWxkc1xuICAvLyBvZiBSZWZlcmVuY2Ugb2JqZWN0cyBhcyB3ZWxsIGFzIG9yZGluYXJ5IG9iamVjdHMuXG4gIHB1YmxpYyBnZXRGaWVsZFZhbHVlID0gPFQgPSBTdG9yZVZhbHVlPihcbiAgICBvYmplY3RPclJlZmVyZW5jZTogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UgfCB1bmRlZmluZWQsXG4gICAgc3RvcmVGaWVsZE5hbWU6IHN0cmluZyxcbiAgKSA9PiBtYXliZURlZXBGcmVlemUoXG4gICAgaXNSZWZlcmVuY2Uob2JqZWN0T3JSZWZlcmVuY2UpXG4gICAgICA/IHRoaXMuZ2V0KG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmLCBzdG9yZUZpZWxkTmFtZSlcbiAgICAgIDogb2JqZWN0T3JSZWZlcmVuY2UgJiYgb2JqZWN0T3JSZWZlcmVuY2Vbc3RvcmVGaWVsZE5hbWVdXG4gICkgYXMgU2FmZVJlYWRvbmx5PFQ+O1xuXG4gIC8vIFJldHVybnMgdHJ1ZSBmb3Igbm9uLW5vcm1hbGl6ZWQgU3RvcmVPYmplY3RzIGFuZCBub24tZGFuZ2xpbmdcbiAgLy8gUmVmZXJlbmNlcywgaW5kaWNhdGluZyB0aGF0IHJlYWRGaWVsZChuYW1lLCBvYmpPclJlZikgaGFzIGEgY2hhbmNlIG9mXG4gIC8vIHdvcmtpbmcuIFVzZWZ1bCBmb3IgZmlsdGVyaW5nIG91dCBkYW5nbGluZyByZWZlcmVuY2VzIGZyb20gbGlzdHMuXG4gIHB1YmxpYyBjYW5SZWFkOiBDYW5SZWFkRnVuY3Rpb24gPSBvYmpPclJlZiA9PiB7XG4gICAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iak9yUmVmKVxuICAgICAgPyB0aGlzLmhhcyhvYmpPclJlZi5fX3JlZilcbiAgICAgIDogdHlwZW9mIG9iak9yUmVmID09PSBcIm9iamVjdFwiO1xuICB9O1xuXG4gIC8vIEJvdW5kIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgYW4gaWQgb3IgYW4gb2JqZWN0IHdpdGggYSBfX3R5cGVuYW1lIGFuZFxuICAvLyBwcmltYXJ5IGtleSBmaWVsZHMgdG8gYSBSZWZlcmVuY2Ugb2JqZWN0LiBJZiBjYWxsZWQgd2l0aCBhIFJlZmVyZW5jZSBvYmplY3QsXG4gIC8vIHRoYXQgc2FtZSBSZWZlcmVuY2Ugb2JqZWN0IGlzIHJldHVybmVkLiBQYXNzIHRydWUgZm9yIG1lcmdlSW50b1N0b3JlIHRvIHBlcnNpc3RcbiAgLy8gYW4gb2JqZWN0IGludG8gdGhlIHN0b3JlLlxuICBwdWJsaWMgdG9SZWZlcmVuY2U6IFRvUmVmZXJlbmNlRnVuY3Rpb24gPSAoXG4gICAgb2JqT3JJZE9yUmVmLFxuICAgIG1lcmdlSW50b1N0b3JlLFxuICApID0+IHtcbiAgICBpZiAodHlwZW9mIG9iak9ySWRPclJlZiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG1ha2VSZWZlcmVuY2Uob2JqT3JJZE9yUmVmKTtcbiAgICB9XG5cbiAgICBpZiAoaXNSZWZlcmVuY2Uob2JqT3JJZE9yUmVmKSkge1xuICAgICAgcmV0dXJuIG9iak9ySWRPclJlZjtcbiAgICB9XG5cbiAgICBjb25zdCBbaWRdID0gdGhpcy5wb2xpY2llcy5pZGVudGlmeShvYmpPcklkT3JSZWYpO1xuXG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCByZWYgPSBtYWtlUmVmZXJlbmNlKGlkKTtcbiAgICAgIGlmIChtZXJnZUludG9TdG9yZSkge1xuICAgICAgICB0aGlzLm1lcmdlKGlkLCBvYmpPcklkT3JSZWYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlZjtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB0eXBlIEZpZWxkVmFsdWVHZXR0ZXIgPSBFbnRpdHlTdG9yZVtcImdldEZpZWxkVmFsdWVcIl07XG5cbi8vIEEgc2luZ2xlIENhY2hlR3JvdXAgcmVwcmVzZW50cyBhIHNldCBvZiBvbmUgb3IgbW9yZSBFbnRpdHlTdG9yZSBvYmplY3RzLFxuLy8gdHlwaWNhbGx5IHRoZSBSb290IHN0b3JlIGluIGEgQ2FjaGVHcm91cCBieSBpdHNlbGYsIGFuZCBhbGwgYWN0aXZlIExheWVyXG4vLyBzdG9yZXMgaW4gYSBncm91cCB0b2dldGhlci4gQSBzaW5nbGUgRW50aXR5U3RvcmUgb2JqZWN0IGJlbG9uZ3MgdG8gb25seVxuLy8gb25lIENhY2hlR3JvdXAsIHN0b3JlLmdyb3VwLiBUaGUgQ2FjaGVHcm91cCBpcyByZXNwb25zaWJsZSBmb3IgdHJhY2tpbmdcbi8vIGRlcGVuZGVuY2llcywgc28gc3RvcmUuZ3JvdXAgaXMgaGVscGZ1bCBmb3IgZ2VuZXJhdGluZyB1bmlxdWUga2V5cyBmb3Jcbi8vIGNhY2hlZCByZXN1bHRzIHRoYXQgbmVlZCB0byBiZSBpbnZhbGlkYXRlZCB3aGVuL2lmIHRob3NlIGRlcGVuZGVuY2llc1xuLy8gY2hhbmdlLiBJZiB3ZSB1c2VkIHRoZSBFbnRpdHlTdG9yZSBvYmplY3RzIHRoZW1zZWx2ZXMgYXMgY2FjaGUga2V5cyAodGhhdFxuLy8gaXMsIHN0b3JlIHJhdGhlciB0aGFuIHN0b3JlLmdyb3VwKSwgdGhlIGNhY2hlIHdvdWxkIGJlY29tZSB1bm5lY2Vzc2FyaWx5XG4vLyBmcmFnbWVudGVkIGJ5IGFsbCB0aGUgZGlmZmVyZW50IExheWVyIG9iamVjdHMuIEluc3RlYWQsIHRoZSBDYWNoZUdyb3VwXG4vLyBhcHByb2FjaCBhbGxvd3MgYWxsIG9wdGltaXN0aWMgTGF5ZXIgb2JqZWN0cyBpbiB0aGUgc2FtZSBsaW5rZWQgbGlzdCB0b1xuLy8gYmVsb25nIHRvIG9uZSBDYWNoZUdyb3VwLCB3aXRoIHRoZSBub24tb3B0aW1pc3RpYyBSb290IG9iamVjdCBiZWxvbmdpbmdcbi8vIHRvIGFub3RoZXIgQ2FjaGVHcm91cCwgYWxsb3dpbmcgcmVzdWx0Q2FjaGluZyBkZXBlbmRlbmNpZXMgdG8gYmUgdHJhY2tlZFxuLy8gc2VwYXJhdGVseSBmb3Igb3B0aW1pc3RpYyBhbmQgbm9uLW9wdGltaXN0aWMgZW50aXR5IGRhdGEuXG5jbGFzcyBDYWNoZUdyb3VwIHtcbiAgcHJpdmF0ZSBkOiBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uPHN0cmluZz4gfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgY2FjaGluZzogYm9vbGVhbikge1xuICAgIHRoaXMuZCA9IGNhY2hpbmcgPyBkZXA8c3RyaW5nPigpIDogbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBkZXBlbmQoZGF0YUlkOiBzdHJpbmcsIHN0b3JlRmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5kKSB7XG4gICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIHN0b3JlRmllbGROYW1lKSk7XG4gICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgIGlmIChmaWVsZE5hbWUgIT09IHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgIC8vIEZpZWxkcyB3aXRoIGFyZ3VtZW50cyB0aGF0IGNvbnRyaWJ1dGUgZXh0cmEgaWRlbnRpZnlpbmdcbiAgICAgICAgLy8gaW5mb3JtYXRpb24gdG8gdGhlIGZpZWxkTmFtZSAodGh1cyBmb3JtaW5nIHRoZSBzdG9yZUZpZWxkTmFtZSlcbiAgICAgICAgLy8gZGVwZW5kIG5vdCBvbmx5IG9uIHRoZSBmdWxsIHN0b3JlRmllbGROYW1lIGJ1dCBhbHNvIG9uIHRoZVxuICAgICAgICAvLyBzaG9ydCBmaWVsZE5hbWUsIHNvIHRoZSBmaWVsZCBjYW4gYmUgaW52YWxpZGF0ZWQgdXNpbmcgZWl0aGVyXG4gICAgICAgIC8vIGxldmVsIG9mIHNwZWNpZmljaXR5LlxuICAgICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIGZpZWxkTmFtZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXJ0eShkYXRhSWQ6IHN0cmluZywgc3RvcmVGaWVsZE5hbWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmQpIHtcbiAgICAgIHRoaXMuZC5kaXJ0eShtYWtlRGVwS2V5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpKTtcbiAgICB9XG4gIH1cblxuICAvLyBVc2VkIGJ5IHRoZSBFbnRpdHlTdG9yZSNtYWtlQ2FjaGVLZXkgbWV0aG9kIHRvIGNvbXB1dGUgY2FjaGUga2V5c1xuICAvLyBzcGVjaWZpYyB0byB0aGlzIENhY2hlR3JvdXAuXG4gIHB1YmxpYyByZWFkb25seSBrZXlNYWtlciA9IG5ldyBLZXlUcmllPG9iamVjdD4oY2FuVXNlV2Vha01hcCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEZXBLZXkoZGF0YUlkOiBzdHJpbmcsIHN0b3JlRmllbGROYW1lOiBzdHJpbmcpIHtcbiAgLy8gU2luY2UgZmllbGQgbmFtZXMgY2Fubm90IGhhdmUgJyMnIGNoYXJhY3RlcnMgaW4gdGhlbSwgdGhpcyBtZXRob2RcbiAgLy8gb2Ygam9pbmluZyB0aGUgZmllbGQgbmFtZSBhbmQgdGhlIElEIHNob3VsZCBiZSB1bmFtYmlndW91cywgYW5kIG11Y2hcbiAgLy8gY2hlYXBlciB0aGFuIEpTT04uc3RyaW5naWZ5KFtkYXRhSWQsIGZpZWxkTmFtZV0pLlxuICByZXR1cm4gc3RvcmVGaWVsZE5hbWUgKyAnIycgKyBkYXRhSWQ7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRW50aXR5U3RvcmUge1xuICAvLyBSZWZlciB0byB0aGlzIGNsYXNzIGFzIEVudGl0eVN0b3JlLlJvb3Qgb3V0c2lkZSB0aGlzIG5hbWVzcGFjZS5cbiAgZXhwb3J0IGNsYXNzIFJvb3QgZXh0ZW5kcyBFbnRpdHlTdG9yZSB7XG4gICAgLy8gQWx0aG91Z2ggZWFjaCBSb290IGluc3RhbmNlIGdldHMgaXRzIG93biB1bmlxdWUgQ2FjaGVHcm91cCBvYmplY3QsXG4gICAgLy8gYW55IExheWVyIGluc3RhbmNlcyBjcmVhdGVkIGJ5IGNhbGxpbmcgYWRkTGF5ZXIgbmVlZCB0byBzaGFyZSBhXG4gICAgLy8gc2luZ2xlIGRpc3RpbmN0IENhY2hlR3JvdXAgb2JqZWN0LiBTaW5jZSB0aGlzIHNoYXJlZCBvYmplY3QgbXVzdFxuICAgIC8vIG91dGxhc3QgdGhlIExheWVyIGluc3RhbmNlcyB0aGVtc2VsdmVzLCBpdCBuZWVkcyB0byBiZSBjcmVhdGVkIGFuZFxuICAgIC8vIG93bmVkIGJ5IHRoZSBSb290IGluc3RhbmNlLlxuICAgIHByaXZhdGUgc2hhcmVkTGF5ZXJHcm91cDogQ2FjaGVHcm91cDtcblxuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgIHBvbGljaWVzLFxuICAgICAgcmVzdWx0Q2FjaGluZyA9IHRydWUsXG4gICAgICBzZWVkLFxuICAgIH06IHtcbiAgICAgIHBvbGljaWVzOiBQb2xpY2llcztcbiAgICAgIHJlc3VsdENhY2hpbmc/OiBib29sZWFuO1xuICAgICAgc2VlZD86IE5vcm1hbGl6ZWRDYWNoZU9iamVjdDtcbiAgICB9KSB7XG4gICAgICBzdXBlcihwb2xpY2llcywgbmV3IENhY2hlR3JvdXAocmVzdWx0Q2FjaGluZykpO1xuICAgICAgdGhpcy5zaGFyZWRMYXllckdyb3VwID0gbmV3IENhY2hlR3JvdXAocmVzdWx0Q2FjaGluZyk7XG4gICAgICBpZiAoc2VlZCkgdGhpcy5yZXBsYWNlKHNlZWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRMYXllcihcbiAgICAgIGxheWVySWQ6IHN0cmluZyxcbiAgICAgIHJlcGxheTogKGxheWVyOiBFbnRpdHlTdG9yZSkgPT4gYW55LFxuICAgICk6IExheWVyIHtcbiAgICAgIC8vIFRoZSByZXBsYXkgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgaW4gdGhlIExheWVyIGNvbnN0cnVjdG9yLlxuICAgICAgcmV0dXJuIG5ldyBMYXllcihsYXllcklkLCB0aGlzLCByZXBsYXksIHRoaXMuc2hhcmVkTGF5ZXJHcm91cCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUxheWVyKCk6IFJvb3Qge1xuICAgICAgLy8gTmV2ZXIgcmVtb3ZlIHRoZSByb290IGxheWVyLlxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHJlYWRvbmx5IHN0b3JhZ2VUcmllID0gbmV3IEtleVRyaWU8U3RvcmFnZVR5cGU+KGNhblVzZVdlYWtNYXApO1xuICAgIHB1YmxpYyBnZXRTdG9yYWdlKCk6IFN0b3JhZ2VUeXBlIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VUcmllLmxvb2t1cEFycmF5KGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8vIE5vdCBleHBvcnRlZCwgc2luY2UgYWxsIExheWVyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBieSB0aGUgYWRkTGF5ZXIgbWV0aG9kXG4vLyBvZiB0aGUgRW50aXR5U3RvcmUuUm9vdCBjbGFzcy5cbmNsYXNzIExheWVyIGV4dGVuZHMgRW50aXR5U3RvcmUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IHN0cmluZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGFyZW50OiBFbnRpdHlTdG9yZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVwbGF5OiAobGF5ZXI6IEVudGl0eVN0b3JlKSA9PiBhbnksXG4gICAgcHVibGljIHJlYWRvbmx5IGdyb3VwOiBDYWNoZUdyb3VwLFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQucG9saWNpZXMsIGdyb3VwKTtcbiAgICByZXBsYXkodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgYWRkTGF5ZXIoXG4gICAgbGF5ZXJJZDogc3RyaW5nLFxuICAgIHJlcGxheTogKGxheWVyOiBFbnRpdHlTdG9yZSkgPT4gYW55LFxuICApOiBMYXllciB7XG4gICAgcmV0dXJuIG5ldyBMYXllcihsYXllcklkLCB0aGlzLCByZXBsYXksIHRoaXMuZ3JvdXApO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUxheWVyKGxheWVySWQ6IHN0cmluZyk6IEVudGl0eVN0b3JlIHtcbiAgICAvLyBSZW1vdmUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gaWQsIG5vdCBqdXN0IHRoZSBmaXJzdCBvbmUuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnQucmVtb3ZlTGF5ZXIobGF5ZXJJZCk7XG5cbiAgICBpZiAobGF5ZXJJZCA9PT0gdGhpcy5pZCkge1xuICAgICAgLy8gRGlydHkgZXZlcnkgSUQgd2UncmUgcmVtb3ZpbmcuXG4gICAgICBpZiAodGhpcy5ncm91cC5jYWNoaW5nKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChkYXRhSWQgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMuZGF0YVtkYXRhSWRdIGNvbnRhaW5zIG5vdGhpbmcgZGlmZmVyZW50IGZyb20gd2hhdFxuICAgICAgICAgIC8vIGxpZXMgYmVuZWF0aCwgd2UgY2FuIGF2b2lkIGRpcnR5aW5nIHRoaXMgZGF0YUlkIGFuZCBhbGwgb2ZcbiAgICAgICAgICAvLyBpdHMgZmllbGRzLCBhbmQgc2ltcGx5IGRpc2NhcmQgdGhpcyBMYXllci4gVGhlIG9ubHkgcmVhc29uIHdlXG4gICAgICAgICAgLy8gY2FsbCB0aGlzLmRlbGV0ZSBoZXJlIGlzIHRvIGRpcnR5IHRoZSByZW1vdmVkIGZpZWxkcy5cbiAgICAgICAgICBpZiAodGhpcy5kYXRhW2RhdGFJZF0gIT09IChwYXJlbnQgYXMgTGF5ZXIpLmxvb2t1cChkYXRhSWQpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShkYXRhSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIC8vIE5vIGNoYW5nZXMgYXJlIG5lY2Vzc2FyeSBpZiB0aGUgcGFyZW50IGNoYWluIHJlbWFpbnMgaWRlbnRpY2FsLlxuICAgIGlmIChwYXJlbnQgPT09IHRoaXMucGFyZW50KSByZXR1cm4gdGhpcztcblxuICAgIC8vIFJlY3JlYXRlIHRoaXMgbGF5ZXIgb24gdG9wIG9mIHRoZSBuZXcgcGFyZW50LlxuICAgIHJldHVybiBwYXJlbnQuYWRkTGF5ZXIodGhpcy5pZCwgdGhpcy5yZXBsYXkpO1xuICB9XG5cbiAgcHVibGljIHRvT2JqZWN0KCk6IE5vcm1hbGl6ZWRDYWNoZU9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMucGFyZW50LnRvT2JqZWN0KCksXG4gICAgICAuLi50aGlzLmRhdGEsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBmaW5kQ2hpbGRSZWZJZHMoZGF0YUlkOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCB0cnVlPiB7XG4gICAgY29uc3QgZnJvbVBhcmVudCA9IHRoaXMucGFyZW50LmZpbmRDaGlsZFJlZklkcyhkYXRhSWQpO1xuICAgIHJldHVybiBoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkgPyB7XG4gICAgICAuLi5mcm9tUGFyZW50LFxuICAgICAgLi4uc3VwZXIuZmluZENoaWxkUmVmSWRzKGRhdGFJZCksXG4gICAgfSA6IGZyb21QYXJlbnQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RvcmFnZSgpOiBTdG9yYWdlVHlwZSB7XG4gICAgbGV0IHA6IEVudGl0eVN0b3JlID0gdGhpcy5wYXJlbnQ7XG4gICAgd2hpbGUgKChwIGFzIExheWVyKS5wYXJlbnQpIHAgPSAocCBhcyBMYXllcikucGFyZW50O1xuICAgIHJldHVybiBwLmdldFN0b3JhZ2UuYXBwbHkocCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9yZU9iamVjdFJlY29uY2lsZXIoXG4gIGV4aXN0aW5nT2JqZWN0OiBTdG9yZU9iamVjdCxcbiAgaW5jb21pbmdPYmplY3Q6IFN0b3JlT2JqZWN0LFxuICBwcm9wZXJ0eTogc3RyaW5nLFxuKTogU3RvcmVWYWx1ZSB7XG4gIGNvbnN0IGV4aXN0aW5nVmFsdWUgPSBleGlzdGluZ09iamVjdFtwcm9wZXJ0eV07XG4gIGNvbnN0IGluY29taW5nVmFsdWUgPSBpbmNvbWluZ09iamVjdFtwcm9wZXJ0eV07XG4gIC8vIFdoZXJldmVyIHRoZXJlIGlzIGEga2V5IGNvbGxpc2lvbiwgcHJlZmVyIHRoZSBpbmNvbWluZyB2YWx1ZSwgdW5sZXNzXG4gIC8vIGl0IGlzIGRlZXBseSBlcXVhbCB0byB0aGUgZXhpc3RpbmcgdmFsdWUuIEl0J3Mgd29ydGggY2hlY2tpbmcgZGVlcFxuICAvLyBlcXVhbGl0eSBoZXJlIChldmVuIHRob3VnaCBibGluZGx5IHJldHVybmluZyBpbmNvbWluZyB3b3VsZCBiZVxuICAvLyBsb2dpY2FsbHkgY29ycmVjdCkgYmVjYXVzZSBwcmVzZXJ2aW5nIHRoZSByZWZlcmVudGlhbCBpZGVudGl0eSBvZlxuICAvLyBleGlzdGluZyBkYXRhIGNhbiBwcmV2ZW50IG5lZWRsZXNzIHJlcmVhZGluZyBhbmQgcmVyZW5kZXJpbmcuXG4gIHJldHVybiBlcXVhbChleGlzdGluZ1ZhbHVlLCBpbmNvbWluZ1ZhbHVlKSA/IGV4aXN0aW5nVmFsdWUgOiBpbmNvbWluZ1ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlOiBhbnkpOiBzdG9yZSBpcyBFbnRpdHlTdG9yZSB7XG4gIC8vIFdoZW4gcmVzdWx0IGNhY2hpbmcgaXMgZGlzYWJsZWQsIHN0b3JlLmRlcGVuZCB3aWxsIGJlIG51bGwuXG4gIHJldHVybiAhIShzdG9yZSBpbnN0YW5jZW9mIEVudGl0eVN0b3JlICYmIHN0b3JlLmdyb3VwLmNhY2hpbmcpO1xufVxuIiwiaW1wb3J0IHtcbiAgRG9jdW1lbnROb2RlLFxuICBGaWVsZE5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG59IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgd3JhcCwgT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbiB9IGZyb20gJ29wdGltaXNtJztcbmltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5pbXBvcnQge1xuICBpc0ZpZWxkLFxuICByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLFxuICBSZWZlcmVuY2UsXG4gIGlzUmVmZXJlbmNlLFxuICBtYWtlUmVmZXJlbmNlLFxuICBTdG9yZU9iamVjdCxcbiAgY3JlYXRlRnJhZ21lbnRNYXAsXG4gIEZyYWdtZW50TWFwLFxuICBzaG91bGRJbmNsdWRlLFxuICBhZGRUeXBlbmFtZVRvRG9jdW1lbnQsXG4gIGdldERlZmF1bHRWYWx1ZXMsXG4gIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsXG4gIGdldE1haW5EZWZpbml0aW9uLFxuICBnZXRRdWVyeURlZmluaXRpb24sXG4gIG1heWJlRGVlcEZyZWV6ZSxcbiAgbWVyZ2VEZWVwQXJyYXksXG4gIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbixcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IENhY2hlIH0gZnJvbSAnLi4vY29yZS90eXBlcy9DYWNoZSc7XG5pbXBvcnQge1xuICBEaWZmUXVlcnlBZ2FpbnN0U3RvcmVPcHRpb25zLFxuICBOb3JtYWxpemVkQ2FjaGUsXG4gIFJlYWRNZXJnZU1vZGlmeUNvbnRleHQsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgc3VwcG9ydHNSZXN1bHRDYWNoaW5nIH0gZnJvbSAnLi9lbnRpdHlTdG9yZSc7XG5pbXBvcnQgeyBnZXRUeXBlbmFtZUZyb21TdG9yZU9iamVjdCB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBQb2xpY2llcyB9IGZyb20gJy4vcG9saWNpZXMnO1xuaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gJy4vaW5NZW1vcnlDYWNoZSc7XG5pbXBvcnQgeyBNaXNzaW5nRmllbGRFcnJvciB9IGZyb20gJy4uL2NvcmUvdHlwZXMvY29tbW9uJztcblxuZXhwb3J0IHR5cGUgVmFyaWFibGVNYXAgPSB7IFtuYW1lOiBzdHJpbmddOiBhbnkgfTtcblxuaW50ZXJmYWNlIFJlYWRDb250ZXh0IGV4dGVuZHMgUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCB7XG4gIHF1ZXJ5OiBEb2N1bWVudE5vZGU7XG4gIHBvbGljaWVzOiBQb2xpY2llcztcbiAgZnJhZ21lbnRNYXA6IEZyYWdtZW50TWFwO1xuICBwYXRoOiAoc3RyaW5nIHwgbnVtYmVyKVtdO1xuICBjbGllbnRPbmx5OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgRXhlY1Jlc3VsdDxSID0gYW55PiA9IHtcbiAgcmVzdWx0OiBSO1xuICBtaXNzaW5nPzogTWlzc2luZ0ZpZWxkRXJyb3JbXTtcbn07XG5cbmZ1bmN0aW9uIG1pc3NpbmdGcm9tSW52YXJpYW50KFxuICBlcnI6IEludmFyaWFudEVycm9yLFxuICBjb250ZXh0OiBSZWFkQ29udGV4dCxcbikge1xuICByZXR1cm4gbmV3IE1pc3NpbmdGaWVsZEVycm9yKFxuICAgIGVyci5tZXNzYWdlLFxuICAgIGNvbnRleHQucGF0aC5zbGljZSgpLFxuICAgIGNvbnRleHQucXVlcnksXG4gICAgY29udGV4dC5jbGllbnRPbmx5LFxuICAgIGNvbnRleHQudmFyaWFibGVzLFxuICApO1xufVxuXG50eXBlIEV4ZWNTZWxlY3Rpb25TZXRPcHRpb25zID0ge1xuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGU7XG4gIG9iamVjdE9yUmVmZXJlbmNlOiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZTtcbiAgY29udGV4dDogUmVhZENvbnRleHQ7XG59O1xuXG50eXBlIEV4ZWNTdWJTZWxlY3RlZEFycmF5T3B0aW9ucyA9IHtcbiAgZmllbGQ6IEZpZWxkTm9kZTtcbiAgYXJyYXk6IGFueVtdO1xuICBjb250ZXh0OiBSZWFkQ29udGV4dDtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcmVSZWFkZXJDb25maWcge1xuICBjYWNoZTogSW5NZW1vcnlDYWNoZSxcbiAgYWRkVHlwZW5hbWU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgU3RvcmVSZWFkZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZzogU3RvcmVSZWFkZXJDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgYWRkVHlwZW5hbWU6IHRydWUsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgc3RvcmUgYW5kIGEgcXVlcnksIHJldHVybiBhcyBtdWNoIG9mIHRoZSByZXN1bHQgYXMgcG9zc2libGUgYW5kXG4gICAqIGlkZW50aWZ5IGlmIGFueSBkYXRhIHdhcyBtaXNzaW5nIGZyb20gdGhlIHN0b3JlLlxuICAgKiBAcGFyYW0gIHtEb2N1bWVudE5vZGV9IHF1ZXJ5IEEgcGFyc2VkIEdyYXBoUUwgcXVlcnkgZG9jdW1lbnRcbiAgICogQHBhcmFtICB7U3RvcmV9IHN0b3JlIFRoZSBBcG9sbG8gQ2xpZW50IHN0b3JlIG9iamVjdFxuICAgKiBAcmV0dXJuIHtyZXN1bHQ6IE9iamVjdCwgY29tcGxldGU6IFtib29sZWFuXX1cbiAgICovXG4gIHB1YmxpYyBkaWZmUXVlcnlBZ2FpbnN0U3RvcmU8VD4oe1xuICAgIHN0b3JlLFxuICAgIHF1ZXJ5LFxuICAgIHJvb3RJZCA9ICdST09UX1FVRVJZJyxcbiAgICB2YXJpYWJsZXMsXG4gICAgcmV0dXJuUGFydGlhbERhdGEgPSB0cnVlLFxuICB9OiBEaWZmUXVlcnlBZ2FpbnN0U3RvcmVPcHRpb25zKTogQ2FjaGUuRGlmZlJlc3VsdDxUPiB7XG4gICAgY29uc3QgcG9saWNpZXMgPSB0aGlzLmNvbmZpZy5jYWNoZS5wb2xpY2llcztcblxuICAgIHZhcmlhYmxlcyA9IHtcbiAgICAgIC4uLmdldERlZmF1bHRWYWx1ZXMoZ2V0UXVlcnlEZWZpbml0aW9uKHF1ZXJ5KSksXG4gICAgICAuLi52YXJpYWJsZXMsXG4gICAgfTtcblxuICAgIGNvbnN0IGV4ZWNSZXN1bHQgPSB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgc2VsZWN0aW9uU2V0OiBnZXRNYWluRGVmaW5pdGlvbihxdWVyeSkuc2VsZWN0aW9uU2V0LFxuICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IG1ha2VSZWZlcmVuY2Uocm9vdElkKSxcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgc3RvcmUsXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBwb2xpY2llcyxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICB2YXJTdHJpbmc6IEpTT04uc3RyaW5naWZ5KHZhcmlhYmxlcyksXG4gICAgICAgIGZyYWdtZW50TWFwOiBjcmVhdGVGcmFnbWVudE1hcChnZXRGcmFnbWVudERlZmluaXRpb25zKHF1ZXJ5KSksXG4gICAgICAgIHBhdGg6IFtdLFxuICAgICAgICBjbGllbnRPbmx5OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBoYXNNaXNzaW5nRmllbGRzID1cbiAgICAgIGV4ZWNSZXN1bHQubWlzc2luZyAmJiBleGVjUmVzdWx0Lm1pc3NpbmcubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzTWlzc2luZ0ZpZWxkcyAmJiAhcmV0dXJuUGFydGlhbERhdGEpIHtcbiAgICAgIHRocm93IGV4ZWNSZXN1bHQubWlzc2luZyFbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdDogZXhlY1Jlc3VsdC5yZXN1bHQsXG4gICAgICBtaXNzaW5nOiBleGVjUmVzdWx0Lm1pc3NpbmcsXG4gICAgICBjb21wbGV0ZTogIWhhc01pc3NpbmdGaWVsZHMsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBpc0ZyZXNoKFxuICAgIHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICBwYXJlbnQ6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLFxuICAgIHNlbGVjdGlvblNldDogU2VsZWN0aW9uU2V0Tm9kZSxcbiAgICBjb250ZXh0OiBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LFxuICApOiBib29sZWFuIHtcbiAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpICYmXG4gICAgICAgIHRoaXMua25vd25SZXN1bHRzLmdldChyZXN1bHQpID09PSBzZWxlY3Rpb25TZXQpIHtcbiAgICAgIGNvbnN0IGxhdGVzdCA9IHRoaXMuZXhlY3V0ZVNlbGVjdGlvblNldC5wZWVrKHNlbGVjdGlvblNldCwgcGFyZW50LCBjb250ZXh0KTtcbiAgICAgIGlmIChsYXRlc3QgJiYgcmVzdWx0ID09PSBsYXRlc3QucmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBleGVjU2VsZWN0aW9uU2V0SW1wbC5cbiAgcHJpdmF0ZSBleGVjdXRlU2VsZWN0aW9uU2V0OiBPcHRpbWlzdGljV3JhcHBlckZ1bmN0aW9uPFxuICAgIFtFeGVjU2VsZWN0aW9uU2V0T3B0aW9uc10sIC8vIEFjdHVhbCBhcmd1bWVudHMgdHVwbGUgdHlwZS5cbiAgICBFeGVjUmVzdWx0LCAvLyBBY3R1YWwgcmV0dXJuIHR5cGUuXG4gICAgLy8gQXJndW1lbnRzIHR5cGUgYWZ0ZXIga2V5QXJncyB0cmFuc2xhdGlvbi5cbiAgICBbU2VsZWN0aW9uU2V0Tm9kZSwgU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UsIFJlYWRNZXJnZU1vZGlmeUNvbnRleHRdXG4gID4gPSB3cmFwKG9wdGlvbnMgPT4gdGhpcy5leGVjU2VsZWN0aW9uU2V0SW1wbChvcHRpb25zKSwge1xuICAgIGtleUFyZ3Mob3B0aW9ucykge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25TZXQsXG4gICAgICAgIG9wdGlvbnMub2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIG9wdGlvbnMuY29udGV4dCxcbiAgICAgIF07XG4gICAgfSxcbiAgICAvLyBOb3RlIHRoYXQgdGhlIHBhcmFtZXRlcnMgb2YgbWFrZUNhY2hlS2V5IGFyZSBkZXRlcm1pbmVkIGJ5IHRoZVxuICAgIC8vIGFycmF5IHJldHVybmVkIGJ5IGtleUFyZ3MuXG4gICAgbWFrZUNhY2hlS2V5KHNlbGVjdGlvblNldCwgcGFyZW50LCBjb250ZXh0KSB7XG4gICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LnN0b3JlLm1ha2VDYWNoZUtleShcbiAgICAgICAgICBzZWxlY3Rpb25TZXQsXG4gICAgICAgICAgaXNSZWZlcmVuY2UocGFyZW50KSA/IHBhcmVudC5fX3JlZiA6IHBhcmVudCxcbiAgICAgICAgICBjb250ZXh0LnZhclN0cmluZyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVuY2FjaGVkIHZlcnNpb24gb2YgZXhlY3V0ZVNlbGVjdGlvblNldC5cbiAgcHJpdmF0ZSBleGVjU2VsZWN0aW9uU2V0SW1wbCh7XG4gICAgc2VsZWN0aW9uU2V0LFxuICAgIG9iamVjdE9yUmVmZXJlbmNlLFxuICAgIGNvbnRleHQsXG4gIH06IEV4ZWNTZWxlY3Rpb25TZXRPcHRpb25zKTogRXhlY1Jlc3VsdCB7XG4gICAgaWYgKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSAmJlxuICAgICAgICAhY29udGV4dC5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZFtvYmplY3RPclJlZmVyZW5jZS5fX3JlZl0gJiZcbiAgICAgICAgIWNvbnRleHQuc3RvcmUuaGFzKG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiB7fSxcbiAgICAgICAgbWlzc2luZzogW21pc3NpbmdGcm9tSW52YXJpYW50KFxuICAgICAgICAgIG5ldyBJbnZhcmlhbnRFcnJvcihcbiAgICAgICAgICAgIGBEYW5nbGluZyByZWZlcmVuY2UgdG8gbWlzc2luZyAke29iamVjdE9yUmVmZXJlbmNlLl9fcmVmfSBvYmplY3RgXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICApXSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyB2YXJpYWJsZXMsIHBvbGljaWVzLCBzdG9yZSB9ID0gY29udGV4dDtcbiAgICBjb25zdCBvYmplY3RzVG9NZXJnZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfVtdID0gW107XG4gICAgY29uc3QgZmluYWxSZXN1bHQ6IEV4ZWNSZXN1bHQgPSB7IHJlc3VsdDogbnVsbCB9O1xuICAgIGNvbnN0IHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZTxzdHJpbmc+KG9iamVjdE9yUmVmZXJlbmNlLCBcIl9fdHlwZW5hbWVcIik7XG5cbiAgICBpZiAodGhpcy5jb25maWcuYWRkVHlwZW5hbWUgJiZcbiAgICAgICAgdHlwZW9mIHR5cGVuYW1lID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICFwb2xpY2llcy5yb290SWRzQnlUeXBlbmFtZVt0eXBlbmFtZV0pIHtcbiAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaW5jbHVkZSBhIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBfX3R5cGVuYW1lXG4gICAgICAvLyBmaWVsZCwgaWYgd2UgaGF2ZSBvbmUsIGFuZCB0aGlzLmNvbmZpZy5hZGRUeXBlbmFtZSBpcyB0cnVlLiBOb3RlXG4gICAgICAvLyB0aGF0IHRoaXMgZmllbGQgY2FuIGJlIG92ZXJyaWRkZW4gYnkgb3RoZXIgbWVyZ2VkIG9iamVjdHMuXG4gICAgICBvYmplY3RzVG9NZXJnZS5wdXNoKHsgX190eXBlbmFtZTogdHlwZW5hbWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TWlzc2luZygpIHtcbiAgICAgIHJldHVybiBmaW5hbFJlc3VsdC5taXNzaW5nIHx8IChmaW5hbFJlc3VsdC5taXNzaW5nID0gW10pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZU1pc3Npbmc8VD4ocmVzdWx0OiBFeGVjUmVzdWx0PFQ+KTogVCB7XG4gICAgICBpZiAocmVzdWx0Lm1pc3NpbmcpIGdldE1pc3NpbmcoKS5wdXNoKC4uLnJlc3VsdC5taXNzaW5nKTtcbiAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKTtcblxuICAgIHdvcmtTZXQuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgICAgLy8gT21pdCBmaWVsZHMgd2l0aCBkaXJlY3RpdmVzIEBza2lwKGlmOiA8dHJ1dGh5IHZhbHVlPikgb3JcbiAgICAgIC8vIEBpbmNsdWRlKGlmOiA8ZmFsc3kgdmFsdWU+KS5cbiAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIHZhcmlhYmxlcykpIHJldHVybjtcblxuICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IHBvbGljaWVzLnJlYWRGaWVsZCh7XG4gICAgICAgICAgZmllbGROYW1lOiBzZWxlY3Rpb24ubmFtZS52YWx1ZSxcbiAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgIHZhcmlhYmxlczogY29udGV4dC52YXJpYWJsZXMsXG4gICAgICAgICAgZnJvbTogb2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIH0sIGNvbnRleHQpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdE5hbWUgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbik7XG4gICAgICAgIGNvbnRleHQucGF0aC5wdXNoKHJlc3VsdE5hbWUpO1xuXG4gICAgICAgIC8vIElmIHRoaXMgZmllbGQgaGFzIGFuIEBjbGllbnQgZGlyZWN0aXZlLCB0aGVuIHRoZSBmaWVsZCBhbmRcbiAgICAgICAgLy8gZXZlcnl0aGluZyBiZW5lYXRoIGl0IGlzIGNsaWVudC1vbmx5LCBtZWFuaW5nIGl0IHdpbGwgbmV2ZXIgYmVcbiAgICAgICAgLy8gc2VudCB0byB0aGUgc2VydmVyLlxuICAgICAgICBjb25zdCB3YXNDbGllbnRPbmx5ID0gY29udGV4dC5jbGllbnRPbmx5O1xuICAgICAgICAvLyBPbmNlIHdlIGVudGVyIGEgY2xpZW50LW9ubHkgc3VidHJlZSBvZiB0aGUgcXVlcnksIHdlIGNhbiBhdm9pZFxuICAgICAgICAvLyByZXBlYXRlZGx5IGNoZWNraW5nIHNlbGVjdGlvbi5kaXJlY3RpdmVzLlxuICAgICAgICBjb250ZXh0LmNsaWVudE9ubHkgPSB3YXNDbGllbnRPbmx5IHx8ICEhKFxuICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSB0aGUgaGFzRGlyZWN0aXZlcyBoZWxwZXIgaGVyZSwgYmVjYXVzZSBpdCBsb29rc1xuICAgICAgICAgIC8vIGZvciBkaXJlY3RpdmVzIGFueXdoZXJlIGluc2lkZSB0aGUgQVNUIG5vZGUsIHdoZXJlYXMgd2Ugb25seVxuICAgICAgICAgIC8vIGNhcmUgYWJvdXQgZGlyZWN0aXZlcyBkaXJlY3RseSBhdHRhY2hlZCB0byB0aGlzIGZpZWxkLlxuICAgICAgICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzICYmXG4gICAgICAgICAgc2VsZWN0aW9uLmRpcmVjdGl2ZXMuc29tZShkID0+IGQubmFtZS52YWx1ZSA9PT0gXCJjbGllbnRcIilcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgaWYgKCFhZGRUeXBlbmFtZVRvRG9jdW1lbnQuYWRkZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgZ2V0TWlzc2luZygpLnB1c2goXG4gICAgICAgICAgICAgIG1pc3NpbmdGcm9tSW52YXJpYW50KFxuICAgICAgICAgICAgICAgIG5ldyBJbnZhcmlhbnRFcnJvcihgQ2FuJ3QgZmluZCBmaWVsZCAnJHtcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5uYW1lLnZhbHVlXG4gICAgICAgICAgICAgICAgfScgb24gJHtcbiAgICAgICAgICAgICAgICAgIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgICAgICAgICA/IG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmICsgXCIgb2JqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIm9iamVjdCBcIiArIEpTT04uc3RyaW5naWZ5KG9iamVjdE9yUmVmZXJlbmNlLCBudWxsLCAyKVxuICAgICAgICAgICAgICAgIH1gKSxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgZmllbGRWYWx1ZSA9IGhhbmRsZU1pc3NpbmcodGhpcy5leGVjdXRlU3ViU2VsZWN0ZWRBcnJheSh7XG4gICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgYXJyYXk6IGZpZWxkVmFsdWUsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIH0pKTtcblxuICAgICAgICB9IGVsc2UgaWYgKCFzZWxlY3Rpb24uc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGZpZWxkIGRvZXMgbm90IGhhdmUgYSBzZWxlY3Rpb24gc2V0LCB0aGVuIHdlIGhhbmRsZSBpdFxuICAgICAgICAgIC8vIGFzIGEgc2NhbGFyIHZhbHVlLiBIb3dldmVyLCB0aGF0IHZhbHVlIHNob3VsZCBub3QgY29udGFpbiBhbnlcbiAgICAgICAgICAvLyBSZWZlcmVuY2Ugb2JqZWN0cywgYW5kIHNob3VsZCBiZSBmcm96ZW4gaW4gZGV2ZWxvcG1lbnQsIGlmIGl0XG4gICAgICAgICAgLy8gaGFwcGVucyB0byBiZSBhbiBvYmplY3QgdGhhdCBpcyBtdXRhYmxlLlxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBhc3NlcnRTZWxlY3Rpb25TZXRGb3JJZFZhbHVlKFxuICAgICAgICAgICAgICBjb250ZXh0LnN0b3JlLFxuICAgICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgIGZpZWxkVmFsdWUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbWF5YmVEZWVwRnJlZXplKGZpZWxkVmFsdWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgYmVjYXVzZSB3ZSBrbm93IHRoZSBmaWVsZCBoYXMgYSBzZWxlY3Rpb24gc2V0LFxuICAgICAgICAgIC8vIGl0IG11c3QgYmUgdHJ5aW5nIHRvIHF1ZXJ5IGEgR3JhcGhRTE9iamVjdFR5cGUsIHdoaWNoIGlzIHdoeVxuICAgICAgICAgIC8vIGZpZWxkVmFsdWUgbXVzdCBiZSAhPSBudWxsLlxuICAgICAgICAgIGZpZWxkVmFsdWUgPSBoYW5kbGVNaXNzaW5nKHRoaXMuZXhlY3V0ZVNlbGVjdGlvblNldCh7XG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICBvYmplY3RPclJlZmVyZW5jZTogZmllbGRWYWx1ZSBhcyBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSxcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIG9iamVjdHNUb01lcmdlLnB1c2goeyBbcmVzdWx0TmFtZV06IGZpZWxkVmFsdWUgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0LmNsaWVudE9ubHkgPSB3YXNDbGllbnRPbmx5O1xuXG4gICAgICAgIGludmFyaWFudChjb250ZXh0LnBhdGgucG9wKCkgPT09IHJlc3VsdE5hbWUpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihcbiAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgY29udGV4dC5mcmFnbWVudE1hcCxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZnJhZ21lbnQgJiYgcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzKGZyYWdtZW50LCB0eXBlbmFtZSkpIHtcbiAgICAgICAgICBmcmFnbWVudC5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5mb3JFYWNoKHdvcmtTZXQuYWRkLCB3b3JrU2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUGVyZm9ybSBhIHNpbmdsZSBtZXJnZSBhdCB0aGUgZW5kIHNvIHRoYXQgd2UgY2FuIGF2b2lkIG1ha2luZyBtb3JlXG4gICAgLy8gZGVmZW5zaXZlIHNoYWxsb3cgY29waWVzIHRoYW4gbmVjZXNzYXJ5LlxuICAgIGZpbmFsUmVzdWx0LnJlc3VsdCA9IG1lcmdlRGVlcEFycmF5KG9iamVjdHNUb01lcmdlKTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBPYmplY3QuZnJlZXplKGZpbmFsUmVzdWx0LnJlc3VsdCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdGhpcyByZXN1bHQgd2l0aCBpdHMgc2VsZWN0aW9uIHNldCBzbyB0aGF0IHdlIGNhbiBxdWlja2x5XG4gICAgLy8gcmVjb2duaXplIGl0IGFnYWluIGluIHRoZSBTdG9yZVJlYWRlciNpc0ZyZXNoIG1ldGhvZC5cbiAgICB0aGlzLmtub3duUmVzdWx0cy5zZXQoZmluYWxSZXN1bHQucmVzdWx0LCBzZWxlY3Rpb25TZXQpO1xuXG4gICAgcmV0dXJuIGZpbmFsUmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBrbm93blJlc3VsdHMgPSBuZXcgV2Vha01hcDxSZWNvcmQ8c3RyaW5nLCBhbnk+LCBTZWxlY3Rpb25TZXROb2RlPigpO1xuXG4gIC8vIENhY2hlZCB2ZXJzaW9uIG9mIGV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbC5cbiAgcHJpdmF0ZSBleGVjdXRlU3ViU2VsZWN0ZWRBcnJheSA9IHdyYXAoKG9wdGlvbnM6IEV4ZWNTdWJTZWxlY3RlZEFycmF5T3B0aW9ucykgPT4ge1xuICAgIHJldHVybiB0aGlzLmV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbChvcHRpb25zKTtcbiAgfSwge1xuICAgIG1ha2VDYWNoZUtleSh7IGZpZWxkLCBhcnJheSwgY29udGV4dCB9KSB7XG4gICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LnN0b3JlLm1ha2VDYWNoZUtleShcbiAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICBhcnJheSxcbiAgICAgICAgICBjb250ZXh0LnZhclN0cmluZyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVuY2FjaGVkIHZlcnNpb24gb2YgZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXkuXG4gIHByaXZhdGUgZXhlY1N1YlNlbGVjdGVkQXJyYXlJbXBsKHtcbiAgICBmaWVsZCxcbiAgICBhcnJheSxcbiAgICBjb250ZXh0LFxuICB9OiBFeGVjU3ViU2VsZWN0ZWRBcnJheU9wdGlvbnMpOiBFeGVjUmVzdWx0IHtcbiAgICBsZXQgbWlzc2luZzogTWlzc2luZ0ZpZWxkRXJyb3JbXSB8IHVuZGVmaW5lZDtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU1pc3Npbmc8VD4oY2hpbGRSZXN1bHQ6IEV4ZWNSZXN1bHQ8VD4sIGk6IG51bWJlcik6IFQge1xuICAgICAgaWYgKGNoaWxkUmVzdWx0Lm1pc3NpbmcpIHtcbiAgICAgICAgbWlzc2luZyA9IG1pc3NpbmcgfHwgW107XG4gICAgICAgIG1pc3NpbmcucHVzaCguLi5jaGlsZFJlc3VsdC5taXNzaW5nKTtcbiAgICAgIH1cblxuICAgICAgaW52YXJpYW50KGNvbnRleHQucGF0aC5wb3AoKSA9PT0gaSk7XG5cbiAgICAgIHJldHVybiBjaGlsZFJlc3VsdC5yZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgYXJyYXkgPSBhcnJheS5maWx0ZXIoY29udGV4dC5zdG9yZS5jYW5SZWFkKTtcbiAgICB9XG5cbiAgICBhcnJheSA9IGFycmF5Lm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgLy8gbnVsbCB2YWx1ZSBpbiBhcnJheVxuICAgICAgaWYgKGl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQucGF0aC5wdXNoKGkpO1xuXG4gICAgICAvLyBUaGlzIGlzIGEgbmVzdGVkIGFycmF5LCByZWN1cnNlXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlTWlzc2luZyh0aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5KHtcbiAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICBhcnJheTogaXRlbSxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICB9KSwgaSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgaXMgYW4gb2JqZWN0LCBydW4gdGhlIHNlbGVjdGlvbiBzZXQgb24gaXRcbiAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZU1pc3NpbmcodGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICBzZWxlY3Rpb25TZXQ6IGZpZWxkLnNlbGVjdGlvblNldCxcbiAgICAgICAgICBvYmplY3RPclJlZmVyZW5jZTogaXRlbSxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICB9KSwgaSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFzc2VydFNlbGVjdGlvblNldEZvcklkVmFsdWUoY29udGV4dC5zdG9yZSwgZmllbGQsIGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBpbnZhcmlhbnQoY29udGV4dC5wYXRoLnBvcCgpID09PSBpKTtcblxuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfSk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgT2JqZWN0LmZyZWV6ZShhcnJheSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVzdWx0OiBhcnJheSwgbWlzc2luZyB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNlbGVjdGlvblNldEZvcklkVmFsdWUoXG4gIHN0b3JlOiBOb3JtYWxpemVkQ2FjaGUsXG4gIGZpZWxkOiBGaWVsZE5vZGUsXG4gIGZpZWxkVmFsdWU6IGFueSxcbikge1xuICBpZiAoIWZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFtmaWVsZFZhbHVlXSk7XG4gICAgd29ya1NldC5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgICFpc1JlZmVyZW5jZSh2YWx1ZSksXG4gICAgICAgICAgYE1pc3Npbmcgc2VsZWN0aW9uIHNldCBmb3Igb2JqZWN0IG9mIHR5cGUgJHtcbiAgICAgICAgICAgIGdldFR5cGVuYW1lRnJvbVN0b3JlT2JqZWN0KHN0b3JlLCB2YWx1ZSlcbiAgICAgICAgICB9IHJldHVybmVkIGZvciBxdWVyeSBmaWVsZCAke2ZpZWxkLm5hbWUudmFsdWV9YCxcbiAgICAgICAgKTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh2YWx1ZSkuZm9yRWFjaCh3b3JrU2V0LmFkZCwgd29ya1NldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFNlbGVjdGlvblNldE5vZGUsIEZpZWxkTm9kZSwgRG9jdW1lbnROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcbmltcG9ydCB7IGVxdWFsIH0gZnJvbSAnQHdyeS9lcXVhbGl0eSc7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZUZyYWdtZW50TWFwLFxuICBGcmFnbWVudE1hcCxcbiAgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uLFxuICBnZXREZWZhdWx0VmFsdWVzLFxuICBnZXRGcmFnbWVudERlZmluaXRpb25zLFxuICBnZXRPcGVyYXRpb25EZWZpbml0aW9uLFxuICBnZXRUeXBlbmFtZUZyb21SZXN1bHQsXG4gIG1ha2VSZWZlcmVuY2UsXG4gIGlzRmllbGQsXG4gIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsXG4gIFN0b3JlVmFsdWUsXG4gIFN0b3JlT2JqZWN0LFxuICBSZWZlcmVuY2UsXG4gIGlzUmVmZXJlbmNlLFxuICBzaG91bGRJbmNsdWRlLFxuICBoYXNEaXJlY3RpdmVzLFxuICBjbG9uZURlZXAsXG59IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5cbmltcG9ydCB7IE5vcm1hbGl6ZWRDYWNoZSwgUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCwgTWVyZ2VUcmVlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyLCBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lLCBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdCB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBTdG9yZVJlYWRlciB9IGZyb20gJy4vcmVhZEZyb21TdG9yZSc7XG5pbXBvcnQgeyBJbk1lbW9yeUNhY2hlIH0gZnJvbSAnLi9pbk1lbW9yeUNhY2hlJztcbmltcG9ydCB7IEVudGl0eVN0b3JlIH0gZnJvbSAnLi9lbnRpdHlTdG9yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGVDb250ZXh0IGV4dGVuZHMgUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCB7XG4gIHJlYWRvbmx5IHdyaXR0ZW46IHtcbiAgICBbZGF0YUlkOiBzdHJpbmddOiBTZWxlY3Rpb25TZXROb2RlW107XG4gIH07XG4gIHJlYWRvbmx5IGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXA7XG4gIC8vIEdlbmVyYWwtcHVycG9zZSBkZWVwLW1lcmdlIGZ1bmN0aW9uIGZvciB1c2UgZHVyaW5nIHdyaXRlcy5cbiAgbWVyZ2U8VD4oZXhpc3Rpbmc6IFQsIGluY29taW5nOiBUKTogVDtcbn07XG5cbmludGVyZmFjZSBQcm9jZXNzU2VsZWN0aW9uU2V0T3B0aW9ucyB7XG4gIGRhdGFJZD86IHN0cmluZyxcbiAgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGU7XG4gIGNvbnRleHQ6IFdyaXRlQ29udGV4dDtcbiAgbWVyZ2VUcmVlOiBNZXJnZVRyZWU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGVUb1N0b3JlT3B0aW9ucyB7XG4gIHF1ZXJ5OiBEb2N1bWVudE5vZGU7XG4gIHJlc3VsdDogT2JqZWN0O1xuICBkYXRhSWQ/OiBzdHJpbmc7XG4gIHN0b3JlOiBOb3JtYWxpemVkQ2FjaGU7XG4gIHZhcmlhYmxlcz86IE9iamVjdDtcbn1cblxuZXhwb3J0IGNsYXNzIFN0b3JlV3JpdGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGNhY2hlOiBJbk1lbW9yeUNhY2hlLFxuICAgIHByaXZhdGUgcmVhZGVyPzogU3RvcmVSZWFkZXIsXG4gICkge31cblxuICAvKipcbiAgICogV3JpdGVzIHRoZSByZXN1bHQgb2YgYSBxdWVyeSB0byB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSByZXN1bHQgVGhlIHJlc3VsdCBvYmplY3QgcmV0dXJuZWQgZm9yIHRoZSBxdWVyeSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSBkb2N1bWVudCB3aG9zZSByZXN1bHQgd2UgYXJlIHdyaXRpbmcgdG8gdGhlIHN0b3JlLlxuICAgKlxuICAgKiBAcGFyYW0gc3RvcmUgVGhlIHtAbGluayBOb3JtYWxpemVkQ2FjaGV9IHVzZWQgYnkgQXBvbGxvIGZvciB0aGUgYGRhdGFgIHBvcnRpb24gb2YgdGhlIHN0b3JlLlxuICAgKlxuICAgKiBAcGFyYW0gdmFyaWFibGVzIEEgbWFwIGZyb20gdGhlIG5hbWUgb2YgYSB2YXJpYWJsZSB0byBpdHMgdmFsdWUuIFRoZXNlIHZhcmlhYmxlcyBjYW4gYmVcbiAgICogcmVmZXJlbmNlZCBieSB0aGUgcXVlcnkgZG9jdW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4gQSBgUmVmZXJlbmNlYCB0byB0aGUgd3JpdHRlbiBvYmplY3QuXG4gICAqL1xuICBwdWJsaWMgd3JpdGVUb1N0b3JlKHtcbiAgICBxdWVyeSxcbiAgICByZXN1bHQsXG4gICAgZGF0YUlkLFxuICAgIHN0b3JlLFxuICAgIHZhcmlhYmxlcyxcbiAgfTogV3JpdGVUb1N0b3JlT3B0aW9ucyk6IFJlZmVyZW5jZSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3Qgb3BlcmF0aW9uRGVmaW5pdGlvbiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24ocXVlcnkpITtcbiAgICBjb25zdCBtZXJnZXIgPSBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyKCk7XG5cbiAgICB2YXJpYWJsZXMgPSB7XG4gICAgICAuLi5nZXREZWZhdWx0VmFsdWVzKG9wZXJhdGlvbkRlZmluaXRpb24pLFxuICAgICAgLi4udmFyaWFibGVzISxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVmID0gdGhpcy5wcm9jZXNzU2VsZWN0aW9uU2V0KHtcbiAgICAgIHJlc3VsdDogcmVzdWx0IHx8IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBkYXRhSWQsXG4gICAgICBzZWxlY3Rpb25TZXQ6IG9wZXJhdGlvbkRlZmluaXRpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgbWVyZ2VUcmVlOiB7IG1hcDogbmV3IE1hcCB9LFxuICAgICAgY29udGV4dDoge1xuICAgICAgICBzdG9yZSxcbiAgICAgICAgd3JpdHRlbjogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgbWVyZ2U8VD4oZXhpc3Rpbmc6IFQsIGluY29taW5nOiBUKSB7XG4gICAgICAgICAgcmV0dXJuIG1lcmdlci5tZXJnZShleGlzdGluZywgaW5jb21pbmcpIGFzIFQ7XG4gICAgICAgIH0sXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgdmFyU3RyaW5nOiBKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXMpLFxuICAgICAgICBmcmFnbWVudE1hcDogY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhxdWVyeSkpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghaXNSZWZlcmVuY2UocmVmKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKGBDb3VsZCBub3QgaWRlbnRpZnkgb2JqZWN0ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0KX1gKTtcbiAgICB9XG5cbiAgICAvLyBBbnkgSURzIHdyaXR0ZW4gZXhwbGljaXRseSB0byB0aGUgY2FjaGUgd2lsbCBiZSByZXRhaW5lZCBhc1xuICAgIC8vIHJlYWNoYWJsZSByb290IElEcyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLiBBbHRob3VnaCB0aGlzXG4gICAgLy8gbG9naWMgaW5jbHVkZXMgcm9vdCBJRHMgbGlrZSBST09UX1FVRVJZIGFuZCBST09UX01VVEFUSU9OLCB0aGVpclxuICAgIC8vIHJldGFpbm1lbnQgY291bnRzIGFyZSBlZmZlY3RpdmVseSBpZ25vcmVkIGJlY2F1c2UgY2FjaGUuZ2MoKSBhbHdheXNcbiAgICAvLyBpbmNsdWRlcyB0aGVtIGluIGl0cyByb290IElEIHNldC5cbiAgICBzdG9yZS5yZXRhaW4ocmVmLl9fcmVmKTtcblxuICAgIHJldHVybiByZWY7XG4gIH1cblxuICBwcml2YXRlIHByb2Nlc3NTZWxlY3Rpb25TZXQoe1xuICAgIGRhdGFJZCxcbiAgICByZXN1bHQsXG4gICAgc2VsZWN0aW9uU2V0LFxuICAgIGNvbnRleHQsXG4gICAgLy8gVGhpcyBvYmplY3QgYWxsb3dzIHByb2Nlc3NTZWxlY3Rpb25TZXQgdG8gcmVwb3J0IHVzZWZ1bCBpbmZvcm1hdGlvblxuICAgIC8vIHRvIGl0cyBjYWxsZXJzIHdpdGhvdXQgZXhwbGljaXRseSByZXR1cm5pbmcgdGhhdCBpbmZvcm1hdGlvbi5cbiAgICBtZXJnZVRyZWUsXG4gIH06IFByb2Nlc3NTZWxlY3Rpb25TZXRPcHRpb25zKTogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2Uge1xuICAgIGNvbnN0IHsgcG9saWNpZXMgfSA9IHRoaXMuY2FjaGU7XG5cbiAgICAvLyBJZGVudGlmeSB0aGUgcmVzdWx0IG9iamVjdCwgZXZlbiBpZiBkYXRhSWQgd2FzIGFscmVhZHkgcHJvdmlkZWQsXG4gICAgLy8gc2luY2Ugd2UgYWx3YXlzIG5lZWQga2V5T2JqZWN0IGJlbG93LlxuICAgIGNvbnN0IFtpZCwga2V5T2JqZWN0XSA9IHBvbGljaWVzLmlkZW50aWZ5KFxuICAgICAgcmVzdWx0LCBzZWxlY3Rpb25TZXQsIGNvbnRleHQuZnJhZ21lbnRNYXApO1xuXG4gICAgLy8gSWYgZGF0YUlkIHdhcyBub3QgcHJvdmlkZWQsIGZhbGwgYmFjayB0byB0aGUgaWQganVzdCBnZW5lcmF0ZWQgYnlcbiAgICAvLyBwb2xpY2llcy5pZGVudGlmeS5cbiAgICBkYXRhSWQgPSBkYXRhSWQgfHwgaWQ7XG5cbiAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGRhdGFJZCkge1xuICAgICAgLy8gQXZvaWQgcHJvY2Vzc2luZyB0aGUgc2FtZSBlbnRpdHkgb2JqZWN0IHVzaW5nIHRoZSBzYW1lIHNlbGVjdGlvblxuICAgICAgLy8gc2V0IG1vcmUgdGhhbiBvbmNlLiBXZSB1c2UgYW4gYXJyYXkgaW5zdGVhZCBvZiBhIFNldCBzaW5jZSBtb3N0XG4gICAgICAvLyBlbnRpdHkgSURzIHdpbGwgYmUgd3JpdHRlbiB1c2luZyBvbmx5IG9uZSBzZWxlY3Rpb24gc2V0LCBzbyB0aGVcbiAgICAgIC8vIHNpemUgb2YgdGhpcyBhcnJheSBpcyBsaWtlbHkgdG8gYmUgdmVyeSBzbWFsbCwgbWVhbmluZyBpbmRleE9mIGlzXG4gICAgICAvLyBsaWtlbHkgdG8gYmUgZmFzdGVyIHRoYW4gU2V0LnByb3RvdHlwZS5oYXMuXG4gICAgICBjb25zdCBzZXRzID0gY29udGV4dC53cml0dGVuW2RhdGFJZF0gfHwgKGNvbnRleHQud3JpdHRlbltkYXRhSWRdID0gW10pO1xuICAgICAgY29uc3QgcmVmID0gbWFrZVJlZmVyZW5jZShkYXRhSWQpO1xuICAgICAgaWYgKHNldHMuaW5kZXhPZihzZWxlY3Rpb25TZXQpID49IDApIHJldHVybiByZWY7XG4gICAgICBzZXRzLnB1c2goc2VsZWN0aW9uU2V0KTtcblxuICAgICAgLy8gSWYgd2UncmUgYWJvdXQgdG8gd3JpdGUgYSByZXN1bHQgb2JqZWN0IGludG8gdGhlIHN0b3JlLCBidXQgd2VcbiAgICAgIC8vIGhhcHBlbiB0byBrbm93IHRoYXQgdGhlIGV4YWN0IHNhbWUgKD09PSkgcmVzdWx0IG9iamVjdCB3b3VsZCBiZVxuICAgICAgLy8gcmV0dXJuZWQgaWYgd2Ugd2VyZSB0byByZXJlYWQgdGhlIHJlc3VsdCB3aXRoIHRoZSBzYW1lIGlucHV0cyxcbiAgICAgIC8vIHRoZW4gd2UgY2FuIHNraXAgdGhlIHJlc3Qgb2YgdGhlIHByb2Nlc3NTZWxlY3Rpb25TZXQgd29yayBmb3JcbiAgICAgIC8vIHRoaXMgb2JqZWN0LCBhbmQgaW1tZWRpYXRlbHkgcmV0dXJuIGEgUmVmZXJlbmNlIHRvIGl0LlxuICAgICAgaWYgKHRoaXMucmVhZGVyICYmIHRoaXMucmVhZGVyLmlzRnJlc2goXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgcmVmLFxuICAgICAgICBzZWxlY3Rpb25TZXQsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICApKSB7XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhpcyB2YXJpYWJsZSB3aWxsIGJlIHJlcGVhdGVkbHkgdXBkYXRlZCB1c2luZyBjb250ZXh0Lm1lcmdlIHRvXG4gICAgLy8gYWNjdW11bGF0ZSBhbGwgZmllbGRzIHRoYXQgbmVlZCB0byBiZSB3cml0dGVuIGludG8gdGhlIHN0b3JlLlxuICAgIGxldCBpbmNvbWluZ0ZpZWxkczogU3RvcmVPYmplY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLy8gV3JpdGUgYW55IGtleSBmaWVsZHMgdGhhdCB3ZXJlIHVzZWQgZHVyaW5nIGlkZW50aWZpY2F0aW9uLCBldmVuIGlmXG4gICAgLy8gdGhleSB3ZXJlIG5vdCBtZW50aW9uZWQgaW4gdGhlIG9yaWdpbmFsIHF1ZXJ5LlxuICAgIGlmIChrZXlPYmplY3QpIHtcbiAgICAgIGluY29taW5nRmllbGRzID0gY29udGV4dC5tZXJnZShpbmNvbWluZ0ZpZWxkcywga2V5T2JqZWN0KTtcbiAgICB9XG5cbiAgICAvLyBJZiB0eXBlbmFtZSB3YXMgbm90IHBhc3NlZCBpbiwgaW5mZXIgaXQuIE5vdGUgdGhhdCB0eXBlbmFtZSBpc1xuICAgIC8vIGFsd2F5cyBwYXNzZWQgaW4gZm9yIHRyaWNreS10by1pbmZlciBjYXNlcyBzdWNoIGFzIFwiUXVlcnlcIiBmb3JcbiAgICAvLyBST09UX1FVRVJZLlxuICAgIGNvbnN0IHR5cGVuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQgPVxuICAgICAgKGRhdGFJZCAmJiBwb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZFtkYXRhSWRdKSB8fFxuICAgICAgZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LmZyYWdtZW50TWFwKSB8fFxuICAgICAgKGRhdGFJZCAmJiBjb250ZXh0LnN0b3JlLmdldChkYXRhSWQsIFwiX190eXBlbmFtZVwiKSBhcyBzdHJpbmcpO1xuXG4gICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0eXBlbmFtZSkge1xuICAgICAgaW5jb21pbmdGaWVsZHMuX190eXBlbmFtZSA9IHR5cGVuYW1lO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKTtcblxuICAgIHdvcmtTZXQuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKHNlbGVjdGlvbiwgY29udGV4dC52YXJpYWJsZXMpKSByZXR1cm47XG5cbiAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0RmllbGRLZXkgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbik7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0W3Jlc3VsdEZpZWxkS2V5XTtcblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHN0b3JlRmllbGROYW1lID0gcG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoe1xuICAgICAgICAgICAgdHlwZW5hbWUsXG4gICAgICAgICAgICBmaWVsZE5hbWU6IHNlbGVjdGlvbi5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgZmllbGQ6IHNlbGVjdGlvbixcbiAgICAgICAgICAgIHZhcmlhYmxlczogY29udGV4dC52YXJpYWJsZXMsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBnZXRDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcblxuICAgICAgICAgIGxldCBpbmNvbWluZ1ZhbHVlID1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZpZWxkVmFsdWUodmFsdWUsIHNlbGVjdGlvbiwgY29udGV4dCwgY2hpbGRUcmVlKTtcblxuICAgICAgICAgIGNvbnN0IGNoaWxkVHlwZW5hbWUgPSBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0XG4gICAgICAgICAgICAmJiBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWU8c3RyaW5nPihpbmNvbWluZ1ZhbHVlIGFzIFN0b3JlT2JqZWN0LCBcIl9fdHlwZW5hbWVcIilcbiAgICAgICAgICAgIHx8IHZvaWQgMDtcblxuICAgICAgICAgIGNvbnN0IG1lcmdlID0gcG9saWNpZXMuZ2V0TWVyZ2VGdW5jdGlvbihcbiAgICAgICAgICAgIHR5cGVuYW1lLFxuICAgICAgICAgICAgc2VsZWN0aW9uLm5hbWUudmFsdWUsXG4gICAgICAgICAgICBjaGlsZFR5cGVuYW1lLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAobWVyZ2UpIHtcbiAgICAgICAgICAgIGNoaWxkVHJlZS5pbmZvID0ge1xuICAgICAgICAgICAgICAvLyBUT0RPIENoZWNrIGNvbXBhdGliaWxpdHkgYWdhaW5zdCBhbnkgZXhpc3RpbmdcbiAgICAgICAgICAgICAgLy8gY2hpbGRUcmVlLmZpZWxkP1xuICAgICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgICB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgbWVyZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXliZVJlY3ljbGVDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbmNvbWluZ0ZpZWxkcyA9IGNvbnRleHQubWVyZ2UoaW5jb21pbmdGaWVsZHMsIHtcbiAgICAgICAgICAgIFtzdG9yZUZpZWxkTmFtZV06IGluY29taW5nVmFsdWUsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBwb2xpY2llcy51c2luZ1Bvc3NpYmxlVHlwZXMgJiZcbiAgICAgICAgICAhaGFzRGlyZWN0aXZlcyhbXCJkZWZlclwiLCBcImNsaWVudFwiXSwgc2VsZWN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAgICAgICBgTWlzc2luZyBmaWVsZCAnJHtyZXN1bHRGaWVsZEtleX0nIGluICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICkuc3Vic3RyaW5nKDAsIDEwMCl9YCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIG5vdCBhIGZpZWxkLCBzbyBpdCBtdXN0IGJlIGEgZnJhZ21lbnQsIGVpdGhlciBpbmxpbmUgb3IgbmFtZWRcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oXG4gICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgIGNvbnRleHQuZnJhZ21lbnRNYXAsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGZyYWdtZW50ICYmXG4gICAgICAgICAgICAvLyBCeSBwYXNzaW5nIHJlc3VsdCBhbmQgY29udGV4dC52YXJpYWJsZXMsIHdlIGVuYWJsZVxuICAgICAgICAgICAgLy8gcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzIHRvIGJlbmQgdGhlIHJ1bGVzIHdoZW4gdHlwZW5hbWUgaXNcbiAgICAgICAgICAgIC8vIG5vdCBhIGtub3duIHN1YnR5cGUgb2YgdGhlIGZyYWdtZW50IHR5cGUgY29uZGl0aW9uLCBidXQgdGhlXG4gICAgICAgICAgICAvLyByZXN1bHQgb2JqZWN0IGNvbnRhaW5zIGFsbCB0aGUga2V5cyByZXF1ZXN0ZWQgYnkgdGhlXG4gICAgICAgICAgICAvLyBmcmFnbWVudCwgd2hpY2ggc3Ryb25nbHkgc3VnZ2VzdHMgdGhlIGZyYWdtZW50IHByb2JhYmx5XG4gICAgICAgICAgICAvLyBtYXRjaGVkLiBUaGlzIGZ1enp5IG1hdGNoaW5nIGJlaGF2aW9yIG11c3QgYmUgZW5hYmxlZCBieVxuICAgICAgICAgICAgLy8gaW5jbHVkaW5nIGEgcmVndWxhciBleHByZXNzaW9uIHN0cmluZyAoc3VjaCBhcyBcIi4qXCIgb3JcbiAgICAgICAgICAgIC8vIFwiUHJlZml4LipcIiBvciBcIi4qU3VmZml4XCIpIGluIHRoZSBwb3NzaWJsZVR5cGVzIGFycmF5IGZvclxuICAgICAgICAgICAgLy8gc3BlY2lmaWMgc3VwZXJ0eXBlczsgb3RoZXJ3aXNlLCBhbGwgbWF0Y2hpbmcgcmVtYWlucyBleGFjdC5cbiAgICAgICAgICAgIC8vIEZ1enp5IG1hdGNoZXMgYXJlIHJlbWVtYmVyZWQgYnkgdGhlIFBvbGljaWVzIG9iamVjdCBhbmRcbiAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgd2hlbiByZWFkaW5nIGZyb20gdGhlIGNhY2hlLiBTaW5jZSB0aGVyZSBpcyBub1xuICAgICAgICAgICAgLy8gaW5jb21pbmcgcmVzdWx0IG9iamVjdCB0byBjaGVjayB3aGVuIHJlYWRpbmcsIHJlYWRpbmcgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGludm9sdmUgdGhlIHNhbWUgZnV6enkgaW5mZXJlbmNlLCBzbyB0aGUgU3RvcmVSZWFkZXJcbiAgICAgICAgICAgIC8vIGNsYXNzIGNhbGxzIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyB3aXRob3V0IHBhc3NpbmcgcmVzdWx0XG4gICAgICAgICAgICAvLyBvciBjb250ZXh0LnZhcmlhYmxlcy4gVGhlIGZsZXhpYmlsaXR5IG9mIGZ1enp5IG1hdGNoaW5nXG4gICAgICAgICAgICAvLyBhbGxvd3MgZXhpc3RpbmcgY2xpZW50cyB0byBhY2NvbW1vZGF0ZSBwcmV2aW91c2x5IHVua25vd25cbiAgICAgICAgICAgIC8vIF9fdHlwZW5hbWUgc3RyaW5ncyBwcm9kdWNlZCBieSBzZXJ2ZXIvc2NoZW1hIGNoYW5nZXMsIHdoaWNoXG4gICAgICAgICAgICAvLyB3b3VsZCBvdGhlcndpc2UgYmUgYnJlYWtpbmcgY2hhbmdlcy5cbiAgICAgICAgICAgIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgY29udGV4dC52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgZnJhZ21lbnQuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZm9yRWFjaCh3b3JrU2V0LmFkZCwgd29ya1NldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgZGF0YUlkKSB7XG4gICAgICBjb25zdCBlbnRpdHlSZWYgPSBtYWtlUmVmZXJlbmNlKGRhdGFJZCk7XG5cbiAgICAgIGlmIChtZXJnZVRyZWUubWFwLnNpemUpIHtcbiAgICAgICAgaW5jb21pbmdGaWVsZHMgPSB0aGlzLmFwcGx5TWVyZ2VzKG1lcmdlVHJlZSwgZW50aXR5UmVmLCBpbmNvbWluZ0ZpZWxkcywgY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU2V0ID0gKHN0b3JlRmllbGROYW1lOiBzdHJpbmcpID0+XG4gICAgICAgICAgZmllbGRzV2l0aFNlbGVjdGlvblNldHMuaGFzKGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpKTtcbiAgICAgICAgY29uc3QgZmllbGRzV2l0aFNlbGVjdGlvblNldHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgd29ya1NldC5mb3JFYWNoKHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSAmJiBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0cy5hZGQoc2VsZWN0aW9uLm5hbWUudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFzTWVyZ2VGdW5jdGlvbiA9IChzdG9yZUZpZWxkTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2hpbGRUcmVlID0gbWVyZ2VUcmVlLm1hcC5nZXQoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgIHJldHVybiBCb29sZWFuKGNoaWxkVHJlZSAmJiBjaGlsZFRyZWUuaW5mbyAmJiBjaGlsZFRyZWUuaW5mby5tZXJnZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmtleXMoaW5jb21pbmdGaWVsZHMpLmZvckVhY2goc3RvcmVGaWVsZE5hbWUgPT4ge1xuICAgICAgICAgIC8vIElmIGEgbWVyZ2UgZnVuY3Rpb24gd2FzIGRlZmluZWQgZm9yIHRoaXMgZmllbGQsIHRydXN0IHRoYXQgaXRcbiAgICAgICAgICAvLyBkaWQgdGhlIHJpZ2h0IHRoaW5nIGFib3V0IChub3QpIGNsb2JiZXJpbmcgZGF0YS4gSWYgdGhlIGZpZWxkXG4gICAgICAgICAgLy8gaGFzIG5vIHNlbGVjdGlvbiBzZXQsIGl0J3MgYSBzY2FsYXIgZmllbGQsIHNvIGl0IGRvZXNuJ3QgbmVlZFxuICAgICAgICAgIC8vIGEgbWVyZ2UgZnVuY3Rpb24gKGV2ZW4gaWYgaXQncyBhbiBvYmplY3QsIGxpa2UgSlNPTiBkYXRhKS5cbiAgICAgICAgICBpZiAoaGFzU2VsZWN0aW9uU2V0KHN0b3JlRmllbGROYW1lKSAmJlxuICAgICAgICAgICAgICAhaGFzTWVyZ2VGdW5jdGlvbihzdG9yZUZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgIHdhcm5BYm91dERhdGFMb3NzKFxuICAgICAgICAgICAgICBlbnRpdHlSZWYsXG4gICAgICAgICAgICAgIGluY29taW5nRmllbGRzLFxuICAgICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgY29udGV4dC5zdG9yZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5zdG9yZS5tZXJnZShkYXRhSWQsIGluY29taW5nRmllbGRzKTtcblxuICAgICAgcmV0dXJuIGVudGl0eVJlZjtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5jb21pbmdGaWVsZHM7XG4gIH1cblxuICBwcml2YXRlIHByb2Nlc3NGaWVsZFZhbHVlKFxuICAgIHZhbHVlOiBhbnksXG4gICAgZmllbGQ6IEZpZWxkTm9kZSxcbiAgICBjb250ZXh0OiBXcml0ZUNvbnRleHQsXG4gICAgbWVyZ2VUcmVlOiBNZXJnZVRyZWUsXG4gICk6IFN0b3JlVmFsdWUge1xuICAgIGlmICghZmllbGQuc2VsZWN0aW9uU2V0IHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAvLyBJbiBkZXZlbG9wbWVudCwgd2UgbmVlZCB0byBjbG9uZSBzY2FsYXIgdmFsdWVzIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgICAgIC8vIHNhZmVseSBmcm96ZW4gd2l0aCBtYXliZURlZXBGcmVlemUgaW4gcmVhZEZyb21TdG9yZS50cy4gSW4gcHJvZHVjdGlvbixcbiAgICAgIC8vIGl0J3MgY2hlYXBlciB0byBzdG9yZSB0aGUgc2NhbGFyIHZhbHVlcyBkaXJlY3RseSBpbiB0aGUgY2FjaGUuXG4gICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHZhbHVlIDogY2xvbmVEZWVwKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnByb2Nlc3NGaWVsZFZhbHVlKFxuICAgICAgICAgIGl0ZW0sIGZpZWxkLCBjb250ZXh0LCBnZXRDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIGkpKTtcbiAgICAgICAgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBpKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc1NlbGVjdGlvblNldCh7XG4gICAgICByZXN1bHQ6IHZhbHVlLFxuICAgICAgc2VsZWN0aW9uU2V0OiBmaWVsZC5zZWxlY3Rpb25TZXQsXG4gICAgICBjb250ZXh0LFxuICAgICAgbWVyZ2VUcmVlLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseU1lcmdlczxUIGV4dGVuZHMgU3RvcmVWYWx1ZT4oXG4gICAgbWVyZ2VUcmVlOiBNZXJnZVRyZWUsXG4gICAgZXhpc3Rpbmc6IFN0b3JlVmFsdWUsXG4gICAgaW5jb21pbmc6IFQsXG4gICAgY29udGV4dDogUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCxcbiAgICBnZXRTdG9yYWdlQXJncz86IFBhcmFtZXRlcnM8RW50aXR5U3RvcmVbXCJnZXRTdG9yYWdlXCJdPixcbiAgKTogVCB7XG4gICAgaWYgKG1lcmdlVHJlZS5tYXAuc2l6ZSAmJiAhaXNSZWZlcmVuY2UoaW5jb21pbmcpKSB7XG4gICAgICBjb25zdCBlOiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSB8IHVuZGVmaW5lZCA9IChcbiAgICAgICAgLy8gSXRlbXMgaW4gdGhlIHNhbWUgcG9zaXRpb24gaW4gZGlmZmVyZW50IGFycmF5cyBhcmUgbm90XG4gICAgICAgIC8vIG5lY2Vzc2FyaWx5IHJlbGF0ZWQgdG8gZWFjaCBvdGhlciwgc28gd2hlbiBpbmNvbWluZyBpcyBhbiBhcnJheVxuICAgICAgICAvLyB3ZSBwcm9jZXNzIGl0cyBlbGVtZW50cyBhcyBpZiB0aGVyZSB3YXMgbm8gZXhpc3RpbmcgZGF0YS5cbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaW5jb21pbmcpICYmXG4gICAgICAgIC8vIExpa2V3aXNlLCBleGlzdGluZyBtdXN0IGJlIGVpdGhlciBhIFJlZmVyZW5jZSBvciBhIFN0b3JlT2JqZWN0XG4gICAgICAgIC8vIGluIG9yZGVyIGZvciBpdHMgZmllbGRzIHRvIGJlIHNhZmUgdG8gbWVyZ2Ugd2l0aCB0aGUgZmllbGRzIG9mXG4gICAgICAgIC8vIHRoZSBpbmNvbWluZyBvYmplY3QuXG4gICAgICAgIChpc1JlZmVyZW5jZShleGlzdGluZykgfHwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoZXhpc3RpbmcpKVxuICAgICAgKSA/IGV4aXN0aW5nIDogdm9pZCAwO1xuXG4gICAgICAvLyBUaGlzIG5hcnJvd2luZyBpcyBpbXBsaWVkIGJ5IG1lcmdlVHJlZS5tYXAuc2l6ZSA+IDAgYW5kXG4gICAgICAvLyAhaXNSZWZlcmVuY2UoaW5jb21pbmcpLCB0aG91Z2ggVHlwZVNjcmlwdCB1bmRlcnN0YW5kYWJseSBjYW5ub3RcbiAgICAgIC8vIGhvcGUgdG8gaW5mZXIgdGhpcyB0eXBlLlxuICAgICAgY29uc3QgaSA9IGluY29taW5nIGFzIFN0b3JlT2JqZWN0IHwgU3RvcmVWYWx1ZVtdO1xuXG4gICAgICAvLyBUaGUgb3B0aW9ucy5zdG9yYWdlIG9iamVjdHMgcHJvdmlkZWQgdG8gcmVhZCBhbmQgbWVyZ2UgZnVuY3Rpb25zXG4gICAgICAvLyBhcmUgZGVyaXZlZCBmcm9tIHRoZSBpZGVudGl0eSBvZiB0aGUgcGFyZW50IG9iamVjdCBwbHVzIGFcbiAgICAgIC8vIHNlcXVlbmNlIG9mIHN0b3JlRmllbGROYW1lIHN0cmluZ3MvbnVtYmVycyBpZGVudGlmeWluZyB0aGUgbmVzdGVkXG4gICAgICAvLyBmaWVsZCBuYW1lIHBhdGggb2YgZWFjaCBmaWVsZCB2YWx1ZSB0byBiZSBtZXJnZWQuXG4gICAgICBpZiAoZSAmJiAhZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgZ2V0U3RvcmFnZUFyZ3MgPSBbaXNSZWZlcmVuY2UoZSkgPyBlLl9fcmVmIDogZV07XG4gICAgICB9XG5cbiAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCBhcHBseWluZyBtZXJnZSBmdW5jdGlvbnMgdG8gdGhpcyBzdWJ0cmVlIHdpbGxcbiAgICAgIC8vIG5vdCBjaGFuZ2UgdGhlIGluY29taW5nIGRhdGEsIHNvIHRoaXMgdmFyaWFibGUgdHJhY2tzIHRoZSBmaWVsZHNcbiAgICAgIC8vIHRoYXQgZGlkIGNoYW5nZSwgc28gd2UgY2FuIGNyZWF0ZSBhIG5ldyBpbmNvbWluZyBvYmplY3Qgd2hlbiAoYW5kXG4gICAgICAvLyBvbmx5IHdoZW4pIGF0IGxlYXN0IG9uZSBpbmNvbWluZyBmaWVsZCBoYXMgY2hhbmdlZC4gV2UgdXNlIGEgTWFwXG4gICAgICAvLyB0byBwcmVzZXJ2ZSB0aGUgdHlwZSBvZiBudW1lcmljIGtleXMuXG4gICAgICBsZXQgY2hhbmdlZEZpZWxkczogTWFwPHN0cmluZyB8IG51bWJlciwgU3RvcmVWYWx1ZT4gfCB1bmRlZmluZWQ7XG5cbiAgICAgIGNvbnN0IGdldFZhbHVlID0gKFxuICAgICAgICBmcm9tOiB0eXBlb2YgZSB8IHR5cGVvZiBpLFxuICAgICAgICBuYW1lOiBzdHJpbmcgfCBudW1iZXIsXG4gICAgICApOiBTdG9yZVZhbHVlID0+IHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZnJvbSlcbiAgICAgICAgICA/ICh0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIiA/IGZyb21bbmFtZV0gOiB2b2lkIDApXG4gICAgICAgICAgOiBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWUoZnJvbSwgU3RyaW5nKG5hbWUpKVxuICAgICAgfTtcblxuICAgICAgbWVyZ2VUcmVlLm1hcC5mb3JFYWNoKChjaGlsZFRyZWUsIHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgIGlmIChnZXRTdG9yYWdlQXJncykge1xuICAgICAgICAgIGdldFN0b3JhZ2VBcmdzLnB1c2goc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVWYWwgPSBnZXRWYWx1ZShlLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGlWYWwgPSBnZXRWYWx1ZShpLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGFWYWwgPSB0aGlzLmFwcGx5TWVyZ2VzKFxuICAgICAgICAgIGNoaWxkVHJlZSxcbiAgICAgICAgICBlVmFsLFxuICAgICAgICAgIGlWYWwsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICBnZXRTdG9yYWdlQXJncyxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFWYWwgIT09IGlWYWwpIHtcbiAgICAgICAgICBjaGFuZ2VkRmllbGRzID0gY2hhbmdlZEZpZWxkcyB8fCBuZXcgTWFwO1xuICAgICAgICAgIGNoYW5nZWRGaWVsZHMuc2V0KHN0b3JlRmllbGROYW1lLCBhVmFsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgICBpbnZhcmlhbnQoZ2V0U3RvcmFnZUFyZ3MucG9wKCkgPT09IHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChjaGFuZ2VkRmllbGRzKSB7XG4gICAgICAgIC8vIFNoYWxsb3cgY2xvbmUgaSBzbyB3ZSBjYW4gYWRkIGNoYW5nZWQgZmllbGRzIHRvIGl0LlxuICAgICAgICBpbmNvbWluZyA9IChBcnJheS5pc0FycmF5KGkpID8gaS5zbGljZSgwKSA6IHsgLi4uaSB9KSBhcyBUO1xuICAgICAgICBjaGFuZ2VkRmllbGRzLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG4gICAgICAgICAgKGluY29taW5nIGFzIGFueSlbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1lcmdlVHJlZS5pbmZvKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZS5wb2xpY2llcy5ydW5NZXJnZUZ1bmN0aW9uKFxuICAgICAgICBleGlzdGluZyxcbiAgICAgICAgaW5jb21pbmcsXG4gICAgICAgIG1lcmdlVHJlZS5pbmZvLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBnZXRTdG9yYWdlQXJncyAmJiBjb250ZXh0LnN0b3JlLmdldFN0b3JhZ2UoLi4uZ2V0U3RvcmFnZUFyZ3MpLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5jb21pbmc7XG4gIH1cbn1cblxuY29uc3QgZW1wdHlNZXJnZVRyZWVQb29sOiBNZXJnZVRyZWVbXSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRDaGlsZE1lcmdlVHJlZShcbiAgeyBtYXAgfTogTWVyZ2VUcmVlLFxuICBuYW1lOiBzdHJpbmcgfCBudW1iZXIsXG4pOiBNZXJnZVRyZWUge1xuICBpZiAoIW1hcC5oYXMobmFtZSkpIHtcbiAgICBtYXAuc2V0KG5hbWUsIGVtcHR5TWVyZ2VUcmVlUG9vbC5wb3AoKSB8fCB7IG1hcDogbmV3IE1hcCB9KTtcbiAgfVxuICByZXR1cm4gbWFwLmdldChuYW1lKSE7XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVjeWNsZUNoaWxkTWVyZ2VUcmVlKFxuICB7IG1hcCB9OiBNZXJnZVRyZWUsXG4gIG5hbWU6IHN0cmluZyB8IG51bWJlcixcbikge1xuICBjb25zdCBjaGlsZFRyZWUgPSBtYXAuZ2V0KG5hbWUpO1xuICBpZiAoY2hpbGRUcmVlICYmXG4gICAgICAhY2hpbGRUcmVlLmluZm8gJiZcbiAgICAgICFjaGlsZFRyZWUubWFwLnNpemUpIHtcbiAgICBlbXB0eU1lcmdlVHJlZVBvb2wucHVzaChjaGlsZFRyZWUpO1xuICAgIG1hcC5kZWxldGUobmFtZSk7XG4gIH1cbn1cblxuY29uc3Qgd2FybmluZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuLy8gTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgdW51c2VkIGluIHByb2R1Y3Rpb24sIGFuZCB0aHVzIHNob3VsZCBiZVxuLy8gcHJ1bmVkIGJ5IGFueSB3ZWxsLWNvbmZpZ3VyZWQgbWluaWZpZXIuXG5mdW5jdGlvbiB3YXJuQWJvdXREYXRhTG9zcyhcbiAgZXhpc3RpbmdSZWY6IFJlZmVyZW5jZSxcbiAgaW5jb21pbmdPYmo6IFN0b3JlT2JqZWN0LFxuICBzdG9yZUZpZWxkTmFtZTogc3RyaW5nLFxuICBzdG9yZTogTm9ybWFsaXplZENhY2hlLFxuKSB7XG4gIGNvbnN0IGdldENoaWxkID0gKG9iak9yUmVmOiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSk6IFN0b3JlT2JqZWN0IHwgZmFsc2UgPT4ge1xuICAgIGNvbnN0IGNoaWxkID0gc3RvcmUuZ2V0RmllbGRWYWx1ZTxTdG9yZU9iamVjdD4ob2JqT3JSZWYsIHN0b3JlRmllbGROYW1lKTtcbiAgICByZXR1cm4gdHlwZW9mIGNoaWxkID09PSBcIm9iamVjdFwiICYmIGNoaWxkO1xuICB9O1xuXG4gIGNvbnN0IGV4aXN0aW5nID0gZ2V0Q2hpbGQoZXhpc3RpbmdSZWYpO1xuICBpZiAoIWV4aXN0aW5nKSByZXR1cm47XG5cbiAgY29uc3QgaW5jb21pbmcgPSBnZXRDaGlsZChpbmNvbWluZ09iaik7XG4gIGlmICghaW5jb21pbmcpIHJldHVybjtcblxuICAvLyBJdCdzIGFsd2F5cyBzYWZlIHRvIHJlcGxhY2UgYSByZWZlcmVuY2UsIHNpbmNlIGl0IHJlZmVycyB0byBkYXRhXG4gIC8vIHNhZmVseSBzdG9yZWQgZWxzZXdoZXJlLlxuICBpZiAoaXNSZWZlcmVuY2UoZXhpc3RpbmcpKSByZXR1cm47XG5cbiAgLy8gSWYgdGhlIHZhbHVlcyBhcmUgc3RydWN0dXJhbGx5IGVxdWl2YWxlbnQsIHdlIGRvIG5vdCBuZWVkIHRvIHdvcnJ5XG4gIC8vIGFib3V0IGluY29taW5nIHJlcGxhY2luZyBleGlzdGluZy5cbiAgaWYgKGVxdWFsKGV4aXN0aW5nLCBpbmNvbWluZykpIHJldHVybjtcblxuICAvLyBJZiB3ZSdyZSByZXBsYWNpbmcgZXZlcnkga2V5IG9mIHRoZSBleGlzdGluZyBvYmplY3QsIHRoZW4gdGhlXG4gIC8vIGV4aXN0aW5nIGRhdGEgd291bGQgYmUgb3ZlcndyaXR0ZW4gZXZlbiBpZiB0aGUgb2JqZWN0cyB3ZXJlXG4gIC8vIG5vcm1hbGl6ZWQsIHNvIHdhcm5pbmcgd291bGQgbm90IGJlIGhlbHBmdWwgaGVyZS5cbiAgaWYgKE9iamVjdC5rZXlzKGV4aXN0aW5nKS5ldmVyeShcbiAgICBrZXkgPT4gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywga2V5KSAhPT0gdm9pZCAwKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhcmVudFR5cGUgPVxuICAgIHN0b3JlLmdldEZpZWxkVmFsdWU8c3RyaW5nPihleGlzdGluZ1JlZiwgXCJfX3R5cGVuYW1lXCIpIHx8XG4gICAgc3RvcmUuZ2V0RmllbGRWYWx1ZTxzdHJpbmc+KGluY29taW5nT2JqLCBcIl9fdHlwZW5hbWVcIik7XG4gIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICBjb25zdCB0eXBlRG90TmFtZSA9IGAke3BhcmVudFR5cGV9LiR7ZmllbGROYW1lfWA7XG4gIC8vIEF2b2lkIHdhcm5pbmcgbW9yZSB0aGFuIG9uY2UgZm9yIHRoZSBzYW1lIHR5cGUgYW5kIGZpZWxkIG5hbWUuXG4gIGlmICh3YXJuaW5ncy5oYXModHlwZURvdE5hbWUpKSByZXR1cm47XG4gIHdhcm5pbmdzLmFkZCh0eXBlRG90TmFtZSk7XG5cbiAgY29uc3QgY2hpbGRUeXBlbmFtZXM6IHN0cmluZ1tdID0gW107XG4gIC8vIEFycmF5cyBkbyBub3QgaGF2ZSBfX3R5cGVuYW1lIGZpZWxkcywgYW5kIGFsd2F5cyBuZWVkIGEgY3VzdG9tIG1lcmdlXG4gIC8vIGZ1bmN0aW9uLCBldmVuIGlmIHRoZWlyIGVsZW1lbnRzIGFyZSBub3JtYWxpemVkIGVudGl0aWVzLlxuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhpc3RpbmcpICYmXG4gICAgICAhQXJyYXkuaXNBcnJheShpbmNvbWluZykpIHtcbiAgICBbZXhpc3RpbmcsIGluY29taW5nXS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGNvbnN0IHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShjaGlsZCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICFjaGlsZFR5cGVuYW1lcy5pbmNsdWRlcyh0eXBlbmFtZSkpIHtcbiAgICAgICAgY2hpbGRUeXBlbmFtZXMucHVzaCh0eXBlbmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbnZhcmlhbnQud2FybihcbmBDYWNoZSBkYXRhIG1heSBiZSBsb3N0IHdoZW4gcmVwbGFjaW5nIHRoZSAke2ZpZWxkTmFtZX0gZmllbGQgb2YgYSAke3BhcmVudFR5cGV9IG9iamVjdC5cblxuVG8gYWRkcmVzcyB0aGlzIHByb2JsZW0gKHdoaWNoIGlzIG5vdCBhIGJ1ZyBpbiBBcG9sbG8gQ2xpZW50KSwgJHtcbiAgY2hpbGRUeXBlbmFtZXMubGVuZ3RoXG4gICAgPyBcImVpdGhlciBlbnN1cmUgYWxsIG9iamVjdHMgb2YgdHlwZSBcIiArXG4gICAgICAgIGNoaWxkVHlwZW5hbWVzLmpvaW4oXCIgYW5kIFwiKSArIFwiIGhhdmUgYW4gSUQgb3IgYSBjdXN0b20gbWVyZ2UgZnVuY3Rpb24sIG9yIFwiXG4gICAgOiBcIlwiXG59ZGVmaW5lIGEgY3VzdG9tIG1lcmdlIGZ1bmN0aW9uIGZvciB0aGUgJHtcbiAgdHlwZURvdE5hbWVcbn0gZmllbGQsIHNvIEluTWVtb3J5Q2FjaGUgY2FuIHNhZmVseSBtZXJnZSB0aGVzZSBvYmplY3RzOlxuXG4gIGV4aXN0aW5nOiAke0pTT04uc3RyaW5naWZ5KGV4aXN0aW5nKS5zbGljZSgwLCAxMDAwKX1cbiAgaW5jb21pbmc6ICR7SlNPTi5zdHJpbmdpZnkoaW5jb21pbmcpLnNsaWNlKDAsIDEwMDApfVxuXG5Gb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGVzZSBvcHRpb25zLCBwbGVhc2UgcmVmZXIgdG8gdGhlIGRvY3VtZW50YXRpb246XG5cbiAgKiBFbnN1cmluZyBlbnRpdHkgb2JqZWN0cyBoYXZlIElEczogaHR0cHM6Ly9nby5hcG9sbG8uZGV2L2MvZ2VuZXJhdGluZy11bmlxdWUtaWRlbnRpZmllcnNcbiAgKiBEZWZpbmluZyBjdXN0b20gbWVyZ2UgZnVuY3Rpb25zOiBodHRwczovL2dvLmFwb2xsby5kZXYvYy9tZXJnaW5nLW5vbi1ub3JtYWxpemVkLW9iamVjdHNcbmApO1xufVxuIiwiaW1wb3J0IHsgZGVwLCBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uIH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBTbG90IH0gZnJvbSBcIkB3cnkvY29udGV4dFwiO1xuaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuL2luTWVtb3J5Q2FjaGVcIjtcbmltcG9ydCB7IEFwb2xsb0NhY2hlIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3RpdmVWYXI8VD4ge1xuICAobmV3VmFsdWU/OiBUKTogVDtcbiAgb25OZXh0Q2hhbmdlKGxpc3RlbmVyOiBSZWFjdGl2ZUxpc3RlbmVyPFQ+KTogKCkgPT4gdm9pZDtcbiAgYXR0YWNoQ2FjaGUoY2FjaGU6IEFwb2xsb0NhY2hlPGFueT4pOiB0aGlzO1xuICBmb3JnZXRDYWNoZShjYWNoZTogQXBvbGxvQ2FjaGU8YW55Pik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFJlYWN0aXZlTGlzdGVuZXI8VD4gPSAodmFsdWU6IFQpID0+IGFueTtcblxuLy8gQ29udGV4dHVhbCBTbG90IHRoYXQgYWNxdWlyZXMgaXRzIHZhbHVlIHdoZW4gY3VzdG9tIHJlYWQgZnVuY3Rpb25zIGFyZVxuLy8gY2FsbGVkIGluIFBvbGljaWVzI3JlYWRGaWVsZC5cbmV4cG9ydCBjb25zdCBjYWNoZVNsb3QgPSBuZXcgU2xvdDxBcG9sbG9DYWNoZTxhbnk+PigpO1xuXG5jb25zdCBjYWNoZUluZm9NYXAgPSBuZXcgV2Vha01hcDxBcG9sbG9DYWNoZTxhbnk+LCB7XG4gIHZhcnM6IFNldDxSZWFjdGl2ZVZhcjxhbnk+PjtcbiAgZGVwOiBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uPFJlYWN0aXZlVmFyPGFueT4+O1xufT4oKTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVJbmZvKGNhY2hlOiBBcG9sbG9DYWNoZTxhbnk+KSB7XG4gIGxldCBpbmZvID0gY2FjaGVJbmZvTWFwLmdldChjYWNoZSkhO1xuICBpZiAoIWluZm8pIHtcbiAgICBjYWNoZUluZm9NYXAuc2V0KGNhY2hlLCBpbmZvID0ge1xuICAgICAgdmFyczogbmV3IFNldCxcbiAgICAgIGRlcDogZGVwKCksXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGluZm87XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JnZXRDYWNoZShjYWNoZTogQXBvbGxvQ2FjaGU8YW55Pikge1xuICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuZm9yRWFjaChydiA9PiBydi5mb3JnZXRDYWNoZShjYWNoZSkpO1xufVxuXG4vLyBDYWxsaW5nIGZvcmdldENhY2hlKGNhY2hlKSBzZXJ2ZXMgdG8gc2lsZW5jZSBicm9hZGNhc3RzIGFuZCBhbGxvd3MgdGhlXG4vLyBjYWNoZSB0byBiZSBnYXJiYWdlIGNvbGxlY3RlZC4gSG93ZXZlciwgdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXBcbi8vIHByZXNlcnZlcyB0aGUgc2V0IG9mIHJlYWN0aXZlIHZhcmlhYmxlcyB0aGF0IHdlcmUgcHJldmlvdXNseSBhc3NvY2lhdGVkXG4vLyB3aXRoIHRoaXMgY2FjaGUsIHdoaWNoIG1ha2VzIGl0IHBvc3NpYmxlIHRvIFwicmVjYWxsXCIgdGhlIGNhY2hlIGF0IGFcbi8vIGxhdGVyIHRpbWUsIGJ5IHJlYXR0YWNoaW5nIGl0IHRvIHRob3NlIHZhcmlhYmxlcy4gSWYgdGhlIGNhY2hlIGhhcyBiZWVuXG4vLyBnYXJiYWdlIGNvbGxlY3RlZCBpbiB0aGUgbWVhbnRpbWUsIGJlY2F1c2UgaXQgaXMgbm8gbG9uZ2VyIHJlYWNoYWJsZSxcbi8vIHlvdSB3b24ndCBiZSBhYmxlIHRvIGNhbGwgcmVjYWxsQ2FjaGUoY2FjaGUpLCBhbmQgdGhlIGNhY2hlIHdpbGxcbi8vIGF1dG9tYXRpY2FsbHkgZGlzYXBwZWFyIGZyb20gdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXAuXG5leHBvcnQgZnVuY3Rpb24gcmVjYWxsQ2FjaGUoY2FjaGU6IEFwb2xsb0NhY2hlPGFueT4pIHtcbiAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2gocnYgPT4gcnYuYXR0YWNoQ2FjaGUoY2FjaGUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VWYXI8VD4odmFsdWU6IFQpOiBSZWFjdGl2ZVZhcjxUPiB7XG4gIGNvbnN0IGNhY2hlcyA9IG5ldyBTZXQ8QXBvbGxvQ2FjaGU8YW55Pj4oKTtcbiAgY29uc3QgbGlzdGVuZXJzID0gbmV3IFNldDxSZWFjdGl2ZUxpc3RlbmVyPFQ+PigpO1xuXG4gIGNvbnN0IHJ2OiBSZWFjdGl2ZVZhcjxUPiA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlITtcbiAgICAgICAgY2FjaGVzLmZvckVhY2goY2FjaGUgPT4ge1xuICAgICAgICAgIC8vIEludmFsaWRhdGUgYW55IGZpZWxkcyB3aXRoIGN1c3RvbSByZWFkIGZ1bmN0aW9ucyB0aGF0XG4gICAgICAgICAgLy8gY29uc3VtZWQgdGhpcyB2YXJpYWJsZSwgc28gcXVlcnkgcmVzdWx0cyBpbnZvbHZpbmcgdGhvc2VcbiAgICAgICAgICAvLyBmaWVsZHMgd2lsbCBiZSByZWNvbXB1dGVkIHRoZSBuZXh0IHRpbWUgd2UgcmVhZCB0aGVtLlxuICAgICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkuZGVwLmRpcnR5KHJ2KTtcbiAgICAgICAgICAvLyBCcm9hZGNhc3QgY2hhbmdlcyB0byBhbnkgY2FjaGVzIHRoYXQgaGF2ZSBwcmV2aW91c2x5IHJlYWRcbiAgICAgICAgICAvLyBmcm9tIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgYnJvYWRjYXN0KGNhY2hlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZpbmFsbHksIG5vdGlmeSBhbnkgbGlzdGVuZXJzIGFkZGVkIHZpYSBydi5vbk5leHRDaGFuZ2UuXG4gICAgICAgIGNvbnN0IG9sZExpc3RlbmVycyA9IEFycmF5LmZyb20obGlzdGVuZXJzKTtcbiAgICAgICAgbGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgIG9sZExpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gcmVhZGluZyBmcm9tIHRoZSB2YXJpYWJsZSwgb2J0YWluIHRoZSBjdXJyZW50IGNhY2hlIGZyb21cbiAgICAgIC8vIGNvbnRleHQgdmlhIGNhY2hlU2xvdC4gVGhpcyBpc24ndCBlbnRpcmVseSBmb29scHJvb2YsIGJ1dCBpdCdzXG4gICAgICAvLyB0aGUgc2FtZSBzeXN0ZW0gdGhhdCBwb3dlcnMgdmFyRGVwLlxuICAgICAgY29uc3QgY2FjaGUgPSBjYWNoZVNsb3QuZ2V0VmFsdWUoKTtcbiAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICBhdHRhY2goY2FjaGUpO1xuICAgICAgICBnZXRDYWNoZUluZm8oY2FjaGUpLmRlcChydik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIHJ2Lm9uTmV4dENoYW5nZSA9IGxpc3RlbmVyID0+IHtcbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBhdHRhY2ggPSBydi5hdHRhY2hDYWNoZSA9IGNhY2hlID0+IHtcbiAgICBjYWNoZXMuYWRkKGNhY2hlKTtcbiAgICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuYWRkKHJ2KTtcbiAgICByZXR1cm4gcnY7XG4gIH07XG5cbiAgcnYuZm9yZ2V0Q2FjaGUgPSBjYWNoZSA9PiBjYWNoZXMuZGVsZXRlKGNhY2hlKTtcblxuICByZXR1cm4gcnY7XG59XG5cbnR5cGUgQnJvYWRjYXN0YWJsZSA9IEFwb2xsb0NhY2hlPGFueT4gJiB7XG4gIC8vIFRoaXMgbWV0aG9kIGlzIHByb3RlY3RlZCBpbiBJbk1lbW9yeUNhY2hlLCB3aGljaCB3ZSBhcmUgaWdub3JpbmcsIGJ1dFxuICAvLyB3ZSBzdGlsbCB3YW50IHNvbWUgc2VtYmxhbmNlIG9mIHR5cGUgc2FmZXR5IHdoZW4gd2UgY2FsbCBpdC5cbiAgYnJvYWRjYXN0V2F0Y2hlcz86IEluTWVtb3J5Q2FjaGVbXCJicm9hZGNhc3RXYXRjaGVzXCJdO1xufTtcblxuZnVuY3Rpb24gYnJvYWRjYXN0KGNhY2hlOiBCcm9hZGNhc3RhYmxlKSB7XG4gIGlmIChjYWNoZS5icm9hZGNhc3RXYXRjaGVzKSB7XG4gICAgY2FjaGUuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBJbmxpbmVGcmFnbWVudE5vZGUsXG4gIEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG4gIEZpZWxkTm9kZSxcbn0gZnJvbSAnZ3JhcGhxbCc7XG5cbmltcG9ydCB7IEtleVRyaWUgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHtcbiAgRnJhZ21lbnRNYXAsXG4gIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbixcbiAgaXNGaWVsZCxcbiAgZ2V0VHlwZW5hbWVGcm9tUmVzdWx0LFxuICBzdG9yZUtleU5hbWVGcm9tRmllbGQsXG4gIFN0b3JlVmFsdWUsXG4gIFN0b3JlT2JqZWN0LFxuICBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsXG4gIFJlZmVyZW5jZSxcbiAgaXNSZWZlcmVuY2UsXG4gIGdldFN0b3JlS2V5TmFtZSxcbiAgY2FuVXNlV2Vha01hcCxcbiAgY29tcGFjdCxcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IElkR2V0dGVyLCBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LCBNZXJnZUluZm8gfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgaGFzT3duLFxuICBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lLFxuICBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdCxcbiAgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCxcbiAgVHlwZU9yRmllbGROYW1lUmVnRXhwLFxufSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgY2FjaGVTbG90IH0gZnJvbSAnLi9yZWFjdGl2ZVZhcnMnO1xuaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gJy4vaW5NZW1vcnlDYWNoZSc7XG5pbXBvcnQge1xuICBTYWZlUmVhZG9ubHksXG4gIEZpZWxkU3BlY2lmaWVyLFxuICBUb1JlZmVyZW5jZUZ1bmN0aW9uLFxuICBSZWFkRmllbGRGdW5jdGlvbixcbiAgUmVhZEZpZWxkT3B0aW9ucyxcbiAgQ2FuUmVhZEZ1bmN0aW9uLFxufSBmcm9tICcuLi9jb3JlL3R5cGVzL2NvbW1vbic7XG5pbXBvcnQgeyBGaWVsZFZhbHVlR2V0dGVyIH0gZnJvbSAnLi9lbnRpdHlTdG9yZSc7XG5cbmV4cG9ydCB0eXBlIFR5cGVQb2xpY2llcyA9IHtcbiAgW19fdHlwZW5hbWU6IHN0cmluZ106IFR5cGVQb2xpY3k7XG59XG5cbi8vIFR5cGVTY3JpcHQgMy43IHdpbGwgYWxsb3cgcmVjdXJzaXZlIHR5cGUgYWxpYXNlcywgc28gdGhpcyBzaG91bGQgd29yazpcbi8vIHR5cGUgS2V5U3BlY2lmaWVyID0gKHN0cmluZyB8IEtleVNwZWNpZmllcilbXVxudHlwZSBLZXlTcGVjaWZpZXIgPSAoc3RyaW5nIHwgYW55W10pW107XG5cbnR5cGUgS2V5RmllbGRzQ29udGV4dCA9IHtcbiAgdHlwZW5hbWU/OiBzdHJpbmc7XG4gIHNlbGVjdGlvblNldD86IFNlbGVjdGlvblNldE5vZGU7XG4gIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXA7XG4gIC8vIE1heSBiZSBzZXQgYnkgdGhlIEtleUZpZWxkc0Z1bmN0aW9uIHRvIHJlcG9ydCBmaWVsZHMgdGhhdCB3ZXJlIGludm9sdmVkXG4gIC8vIGluIGNvbXB1dGluZyB0aGUgSUQuIE5ldmVyIHBhc3NlZCBpbiBieSB0aGUgY2FsbGVyLlxuICBrZXlPYmplY3Q/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufTtcblxuZXhwb3J0IHR5cGUgS2V5RmllbGRzRnVuY3Rpb24gPSAoXG4gIG9iamVjdDogUmVhZG9ubHk8U3RvcmVPYmplY3Q+LFxuICBjb250ZXh0OiBLZXlGaWVsZHNDb250ZXh0LFxuKSA9PiBLZXlTcGVjaWZpZXIgfCBmYWxzZSB8IFJldHVyblR5cGU8SWRHZXR0ZXI+O1xuXG50eXBlIEtleUZpZWxkc1Jlc3VsdCA9IEV4Y2x1ZGU8UmV0dXJuVHlwZTxLZXlGaWVsZHNGdW5jdGlvbj4sIEtleVNwZWNpZmllcj47XG5cbi8vIFRPRE8gU2hvdWxkIFR5cGVQb2xpY3kgYmUgYSBnZW5lcmljIHR5cGUsIHdpdGggYSBUT2JqZWN0IG9yIFRFbnRpdHlcbi8vIHR5cGUgcGFyYW1ldGVyP1xuZXhwb3J0IHR5cGUgVHlwZVBvbGljeSA9IHtcbiAgLy8gQWxsb3dzIGRlZmluaW5nIHRoZSBwcmltYXJ5IGtleSBmaWVsZHMgZm9yIHRoaXMgdHlwZSwgZWl0aGVyIHVzaW5nIGFuXG4gIC8vIGFycmF5IG9mIGZpZWxkIG5hbWVzIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGFyYml0cmFyeSBzdHJpbmcuXG4gIGtleUZpZWxkcz86IEtleVNwZWNpZmllciB8IEtleUZpZWxkc0Z1bmN0aW9uIHwgZmFsc2U7XG5cbiAgLy8gQWxsb3dzIGRlZmluaW5nIGEgbWVyZ2UgZnVuY3Rpb24gKG9yIG1lcmdlOnRydWUvZmFsc2Ugc2hvcnRoYW5kKSB0b1xuICAvLyBiZSB1c2VkIGZvciBtZXJnaW5nIG9iamVjdHMgb2YgdGhpcyB0eXBlIHdoZXJldmVyIHRoZXkgYXBwZWFyLCB1bmxlc3NcbiAgLy8gdGhlIHBhcmVudCBmaWVsZCBhbHNvIGRlZmluZXMgYSBtZXJnZSBmdW5jdGlvbi9ib29sZWFuICh0aGF0IGlzLFxuICAvLyBwYXJlbnQgZmllbGQgbWVyZ2UgZnVuY3Rpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIHR5cGUgcG9saWN5IG1lcmdlXG4gIC8vIGZ1bmN0aW9ucykuIEluIG1hbnkgY2FzZXMsIGRlZmluaW5nIG1lcmdlOnRydWUgZm9yIGEgZ2l2ZW4gdHlwZVxuICAvLyBwb2xpY3kgY2FuIHNhdmUgeW91IGZyb20gc3BlY2lmeWluZyBtZXJnZTp0cnVlIGZvciBhbGwgdGhlIGZpZWxkXG4gIC8vIHBvbGljaWVzIHdoZXJlIHRoYXQgdHlwZSBtaWdodCBiZSBlbmNvdW50ZXJlZC5cbiAgbWVyZ2U/OiBGaWVsZE1lcmdlRnVuY3Rpb24gfCBib29sZWFuO1xuXG4gIC8vIEluIHRoZSByYXJlIGV2ZW50IHRoYXQgeW91ciBzY2hlbWEgaGFwcGVucyB0byB1c2UgYSBkaWZmZXJlbnRcbiAgLy8gX190eXBlbmFtZSBmb3IgdGhlIHJvb3QgUXVlcnksIE11dGF0aW9uLCBhbmQvb3IgU2NoZW1hIHR5cGVzLCB5b3UgY2FuXG4gIC8vIGV4cHJlc3MgeW91ciBkZXZpYW50IHByZWZlcmVuY2VzIGJ5IGVuYWJsaW5nIG9uZSBvZiB0aGVzZSBvcHRpb25zLlxuICBxdWVyeVR5cGU/OiB0cnVlLFxuICBtdXRhdGlvblR5cGU/OiB0cnVlLFxuICBzdWJzY3JpcHRpb25UeXBlPzogdHJ1ZSxcblxuICBmaWVsZHM/OiB7XG4gICAgW2ZpZWxkTmFtZTogc3RyaW5nXTpcbiAgICAgIHwgRmllbGRQb2xpY3k8YW55PlxuICAgICAgfCBGaWVsZFJlYWRGdW5jdGlvbjxhbnk+O1xuICB9XG59O1xuXG5leHBvcnQgdHlwZSBLZXlBcmdzRnVuY3Rpb24gPSAoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLFxuICBjb250ZXh0OiB7XG4gICAgdHlwZW5hbWU6IHN0cmluZztcbiAgICBmaWVsZE5hbWU6IHN0cmluZztcbiAgICBmaWVsZDogRmllbGROb2RlIHwgbnVsbDtcbiAgICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICB9LFxuKSA9PiBLZXlTcGVjaWZpZXIgfCBmYWxzZSB8IFJldHVyblR5cGU8SWRHZXR0ZXI+O1xuXG50eXBlIEtleUFyZ3NSZXN1bHQgPSBFeGNsdWRlPFJldHVyblR5cGU8S2V5QXJnc0Z1bmN0aW9uPiwgS2V5U3BlY2lmaWVyPjtcblxuZXhwb3J0IHR5cGUgRmllbGRQb2xpY3k8XG4gIC8vIFRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiB1c2VkIHRvIHN0b3JlIHRoZSBmaWVsZCdzIGRhdGEgaW4gdGhlXG4gIC8vIGNhY2hlLiBNdXN0IGJlIEpTT04tc2VyaWFsaXphYmxlIGlmIHlvdSBwbGFuIHRvIHNlcmlhbGl6ZSB0aGUgcmVzdWx0XG4gIC8vIG9mIGNhY2hlLmV4dHJhY3QoKSB1c2luZyBKU09OLlxuICBURXhpc3RpbmcgPSBhbnksXG4gIC8vIFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBtZXJnZSBmdW5jdGlvbixcbiAgLy8gdHlwaWNhbGx5IG1hdGNoaW5nIHRoZSBHcmFwaFFMIHJlc3BvbnNlIGZvcm1hdCwgYnV0IHdpdGggUmVmZXJlbmNlXG4gIC8vIG9iamVjdHMgc3Vic3RpdHV0ZWQgZm9yIGFueSBpZGVudGlmaWFibGUgY2hpbGQgb2JqZWN0cy4gT2Z0ZW4gdGhlXG4gIC8vIHNhbWUgYXMgVEV4aXN0aW5nLCBidXQgbm90IG5lY2Vzc2FyaWx5LlxuICBUSW5jb21pbmcgPSBURXhpc3RpbmcsXG4gIC8vIFRoZSB0eXBlIHRoYXQgdGhlIHJlYWQgZnVuY3Rpb24gYWN0dWFsbHkgcmV0dXJucywgdXNpbmcgVEV4aXN0aW5nXG4gIC8vIGRhdGEgYW5kIG9wdGlvbnMuYXJncyBhcyBpbnB1dC4gVXN1YWxseSB0aGUgc2FtZSBhcyBUSW5jb21pbmcuXG4gIFRSZWFkUmVzdWx0ID0gVEluY29taW5nLFxuPiA9IHtcbiAga2V5QXJncz86IEtleVNwZWNpZmllciB8IEtleUFyZ3NGdW5jdGlvbiB8IGZhbHNlO1xuICByZWFkPzogRmllbGRSZWFkRnVuY3Rpb248VEV4aXN0aW5nLCBUUmVhZFJlc3VsdD47XG4gIG1lcmdlPzogRmllbGRNZXJnZUZ1bmN0aW9uPFRFeGlzdGluZywgVEluY29taW5nPiB8IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBTdG9yYWdlVHlwZSA9IFJlY29yZDxzdHJpbmcsIGFueT47XG5cbmZ1bmN0aW9uIGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoc3BlYzogRmllbGRTcGVjaWZpZXIpIHtcbiAgcmV0dXJuIHNwZWMuYXJncyAhPT0gdm9pZCAwID8gc3BlYy5hcmdzIDpcbiAgICBzcGVjLmZpZWxkID8gYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkKHNwZWMuZmllbGQsIHNwZWMudmFyaWFibGVzKSA6IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRGdW5jdGlvbk9wdGlvbnM8XG4gIFRBcmdzID0gUmVjb3JkPHN0cmluZywgYW55PixcbiAgVFZhcnMgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuPiB7XG4gIGFyZ3M6IFRBcmdzIHwgbnVsbDtcblxuICAvLyBUaGUgbmFtZSBvZiB0aGUgZmllbGQsIGVxdWFsIHRvIG9wdGlvbnMuZmllbGQubmFtZS52YWx1ZSB3aGVuXG4gIC8vIG9wdGlvbnMuZmllbGQgaXMgYXZhaWxhYmxlLiBVc2VmdWwgaWYgeW91IHJldXNlIHRoZSBzYW1lIGZ1bmN0aW9uIGZvclxuICAvLyBtdWx0aXBsZSBmaWVsZHMsIGFuZCB5b3UgbmVlZCB0byBrbm93IHdoaWNoIGZpZWxkIHlvdSdyZSBjdXJyZW50bHlcbiAgLy8gcHJvY2Vzc2luZy4gQWx3YXlzIGEgc3RyaW5nLCBldmVuIHdoZW4gb3B0aW9ucy5maWVsZCBpcyBudWxsLlxuICBmaWVsZE5hbWU6IHN0cmluZztcblxuICAvLyBUaGUgZnVsbCBmaWVsZCBrZXkgdXNlZCBpbnRlcm5hbGx5LCBpbmNsdWRpbmcgc2VyaWFsaXplZCBrZXkgYXJndW1lbnRzLlxuICBzdG9yZUZpZWxkTmFtZTogc3RyaW5nO1xuXG4gIC8vIFRoZSBGaWVsZE5vZGUgb2JqZWN0IHVzZWQgdG8gcmVhZCB0aGlzIGZpZWxkLiBVc2VmdWwgaWYgeW91IG5lZWQgdG9cbiAgLy8ga25vdyBhYm91dCBvdGhlciBhdHRyaWJ1dGVzIG9mIHRoZSBmaWVsZCwgc3VjaCBhcyBpdHMgZGlyZWN0aXZlcy4gVGhpc1xuICAvLyBvcHRpb24gd2lsbCBiZSBudWxsIHdoZW4gYSBzdHJpbmcgd2FzIHBhc3NlZCB0byBvcHRpb25zLnJlYWRGaWVsZC5cbiAgZmllbGQ6IEZpZWxkTm9kZSB8IG51bGw7XG5cbiAgdmFyaWFibGVzPzogVFZhcnM7XG5cbiAgLy8gVXRpbGl0aWVzIGZvciBkZWFsaW5nIHdpdGggeyBfX3JlZiB9IG9iamVjdHMuXG4gIGlzUmVmZXJlbmNlOiB0eXBlb2YgaXNSZWZlcmVuY2U7XG4gIHRvUmVmZXJlbmNlOiBUb1JlZmVyZW5jZUZ1bmN0aW9uO1xuXG4gIC8vIEEgaGFuZHkgcGxhY2UgdG8gcHV0IGZpZWxkLXNwZWNpZmljIGRhdGEgdGhhdCB5b3Ugd2FudCB0byBzdXJ2aXZlXG4gIC8vIGFjcm9zcyBtdWx0aXBsZSByZWFkIGZ1bmN0aW9uIGNhbGxzLiBVc2VmdWwgZm9yIGZpZWxkLWxldmVsIGNhY2hpbmcsXG4gIC8vIGlmIHlvdXIgcmVhZCBmdW5jdGlvbiBkb2VzIGFueSBleHBlbnNpdmUgd29yay5cbiAgc3RvcmFnZTogU3RvcmFnZVR5cGU7XG5cbiAgY2FjaGU6IEluTWVtb3J5Q2FjaGU7XG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIGZvciByZWFkaW5nIG90aGVyIGZpZWxkcyB3aXRoaW4gdGhlIGN1cnJlbnQgb2JqZWN0LlxuICAvLyBJZiBhIGZvcmVpZ24gb2JqZWN0IG9yIHJlZmVyZW5jZSBpcyBwcm92aWRlZCwgdGhlIGZpZWxkIHdpbGwgYmUgcmVhZFxuICAvLyBmcm9tIHRoYXQgb2JqZWN0IGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgb2JqZWN0LCBzbyB0aGlzIGZ1bmN0aW9uIGNhblxuICAvLyBiZSB1c2VkICh0b2dldGhlciB3aXRoIGlzUmVmZXJlbmNlKSB0byBleGFtaW5lIHRoZSBjYWNoZSBvdXRzaWRlIHRoZVxuICAvLyBjdXJyZW50IG9iamVjdC4gSWYgYSBGaWVsZE5vZGUgaXMgcGFzc2VkIGluc3RlYWQgb2YgYSBzdHJpbmcsIGFuZFxuICAvLyB0aGF0IEZpZWxkTm9kZSBoYXMgYXJndW1lbnRzLCB0aGUgc2FtZSBvcHRpb25zLnZhcmlhYmxlcyB3aWxsIGJlIHVzZWRcbiAgLy8gdG8gY29tcHV0ZSB0aGUgYXJndW1lbnQgdmFsdWVzLiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIGludm9rZVxuICAvLyBjdXN0b20gcmVhZCBmdW5jdGlvbnMgZm9yIG90aGVyIGZpZWxkcywgaWYgZGVmaW5lZC4gQWx3YXlzIHJldHVybnNcbiAgLy8gaW1tdXRhYmxlIGRhdGEgKGVuZm9yY2VkIHdpdGggT2JqZWN0LmZyZWV6ZSBpbiBkZXZlbG9wbWVudCkuXG4gIHJlYWRGaWVsZDogUmVhZEZpZWxkRnVuY3Rpb247XG5cbiAgLy8gUmV0dXJucyB0cnVlIGZvciBub24tbm9ybWFsaXplZCBTdG9yZU9iamVjdHMgYW5kIG5vbi1kYW5nbGluZ1xuICAvLyBSZWZlcmVuY2VzLCBpbmRpY2F0aW5nIHRoYXQgcmVhZEZpZWxkKG5hbWUsIG9iak9yUmVmKSBoYXMgYSBjaGFuY2Ugb2ZcbiAgLy8gd29ya2luZy4gVXNlZnVsIGZvciBmaWx0ZXJpbmcgb3V0IGRhbmdsaW5nIHJlZmVyZW5jZXMgZnJvbSBsaXN0cy5cbiAgY2FuUmVhZDogQ2FuUmVhZEZ1bmN0aW9uO1xuXG4gIC8vIEluc3RlYWQgb2YganVzdCBtZXJnaW5nIG9iamVjdHMgd2l0aCB7IC4uLmV4aXN0aW5nLCAuLi5pbmNvbWluZyB9LCB0aGlzXG4gIC8vIGhlbHBlciBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBtZXJnZSBvYmplY3RzIGluIGEgd2F5IHRoYXQgcmVzcGVjdHMgYW55XG4gIC8vIGN1c3RvbSBtZXJnZSBmdW5jdGlvbnMgZGVmaW5lZCBmb3IgdGhlaXIgZmllbGRzLlxuICBtZXJnZU9iamVjdHM6IE1lcmdlT2JqZWN0c0Z1bmN0aW9uO1xufVxuXG50eXBlIE1lcmdlT2JqZWN0c0Z1bmN0aW9uID0gPFQgZXh0ZW5kcyBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZT4oXG4gIGV4aXN0aW5nOiBULFxuICBpbmNvbWluZzogVCxcbikgPT4gVDtcblxuZXhwb3J0IHR5cGUgRmllbGRSZWFkRnVuY3Rpb248VEV4aXN0aW5nID0gYW55LCBUUmVhZFJlc3VsdCA9IFRFeGlzdGluZz4gPSAoXG4gIC8vIFdoZW4gcmVhZGluZyBhIGZpZWxkLCBvbmUgb2Z0ZW4gbmVlZHMgdG8ga25vdyBhYm91dCBhbnkgZXhpc3RpbmdcbiAgLy8gdmFsdWUgc3RvcmVkIGZvciB0aGF0IGZpZWxkLiBJZiB0aGUgZmllbGQgaXMgcmVhZCBiZWZvcmUgYW55IHZhbHVlXG4gIC8vIGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCB0aGlzIGV4aXN0aW5nIHBhcmFtZXRlciB3aWxsIGJlXG4gIC8vIHVuZGVmaW5lZCwgd2hpY2ggbWFrZXMgaXQgZWFzeSB0byB1c2UgYSBkZWZhdWx0IHBhcmFtZXRlciBleHByZXNzaW9uXG4gIC8vIHRvIHN1cHBseSB0aGUgaW5pdGlhbCB2YWx1ZS4gVGhpcyBwYXJhbWV0ZXIgaXMgcG9zaXRpb25hbCAocmF0aGVyXG4gIC8vIHRoYW4gb25lIG9mIHRoZSBuYW1lZCBvcHRpb25zKSBiZWNhdXNlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgZm9yIHRoZVxuICAvLyBkZXZlbG9wZXIgdG8gYW5ub3RhdGUgaXQgd2l0aCBhIHR5cGUsIHdpdGhvdXQgYWxzbyBoYXZpbmcgdG8gcHJvdmlkZVxuICAvLyBhIHdob2xlIG5ldyB0eXBlIGZvciB0aGUgb3B0aW9ucyBvYmplY3QuXG4gIGV4aXN0aW5nOiBTYWZlUmVhZG9ubHk8VEV4aXN0aW5nPiB8IHVuZGVmaW5lZCxcbiAgb3B0aW9uczogRmllbGRGdW5jdGlvbk9wdGlvbnMsXG4pID0+IFRSZWFkUmVzdWx0IHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBGaWVsZE1lcmdlRnVuY3Rpb248VEV4aXN0aW5nID0gYW55LCBUSW5jb21pbmcgPSBURXhpc3Rpbmc+ID0gKFxuICBleGlzdGluZzogU2FmZVJlYWRvbmx5PFRFeGlzdGluZz4gfCB1bmRlZmluZWQsXG4gIC8vIFRoZSBpbmNvbWluZyBwYXJhbWV0ZXIgbmVlZHMgdG8gYmUgcG9zaXRpb25hbCBhcyB3ZWxsLCBmb3IgdGhlIHNhbWVcbiAgLy8gcmVhc29ucyBkaXNjdXNzZWQgaW4gRmllbGRSZWFkRnVuY3Rpb24gYWJvdmUuXG4gIGluY29taW5nOiBTYWZlUmVhZG9ubHk8VEluY29taW5nPixcbiAgb3B0aW9uczogRmllbGRGdW5jdGlvbk9wdGlvbnMsXG4pID0+IFNhZmVSZWFkb25seTxURXhpc3Rpbmc+O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdERhdGFJZEZyb21PYmplY3QgPSAoXG4gIHsgX190eXBlbmFtZSwgaWQsIF9pZCB9OiBSZWFkb25seTxTdG9yZU9iamVjdD4sXG4gIGNvbnRleHQ/OiBLZXlGaWVsZHNDb250ZXh0LFxuKSA9PiB7XG4gIGlmICh0eXBlb2YgX190eXBlbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBjb250ZXh0LmtleU9iamVjdCA9XG4gICAgICAgICBpZCAhPT0gdm9pZCAwID8geyAgaWQgfSA6XG4gICAgICAgIF9pZCAhPT0gdm9pZCAwID8geyBfaWQgfSA6XG4gICAgICAgIHZvaWQgMDtcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gb2JqZWN0LmlkLCBmYWxsIGJhY2sgdG8gb2JqZWN0Ll9pZC5cbiAgICBpZiAoaWQgPT09IHZvaWQgMCkgaWQgPSBfaWQ7XG4gICAgaWYgKGlkICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBgJHtfX3R5cGVuYW1lfTokeyhcbiAgICAgICAgdHlwZW9mIGlkID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgIHR5cGVvZiBpZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgKSA/IGlkIDogSlNPTi5zdHJpbmdpZnkoaWQpfWA7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBudWxsS2V5RmllbGRzRm46IEtleUZpZWxkc0Z1bmN0aW9uID0gKCkgPT4gdm9pZCAwO1xuY29uc3Qgc2ltcGxlS2V5QXJnc0ZuOiBLZXlBcmdzRnVuY3Rpb24gPSAoX2FyZ3MsIGNvbnRleHQpID0+IGNvbnRleHQuZmllbGROYW1lO1xuXG4vLyBUaGVzZSBtZXJnZSBmdW5jdGlvbnMgY2FuIGJlIHNlbGVjdGVkIGJ5IHNwZWNpZnlpbmcgbWVyZ2U6dHJ1ZSBvclxuLy8gbWVyZ2U6ZmFsc2UgaW4gYSBmaWVsZCBwb2xpY3kuXG5jb25zdCBtZXJnZVRydWVGbjogRmllbGRNZXJnZUZ1bmN0aW9uPGFueT4gPVxuICAoZXhpc3RpbmcsIGluY29taW5nLCB7IG1lcmdlT2JqZWN0cyB9KSA9PiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKTtcbmNvbnN0IG1lcmdlRmFsc2VGbjogRmllbGRNZXJnZUZ1bmN0aW9uPGFueT4gPSAoXywgaW5jb21pbmcpID0+IGluY29taW5nO1xuXG5leHBvcnQgdHlwZSBQb3NzaWJsZVR5cGVzTWFwID0ge1xuICBbc3VwZXJ0eXBlOiBzdHJpbmddOiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBQb2xpY2llcyB7XG4gIHByaXZhdGUgdHlwZVBvbGljaWVzOiB7XG4gICAgW19fdHlwZW5hbWU6IHN0cmluZ106IHtcbiAgICAgIGtleUZuPzogS2V5RmllbGRzRnVuY3Rpb247XG4gICAgICBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbjxhbnk+O1xuICAgICAgZmllbGRzOiB7XG4gICAgICAgIFtmaWVsZE5hbWU6IHN0cmluZ106IHtcbiAgICAgICAgICBrZXlGbj86IEtleUFyZ3NGdW5jdGlvbjtcbiAgICAgICAgICByZWFkPzogRmllbGRSZWFkRnVuY3Rpb248YW55PjtcbiAgICAgICAgICBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbjxhbnk+O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBwcml2YXRlIHRvQmVBZGRlZDoge1xuICAgIFtfX3R5cGVuYW1lOiBzdHJpbmddOiBUeXBlUG9saWN5W107XG4gIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vIE1hcCBmcm9tIHN1YnR5cGUgbmFtZXMgdG8gc2V0cyBvZiBzdXBlcnR5cGUgbmFtZXMuIE5vdGUgdGhhdCB0aGlzXG4gIC8vIHJlcHJlc2VudGF0aW9uIGludmVydHMgdGhlIHN0cnVjdHVyZSBvZiBwb3NzaWJsZVR5cGVzICh3aG9zZSBrZXlzIGFyZVxuICAvLyBzdXBlcnR5cGVzIGFuZCB3aG9zZSB2YWx1ZXMgYXJlIGFycmF5cyBvZiBzdWJ0eXBlcykgYmVjYXVzZSBpdCB0ZW5kc1xuICAvLyB0byBiZSBtdWNoIG1vcmUgZWZmaWNpZW50IHRvIHNlYXJjaCB1cHdhcmRzIHRoYW4gZG93bndhcmRzLlxuICBwcml2YXRlIHN1cGVydHlwZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4oKTtcblxuICAvLyBBbnkgZnV6enkgc3VidHlwZXMgc3BlY2lmaWVkIGJ5IHBvc3NpYmxlVHlwZXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG9cbiAgLy8gUmVnRXhwIG9iamVjdHMgYW5kIHJlY29yZGVkIGhlcmUuIEV2ZXJ5IGtleSBvZiB0aGlzIG1hcCBjYW4gYWxzbyBiZVxuICAvLyBmb3VuZCBpbiBzdXBlcnR5cGVNYXAuIEluIG1hbnkgY2FzZXMgdGhpcyBNYXAgd2lsbCBiZSBlbXB0eSwgd2hpY2hcbiAgLy8gbWVhbnMgbm8gZnV6enkgc3VidHlwZSBjaGVja2luZyB3aWxsIGhhcHBlbiBpbiBmcmFnbWVudE1hdGNoZXMuXG4gIHByaXZhdGUgZnV6enlTdWJ0eXBlcyA9IG5ldyBNYXA8c3RyaW5nLCBSZWdFeHA+KCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGNhY2hlOiBJbk1lbW9yeUNhY2hlO1xuXG4gIHB1YmxpYyByZWFkb25seSByb290SWRzQnlUeXBlbmFtZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHB1YmxpYyByZWFkb25seSByb290VHlwZW5hbWVzQnlJZDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IHVzaW5nUG9zc2libGVUeXBlcyA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnOiB7XG4gICAgY2FjaGU6IEluTWVtb3J5Q2FjaGU7XG4gICAgZGF0YUlkRnJvbU9iamVjdD86IEtleUZpZWxkc0Z1bmN0aW9uO1xuICAgIHBvc3NpYmxlVHlwZXM/OiBQb3NzaWJsZVR5cGVzTWFwO1xuICAgIHR5cGVQb2xpY2llcz86IFR5cGVQb2xpY2llcztcbiAgfSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZGF0YUlkRnJvbU9iamVjdDogZGVmYXVsdERhdGFJZEZyb21PYmplY3QsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNvbmZpZy5jYWNoZTtcblxuICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiUXVlcnlcIik7XG4gICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJNdXRhdGlvblwiKTtcbiAgICB0aGlzLnNldFJvb3RUeXBlbmFtZShcIlN1YnNjcmlwdGlvblwiKTtcblxuICAgIGlmIChjb25maWcucG9zc2libGVUeXBlcykge1xuICAgICAgdGhpcy5hZGRQb3NzaWJsZVR5cGVzKGNvbmZpZy5wb3NzaWJsZVR5cGVzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnR5cGVQb2xpY2llcykge1xuICAgICAgdGhpcy5hZGRUeXBlUG9saWNpZXMoY29uZmlnLnR5cGVQb2xpY2llcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlkZW50aWZ5KFxuICAgIG9iamVjdDogU3RvcmVPYmplY3QsXG4gICAgc2VsZWN0aW9uU2V0PzogU2VsZWN0aW9uU2V0Tm9kZSxcbiAgICBmcmFnbWVudE1hcD86IEZyYWdtZW50TWFwLFxuICApOiBbc3RyaW5nPywgU3RvcmVPYmplY3Q/XSB7XG4gICAgLy8gVE9ETyBVc2UgYW4gQWxpYXNNYXAgaGVyZT9cbiAgICBjb25zdCB0eXBlbmFtZSA9IHNlbGVjdGlvblNldCAmJiBmcmFnbWVudE1hcFxuICAgICAgPyBnZXRUeXBlbmFtZUZyb21SZXN1bHQob2JqZWN0LCBzZWxlY3Rpb25TZXQsIGZyYWdtZW50TWFwKVxuICAgICAgOiBvYmplY3QuX190eXBlbmFtZTtcblxuICAgIC8vIEl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byB3cml0ZSByb290IFF1ZXJ5IGZpZWxkcyB3aXRoXG4gICAgLy8gd3JpdGVGcmFnbWVudCwgdXNpbmcgeyBfX3R5cGVuYW1lOiBcIlF1ZXJ5XCIsIC4uLiB9IGFzIHRoZSBkYXRhLCBidXRcbiAgICAvLyBpdCBkb2VzIG5vdCBtYWtlIHNlbnNlIHRvIGFsbG93IHRoZSBzYW1lIGlkZW50aWZpY2F0aW9uIGJlaGF2aW9yXG4gICAgLy8gZm9yIHRoZSBNdXRhdGlvbiBhbmQgU3Vic2NyaXB0aW9uIHR5cGVzLCBzaW5jZSBhcHBsaWNhdGlvbiBjb2RlXG4gICAgLy8gc2hvdWxkIG5ldmVyIGJlIHdyaXRpbmcgZGlyZWN0bHkgdG8gKG9yIHJlYWRpbmcgZGlyZWN0bHkgZnJvbSlcbiAgICAvLyB0aG9zZSByb290IG9iamVjdHMuXG4gICAgaWYgKHR5cGVuYW1lID09PSB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkLlJPT1RfUVVFUlkpIHtcbiAgICAgIHJldHVybiBbXCJST09UX1FVRVJZXCJdO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHQ6IEtleUZpZWxkc0NvbnRleHQgPSB7XG4gICAgICB0eXBlbmFtZSxcbiAgICAgIHNlbGVjdGlvblNldCxcbiAgICAgIGZyYWdtZW50TWFwLFxuICAgIH07XG5cbiAgICBsZXQgaWQ6IEtleUZpZWxkc1Jlc3VsdDtcblxuICAgIGNvbnN0IHBvbGljeSA9IHR5cGVuYW1lICYmIHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSk7XG4gICAgbGV0IGtleUZuID0gcG9saWN5ICYmIHBvbGljeS5rZXlGbiB8fCB0aGlzLmNvbmZpZy5kYXRhSWRGcm9tT2JqZWN0O1xuICAgIHdoaWxlIChrZXlGbikge1xuICAgICAgY29uc3Qgc3BlY2lmaWVyT3JJZCA9IGtleUZuKG9iamVjdCwgY29udGV4dCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzcGVjaWZpZXJPcklkKSkge1xuICAgICAgICBrZXlGbiA9IGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllcihzcGVjaWZpZXJPcklkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID0gc3BlY2lmaWVyT3JJZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWQgPSBpZCA/IFN0cmluZyhpZCkgOiB2b2lkIDA7XG4gICAgcmV0dXJuIGNvbnRleHQua2V5T2JqZWN0ID8gW2lkLCBjb250ZXh0LmtleU9iamVjdF0gOiBbaWRdO1xuICB9XG5cbiAgcHVibGljIGFkZFR5cGVQb2xpY2llcyh0eXBlUG9saWNpZXM6IFR5cGVQb2xpY2llcykge1xuICAgIE9iamVjdC5rZXlzKHR5cGVQb2xpY2llcykuZm9yRWFjaCh0eXBlbmFtZSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHF1ZXJ5VHlwZSxcbiAgICAgICAgbXV0YXRpb25UeXBlLFxuICAgICAgICBzdWJzY3JpcHRpb25UeXBlLFxuICAgICAgICAuLi5pbmNvbWluZ1xuICAgICAgfSA9IHR5cGVQb2xpY2llc1t0eXBlbmFtZV07XG5cbiAgICAgIC8vIFRob3VnaCB7cXVlcnksbXV0YXRpb24sc3Vic2NyaXB0aW9ufVR5cGUgY29uZmlndXJhdGlvbnMgYXJlIHJhcmUsXG4gICAgICAvLyBpdCdzIGltcG9ydGFudCB0byBjYWxsIHNldFJvb3RUeXBlbmFtZSBhcyBlYXJseSBhcyBwb3NzaWJsZSxcbiAgICAgIC8vIHNpbmNlIHRoZXNlIGNvbmZpZ3VyYXRpb25zIHNob3VsZCBhcHBseSBjb25zaXN0ZW50bHkgZm9yIHRoZVxuICAgICAgLy8gZW50aXJlIGxpZmV0aW1lIG9mIHRoZSBjYWNoZS4gQWxzbywgc2luY2Ugb25seSBvbmUgX190eXBlbmFtZSBjYW5cbiAgICAgIC8vIHF1YWxpZnkgYXMgb25lIG9mIHRoZXNlIHJvb3QgdHlwZXMsIHRoZXNlIHRocmVlIHByb3BlcnRpZXMgY2Fubm90XG4gICAgICAvLyBiZSBpbmhlcml0ZWQsIHVubGlrZSB0aGUgcmVzdCBvZiB0aGUgaW5jb21pbmcgcHJvcGVydGllcy4gVGhhdFxuICAgICAgLy8gcmVzdHJpY3Rpb24gaXMgY29udmVuaWVudCwgYmVjYXVzZSB0aGUgcHVycG9zZSBvZiB0aGlzLnRvQmVBZGRlZFxuICAgICAgLy8gaXMgdG8gZGVsYXkgdGhlIHByb2Nlc3Npbmcgb2YgdHlwZS9maWVsZCBwb2xpY2llcyB1bnRpbCB0aGUgZmlyc3RcbiAgICAgIC8vIHRpbWUgdGhleSdyZSB1c2VkLCBhbGxvd2luZyBwb2xpY2llcyB0byBiZSBhZGRlZCBpbiBhbnkgb3JkZXIgYXNcbiAgICAgIC8vIGxvbmcgYXMgYWxsIHJlbGV2YW50IHBvbGljaWVzIChpbmNsdWRpbmcgcG9saWNpZXMgZm9yIHN1cGVydHlwZXMpXG4gICAgICAvLyBoYXZlIGJlZW4gYWRkZWQgYnkgdGhlIHRpbWUgYSBnaXZlbiBwb2xpY3kgaXMgdXNlZCBmb3IgdGhlIGZpcnN0XG4gICAgICAvLyB0aW1lLiBJbiBvdGhlciB3b3Jkcywgc2luY2UgaW5oZXJpdGFuY2UgZG9lc24ndCBtYXR0ZXIgZm9yIHRoZXNlXG4gICAgICAvLyBwcm9wZXJ0aWVzLCB0aGVyZSdzIGFsc28gbm8gbmVlZCB0byBkZWxheSB0aGVpciBwcm9jZXNzaW5nIHVzaW5nXG4gICAgICAvLyB0aGUgdGhpcy50b0JlQWRkZWQgcXVldWUuXG4gICAgICBpZiAocXVlcnlUeXBlKSB0aGlzLnNldFJvb3RUeXBlbmFtZShcIlF1ZXJ5XCIsIHR5cGVuYW1lKTtcbiAgICAgIGlmIChtdXRhdGlvblR5cGUpIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiTXV0YXRpb25cIiwgdHlwZW5hbWUpO1xuICAgICAgaWYgKHN1YnNjcmlwdGlvblR5cGUpIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiU3Vic2NyaXB0aW9uXCIsIHR5cGVuYW1lKTtcblxuICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMudG9CZUFkZGVkLCB0eXBlbmFtZSkpIHtcbiAgICAgICAgdGhpcy50b0JlQWRkZWRbdHlwZW5hbWVdLnB1c2goaW5jb21pbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b0JlQWRkZWRbdHlwZW5hbWVdID0gW2luY29taW5nXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVHlwZVBvbGljeSh0eXBlbmFtZTogc3RyaW5nLCBpbmNvbWluZzogVHlwZVBvbGljeSkge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5nZXRUeXBlUG9saWN5KHR5cGVuYW1lKTtcbiAgICBjb25zdCB7IGtleUZpZWxkcywgZmllbGRzIH0gPSBpbmNvbWluZztcblxuICAgIGZ1bmN0aW9uIHNldE1lcmdlKFxuICAgICAgZXhpc3Rpbmc6IHsgbWVyZ2U/OiBGaWVsZE1lcmdlRnVuY3Rpb24gfCBib29sZWFuOyB9LFxuICAgICAgbWVyZ2U/OiBGaWVsZE1lcmdlRnVuY3Rpb24gfCBib29sZWFuLFxuICAgICkge1xuICAgICAgZXhpc3RpbmcubWVyZ2UgPVxuICAgICAgICB0eXBlb2YgbWVyZ2UgPT09IFwiZnVuY3Rpb25cIiA/IG1lcmdlIDpcbiAgICAgICAgLy8gUGFzcyBtZXJnZTp0cnVlIGFzIGEgc2hvcnRoYW5kIGZvciBhIG1lcmdlIGltcGxlbWVudGF0aW9uXG4gICAgICAgIC8vIHRoYXQgcmV0dXJucyBvcHRpb25zLm1lcmdlT2JqZWN0cyhleGlzdGluZywgaW5jb21pbmcpLlxuICAgICAgICBtZXJnZSA9PT0gdHJ1ZSA/IG1lcmdlVHJ1ZUZuIDpcbiAgICAgICAgLy8gUGFzcyBtZXJnZTpmYWxzZSB0byBtYWtlIGluY29taW5nIGFsd2F5cyByZXBsYWNlIGV4aXN0aW5nXG4gICAgICAgIC8vIHdpdGhvdXQgYW55IHdhcm5pbmdzIGFib3V0IGRhdGEgY2xvYmJlcmluZy5cbiAgICAgICAgbWVyZ2UgPT09IGZhbHNlID8gbWVyZ2VGYWxzZUZuIDpcbiAgICAgICAgZXhpc3RpbmcubWVyZ2U7XG4gICAgfVxuXG4gICAgLy8gVHlwZSBwb2xpY2llcyBjYW4gZGVmaW5lIG1lcmdlIGZ1bmN0aW9ucywgYXMgYW4gYWx0ZXJuYXRpdmUgdG9cbiAgICAvLyB1c2luZyBmaWVsZCBwb2xpY2llcyB0byBtZXJnZSBjaGlsZCBvYmplY3RzLlxuICAgIHNldE1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZy5tZXJnZSk7XG5cbiAgICBleGlzdGluZy5rZXlGbiA9XG4gICAgICAvLyBQYXNzIGZhbHNlIHRvIGRpc2FibGUgbm9ybWFsaXphdGlvbiBmb3IgdGhpcyB0eXBlbmFtZS5cbiAgICAgIGtleUZpZWxkcyA9PT0gZmFsc2UgPyBudWxsS2V5RmllbGRzRm4gOlxuICAgICAgLy8gUGFzcyBhbiBhcnJheSBvZiBzdHJpbmdzIHRvIHVzZSB0aG9zZSBmaWVsZHMgdG8gY29tcHV0ZSBhXG4gICAgICAvLyBjb21wb3NpdGUgSUQgZm9yIG9iamVjdHMgb2YgdGhpcyB0eXBlbmFtZS5cbiAgICAgIEFycmF5LmlzQXJyYXkoa2V5RmllbGRzKSA/IGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllcihrZXlGaWVsZHMpIDpcbiAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiB0byB0YWtlIGZ1bGwgY29udHJvbCBvdmVyIGlkZW50aWZpY2F0aW9uLlxuICAgICAgdHlwZW9mIGtleUZpZWxkcyA9PT0gXCJmdW5jdGlvblwiID8ga2V5RmllbGRzIDpcbiAgICAgIC8vIExlYXZlIGV4aXN0aW5nLmtleUZuIHVuY2hhbmdlZCBpZiBhYm92ZSBjYXNlcyBmYWlsLlxuICAgICAgZXhpc3Rpbmcua2V5Rm47XG5cbiAgICBpZiAoZmllbGRzKSB7XG4gICAgICBPYmplY3Qua2V5cyhmaWVsZHMpLmZvckVhY2goZmllbGROYW1lID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUsIHRydWUpITtcbiAgICAgICAgY29uc3QgaW5jb21pbmcgPSBmaWVsZHNbZmllbGROYW1lXTtcblxuICAgICAgICBpZiAodHlwZW9mIGluY29taW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBleGlzdGluZy5yZWFkID0gaW5jb21pbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgeyBrZXlBcmdzLCByZWFkLCBtZXJnZSB9ID0gaW5jb21pbmc7XG5cbiAgICAgICAgICBleGlzdGluZy5rZXlGbiA9XG4gICAgICAgICAgICAvLyBQYXNzIGZhbHNlIHRvIGRpc2FibGUgYXJndW1lbnQtYmFzZWQgZGlmZmVyZW50aWF0aW9uIG9mXG4gICAgICAgICAgICAvLyBmaWVsZCBpZGVudGl0aWVzLlxuICAgICAgICAgICAga2V5QXJncyA9PT0gZmFsc2UgPyBzaW1wbGVLZXlBcmdzRm4gOlxuICAgICAgICAgICAgLy8gUGFzcyBhbiBhcnJheSBvZiBzdHJpbmdzIHRvIHVzZSBuYW1lZCBhcmd1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNvbXB1dGUgYSBjb21wb3NpdGUgaWRlbnRpdHkgZm9yIHRoZSBmaWVsZC5cbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoa2V5QXJncykgPyBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKGtleUFyZ3MpIDpcbiAgICAgICAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiB0byB0YWtlIGZ1bGwgY29udHJvbCBvdmVyIGZpZWxkIGlkZW50aXR5LlxuICAgICAgICAgICAgdHlwZW9mIGtleUFyZ3MgPT09IFwiZnVuY3Rpb25cIiA/IGtleUFyZ3MgOlxuICAgICAgICAgICAgLy8gTGVhdmUgZXhpc3Rpbmcua2V5Rm4gdW5jaGFuZ2VkIGlmIGFib3ZlIGNhc2VzIGZhaWwuXG4gICAgICAgICAgICBleGlzdGluZy5rZXlGbjtcblxuICAgICAgICAgIGlmICh0eXBlb2YgcmVhZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBleGlzdGluZy5yZWFkID0gcmVhZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRNZXJnZShleGlzdGluZywgbWVyZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nLnJlYWQgJiYgZXhpc3RpbmcubWVyZ2UpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGJvdGggYSByZWFkIGFuZCBhIG1lcmdlIGZ1bmN0aW9uLCBhc3N1bWVcbiAgICAgICAgICAvLyBrZXlBcmdzOmZhbHNlLCBiZWNhdXNlIHJlYWQgYW5kIG1lcmdlIHRvZ2V0aGVyIGNhbiB0YWtlXG4gICAgICAgICAgLy8gcmVzcG9uc2liaWxpdHkgZm9yIGludGVycHJldGluZyBhcmd1bWVudHMgaW4gYW5kIG91dC4gVGhpc1xuICAgICAgICAgIC8vIGRlZmF1bHQgYXNzdW1wdGlvbiBjYW4gYWx3YXlzIGJlIG92ZXJyaWRkZW4gYnkgc3BlY2lmeWluZ1xuICAgICAgICAgIC8vIGtleUFyZ3MgZXhwbGljaXRseSBpbiB0aGUgRmllbGRQb2xpY3kuXG4gICAgICAgICAgZXhpc3Rpbmcua2V5Rm4gPSBleGlzdGluZy5rZXlGbiB8fCBzaW1wbGVLZXlBcmdzRm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0Um9vdFR5cGVuYW1lKFxuICAgIHdoaWNoOiBcIlF1ZXJ5XCIgfCBcIk11dGF0aW9uXCIgfCBcIlN1YnNjcmlwdGlvblwiLFxuICAgIHR5cGVuYW1lOiBzdHJpbmcgPSB3aGljaCxcbiAgKSB7XG4gICAgY29uc3Qgcm9vdElkID0gXCJST09UX1wiICsgd2hpY2gudG9VcHBlckNhc2UoKTtcbiAgICBjb25zdCBvbGQgPSB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkW3Jvb3RJZF07XG4gICAgaWYgKHR5cGVuYW1lICE9PSBvbGQpIHtcbiAgICAgIGludmFyaWFudCghb2xkIHx8IG9sZCA9PT0gd2hpY2gsIGBDYW5ub3QgY2hhbmdlIHJvb3QgJHt3aGljaH0gX190eXBlbmFtZSBtb3JlIHRoYW4gb25jZWApO1xuICAgICAgLy8gRmlyc3QsIGRlbGV0ZSBhbnkgb2xkIF9fdHlwZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcm9vdElkIGZyb21cbiAgICAgIC8vIHJvb3RJZHNCeVR5cGVuYW1lLlxuICAgICAgaWYgKG9sZCkgZGVsZXRlIHRoaXMucm9vdElkc0J5VHlwZW5hbWVbb2xkXTtcbiAgICAgIC8vIE5vdyBtYWtlIHRoaXMgdGhlIG9ubHkgX190eXBlbmFtZSB0aGF0IG1hcHMgdG8gdGhpcyByb290SWQuXG4gICAgICB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lW3R5cGVuYW1lXSA9IHJvb3RJZDtcbiAgICAgIC8vIEZpbmFsbHksIHVwZGF0ZSB0aGUgX190eXBlbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyByb290SWQuXG4gICAgICB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkW3Jvb3RJZF0gPSB0eXBlbmFtZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWRkUG9zc2libGVUeXBlcyhwb3NzaWJsZVR5cGVzOiBQb3NzaWJsZVR5cGVzTWFwKSB7XG4gICAgKHRoaXMudXNpbmdQb3NzaWJsZVR5cGVzIGFzIGJvb2xlYW4pID0gdHJ1ZTtcbiAgICBPYmplY3Qua2V5cyhwb3NzaWJsZVR5cGVzKS5mb3JFYWNoKHN1cGVydHlwZSA9PiB7XG4gICAgICAvLyBNYWtlIHN1cmUgYWxsIHR5cGVzIGhhdmUgYW4gZW50cnkgaW4gdGhpcy5zdXBlcnR5cGVNYXAsIGV2ZW4gaWZcbiAgICAgIC8vIHRoZWlyIHN1cGVydHlwZSBzZXQgaXMgZW1wdHksIHNvIHdlIGNhbiByZXR1cm4gZmFsc2UgaW1tZWRpYXRlbHlcbiAgICAgIC8vIGZyb20gcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzIGZvciB1bmtub3duIHN1cGVydHlwZXMuXG4gICAgICB0aGlzLmdldFN1cGVydHlwZVNldChzdXBlcnR5cGUsIHRydWUpO1xuXG4gICAgICBwb3NzaWJsZVR5cGVzW3N1cGVydHlwZV0uZm9yRWFjaChzdWJ0eXBlID0+IHtcbiAgICAgICAgdGhpcy5nZXRTdXBlcnR5cGVTZXQoc3VidHlwZSwgdHJ1ZSkhLmFkZChzdXBlcnR5cGUpO1xuICAgICAgICBjb25zdCBtYXRjaCA9IHN1YnR5cGUubWF0Y2goVHlwZU9yRmllbGROYW1lUmVnRXhwKTtcbiAgICAgICAgaWYgKCFtYXRjaCB8fCBtYXRjaFswXSAhPT0gc3VidHlwZSkge1xuICAgICAgICAgIC8vIFRPRE8gRG9uJ3QgaW50ZXJwcmV0IGp1c3QgYW55IGludmFsaWQgdHlwZW5hbWUgYXMgYSBSZWdFeHAuXG4gICAgICAgICAgdGhpcy5mdXp6eVN1YnR5cGVzLnNldChzdWJ0eXBlLCBuZXcgUmVnRXhwKHN1YnR5cGUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldFR5cGVQb2xpY3kodHlwZW5hbWU6IHN0cmluZyk6IFBvbGljaWVzW1widHlwZVBvbGljaWVzXCJdW3N0cmluZ10ge1xuICAgIGlmICghaGFzT3duLmNhbGwodGhpcy50eXBlUG9saWNpZXMsIHR5cGVuYW1lKSkge1xuICAgICAgY29uc3QgcG9saWN5OiBQb2xpY2llc1tcInR5cGVQb2xpY2llc1wiXVtzdHJpbmddID1cbiAgICAgICAgdGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIHBvbGljeS5maWVsZHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICAvLyBXaGVuIHRoZSBUeXBlUG9saWN5IGZvciB0eXBlbmFtZSBpcyBmaXJzdCBhY2Nlc3NlZCwgaW5zdGVhZCBvZlxuICAgICAgLy8gc3RhcnRpbmcgd2l0aCBhbiBlbXB0eSBwb2xpY3kgb2JqZWN0LCBpbmhlcml0IGFueSBwcm9wZXJ0aWVzIG9yXG4gICAgICAvLyBmaWVsZHMgZnJvbSB0aGUgdHlwZSBwb2xpY2llcyBvZiB0aGUgc3VwZXJ0eXBlcyBvZiB0eXBlbmFtZS5cbiAgICAgIC8vXG4gICAgICAvLyBBbnkgcHJvcGVydGllcyBvciBmaWVsZHMgZGVmaW5lZCBleHBsaWNpdGx5IHdpdGhpbiB0aGUgVHlwZVBvbGljeVxuICAgICAgLy8gZm9yIHR5cGVuYW1lIHdpbGwgdGFrZSBwcmVjZWRlbmNlLCBhbmQgaWYgdGhlcmUgYXJlIG11bHRpcGxlXG4gICAgICAvLyBzdXBlcnR5cGVzLCB0aGUgcHJvcGVydGllcyBvZiBwb2xpY2llcyB3aG9zZSB0eXBlcyB3ZXJlIGFkZGVkXG4gICAgICAvLyBsYXRlciB2aWEgYWRkUG9zc2libGVUeXBlcyB3aWxsIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRob3NlIG9mXG4gICAgICAvLyBlYXJsaWVyIHN1cGVydHlwZXMuIFRPRE8gUGVyaGFwcyB3ZSBzaG91bGQgd2FybiBhYm91dCB0aGVzZVxuICAgICAgLy8gY29uZmxpY3RzIGluIGRldmVsb3BtZW50LCBhbmQgcmVjb21tZW5kIGRlZmluaW5nIHRoZSBwcm9wZXJ0eVxuICAgICAgLy8gZXhwbGljaXRseSBpbiB0aGUgc3VidHlwZSBwb2xpY3k/XG4gICAgICAvL1xuICAgICAgLy8gRmllbGQgcG9saWN5IGluaGVyaXRhbmNlIGlzIGF0b21pYy9zaGFsbG93OiB5b3UgY2FuJ3QgaW5oZXJpdCBhXG4gICAgICAvLyBmaWVsZCBwb2xpY3kgYW5kIHRoZW4gb3ZlcnJpZGUganVzdCBpdHMgcmVhZCBmdW5jdGlvbiwgc2luY2UgcmVhZFxuICAgICAgLy8gYW5kIG1lcmdlIGZ1bmN0aW9ucyBvZnRlbiBuZWVkIHRvIGNvb3BlcmF0ZSwgc28gY2hhbmdpbmcgb25seSBvbmVcbiAgICAgIC8vIG9mIHRoZW0gd291bGQgYmUgYSByZWNpcGUgZm9yIGluY29uc2lzdGVuY3kuXG4gICAgICAvL1xuICAgICAgLy8gT25jZSB0aGUgVHlwZVBvbGljeSBmb3IgdHlwZW5hbWUgaGFzIGJlZW4gYWNjZXNzZWQsIGl0c1xuICAgICAgLy8gcHJvcGVydGllcyBjYW4gc3RpbGwgYmUgdXBkYXRlZCBkaXJlY3RseSB1c2luZyBhZGRUeXBlUG9saWNpZXMsXG4gICAgICAvLyBidXQgZnV0dXJlIGNoYW5nZXMgdG8gc3VwZXJ0eXBlIHBvbGljaWVzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpblxuICAgICAgLy8gdGhpcyBwb2xpY3ksIGJlY2F1c2UgdGhpcyBjb2RlIHJ1bnMgYXQgbW9zdCBvbmNlIHBlciB0eXBlbmFtZS5cbiAgICAgIGNvbnN0IHN1cGVydHlwZXMgPSB0aGlzLnN1cGVydHlwZU1hcC5nZXQodHlwZW5hbWUpO1xuICAgICAgaWYgKHN1cGVydHlwZXMgJiYgc3VwZXJ0eXBlcy5zaXplKSB7XG4gICAgICAgIHN1cGVydHlwZXMuZm9yRWFjaChzdXBlcnR5cGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgZmllbGRzLCAuLi5yZXN0IH0gPSB0aGlzLmdldFR5cGVQb2xpY3koc3VwZXJ0eXBlKTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHBvbGljeSwgcmVzdCk7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihwb2xpY3kuZmllbGRzLCBmaWVsZHMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbmJveCA9IHRoaXMudG9CZUFkZGVkW3R5cGVuYW1lXTtcbiAgICBpZiAoaW5ib3ggJiYgaW5ib3gubGVuZ3RoKSB7XG4gICAgICB0aGlzLnVwZGF0ZVR5cGVQb2xpY3kodHlwZW5hbWUsIGNvbXBhY3QoLi4uaW5ib3guc3BsaWNlKDApKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudHlwZVBvbGljaWVzW3R5cGVuYW1lXTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RmllbGRQb2xpY3koXG4gICAgdHlwZW5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBmaWVsZE5hbWU6IHN0cmluZyxcbiAgICBjcmVhdGVJZk1pc3Npbmc6IGJvb2xlYW4sXG4gICk6IHtcbiAgICBrZXlGbj86IEtleUFyZ3NGdW5jdGlvbjtcbiAgICByZWFkPzogRmllbGRSZWFkRnVuY3Rpb248YW55PjtcbiAgICBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbjxhbnk+O1xuICB9IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodHlwZW5hbWUpIHtcbiAgICAgIGNvbnN0IGZpZWxkUG9saWNpZXMgPSB0aGlzLmdldFR5cGVQb2xpY3kodHlwZW5hbWUpLmZpZWxkcztcbiAgICAgIHJldHVybiBmaWVsZFBvbGljaWVzW2ZpZWxkTmFtZV0gfHwgKFxuICAgICAgICBjcmVhdGVJZk1pc3NpbmcgJiYgKGZpZWxkUG9saWNpZXNbZmllbGROYW1lXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFN1cGVydHlwZVNldChcbiAgICBzdWJ0eXBlOiBzdHJpbmcsXG4gICAgY3JlYXRlSWZNaXNzaW5nOiBib29sZWFuLFxuICApOiBTZXQ8c3RyaW5nPiB8IHVuZGVmaW5lZCB7XG4gICAgbGV0IHN1cGVydHlwZVNldCA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldChzdWJ0eXBlKTtcbiAgICBpZiAoIXN1cGVydHlwZVNldCAmJiBjcmVhdGVJZk1pc3NpbmcpIHtcbiAgICAgIHRoaXMuc3VwZXJ0eXBlTWFwLnNldChzdWJ0eXBlLCBzdXBlcnR5cGVTZXQgPSBuZXcgU2V0PHN0cmluZz4oKSk7XG4gICAgfVxuICAgIHJldHVybiBzdXBlcnR5cGVTZXQ7XG4gIH1cblxuICBwdWJsaWMgZnJhZ21lbnRNYXRjaGVzKFxuICAgIGZyYWdtZW50OiBJbmxpbmVGcmFnbWVudE5vZGUgfCBGcmFnbWVudERlZmluaXRpb25Ob2RlLFxuICAgIHR5cGVuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgcmVzdWx0PzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApOiBib29sZWFuIHtcbiAgICBpZiAoIWZyYWdtZW50LnR5cGVDb25kaXRpb24pIHJldHVybiB0cnVlO1xuXG4gICAgLy8gSWYgdGhlIGZyYWdtZW50IGhhcyBhIHR5cGUgY29uZGl0aW9uIGJ1dCB0aGUgb2JqZWN0IHdlJ3JlIG1hdGNoaW5nXG4gICAgLy8gYWdhaW5zdCBkb2VzIG5vdCBoYXZlIGEgX190eXBlbmFtZSwgdGhlIGZyYWdtZW50IGNhbm5vdCBtYXRjaC5cbiAgICBpZiAoIXR5cGVuYW1lKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBzdXBlcnR5cGUgPSBmcmFnbWVudC50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWU7XG4gICAgLy8gQ29tbW9uIGNhc2U6IGZyYWdtZW50IHR5cGUgY29uZGl0aW9uIGFuZCBfX3R5cGVuYW1lIGFyZSB0aGUgc2FtZS5cbiAgICBpZiAodHlwZW5hbWUgPT09IHN1cGVydHlwZSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgJiZcbiAgICAgICAgdGhpcy5zdXBlcnR5cGVNYXAuaGFzKHN1cGVydHlwZSkpIHtcbiAgICAgIGNvbnN0IHR5cGVuYW1lU3VwZXJ0eXBlU2V0ID0gdGhpcy5nZXRTdXBlcnR5cGVTZXQodHlwZW5hbWUsIHRydWUpITtcbiAgICAgIGNvbnN0IHdvcmtRdWV1ZSA9IFt0eXBlbmFtZVN1cGVydHlwZVNldF07XG4gICAgICBjb25zdCBtYXliZUVucXVldWUgPSAoc3VidHlwZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1cGVydHlwZVNldCA9IHRoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1YnR5cGUsIGZhbHNlKTtcbiAgICAgICAgaWYgKHN1cGVydHlwZVNldCAmJlxuICAgICAgICAgICAgc3VwZXJ0eXBlU2V0LnNpemUgJiZcbiAgICAgICAgICAgIHdvcmtRdWV1ZS5pbmRleE9mKHN1cGVydHlwZVNldCkgPCAwKSB7XG4gICAgICAgICAgd29ya1F1ZXVlLnB1c2goc3VwZXJ0eXBlU2V0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayBmdXp6eSBzdWJ0eXBlcyBvbmx5IGlmIHdlIGVuY291bnRlcmVkIGZ1enp5XG4gICAgICAvLyBzdWJ0eXBlIHN0cmluZ3MgaW4gYWRkUG9zc2libGVUeXBlcywgYW5kIG9ubHkgd2hpbGUgd3JpdGluZyB0b1xuICAgICAgLy8gdGhlIGNhY2hlLCBzaW5jZSB0aGF0J3Mgd2hlbiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0IGdpdmVzIGFcbiAgICAgIC8vIHN0cm9uZyBzaWduYWwgb2YgZnJhZ21lbnQgbWF0Y2hpbmcuIFRoZSBTdG9yZVJlYWRlciBjbGFzcyBjYWxsc1xuICAgICAgLy8gcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzIHdpdGhvdXQgcGFzc2luZyBhIHJlc3VsdCBvYmplY3QsIHNvXG4gICAgICAvLyBuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgaXMgYWx3YXlzIGZhbHNlIHdoaWxlIHJlYWRpbmcuXG4gICAgICBsZXQgbmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzID0gISEocmVzdWx0ICYmIHRoaXMuZnV6enlTdWJ0eXBlcy5zaXplKTtcbiAgICAgIGxldCBjaGVja2luZ0Z1enp5U3VidHlwZXMgPSBmYWxzZTtcblxuICAgICAgLy8gSXQncyBpbXBvcnRhbnQgdG8ga2VlcCBldmFsdWF0aW5nIHdvcmtRdWV1ZS5sZW5ndGggZWFjaCB0aW1lIHRocm91Z2hcbiAgICAgIC8vIHRoZSBsb29wLCBiZWNhdXNlIHRoZSBxdWV1ZSBjYW4gZ3JvdyB3aGlsZSB3ZSdyZSBpdGVyYXRpbmcgb3ZlciBpdC5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ya1F1ZXVlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IHN1cGVydHlwZVNldCA9IHdvcmtRdWV1ZVtpXTtcblxuICAgICAgICBpZiAoc3VwZXJ0eXBlU2V0LmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgaWYgKCF0eXBlbmFtZVN1cGVydHlwZVNldC5oYXMoc3VwZXJ0eXBlKSkge1xuICAgICAgICAgICAgaWYgKGNoZWNraW5nRnV6enlTdWJ0eXBlcykge1xuICAgICAgICAgICAgICBpbnZhcmlhbnQud2FybihgSW5mZXJyaW5nIHN1YnR5cGUgJHt0eXBlbmFtZX0gb2Ygc3VwZXJ0eXBlICR7c3VwZXJ0eXBlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVjb3JkIHBvc2l0aXZlIHJlc3VsdHMgZm9yIGZhc3RlciBmdXR1cmUgbG9va3VwLlxuICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgd2UgY2Fubm90IHNhZmVseSBjYWNoZSBuZWdhdGl2ZSByZXN1bHRzLFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBuZXcgcG9zc2libGVUeXBlcyBkYXRhIGNvdWxkIGFsd2F5cyBiZSBhZGRlZCB0byB0aGVcbiAgICAgICAgICAgIC8vIFBvbGljaWVzIGNsYXNzLlxuICAgICAgICAgICAgdHlwZW5hbWVTdXBlcnR5cGVTZXQuYWRkKHN1cGVydHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXJ0eXBlU2V0LmZvckVhY2gobWF5YmVFbnF1ZXVlKTtcblxuICAgICAgICBpZiAobmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzICYmXG4gICAgICAgICAgICAvLyBTdGFydCBjaGVja2luZyBmdXp6eSBzdWJ0eXBlcyBvbmx5IGFmdGVyIGV4aGF1c3RpbmcgYWxsXG4gICAgICAgICAgICAvLyBub24tZnV6enkgc3VidHlwZXMgKGFmdGVyIHRoZSBmaW5hbCBpdGVyYXRpb24gb2YgdGhlIGxvb3ApLlxuICAgICAgICAgICAgaSA9PT0gd29ya1F1ZXVlLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgIC8vIFdlIGNvdWxkIHdhaXQgdG8gY29tcGFyZSBmcmFnbWVudC5zZWxlY3Rpb25TZXQgdG8gcmVzdWx0XG4gICAgICAgICAgICAvLyBhZnRlciB3ZSB2ZXJpZnkgdGhlIHN1cGVydHlwZSwgYnV0IHRoaXMgY2hlY2sgaXMgb2Z0ZW4gbGVzc1xuICAgICAgICAgICAgLy8gZXhwZW5zaXZlIHRoYW4gdGhhdCBzZWFyY2gsIGFuZCB3ZSB3aWxsIGhhdmUgdG8gZG8gdGhlXG4gICAgICAgICAgICAvLyBjb21wYXJpc29uIGFueXdheSB3aGVuZXZlciB3ZSBmaW5kIGEgcG90ZW50aWFsIG1hdGNoLlxuICAgICAgICAgICAgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChmcmFnbWVudC5zZWxlY3Rpb25TZXQsIHJlc3VsdCEsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAvLyBXZSBkb24ndCBhbHdheXMgbmVlZCB0byBjaGVjayBmdXp6eSBzdWJ0eXBlcyAoaWYgbm8gcmVzdWx0XG4gICAgICAgICAgLy8gd2FzIHByb3ZpZGVkLCBvciAhdGhpcy5mdXp6eVN1YnR5cGVzLnNpemUpLCBidXQsIHdoZW4gd2UgZG8sXG4gICAgICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGNoZWNrIHRoZW0gb25jZS5cbiAgICAgICAgICBuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgPSBmYWxzZTtcbiAgICAgICAgICBjaGVja2luZ0Z1enp5U3VidHlwZXMgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gSWYgd2UgZmluZCBhbnkgZnV6enkgc3VidHlwZXMgdGhhdCBtYXRjaCB0eXBlbmFtZSwgZXh0ZW5kIHRoZVxuICAgICAgICAgIC8vIHdvcmtRdWV1ZSB0byBzZWFyY2ggdGhyb3VnaCB0aGUgc3VwZXJ0eXBlcyBvZiB0aG9zZSBmdXp6eVxuICAgICAgICAgIC8vIHN1YnR5cGVzLiBPdGhlcndpc2UgdGhlIGZvci1sb29wIHdpbGwgdGVybWluYXRlIGFuZCB3ZSdsbFxuICAgICAgICAgIC8vIHJldHVybiBmYWxzZSBiZWxvdy5cbiAgICAgICAgICB0aGlzLmZ1enp5U3VidHlwZXMuZm9yRWFjaCgocmVnRXhwLCBmdXp6eVN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0eXBlbmFtZS5tYXRjaChyZWdFeHApO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdID09PSB0eXBlbmFtZSkge1xuICAgICAgICAgICAgICBtYXliZUVucXVldWUoZnV6enlTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGhhc0tleUFyZ3ModHlwZW5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgZmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICByZXR1cm4gISEocG9saWN5ICYmIHBvbGljeS5rZXlGbik7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RvcmVGaWVsZE5hbWUoZmllbGRTcGVjOiBGaWVsZFNwZWNpZmllcik6IHN0cmluZyB7XG4gICAgY29uc3QgeyB0eXBlbmFtZSwgZmllbGROYW1lIH0gPSBmaWVsZFNwZWM7XG4gICAgY29uc3QgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeSh0eXBlbmFtZSwgZmllbGROYW1lLCBmYWxzZSk7XG4gICAgbGV0IHN0b3JlRmllbGROYW1lOiBLZXlBcmdzUmVzdWx0O1xuXG4gICAgbGV0IGtleUZuID0gcG9saWN5ICYmIHBvbGljeS5rZXlGbjtcbiAgICBpZiAoa2V5Rm4gJiYgdHlwZW5hbWUpIHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IFBhcmFtZXRlcnM8S2V5QXJnc0Z1bmN0aW9uPlsxXSA9IHtcbiAgICAgICAgdHlwZW5hbWUsXG4gICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgZmllbGQ6IGZpZWxkU3BlYy5maWVsZCB8fCBudWxsLFxuICAgICAgICB2YXJpYWJsZXM6IGZpZWxkU3BlYy52YXJpYWJsZXMsXG4gICAgICB9O1xuICAgICAgY29uc3QgYXJncyA9IGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKTtcbiAgICAgIHdoaWxlIChrZXlGbikge1xuICAgICAgICBjb25zdCBzcGVjaWZpZXJPclN0cmluZyA9IGtleUZuKGFyZ3MsIGNvbnRleHQpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzcGVjaWZpZXJPclN0cmluZykpIHtcbiAgICAgICAgICBrZXlGbiA9IGtleUFyZ3NGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyT3JTdHJpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHRoZSBjdXN0b20ga2V5Rm4gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBmYWxsIGJhY2sgdG9cbiAgICAgICAgICAvLyBmaWVsZE5hbWUgaW5zdGVhZC5cbiAgICAgICAgICBzdG9yZUZpZWxkTmFtZSA9IHNwZWNpZmllck9yU3RyaW5nIHx8IGZpZWxkTmFtZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdG9yZUZpZWxkTmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICBzdG9yZUZpZWxkTmFtZSA9IGZpZWxkU3BlYy5maWVsZFxuICAgICAgICA/IHN0b3JlS2V5TmFtZUZyb21GaWVsZChmaWVsZFNwZWMuZmllbGQsIGZpZWxkU3BlYy52YXJpYWJsZXMpXG4gICAgICAgIDogZ2V0U3RvcmVLZXlOYW1lKGZpZWxkTmFtZSwgYXJnc0Zyb21GaWVsZFNwZWNpZmllcihmaWVsZFNwZWMpKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm5pbmcgZmFsc2UgZnJvbSBhIGtleUFyZ3MgZnVuY3Rpb24gaXMgbGlrZSBjb25maWd1cmluZ1xuICAgIC8vIGtleUFyZ3M6IGZhbHNlLCBidXQgbW9yZSBkeW5hbWljLlxuICAgIGlmIChzdG9yZUZpZWxkTmFtZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmaWVsZE5hbWU7XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIGN1c3RvbSBmaWVsZCBuYW1lcyBzdGFydCB3aXRoIHRoZSBhY3R1YWwgZmllbGQubmFtZS52YWx1ZVxuICAgIC8vIG9mIHRoZSBmaWVsZCwgc28gd2UgY2FuIGFsd2F5cyBmaWd1cmUgb3V0IHdoaWNoIHByb3BlcnRpZXMgb2YgYVxuICAgIC8vIFN0b3JlT2JqZWN0IGNvcnJlc3BvbmQgdG8gd2hpY2ggb3JpZ2luYWwgZmllbGQgbmFtZXMuXG4gICAgcmV0dXJuIGZpZWxkTmFtZSA9PT0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSlcbiAgICAgID8gc3RvcmVGaWVsZE5hbWVcbiAgICAgIDogZmllbGROYW1lICsgXCI6XCIgKyBzdG9yZUZpZWxkTmFtZTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkRmllbGQ8ViA9IFN0b3JlVmFsdWU+KFxuICAgIG9wdGlvbnM6IFJlYWRGaWVsZE9wdGlvbnMsXG4gICAgY29udGV4dDogUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCxcbiAgKTogU2FmZVJlYWRvbmx5PFY+IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBvYmplY3RPclJlZmVyZW5jZSA9IG9wdGlvbnMuZnJvbTtcbiAgICBpZiAoIW9iamVjdE9yUmVmZXJlbmNlKSByZXR1cm47XG5cbiAgICBjb25zdCBuYW1lT3JGaWVsZCA9IG9wdGlvbnMuZmllbGQgfHwgb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgaWYgKCFuYW1lT3JGaWVsZCkgcmV0dXJuO1xuXG4gICAgaWYgKG9wdGlvbnMudHlwZW5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgdHlwZW5hbWUgPSBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWU8c3RyaW5nPihvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgaWYgKHR5cGVuYW1lKSBvcHRpb25zLnR5cGVuYW1lID0gdHlwZW5hbWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSB0aGlzLmdldFN0b3JlRmllbGROYW1lKG9wdGlvbnMpO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gY29udGV4dC5zdG9yZS5nZXRGaWVsZFZhbHVlPFY+KG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgY29uc3QgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeShvcHRpb25zLnR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICBjb25zdCByZWFkID0gcG9saWN5ICYmIHBvbGljeS5yZWFkO1xuXG4gICAgaWYgKHJlYWQpIHtcbiAgICAgIGNvbnN0IHJlYWRPcHRpb25zID0gbWFrZUZpZWxkRnVuY3Rpb25PcHRpb25zKFxuICAgICAgICB0aGlzLFxuICAgICAgICBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKFxuICAgICAgICAgIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgPyBvYmplY3RPclJlZmVyZW5jZS5fX3JlZlxuICAgICAgICAgICAgOiBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIENhbGwgcmVhZChleGlzdGluZywgcmVhZE9wdGlvbnMpIHdpdGggY2FjaGVTbG90IGhvbGRpbmcgdGhpcy5jYWNoZS5cbiAgICAgIHJldHVybiBjYWNoZVNsb3Qud2l0aFZhbHVlKFxuICAgICAgICB0aGlzLmNhY2hlLFxuICAgICAgICByZWFkLFxuICAgICAgICBbZXhpc3RpbmcsIHJlYWRPcHRpb25zXSxcbiAgICAgICkgYXMgU2FmZVJlYWRvbmx5PFY+O1xuICAgIH1cblxuICAgIHJldHVybiBleGlzdGluZztcbiAgfVxuXG4gIHB1YmxpYyBnZXRNZXJnZUZ1bmN0aW9uKFxuICAgIHBhcmVudFR5cGVuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgZmllbGROYW1lOiBzdHJpbmcsXG4gICAgY2hpbGRUeXBlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICApOiBGaWVsZE1lcmdlRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGxldCBwb2xpY3k6XG4gICAgICB8IFBvbGljaWVzW1widHlwZVBvbGljaWVzXCJdW3N0cmluZ11cbiAgICAgIHwgUG9saWNpZXNbXCJ0eXBlUG9saWNpZXNcIl1bc3RyaW5nXVtcImZpZWxkc1wiXVtzdHJpbmddXG4gICAgICB8IHVuZGVmaW5lZCA9XG4gICAgICB0aGlzLmdldEZpZWxkUG9saWN5KHBhcmVudFR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICBsZXQgbWVyZ2UgPSBwb2xpY3kgJiYgcG9saWN5Lm1lcmdlO1xuICAgIGlmICghbWVyZ2UgJiYgY2hpbGRUeXBlbmFtZSkge1xuICAgICAgcG9saWN5ID0gdGhpcy5nZXRUeXBlUG9saWN5KGNoaWxkVHlwZW5hbWUpO1xuICAgICAgbWVyZ2UgPSBwb2xpY3kgJiYgcG9saWN5Lm1lcmdlO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2U7XG4gIH1cblxuICBwdWJsaWMgcnVuTWVyZ2VGdW5jdGlvbihcbiAgICBleGlzdGluZzogU3RvcmVWYWx1ZSxcbiAgICBpbmNvbWluZzogU3RvcmVWYWx1ZSxcbiAgICB7IGZpZWxkLCB0eXBlbmFtZSwgbWVyZ2UgfTogTWVyZ2VJbmZvLFxuICAgIGNvbnRleHQ6IFJlYWRNZXJnZU1vZGlmeUNvbnRleHQsXG4gICAgc3RvcmFnZT86IFN0b3JhZ2VUeXBlLFxuICApIHtcbiAgICBpZiAobWVyZ2UgPT09IG1lcmdlVHJ1ZUZuKSB7XG4gICAgICAvLyBJbnN0ZWFkIG9mIGdvaW5nIHRvIHRoZSB0cm91YmxlIG9mIGNyZWF0aW5nIGEgZnVsbFxuICAgICAgLy8gRmllbGRGdW5jdGlvbk9wdGlvbnMgb2JqZWN0IGFuZCBjYWxsaW5nIG1lcmdlVHJ1ZUZuLCB3ZSBjYW5cbiAgICAgIC8vIHNpbXBseSBjYWxsIG1lcmdlT2JqZWN0cywgYXMgbWVyZ2VUcnVlRm4gd291bGQuXG4gICAgICByZXR1cm4gbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKFxuICAgICAgICBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWVcbiAgICAgICkoZXhpc3RpbmcgYXMgU3RvcmVPYmplY3QsXG4gICAgICAgIGluY29taW5nIGFzIFN0b3JlT2JqZWN0KTtcbiAgICB9XG5cbiAgICBpZiAobWVyZ2UgPT09IG1lcmdlRmFsc2VGbikge1xuICAgICAgLy8gTGlrZXdpc2UgZm9yIG1lcmdlRmFsc2VGbiwgd2hvc2UgaW1wbGVtZW50YXRpb24gaXMgZXZlbiBzaW1wbGVyLlxuICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cblxuICAgIHJldHVybiBtZXJnZShleGlzdGluZywgaW5jb21pbmcsIG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyhcbiAgICAgIHRoaXMsXG4gICAgICAvLyBVbmxpa2Ugb3B0aW9ucy5yZWFkRmllbGQgZm9yIHJlYWQgZnVuY3Rpb25zLCB3ZSBkbyBub3QgZmFsbFxuICAgICAgLy8gYmFjayB0byB0aGUgY3VycmVudCBvYmplY3QgaWYgbm8gZm9yZWlnbk9iak9yUmVmIGlzIHByb3ZpZGVkLFxuICAgICAgLy8gYmVjYXVzZSBpdCdzIG5vdCBjbGVhciB3aGF0IHRoZSBjdXJyZW50IG9iamVjdCBzaG91bGQgYmUgZm9yXG4gICAgICAvLyBtZXJnZSBmdW5jdGlvbnM6IHRoZSAocG9zc2libHkgdW5kZWZpbmVkKSBleGlzdGluZyBvYmplY3QsIG9yXG4gICAgICAvLyB0aGUgaW5jb21pbmcgb2JqZWN0PyBJZiB5b3UgdGhpbmsgeW91ciBtZXJnZSBmdW5jdGlvbiBuZWVkc1xuICAgICAgLy8gdG8gcmVhZCBzaWJsaW5nIGZpZWxkcyBpbiBvcmRlciB0byBwcm9kdWNlIGEgbmV3IHZhbHVlIGZvclxuICAgICAgLy8gdGhlIGN1cnJlbnQgZmllbGQsIHlvdSBtaWdodCB3YW50IHRvIHJldGhpbmsgeW91ciBzdHJhdGVneSxcbiAgICAgIC8vIGJlY2F1c2UgdGhhdCdzIGEgcmVjaXBlIGZvciBtYWtpbmcgbWVyZ2UgYmVoYXZpb3Igc2Vuc2l0aXZlXG4gICAgICAvLyB0byB0aGUgb3JkZXIgaW4gd2hpY2ggZmllbGRzIGFyZSB3cml0dGVuIGludG8gdGhlIGNhY2hlLlxuICAgICAgLy8gSG93ZXZlciwgcmVhZEZpZWxkKG5hbWUsIHJlZikgaXMgdXNlZnVsIGZvciBtZXJnZSBmdW5jdGlvbnNcbiAgICAgIC8vIHRoYXQgbmVlZCB0byBkZWR1cGxpY2F0ZSBjaGlsZCBvYmplY3RzIGFuZCByZWZlcmVuY2VzLlxuICAgICAgdm9pZCAwLFxuICAgICAgeyB0eXBlbmFtZSxcbiAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICBmaWVsZCxcbiAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyB9LFxuICAgICAgY29udGV4dCxcbiAgICAgIHN0b3JhZ2UgfHwgT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICApKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlRmllbGRGdW5jdGlvbk9wdGlvbnMoXG4gIHBvbGljaWVzOiBQb2xpY2llcyxcbiAgb2JqZWN0T3JSZWZlcmVuY2U6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlIHwgdW5kZWZpbmVkLFxuICBmaWVsZFNwZWM6IEZpZWxkU3BlY2lmaWVyLFxuICBjb250ZXh0OiBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LFxuICBzdG9yYWdlOiBTdG9yYWdlVHlwZSxcbik6IEZpZWxkRnVuY3Rpb25PcHRpb25zIHtcbiAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSBwb2xpY2llcy5nZXRTdG9yZUZpZWxkTmFtZShmaWVsZFNwZWMpO1xuICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgY29uc3QgdmFyaWFibGVzID0gZmllbGRTcGVjLnZhcmlhYmxlcyB8fCBjb250ZXh0LnZhcmlhYmxlcztcbiAgY29uc3QgeyBnZXRGaWVsZFZhbHVlLCB0b1JlZmVyZW5jZSwgY2FuUmVhZCB9ID0gY29udGV4dC5zdG9yZTtcblxuICByZXR1cm4ge1xuICAgIGFyZ3M6IGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSxcbiAgICBmaWVsZDogZmllbGRTcGVjLmZpZWxkIHx8IG51bGwsXG4gICAgZmllbGROYW1lLFxuICAgIHN0b3JlRmllbGROYW1lLFxuICAgIHZhcmlhYmxlcyxcbiAgICBpc1JlZmVyZW5jZSxcbiAgICB0b1JlZmVyZW5jZSxcbiAgICBzdG9yYWdlLFxuICAgIGNhY2hlOiBwb2xpY2llcy5jYWNoZSxcbiAgICBjYW5SZWFkLFxuXG4gICAgcmVhZEZpZWxkPFQ+KFxuICAgICAgZmllbGROYW1lT3JPcHRpb25zOiBzdHJpbmcgfCBSZWFkRmllbGRPcHRpb25zLFxuICAgICAgZnJvbT86IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLFxuICAgICkge1xuICAgICAgY29uc3Qgb3B0aW9uczogUmVhZEZpZWxkT3B0aW9ucyA9XG4gICAgICAgIHR5cGVvZiBmaWVsZE5hbWVPck9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyB7XG4gICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWVPck9wdGlvbnMsXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgfSA6IHsgLi4uZmllbGROYW1lT3JPcHRpb25zIH07XG5cbiAgICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMuZnJvbSkge1xuICAgICAgICBvcHRpb25zLmZyb20gPSBvYmplY3RPclJlZmVyZW5jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZvaWQgMCA9PT0gb3B0aW9ucy52YXJpYWJsZXMpIHtcbiAgICAgICAgb3B0aW9ucy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQ8VD4ob3B0aW9ucywgY29udGV4dCk7XG4gICAgfSxcblxuICAgIG1lcmdlT2JqZWN0czogbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKGdldEZpZWxkVmFsdWUpLFxuICB9O1xufVxuXG5mdW5jdGlvbiBtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24oXG4gIGdldEZpZWxkVmFsdWU6IEZpZWxkVmFsdWVHZXR0ZXIsXG4pOiBNZXJnZU9iamVjdHNGdW5jdGlvbiB7XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhpc3RpbmcpIHx8IEFycmF5LmlzQXJyYXkoaW5jb21pbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXCJDYW5ub3QgYXV0b21hdGljYWxseSBtZXJnZSBhcnJheXNcIik7XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgZHluYW1pYyBjaGVja3MgYXJlIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBwYXJhbWV0ZXJzIG9mIGFcbiAgICAvLyBjdXN0b20gbWVyZ2UgZnVuY3Rpb24gY2FuIGVhc2lseSBoYXZlIHRoZSBhbnkgdHlwZSwgc28gdGhlIHR5cGVcbiAgICAvLyBzeXN0ZW0gY2Fubm90IGFsd2F5cyBlbmZvcmNlIHRoZSBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICAvLyB0eXBlcyBvZiBvcHRpb25zLm1lcmdlT2JqZWN0cy5cbiAgICBpZiAoZXhpc3RpbmcgJiYgdHlwZW9mIGV4aXN0aW5nID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGluY29taW5nICYmIHR5cGVvZiBpbmNvbWluZyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgY29uc3QgZVR5cGUgPSBnZXRGaWVsZFZhbHVlKGV4aXN0aW5nLCBcIl9fdHlwZW5hbWVcIik7XG4gICAgICBjb25zdCBpVHlwZSA9IGdldEZpZWxkVmFsdWUoaW5jb21pbmcsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgIGNvbnN0IHR5cGVzRGlmZmVyID0gZVR5cGUgJiYgaVR5cGUgJiYgZVR5cGUgIT09IGlUeXBlO1xuXG4gICAgICBpZiAodHlwZXNEaWZmZXIgfHxcbiAgICAgICAgICAhc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoZXhpc3RpbmcpIHx8XG4gICAgICAgICAgIXN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IC4uLmV4aXN0aW5nLCAuLi5pbmNvbWluZyB9O1xuICAgIH1cblxuICAgIHJldHVybiBpbmNvbWluZztcbiAgfTtcbn1cblxuZnVuY3Rpb24ga2V5QXJnc0ZuRnJvbVNwZWNpZmllcihcbiAgc3BlY2lmaWVyOiBLZXlTcGVjaWZpZXIsXG4pOiBLZXlBcmdzRnVuY3Rpb24ge1xuICByZXR1cm4gKGFyZ3MsIGNvbnRleHQpID0+IHtcbiAgICByZXR1cm4gYXJncyA/IGAke2NvbnRleHQuZmllbGROYW1lfToke1xuICAgICAgSlNPTi5zdHJpbmdpZnkoY29tcHV0ZUtleU9iamVjdChhcmdzLCBzcGVjaWZpZXIsIGZhbHNlKSlcbiAgICB9YCA6IGNvbnRleHQuZmllbGROYW1lO1xuICB9O1xufVxuXG5mdW5jdGlvbiBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoXG4gIHNwZWNpZmllcjogS2V5U3BlY2lmaWVyLFxuKTogS2V5RmllbGRzRnVuY3Rpb24ge1xuICBjb25zdCB0cmllID0gbmV3IEtleVRyaWU8e1xuICAgIGFsaWFzTWFwPzogQWxpYXNNYXA7XG4gIH0+KGNhblVzZVdlYWtNYXApO1xuXG4gIHJldHVybiAob2JqZWN0LCBjb250ZXh0KSA9PiB7XG4gICAgbGV0IGFsaWFzTWFwOiBBbGlhc01hcCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoY29udGV4dC5zZWxlY3Rpb25TZXQgJiYgY29udGV4dC5mcmFnbWVudE1hcCkge1xuICAgICAgY29uc3QgaW5mbyA9IHRyaWUubG9va3VwQXJyYXkoW1xuICAgICAgICBjb250ZXh0LnNlbGVjdGlvblNldCxcbiAgICAgICAgY29udGV4dC5mcmFnbWVudE1hcCxcbiAgICAgIF0pO1xuICAgICAgYWxpYXNNYXAgPSBpbmZvLmFsaWFzTWFwIHx8IChcbiAgICAgICAgaW5mby5hbGlhc01hcCA9IG1ha2VBbGlhc01hcChjb250ZXh0LnNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5T2JqZWN0ID0gY29udGV4dC5rZXlPYmplY3QgPVxuICAgICAgY29tcHV0ZUtleU9iamVjdChvYmplY3QsIHNwZWNpZmllciwgdHJ1ZSwgYWxpYXNNYXApO1xuXG4gICAgcmV0dXJuIGAke2NvbnRleHQudHlwZW5hbWV9OiR7SlNPTi5zdHJpbmdpZnkoa2V5T2JqZWN0KX1gO1xuICB9O1xufVxuXG50eXBlIEFsaWFzTWFwID0ge1xuICAvLyBNYXAgZnJvbSBzdG9yZSBrZXkgdG8gY29ycmVzcG9uZGluZyByZXNwb25zZSBrZXkuIFVuZGVmaW5lZCB3aGVuIHRoZXJlIGFyZVxuICAvLyBubyBhbGlhc2VkIGZpZWxkcyBpbiB0aGlzIHNlbGVjdGlvbiBzZXQuXG4gIGFsaWFzZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAvLyBNYXAgZnJvbSBzdG9yZSBrZXkgdG8gQWxpYXNNYXAgY29ycmVwb25kaW5nIHRvIGEgY2hpbGQgc2VsZWN0aW9uIHNldC5cbiAgLy8gVW5kZWZpbmVkIHdoZW4gdGhlcmUgYXJlIG5vIGNoaWxkIHNlbGVjdGlvbiBzZXRzLlxuICBzdWJzZXRzPzogUmVjb3JkPHN0cmluZywgQWxpYXNNYXA+O1xufTtcblxuZnVuY3Rpb24gbWFrZUFsaWFzTWFwKFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUsXG4gIGZyYWdtZW50TWFwOiBGcmFnbWVudE1hcCxcbik6IEFsaWFzTWFwIHtcbiAgbGV0IG1hcDogQWxpYXNNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAvLyBUT0RPIENhY2hlIHRoaXMgd29yaywgcGVyaGFwcyBieSBzdG9yaW5nIHNlbGVjdGlvblNldC5fYWxpYXNNYXA/XG4gIGNvbnN0IHdvcmtRdWV1ZSA9IG5ldyBTZXQoW3NlbGVjdGlvblNldF0pO1xuICB3b3JrUXVldWUuZm9yRWFjaChzZWxlY3Rpb25TZXQgPT4ge1xuICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5hbGlhcykge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlS2V5ID0gc2VsZWN0aW9uLmFsaWFzLnZhbHVlO1xuICAgICAgICAgIGNvbnN0IHN0b3JlS2V5ID0gc2VsZWN0aW9uLm5hbWUudmFsdWU7XG4gICAgICAgICAgaWYgKHN0b3JlS2V5ICE9PSByZXNwb25zZUtleSkge1xuICAgICAgICAgICAgY29uc3QgYWxpYXNlcyA9IG1hcC5hbGlhc2VzIHx8IChtYXAuYWxpYXNlcyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICAgICAgYWxpYXNlc1tzdG9yZUtleV0gPSByZXNwb25zZUtleTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICBjb25zdCBzdWJzZXRzID0gbWFwLnN1YnNldHMgfHwgKG1hcC5zdWJzZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgICAgc3Vic2V0c1tzZWxlY3Rpb24ubmFtZS52YWx1ZV0gPVxuICAgICAgICAgICAgbWFrZUFsaWFzTWFwKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsIGZyYWdtZW50TWFwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCk7XG4gICAgICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgICAgIHdvcmtRdWV1ZS5hZGQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG1hcDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZUtleU9iamVjdChcbiAgcmVzcG9uc2U6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIHNwZWNpZmllcjogS2V5U3BlY2lmaWVyLFxuICBzdHJpY3Q6IGJvb2xlYW4sXG4gIGFsaWFzTWFwPzogQWxpYXNNYXAsXG4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgLy8gVGhlIG9yZGVyIG9mIGFkZGluZyBwcm9wZXJ0aWVzIHRvIGtleU9iaiBhZmZlY3RzIGl0cyBKU09OIHNlcmlhbGl6YXRpb24sXG4gIC8vIHNvIHdlIGFyZSBjYXJlZnVsIHRvIGJ1aWxkIGtleU9iaiBpbiB0aGUgb3JkZXIgb2Yga2V5cyBnaXZlbiBpblxuICAvLyBzcGVjaWZpZXIuXG4gIGNvbnN0IGtleU9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBwcmV2S2V5OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHNwZWNpZmllci5mb3JFYWNoKHMgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7XG4gICAgICBpZiAodHlwZW9mIHByZXZLZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3Qgc3Vic2V0cyA9IGFsaWFzTWFwICYmIGFsaWFzTWFwLnN1YnNldHM7XG4gICAgICAgIGNvbnN0IHN1YnNldCA9IHN1YnNldHMgJiYgc3Vic2V0c1twcmV2S2V5XTtcbiAgICAgICAga2V5T2JqW3ByZXZLZXldID0gY29tcHV0ZUtleU9iamVjdChyZXNwb25zZVtwcmV2S2V5XSwgcywgc3RyaWN0LCBzdWJzZXQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhbGlhc2VzID0gYWxpYXNNYXAgJiYgYWxpYXNNYXAuYWxpYXNlcztcbiAgICAgIGNvbnN0IHJlc3BvbnNlTmFtZSA9IGFsaWFzZXMgJiYgYWxpYXNlc1tzXSB8fCBzO1xuICAgICAgaWYgKGhhc093bi5jYWxsKHJlc3BvbnNlLCByZXNwb25zZU5hbWUpKSB7XG4gICAgICAgIGtleU9ialtwcmV2S2V5ID0gc10gPSByZXNwb25zZVtyZXNwb25zZU5hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YXJpYW50KCFzdHJpY3QsIGBNaXNzaW5nIGZpZWxkICcke3Jlc3BvbnNlTmFtZX0nIHdoaWxlIGNvbXB1dGluZyBrZXkgZmllbGRzYCk7XG4gICAgICAgIHByZXZLZXkgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGtleU9iajtcbn1cbiIsIi8vIE1ha2UgYnVpbHRpbnMgbGlrZSBNYXAgYW5kIFNldCBzYWZlIHRvIHVzZSB3aXRoIG5vbi1leHRlbnNpYmxlIG9iamVjdHMuXG5pbXBvcnQgJy4vZml4UG9seWZpbGxzJztcblxuaW1wb3J0IHsgRG9jdW1lbnROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBkZXAsIHdyYXAgfSBmcm9tICdvcHRpbWlzbSc7XG5cbmltcG9ydCB7IEFwb2xsb0NhY2hlIH0gZnJvbSAnLi4vY29yZS9jYWNoZSc7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gJy4uL2NvcmUvdHlwZXMvQ2FjaGUnO1xuaW1wb3J0IHsgTWlzc2luZ0ZpZWxkRXJyb3IgfSBmcm9tICcuLi9jb3JlL3R5cGVzL2NvbW1vbic7XG5pbXBvcnQge1xuICBhZGRUeXBlbmFtZVRvRG9jdW1lbnQsXG4gIFN0b3JlT2JqZWN0LFxuICBSZWZlcmVuY2UsXG4gIGlzUmVmZXJlbmNlLFxufSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuaW1wb3J0IHtcbiAgQXBvbGxvUmVkdWNlckNvbmZpZyxcbiAgTm9ybWFsaXplZENhY2hlT2JqZWN0LFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFN0b3JlUmVhZGVyIH0gZnJvbSAnLi9yZWFkRnJvbVN0b3JlJztcbmltcG9ydCB7IFN0b3JlV3JpdGVyIH0gZnJvbSAnLi93cml0ZVRvU3RvcmUnO1xuaW1wb3J0IHsgRW50aXR5U3RvcmUsIHN1cHBvcnRzUmVzdWx0Q2FjaGluZyB9IGZyb20gJy4vZW50aXR5U3RvcmUnO1xuaW1wb3J0IHsgbWFrZVZhciwgZm9yZ2V0Q2FjaGUsIHJlY2FsbENhY2hlIH0gZnJvbSAnLi9yZWFjdGl2ZVZhcnMnO1xuaW1wb3J0IHtcbiAgZGVmYXVsdERhdGFJZEZyb21PYmplY3QsXG4gIFBvc3NpYmxlVHlwZXNNYXAsXG4gIFBvbGljaWVzLFxuICBUeXBlUG9saWNpZXMsXG59IGZyb20gJy4vcG9saWNpZXMnO1xuaW1wb3J0IHsgaGFzT3duIH0gZnJvbSAnLi9oZWxwZXJzJztcblxuZXhwb3J0IGludGVyZmFjZSBJbk1lbW9yeUNhY2hlQ29uZmlnIGV4dGVuZHMgQXBvbGxvUmVkdWNlckNvbmZpZyB7XG4gIHJlc3VsdENhY2hpbmc/OiBib29sZWFuO1xuICBwb3NzaWJsZVR5cGVzPzogUG9zc2libGVUeXBlc01hcDtcbiAgdHlwZVBvbGljaWVzPzogVHlwZVBvbGljaWVzO1xufVxuXG5jb25zdCBkZWZhdWx0Q29uZmlnOiBJbk1lbW9yeUNhY2hlQ29uZmlnID0ge1xuICBkYXRhSWRGcm9tT2JqZWN0OiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCxcbiAgYWRkVHlwZW5hbWU6IHRydWUsXG4gIHJlc3VsdENhY2hpbmc6IHRydWUsXG4gIHR5cGVQb2xpY2llczoge30sXG59O1xuXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEFwb2xsb0NhY2hlPE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4ge1xuICBwcml2YXRlIGRhdGE6IEVudGl0eVN0b3JlO1xuICBwcml2YXRlIG9wdGltaXN0aWNEYXRhOiBFbnRpdHlTdG9yZTtcblxuICBwcm90ZWN0ZWQgY29uZmlnOiBJbk1lbW9yeUNhY2hlQ29uZmlnO1xuICBwcml2YXRlIHdhdGNoZXMgPSBuZXcgU2V0PENhY2hlLldhdGNoT3B0aW9ucz4oKTtcbiAgcHJpdmF0ZSBhZGRUeXBlbmFtZTogYm9vbGVhbjtcblxuICBwcml2YXRlIHR5cGVuYW1lRG9jdW1lbnRDYWNoZSA9IG5ldyBNYXA8RG9jdW1lbnROb2RlLCBEb2N1bWVudE5vZGU+KCk7XG4gIHByaXZhdGUgc3RvcmVSZWFkZXI6IFN0b3JlUmVhZGVyO1xuICBwcml2YXRlIHN0b3JlV3JpdGVyOiBTdG9yZVdyaXRlcjtcblxuICAvLyBEeW5hbWljYWxseSBpbXBvcnRlZCBjb2RlIGNhbiBhdWdtZW50IGV4aXN0aW5nIHR5cGVQb2xpY2llcyBvclxuICAvLyBwb3NzaWJsZVR5cGVzIGJ5IGNhbGxpbmcgY2FjaGUucG9saWNpZXMuYWRkVHlwZVBvbGljaWVzIG9yXG4gIC8vIGNhY2hlLnBvbGljaWVzLmFkZFBvc3NpYmxldHlwZXMuXG4gIHB1YmxpYyByZWFkb25seSBwb2xpY2llczogUG9saWNpZXM7XG5cbiAgcHVibGljIHJlYWRvbmx5IG1ha2VWYXIgPSBtYWtlVmFyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogSW5NZW1vcnlDYWNoZUNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4uZGVmYXVsdENvbmZpZywgLi4uY29uZmlnIH07XG4gICAgdGhpcy5hZGRUeXBlbmFtZSA9ICEhdGhpcy5jb25maWcuYWRkVHlwZW5hbWU7XG5cbiAgICB0aGlzLnBvbGljaWVzID0gbmV3IFBvbGljaWVzKHtcbiAgICAgIGNhY2hlOiB0aGlzLFxuICAgICAgZGF0YUlkRnJvbU9iamVjdDogdGhpcy5jb25maWcuZGF0YUlkRnJvbU9iamVjdCxcbiAgICAgIHBvc3NpYmxlVHlwZXM6IHRoaXMuY29uZmlnLnBvc3NpYmxlVHlwZXMsXG4gICAgICB0eXBlUG9saWNpZXM6IHRoaXMuY29uZmlnLnR5cGVQb2xpY2llcyxcbiAgICB9KTtcblxuICAgIC8vIFBhc3NpbmcgeyByZXN1bHRDYWNoaW5nOiBmYWxzZSB9IGluIHRoZSBJbk1lbW9yeUNhY2hlIGNvbnN0cnVjdG9yIG9wdGlvbnNcbiAgICAvLyB3aWxsIGNvbXBsZXRlbHkgZGlzYWJsZSBkZXBlbmRlbmN5IHRyYWNraW5nLCB3aGljaCB3aWxsIGltcHJvdmUgbWVtb3J5XG4gICAgLy8gdXNhZ2UgYnV0IHdvcnNlbiB0aGUgcGVyZm9ybWFuY2Ugb2YgcmVwZWF0ZWQgcmVhZHMuXG4gICAgdGhpcy5kYXRhID0gbmV3IEVudGl0eVN0b3JlLlJvb3Qoe1xuICAgICAgcG9saWNpZXM6IHRoaXMucG9saWNpZXMsXG4gICAgICByZXN1bHRDYWNoaW5nOiB0aGlzLmNvbmZpZy5yZXN1bHRDYWNoaW5nLFxuICAgIH0pO1xuXG4gICAgLy8gV2hlbiBubyBvcHRpbWlzdGljIHdyaXRlcyBhcmUgY3VycmVudGx5IGFjdGl2ZSwgY2FjaGUub3B0aW1pc3RpY0RhdGEgPT09XG4gICAgLy8gY2FjaGUuZGF0YSwgc28gdGhlcmUgYXJlIG5vIGFkZGl0aW9uYWwgbGF5ZXJzIG9uIHRvcCBvZiB0aGUgYWN0dWFsIGRhdGEuXG4gICAgLy8gV2hlbiBhbiBvcHRpbWlzdGljIHVwZGF0ZSBoYXBwZW5zLCB0aGlzLm9wdGltaXN0aWNEYXRhIHdpbGwgYmVjb21lIGFcbiAgICAvLyBsaW5rZWQgbGlzdCBvZiBPcHRpbWlzdGljQ2FjaGVMYXllciBvYmplY3RzIHRoYXQgdGVybWluYXRlcyB3aXRoIHRoZVxuICAgIC8vIG9yaWdpbmFsIHRoaXMuZGF0YSBjYWNoZSBvYmplY3QuXG4gICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIHRoaXMuc3RvcmVXcml0ZXIgPSBuZXcgU3RvcmVXcml0ZXIoXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5zdG9yZVJlYWRlciA9IG5ldyBTdG9yZVJlYWRlcih7XG4gICAgICAgIGNhY2hlOiB0aGlzLFxuICAgICAgICBhZGRUeXBlbmFtZTogdGhpcy5hZGRUeXBlbmFtZSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgcmVzdG9yZShkYXRhOiBOb3JtYWxpemVkQ2FjaGVPYmplY3QpOiB0aGlzIHtcbiAgICBpZiAoZGF0YSkgdGhpcy5kYXRhLnJlcGxhY2UoZGF0YSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgZXh0cmFjdChvcHRpbWlzdGljOiBib29sZWFuID0gZmFsc2UpOiBOb3JtYWxpemVkQ2FjaGVPYmplY3Qge1xuICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLmV4dHJhY3QoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkPFQ+KG9wdGlvbnM6IENhY2hlLlJlYWRPcHRpb25zKTogVCB8IG51bGwge1xuICAgIGNvbnN0IHtcbiAgICAgIC8vIFNpbmNlIHJlYWQgcmV0dXJucyBkYXRhIG9yIG51bGwsIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgbWV0YWRhdGFcbiAgICAgIC8vIGFib3V0IHdoZXRoZXIvd2hlcmUgdGhlcmUgbWlnaHQgaGF2ZSBiZWVuIG1pc3NpbmcgZmllbGRzLCB0aGVcbiAgICAgIC8vIGRlZmF1bHQgYmVoYXZpb3IgY2Fubm90IGJlIHJldHVyblBhcnRpYWxEYXRhID0gdHJ1ZSAobGlrZSBpdCBpc1xuICAgICAgLy8gZm9yIHRoZSBkaWZmIG1ldGhvZCksIHNpbmNlIGRlZmF1bHRpbmcgdG8gdHJ1ZSB3b3VsZCB2aW9sYXRlIHRoZVxuICAgICAgLy8gaW50ZWdyaXR5IG9mIHRoZSBUIGluIHRoZSByZXR1cm4gdHlwZS4gSG93ZXZlciwgcGFydGlhbCBkYXRhIG1heVxuICAgICAgLy8gYmUgdXNlZnVsIGluIHNvbWUgY2FzZXMsIHNvIHJldHVyblBhcnRpYWxEYXRhOnRydWUgbWF5IGJlXG4gICAgICAvLyBzcGVjaWZpZWQgZXhwbGljaXRseS5cbiAgICAgIHJldHVyblBhcnRpYWxEYXRhID0gZmFsc2UsXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JlUmVhZGVyLmRpZmZRdWVyeUFnYWluc3RTdG9yZTxUPih7XG4gICAgICAgIHN0b3JlOiBvcHRpb25zLm9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhLFxuICAgICAgICBxdWVyeTogb3B0aW9ucy5xdWVyeSxcbiAgICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgcm9vdElkOiBvcHRpb25zLnJvb3RJZCxcbiAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgcmV0dXJuUGFydGlhbERhdGEsXG4gICAgICB9KS5yZXN1bHQgfHwgbnVsbDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIE1pc3NpbmdGaWVsZEVycm9yKSB7XG4gICAgICAgIC8vIFN3YWxsb3cgTWlzc2luZ0ZpZWxkRXJyb3IgYW5kIHJldHVybiBudWxsLCBzbyBjYWxsZXJzIGRvIG5vdFxuICAgICAgICAvLyBuZWVkIHRvIHdvcnJ5IGFib3V0IGNhdGNoaW5nIFwibm9ybWFsXCIgZXhjZXB0aW9ucyByZXN1bHRpbmcgZnJvbVxuICAgICAgICAvLyBpbmNvbXBsZXRlIGNhY2hlIGRhdGEuIFVuZXhwZWN0ZWQgZXJyb3JzIHdpbGwgYmUgcmUtdGhyb3duLiBJZlxuICAgICAgICAvLyB5b3UgbmVlZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHdoaWNoIGZpZWxkcyB3ZXJlIG1pc3NpbmcsIHVzZVxuICAgICAgICAvLyBjYWNoZS5kaWZmIGluc3RlYWQsIGFuZCBleGFtaW5lIGRpZmZSZXN1bHQubWlzc2luZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB3cml0ZShvcHRpb25zOiBDYWNoZS5Xcml0ZU9wdGlvbnMpOiBSZWZlcmVuY2UgfCB1bmRlZmluZWQge1xuICAgIHRyeSB7XG4gICAgICArK3RoaXMudHhDb3VudDtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JlV3JpdGVyLndyaXRlVG9TdG9yZSh7XG4gICAgICAgIHN0b3JlOiB0aGlzLmRhdGEsXG4gICAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgICByZXN1bHQ6IG9wdGlvbnMucmVzdWx0LFxuICAgICAgICBkYXRhSWQ6IG9wdGlvbnMuZGF0YUlkLFxuICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtb2RpZnkob3B0aW9uczogQ2FjaGUuTW9kaWZ5T3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGlmIChoYXNPd24uY2FsbChvcHRpb25zLCBcImlkXCIpICYmICFvcHRpb25zLmlkKSB7XG4gICAgICAvLyBUbyBteSBrbm93bGVkZ2UsIFR5cGVTY3JpcHQgZG9lcyBub3QgY3VycmVudGx5IHByb3ZpZGUgYSB3YXkgdG9cbiAgICAgIC8vIGVuZm9yY2UgdGhhdCBhbiBvcHRpb25hbCBwcm9wZXJ0eT86dHlwZSBtdXN0ICpub3QqIGJlIHVuZGVmaW5lZFxuICAgICAgLy8gd2hlbiBwcmVzZW50LiBUaGF0IGFiaWxpdHkgd291bGQgYmUgdXNlZnVsIGhlcmUsIGJlY2F1c2Ugd2Ugd2FudFxuICAgICAgLy8gb3B0aW9ucy5pZCB0byBkZWZhdWx0IHRvIFJPT1RfUVVFUlkgb25seSB3aGVuIG5vIG9wdGlvbnMuaWQgd2FzXG4gICAgICAvLyBwcm92aWRlZC4gSWYgdGhlIGNhbGxlciBhdHRlbXB0cyB0byBwYXNzIG9wdGlvbnMuaWQgd2l0aCBhXG4gICAgICAvLyBmYWxzeS91bmRlZmluZWQgdmFsdWUgKHBlcmhhcHMgYmVjYXVzZSBjYWNoZS5pZGVudGlmeSBmYWlsZWQpLCB3ZVxuICAgICAgLy8gc2hvdWxkIG5vdCBhc3N1bWUgdGhlIGdvYWwgd2FzIHRvIG1vZGlmeSB0aGUgUk9PVF9RVUVSWSBvYmplY3QuXG4gICAgICAvLyBXZSBjb3VsZCB0aHJvdywgYnV0IGl0IHNlZW1zIG5hdHVyYWwgdG8gcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlXG4gICAgICAvLyB0aGF0IG5vdGhpbmcgd2FzIG1vZGlmaWVkLlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBzdG9yZSA9IG9wdGlvbnMub3B0aW1pc3RpYyAvLyBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgID8gdGhpcy5vcHRpbWlzdGljRGF0YVxuICAgICAgOiB0aGlzLmRhdGE7XG4gICAgdHJ5IHtcbiAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgcmV0dXJuIHN0b3JlLm1vZGlmeShvcHRpb25zLmlkIHx8IFwiUk9PVF9RVUVSWVwiLCBvcHRpb25zLmZpZWxkcyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaWZmPFQ+KG9wdGlvbnM6IENhY2hlLkRpZmZPcHRpb25zKTogQ2FjaGUuRGlmZlJlc3VsdDxUPiB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVSZWFkZXIuZGlmZlF1ZXJ5QWdhaW5zdFN0b3JlKHtcbiAgICAgIHN0b3JlOiBvcHRpb25zLm9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhLFxuICAgICAgcm9vdElkOiBvcHRpb25zLmlkIHx8IFwiUk9PVF9RVUVSWVwiLFxuICAgICAgcXVlcnk6IG9wdGlvbnMucXVlcnksXG4gICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgcmV0dXJuUGFydGlhbERhdGE6IG9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEsXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHdhdGNoKHdhdGNoOiBDYWNoZS5XYXRjaE9wdGlvbnMpOiAoKSA9PiB2b2lkIHtcbiAgICBpZiAoIXRoaXMud2F0Y2hlcy5zaXplKSB7XG4gICAgICAvLyBJbiBjYXNlIHdlIHByZXZpb3VzbHkgY2FsbGVkIGZvcmdldENhY2hlKHRoaXMpIGJlY2F1c2VcbiAgICAgIC8vIHRoaXMud2F0Y2hlcyBiZWNhbWUgZW1wdHkgKHNlZSBiZWxvdyksIHJlYXR0YWNoIHRoaXMgY2FjaGUgdG8gYW55XG4gICAgICAvLyByZWFjdGl2ZSB2YXJpYWJsZXMgb24gd2hpY2ggaXQgcHJldmlvdXNseSBkZXBlbmRlZC4gSXQgbWlnaHQgc2VlbVxuICAgICAgLy8gcGFyYWRveGljYWwgdGhhdCB3ZSdyZSBhYmxlIHRvIHJlY2FsbCBzb21ldGhpbmcgd2Ugc3VwcG9zZWRseVxuICAgICAgLy8gZm9yZ290LCBidXQgdGhlIHBvaW50IG9mIGNhbGxpbmcgZm9yZ2V0Q2FjaGUodGhpcykgaXMgdG8gc2lsZW5jZVxuICAgICAgLy8gdXNlbGVzcyBicm9hZGNhc3RzIHdoaWxlIHRoaXMud2F0Y2hlcyBpcyBlbXB0eSwgYW5kIHRvIGFsbG93IHRoZVxuICAgICAgLy8gY2FjaGUgdG8gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuIElmLCBob3dldmVyLCB3ZSBtYW5hZ2UgdG8gY2FsbFxuICAgICAgLy8gcmVjYWxsQ2FjaGUodGhpcykgaGVyZSwgdGhpcyBjYWNoZSBvYmplY3QgbXVzdCBub3QgaGF2ZSBiZWVuXG4gICAgICAvLyBnYXJiYWdlIGNvbGxlY3RlZCB5ZXQsIGFuZCBzaG91bGQgcmVzdW1lIHJlY2VpdmluZyB1cGRhdGVzIGZyb21cbiAgICAgIC8vIHJlYWN0aXZlIHZhcmlhYmxlcywgbm93IHRoYXQgaXQgaGFzIGEgd2F0Y2hlciB0byBub3RpZnkuXG4gICAgICByZWNhbGxDYWNoZSh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy53YXRjaGVzLmFkZCh3YXRjaCk7XG4gICAgaWYgKHdhdGNoLmltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoKHdhdGNoKTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIE9uY2Ugd2UgcmVtb3ZlIHRoZSBsYXN0IHdhdGNoIGZyb20gdGhpcy53YXRjaGVzLCBjYWNoZS5icm9hZGNhc3RXYXRjaGVzXG4gICAgICAvLyBubyBsb25nZXIgZG9lcyBhbnl0aGluZywgc28gd2UgcHJlZW1wdGl2ZWx5IHRlbGwgdGhlIHJlYWN0aXZlIHZhcmlhYmxlXG4gICAgICAvLyBzeXN0ZW0gdG8gZXhjbHVkZSB0aGlzIGNhY2hlIGZyb20gZnV0dXJlIGJyb2FkY2FzdHMuXG4gICAgICBpZiAodGhpcy53YXRjaGVzLmRlbGV0ZSh3YXRjaCkgJiYgIXRoaXMud2F0Y2hlcy5zaXplKSB7XG4gICAgICAgIGZvcmdldENhY2hlKHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy53YXRjaERlcC5kaXJ0eSh3YXRjaCk7XG4gICAgICAvLyBSZW1vdmUgdGhpcyB3YXRjaCBmcm9tIHRoZSBMUlUgY2FjaGUgbWFuYWdlZCBieSB0aGVcbiAgICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbiwgdG8gcHJldmVudCBtZW1vcnlcbiAgICAgIC8vIGxlYWtzIGludm9sdmluZyB0aGUgY2xvc3VyZSBvZiB3YXRjaC5jYWxsYmFjay5cbiAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaC5mb3JnZXQod2F0Y2gpO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXF1ZXN0IGdhcmJhZ2UgY29sbGVjdGlvbiBvZiB1bnJlYWNoYWJsZSBub3JtYWxpemVkIGVudGl0aWVzLlxuICBwdWJsaWMgZ2MoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY0RhdGEuZ2MoKTtcbiAgfVxuXG4gIC8vIENhbGwgdGhpcyBtZXRob2QgdG8gZW5zdXJlIHRoZSBnaXZlbiByb290IElEIHJlbWFpbnMgaW4gdGhlIGNhY2hlIGFmdGVyXG4gIC8vIGdhcmJhZ2UgY29sbGVjdGlvbiwgYWxvbmcgd2l0aCBpdHMgdHJhbnNpdGl2ZSBjaGlsZCBlbnRpdGllcy4gTm90ZSB0aGF0XG4gIC8vIHRoZSBjYWNoZSBhdXRvbWF0aWNhbGx5IHJldGFpbnMgYWxsIGRpcmVjdGx5IHdyaXR0ZW4gZW50aXRpZXMuIEJ5IGRlZmF1bHQsXG4gIC8vIHRoZSByZXRhaW5tZW50IHBlcnNpc3RzIGFmdGVyIG9wdGltaXN0aWMgdXBkYXRlcyBhcmUgcmVtb3ZlZC4gUGFzcyB0cnVlXG4gIC8vIGZvciB0aGUgb3B0aW1pc3RpYyBhcmd1bWVudCBpZiB5b3Ugd291bGQgcHJlZmVyIGZvciB0aGUgcmV0YWlubWVudCB0byBiZVxuICAvLyBkaXNjYXJkZWQgd2hlbiB0aGUgdG9wLW1vc3Qgb3B0aW1pc3RpYyBsYXllciBpcyByZW1vdmVkLiBSZXR1cm5zIHRoZVxuICAvLyByZXN1bHRpbmcgKG5vbi1uZWdhdGl2ZSkgcmV0YWlubWVudCBjb3VudC5cbiAgcHVibGljIHJldGFpbihyb290SWQ6IHN0cmluZywgb3B0aW1pc3RpYz86IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLnJldGFpbihyb290SWQpO1xuICB9XG5cbiAgLy8gQ2FsbCB0aGlzIG1ldGhvZCB0byB1bmRvIHRoZSBlZmZlY3Qgb2YgdGhlIHJldGFpbiBtZXRob2QsIGFib3ZlLiBPbmNlIHRoZVxuICAvLyByZXRhaW5tZW50IGNvdW50IGZhbGxzIHRvIHplcm8sIHRoZSBnaXZlbiBJRCB3aWxsIG5vIGxvbmdlciBiZSBwcmVzZXJ2ZWRcbiAgLy8gZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbiwgdGhvdWdoIGl0IG1heSBzdGlsbCBiZSBwcmVzZXJ2ZWQgYnkgb3RoZXIgc2FmZVxuICAvLyBlbnRpdGllcyB0aGF0IHJlZmVyIHRvIGl0LiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgKG5vbi1uZWdhdGl2ZSkgcmV0YWlubWVudFxuICAvLyBjb3VudCwgaW4gY2FzZSB0aGF0J3MgdXNlZnVsLlxuICBwdWJsaWMgcmVsZWFzZShyb290SWQ6IHN0cmluZywgb3B0aW1pc3RpYz86IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLnJlbGVhc2Uocm9vdElkKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgYSBnaXZlbiBTdG9yZU9iamVjdCwgb2JleWluZyB0eXBlUG9saWNpZXNcbiAgLy8gYW5kIGtleUZpZWxkcyAoYW5kIGRhdGFJZEZyb21PYmplY3QsIGlmIHlvdSBzdGlsbCB1c2UgdGhhdCkuIEF0IG1pbmltdW0sXG4gIC8vIHRoZSBvYmplY3QgbXVzdCBjb250YWluIGEgX190eXBlbmFtZSBhbmQgYW55IHByaW1hcnkga2V5IGZpZWxkcyByZXF1aXJlZFxuICAvLyB0byBpZGVudGlmeSBlbnRpdGllcyBvZiB0aGF0IHR5cGUuIElmIHlvdSBwYXNzIGEgcXVlcnkgcmVzdWx0IG9iamVjdCwgYmVcbiAgLy8gc3VyZSB0aGF0IG5vbmUgb2YgdGhlIHByaW1hcnkga2V5IGZpZWxkcyBoYXZlIGJlZW4gcmVuYW1lZCBieSBhbGlhc2luZy5cbiAgLy8gSWYgeW91IHBhc3MgYSBSZWZlcmVuY2Ugb2JqZWN0LCBpdHMgX19yZWYgSUQgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuXG4gIHB1YmxpYyBpZGVudGlmeShvYmplY3Q6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gaXNSZWZlcmVuY2Uob2JqZWN0KSA/IG9iamVjdC5fX3JlZiA6XG4gICAgICB0aGlzLnBvbGljaWVzLmlkZW50aWZ5KG9iamVjdClbMF07XG4gIH1cblxuICBwdWJsaWMgZXZpY3Qob3B0aW9uczogQ2FjaGUuRXZpY3RPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgaWYgKCFvcHRpb25zLmlkKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwob3B0aW9ucywgXCJpZFwiKSkge1xuICAgICAgICAvLyBTZWUgY29tbWVudCBpbiBtb2RpZnkgbWV0aG9kIGFib3V0IHdoeSB3ZSByZXR1cm4gZmFsc2Ugd2hlblxuICAgICAgICAvLyBvcHRpb25zLmlkIGV4aXN0cyBidXQgaXMgZmFsc3kvdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0geyAuLi5vcHRpb25zLCBpZDogXCJST09UX1FVRVJZXCIgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCB0aGUgZXZpY3Rpb24gd2lsbCBlbmQgdXAgaW52b2tpbmcgYW55IG90aGVyXG4gICAgICAvLyBjYWNoZSB1cGRhdGUgb3BlcmF0aW9ucyB3aGlsZSBpdCdzIHJ1bm5pbmcsIGJ1dCB7aW4sZGV9Y3JlbWVudGluZ1xuICAgICAgLy8gdGhpcy50eENvdW50IHN0aWxsIHNlZW1zIGxpa2UgYSBnb29kIGlkZWEsIGZvciB1bmlmb3JtaXR5IHdpdGhcbiAgICAgIC8vIHRoZSBvdGhlciB1cGRhdGUgbWV0aG9kcy5cbiAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY0RhdGEuZXZpY3Qob3B0aW9ucyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmRhdGEuY2xlYXIoKTtcbiAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gdGhpcy5kYXRhO1xuICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVPcHRpbWlzdGljKGlkVG9SZW1vdmU6IHN0cmluZykge1xuICAgIGNvbnN0IG5ld09wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5yZW1vdmVMYXllcihpZFRvUmVtb3ZlKTtcbiAgICBpZiAobmV3T3B0aW1pc3RpY0RhdGEgIT09IHRoaXMub3B0aW1pc3RpY0RhdGEpIHtcbiAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSBuZXdPcHRpbWlzdGljRGF0YTtcbiAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHhDb3VudCA9IDA7XG5cbiAgcHVibGljIHBlcmZvcm1UcmFuc2FjdGlvbihcbiAgICB0cmFuc2FjdGlvbjogKGNhY2hlOiBJbk1lbW9yeUNhY2hlKSA9PiBhbnksXG4gICAgb3B0aW1pc3RpY0lkPzogc3RyaW5nIHwgbnVsbCxcbiAgKSB7XG4gICAgY29uc3QgcGVyZm9ybSA9IChsYXllcj86IEVudGl0eVN0b3JlKSA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEsIG9wdGltaXN0aWNEYXRhIH0gPSB0aGlzO1xuICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YSA9IGxheWVyO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgdHJhbnNhY3Rpb24odGhpcyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAtLXRoaXMudHhDb3VudDtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IG9wdGltaXN0aWNEYXRhO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbiA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpbWlzdGljSWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBOb3RlIHRoYXQgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGxheWVycyB3aXRoIHRoZSBzYW1lIG9wdGltaXN0aWNJZC5cbiAgICAgIC8vIFdoZW4gcmVtb3ZlT3B0aW1pc3RpYyhpZCkgaXMgY2FsbGVkIGZvciB0aGF0IGlkLCBhbGwgbWF0Y2hpbmcgbGF5ZXJzXG4gICAgICAvLyB3aWxsIGJlIHJlbW92ZWQsIGFuZCB0aGUgcmVtYWluaW5nIGxheWVycyB3aWxsIGJlIHJlYXBwbGllZC5cbiAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSB0aGlzLm9wdGltaXN0aWNEYXRhLmFkZExheWVyKG9wdGltaXN0aWNJZCwgcGVyZm9ybSk7XG4gICAgICBmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG9wdGltaXN0aWNJZCA9PT0gbnVsbCkge1xuICAgICAgLy8gRW5zdXJlIGJvdGggdGhpcy5kYXRhIGFuZCB0aGlzLm9wdGltaXN0aWNEYXRhIHJlZmVyIHRvIHRoZSByb290XG4gICAgICAvLyAobm9uLW9wdGltaXN0aWMpIGxheWVyIG9mIHRoZSBjYWNoZSBkdXJpbmcgdGhlIHRyYW5zYWN0aW9uLiBOb3RlXG4gICAgICAvLyB0aGF0IHRoaXMuZGF0YSBjb3VsZCBiZSBhIExheWVyIGlmIHdlIGFyZSBjdXJyZW50bHkgZXhlY3V0aW5nIGFuXG4gICAgICAvLyBvcHRpbWlzdGljIHRyYW5zYWN0aW9uIGZ1bmN0aW9uLCBidXQgb3RoZXJ3aXNlIHdpbGwgYWx3YXlzIGJlIGFuXG4gICAgICAvLyBFbnRpdHlTdG9yZS5Sb290IGluc3RhbmNlLlxuICAgICAgcGVyZm9ybSh0aGlzLmRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UsIGxlYXZlIHRoaXMuZGF0YSBhbmQgdGhpcy5vcHRpbWlzdGljRGF0YSB1bmNoYW5nZWQgYW5kXG4gICAgICAvLyBydW4gdGhlIHRyYW5zYWN0aW9uIHdpdGggYnJvYWRjYXN0IGJhdGNoaW5nLlxuICAgICAgcGVyZm9ybSgpO1xuICAgIH1cblxuICAgIC8vIFRoaXMgYnJvYWRjYXN0IGRvZXMgbm90aGluZyBpZiB0aGlzLnR4Q291bnQgPiAwLlxuICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcyhmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudDogRG9jdW1lbnROb2RlKTogRG9jdW1lbnROb2RlIHtcbiAgICBpZiAodGhpcy5hZGRUeXBlbmFtZSkge1xuICAgICAgbGV0IHJlc3VsdCA9IHRoaXMudHlwZW5hbWVEb2N1bWVudENhY2hlLmdldChkb2N1bWVudCk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICByZXN1bHQgPSBhZGRUeXBlbmFtZVRvRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLnR5cGVuYW1lRG9jdW1lbnRDYWNoZS5zZXQoZG9jdW1lbnQsIHJlc3VsdCk7XG4gICAgICAgIC8vIElmIHNvbWVvbmUgY2FsbHMgdHJhbnNmb3JtRG9jdW1lbnQgYW5kIHRoZW4gbWlzdGFrZW5seSBwYXNzZXMgdGhlXG4gICAgICAgIC8vIHJlc3VsdCBiYWNrIGludG8gYW4gQVBJIHRoYXQgYWxzbyBjYWxscyB0cmFuc2Zvcm1Eb2N1bWVudCwgbWFrZSBzdXJlXG4gICAgICAgIC8vIHdlIGRvbid0IGtlZXAgY3JlYXRpbmcgbmV3IHF1ZXJ5IGRvY3VtZW50cy5cbiAgICAgICAgdGhpcy50eXBlbmFtZURvY3VtZW50Q2FjaGUuc2V0KHJlc3VsdCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudDtcbiAgfVxuXG4gIHByb3RlY3RlZCBicm9hZGNhc3RXYXRjaGVzKGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24/OiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLnR4Q291bnQpIHtcbiAgICAgIHRoaXMud2F0Y2hlcy5mb3JFYWNoKGMgPT4gdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoKGMsIGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24pKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG1heWJlQnJvYWRjYXN0V2F0Y2ggPSB3cmFwKChcbiAgICBjOiBDYWNoZS5XYXRjaE9wdGlvbnMsXG4gICAgZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbj86IGJvb2xlYW4sXG4gICkgPT4ge1xuICAgIHJldHVybiB0aGlzLmJyb2FkY2FzdFdhdGNoLmNhbGwodGhpcywgYywgISFmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uKTtcbiAgfSwge1xuICAgIG1ha2VDYWNoZUtleTogKGM6IENhY2hlLldhdGNoT3B0aW9ucykgPT4ge1xuICAgICAgLy8gUmV0dXJuIGEgY2FjaGUga2V5ICh0aHVzIGVuYWJsaW5nIHJlc3VsdCBjYWNoaW5nKSBvbmx5IGlmIHdlJ3JlXG4gICAgICAvLyBjdXJyZW50bHkgdXNpbmcgYSBkYXRhIHN0b3JlIHRoYXQgY2FuIHRyYWNrIGNhY2hlIGRlcGVuZGVuY2llcy5cbiAgICAgIGNvbnN0IHN0b3JlID0gYy5vcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YTtcbiAgICAgIGlmIChzdXBwb3J0c1Jlc3VsdENhY2hpbmcoc3RvcmUpKSB7XG4gICAgICAgIGNvbnN0IHsgb3B0aW1pc3RpYywgcm9vdElkLCB2YXJpYWJsZXMgfSA9IGM7XG4gICAgICAgIHJldHVybiBzdG9yZS5tYWtlQ2FjaGVLZXkoXG4gICAgICAgICAgYy5xdWVyeSxcbiAgICAgICAgICAvLyBEaWZmZXJlbnQgd2F0Y2hlcyBjYW4gaGF2ZSB0aGUgc2FtZSBxdWVyeSwgb3B0aW1pc3RpY1xuICAgICAgICAgIC8vIHN0YXR1cywgcm9vdElkLCBhbmQgdmFyaWFibGVzLCBidXQgaWYgdGhlaXIgY2FsbGJhY2tzIGFyZVxuICAgICAgICAgIC8vIGRpZmZlcmVudCwgdGhlIChpZGVudGljYWwpIHJlc3VsdCBuZWVkcyB0byBiZSBkZWxpdmVyZWQgdG9cbiAgICAgICAgICAvLyBlYWNoIGRpc3RpbmN0IGNhbGxiYWNrLiBUaGUgZWFzaWVzdCB3YXkgdG8gYWNoaWV2ZSB0aGF0XG4gICAgICAgICAgLy8gc2VwYXJhdGlvbiBpcyB0byBpbmNsdWRlIGMuY2FsbGJhY2sgaW4gdGhlIGNhY2hlIGtleSBmb3JcbiAgICAgICAgICAvLyBtYXliZUJyb2FkY2FzdFdhdGNoIGNhbGxzLiBTZWUgaXNzdWUgIzU3MzMuXG4gICAgICAgICAgYy5jYWxsYmFjayxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7IG9wdGltaXN0aWMsIHJvb3RJZCwgdmFyaWFibGVzIH0pLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcHJpdmF0ZSB3YXRjaERlcCA9IGRlcDxDYWNoZS5XYXRjaE9wdGlvbnM+KCk7XG5cbiAgLy8gVGhpcyBtZXRob2QgaXMgd3JhcHBlZCBieSBtYXliZUJyb2FkY2FzdFdhdGNoLCB3aGljaCBpcyBjYWxsZWQgYnlcbiAgLy8gYnJvYWRjYXN0V2F0Y2hlcywgc28gdGhhdCB3ZSBjb21wdXRlIGFuZCBicm9hZGNhc3QgcmVzdWx0cyBvbmx5IHdoZW5cbiAgLy8gdGhlIGRhdGEgdGhhdCB3b3VsZCBiZSBicm9hZGNhc3QgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBJdCB3b3VsZCBiZVxuICAvLyBzaW1wbGVyIHRvIGNoZWNrIGZvciBjaGFuZ2VzIGFmdGVyIHJlY29tcHV0aW5nIGEgcmVzdWx0IGJ1dCBiZWZvcmVcbiAgLy8gYnJvYWRjYXN0aW5nIGl0LCBidXQgdGhpcyB3cmFwcGluZyBhcHByb2FjaCBhbGxvd3MgdXMgdG8gc2tpcCBib3RoXG4gIC8vIHRoZSByZWNvbXB1dGF0aW9uIGFuZCB0aGUgYnJvYWRjYXN0LCBpbiBtb3N0IGNhc2VzLlxuICBwcml2YXRlIGJyb2FkY2FzdFdhdGNoKFxuICAgIGM6IENhY2hlLldhdGNoT3B0aW9ucyxcbiAgICBmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uOiBib29sZWFuLFxuICApIHtcbiAgICAvLyBGaXJzdCwgaW52YWxpZGF0ZSBhbnkgb3RoZXIgbWF5YmVCcm9hZGNhc3RXYXRjaCB3cmFwcGVyIGZ1bmN0aW9uc1xuICAgIC8vIGN1cnJlbnRseSBkZXBlbmRpbmcgb24gdGhpcyBDYWNoZS5XYXRjaE9wdGlvbnMgb2JqZWN0IChpbmNsdWRpbmdcbiAgICAvLyB0aGUgb25lIGN1cnJlbnRseSBjYWxsaW5nIGJyb2FkY2FzdFdhdGNoKSwgc28gdGhleSB3aWxsIGJlIGluY2x1ZGVkXG4gICAgLy8gaW4gdGhlIG5leHQgYnJvYWRjYXN0LCBldmVuIGlmIHRoZSByZXN1bHQgdGhleSByZWNlaXZlIGlzIHRoZSBzYW1lXG4gICAgLy8gYXMgdGhlIHByZXZpb3VzIHJlc3VsdCB0aGV5IHJlY2VpdmVkLiBUaGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHdlXG4gICAgLy8gYXJlIGFib3V0IHRvIGRlbGl2ZXIgYSBkaWZmZXJlbnQgcmVzdWx0IHRvIGMuY2FsbGJhY2ssIHNvIGFueVxuICAgIC8vIHByZXZpb3VzIHJlc3VsdHMgc2hvdWxkIGhhdmUgYSBjaGFuY2UgdG8gYmUgcmVkZWxpdmVyZWQuXG4gICAgdGhpcy53YXRjaERlcC5kaXJ0eShjKTtcblxuICAgIC8vIE5leHQsIHJlLWRlcGVuZCBvbiB0aGlzLndhdGNoRGVwIGZvciBqdXN0IHRoaXMgaW52b2NhdGlvbiBvZlxuICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggKHRoaXMgaXMgYSBuby1vcCBpZiBicm9hZGNhc3RXYXRjaCB3YXMgbm90XG4gICAgLy8gY2FsbGVkIGJ5IG1heWJlQnJvYWRjYXN0V2F0Y2gpLiBUaGlzIGFsbG93cyBvbmx5IHRoZSBtb3N0IHJlY2VudFxuICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggaW52b2NhdGlvbiBmb3IgdGhpcyB3YXRjaGVyIHRvIHJlbWFpbiBjYWNoZWQsXG4gICAgLy8gZW5hYmxpbmcgcmUtYnJvYWRjYXN0IG9mIHByZXZpb3VzIHJlc3VsdHMgZXZlbiBpZiB0aGV5IGhhdmUgbm90XG4gICAgLy8gY2hhbmdlZCBzaW5jZSB0aGV5IHdlcmUgcHJldmlvdXNseSBkZWxpdmVyZWQuXG4gICAgdGhpcy53YXRjaERlcChjKTtcblxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmRpZmY8YW55Pih7XG4gICAgICBxdWVyeTogYy5xdWVyeSxcbiAgICAgIHZhcmlhYmxlczogYy52YXJpYWJsZXMsXG4gICAgICBvcHRpbWlzdGljOiBjLm9wdGltaXN0aWMsXG4gICAgfSk7XG5cbiAgICBpZiAoYy5vcHRpbWlzdGljICYmIGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24pIHtcbiAgICAgIGRpZmYuZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgfVxuXG4gICAgYy5jYWxsYmFjayhkaWZmKTtcbiAgfVxufVxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIseyJlcnJubyI6LTIsImNvZGUiOiJFTk9FTlQiLCJzeXNjYWxsIjoib3BlbiIsInBhdGgiOiIvVXNlcnMvcGVybWluZGVyc2luZ2gvUHJvamVjdHMva2lja29mZi96ZWlxLWJhc2UvcGFja2FnZXMvY29yZS9ub2RlX21vZHVsZXMvZ3JhcGhxbC10YWcvc3JjL2luZGV4LnRzIn0sIi8qIENvcmUgKi9cblxuZXhwb3J0IHtcbiAgQXBvbGxvQ2xpZW50LFxuICBBcG9sbG9DbGllbnRPcHRpb25zLFxuICBEZWZhdWx0T3B0aW9ucyxcbiAgbWVyZ2VPcHRpb25zLFxufSBmcm9tICcuL0Fwb2xsb0NsaWVudCc7XG5leHBvcnQge1xuICBPYnNlcnZhYmxlUXVlcnksXG4gIEZldGNoTW9yZU9wdGlvbnMsXG4gIFVwZGF0ZVF1ZXJ5T3B0aW9ucyxcbn0gZnJvbSAnLi9PYnNlcnZhYmxlUXVlcnknO1xuZXhwb3J0IHtcbiAgUXVlcnlPcHRpb25zLFxuICBXYXRjaFF1ZXJ5T3B0aW9ucyxcbiAgTXV0YXRpb25PcHRpb25zLFxuICBTdWJzY3JpcHRpb25PcHRpb25zLFxuICBGZXRjaFBvbGljeSxcbiAgV2F0Y2hRdWVyeUZldGNoUG9saWN5LFxuICBFcnJvclBvbGljeSxcbiAgRmV0Y2hNb3JlUXVlcnlPcHRpb25zLFxuICBTdWJzY3JpYmVUb01vcmVPcHRpb25zLFxuICBNdXRhdGlvblVwZGF0ZXJGbixcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5leHBvcnQgeyBOZXR3b3JrU3RhdHVzIH0gZnJvbSAnLi9uZXR3b3JrU3RhdHVzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IHtcbiAgUmVzb2x2ZXIsXG4gIEZyYWdtZW50TWF0Y2hlcixcbn0gZnJvbSAnLi9Mb2NhbFN0YXRlJztcbmV4cG9ydCB7IGlzQXBvbGxvRXJyb3IsIEFwb2xsb0Vycm9yIH0gZnJvbSAnLi4vZXJyb3JzJztcblxuLyogQ2FjaGUgKi9cblxuZXhwb3J0IHtcbiAgLy8gQWxsIHRoZSBleHBvcnRzICh0eXBlcyBhbmQgdmFsdWVzKSBmcm9tIC4uL2NhY2hlLCBtaW51cyBjYWNoZVNsb3QsXG4gIC8vIHdoaWNoIHdlIHdhbnQgdG8ga2VlcCBzZW1pLXByaXZhdGUuXG4gIENhY2hlLFxuICBBcG9sbG9DYWNoZSxcbiAgVHJhbnNhY3Rpb24sXG4gIERhdGFQcm94eSxcbiAgSW5NZW1vcnlDYWNoZSxcbiAgSW5NZW1vcnlDYWNoZUNvbmZpZyxcbiAgTWlzc2luZ0ZpZWxkRXJyb3IsXG4gIGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0LFxuICBSZWFjdGl2ZVZhcixcbiAgbWFrZVZhcixcbiAgVHlwZVBvbGljaWVzLFxuICBUeXBlUG9saWN5LFxuICBGaWVsZFBvbGljeSxcbiAgRmllbGRSZWFkRnVuY3Rpb24sXG4gIEZpZWxkTWVyZ2VGdW5jdGlvbixcbiAgRmllbGRGdW5jdGlvbk9wdGlvbnMsXG4gIFBvc3NpYmxlVHlwZXNNYXAsXG59IGZyb20gJy4uL2NhY2hlJztcblxuZXhwb3J0ICogZnJvbSAnLi4vY2FjaGUvaW5tZW1vcnkvdHlwZXMnO1xuXG4vKiBMaW5rICovXG5cbmV4cG9ydCAqIGZyb20gJy4uL2xpbmsvY29yZSc7XG5leHBvcnQgKiBmcm9tICcuLi9saW5rL2h0dHAnO1xuZXhwb3J0IHtcbiAgZnJvbUVycm9yLFxuICB0b1Byb21pc2UsXG4gIGZyb21Qcm9taXNlLFxuICBTZXJ2ZXJFcnJvcixcbiAgdGhyb3dTZXJ2ZXJFcnJvcixcbn0gZnJvbSAnLi4vbGluay91dGlscyc7XG5cbi8qIFV0aWxpdGllcyAqL1xuXG5leHBvcnQge1xuICBPYnNlcnZhYmxlLFxuICBPYnNlcnZlcixcbiAgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbixcbiAgUmVmZXJlbmNlLFxuICBpc1JlZmVyZW5jZSxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgU3RvcmVPYmplY3QsXG59IGZyb20gJy4uL3V0aWxpdGllcyc7XG5cbi8qIFN1cHBvcnRpbmcgKi9cblxuLy8gVGhlIHZlcmJvc2l0eSBvZiBpbnZhcmlhbnQue2xvZyx3YXJuLGVycm9yfSBjYW4gYmUgY29udHJvbGxlZCBnbG9iYWxseVxuLy8gKGZvciBhbnlvbmUgdXNpbmcgdGhlIHNhbWUgdHMtaW52YXJpYW50IHBhY2thZ2UpIGJ5IHBhc3NpbmcgXCJsb2dcIixcbi8vIFwid2FyblwiLCBcImVycm9yXCIsIG9yIFwic2lsZW50XCIgdG8gc2V0VmVyYm9zaXR5IChcImxvZ1wiIGlzIHRoZSBkZWZhdWx0KS5cbi8vIE5vdGUgdGhhdCBhbGwgaW52YXJpYW50LiogbG9nZ2luZyBpcyBoaWRkZW4gaW4gcHJvZHVjdGlvbi5cbmltcG9ydCB7IHNldFZlcmJvc2l0eSB9IGZyb20gXCJ0cy1pbnZhcmlhbnRcIjtcbmV4cG9ydCB7IHNldFZlcmJvc2l0eSBhcyBzZXRMb2dWZXJib3NpdHkgfVxuc2V0VmVyYm9zaXR5KFwibG9nXCIpO1xuXG4vLyBOb3RlIHRoYXQgaW1wb3J0aW5nIGBncWxgIGJ5IGl0c2VsZiwgdGhlbiBkZXN0cnVjdHVyaW5nXG4vLyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgc2VwYXJhdGVseSBiZWZvcmUgZXhwb3J0aW5nLCBpcyBpbnRlbnRpb25hbC5cbi8vIER1ZSB0byB0aGUgd2F5IHRoZSBgZ3JhcGhxbC10YWdgIGxpYnJhcnkgaXMgc2V0dXAsIGNlcnRhaW4gYnVuZGxlcnNcbi8vIGNhbid0IGZpbmQgdGhlIHByb3BlcnRpZXMgYWRkZWQgdG8gdGhlIGV4cG9ydGVkIGBncWxgIGZ1bmN0aW9uIHdpdGhvdXRcbi8vIGFkZGl0aW9uYWwgZ3VpZGFuY2UgKGUuZy4gUm9sbHVwIC0gc2VlXG4vLyBodHRwczovL3JvbGx1cGpzLm9yZy9ndWlkZS9lbi8jZXJyb3ItbmFtZS1pcy1ub3QtZXhwb3J0ZWQtYnktbW9kdWxlKS5cbi8vIEluc3RlYWQgb2YgaGF2aW5nIHBlb3BsZSB0aGF0IGFyZSB1c2luZyBidW5kbGVycyB3aXRoIGBAYXBvbGxvL2NsaWVudGAgYWRkXG4vLyBleHRyYSBidW5kbGVyIGNvbmZpZyB0byBoZWxwIGBncmFwaHFsLXRhZ2AgZXhwb3J0cyBiZSBmb3VuZCAod2hpY2ggd291bGQgYmVcbi8vIGF3a3dhcmQgc2luY2UgdGhleSBhcmVuJ3QgaW1wb3J0aW5nIGBncmFwaHFsLXRhZ2AgdGhlbXNlbHZlcyksIHRoaXNcbi8vIHdvcmthcm91bmQgb2YgcHVsbGluZyB0aGUgZXh0cmEgcHJvcGVydGllcyBvZmYgdGhlIGBncWxgIGZ1bmN0aW9uLFxuLy8gdGhlbiByZS1leHBvcnRpbmcgdGhlbSBzZXBhcmF0ZWx5LCBoZWxwcyBrZWVwcyBidW5kbGVycyBoYXBweSB3aXRob3V0IGFueVxuLy8gYWRkaXRpb25hbCBjb25maWcgY2hhbmdlcy5cbmV4cG9ydCB7XG4gIGRlZmF1bHQgYXMgZ3FsLFxuICByZXNldENhY2hlcyxcbiAgZGlzYWJsZUZyYWdtZW50V2FybmluZ3MsXG4gIGVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzLFxuICBkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsXG59IGZyb20gJ2dyYXBocWwtdGFnJztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBcG9sbG9DbGllbnQgfSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IGNhblVzZVdlYWtNYXAgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwb2xsb0NvbnRleHRWYWx1ZSB7XG4gIGNsaWVudD86IEFwb2xsb0NsaWVudDxvYmplY3Q+O1xuICByZW5kZXJQcm9taXNlcz86IFJlY29yZDxhbnksIGFueT47XG59XG5cbi8vIFRvIG1ha2Ugc3VyZSBBcG9sbG8gQ2xpZW50IGRvZXNuJ3QgY3JlYXRlIG1vcmUgdGhhbiBvbmUgUmVhY3QgY29udGV4dFxuLy8gKHdoaWNoIGNhbiBsZWFkIHRvIHByb2JsZW1zIGxpa2UgaGF2aW5nIGFuIEFwb2xsbyBDbGllbnQgaW5zdGFuY2UgYWRkZWRcbi8vIGluIG9uZSBjb250ZXh0LCB0aGVuIGF0dGVtcHRpbmcgdG8gcmV0cmlldmUgaXQgZnJvbSBhbm90aGVyIGRpZmZlcmVudFxuLy8gY29udGV4dCksIGEgc2luZ2xlIEFwb2xsbyBjb250ZXh0IGlzIGNyZWF0ZWQgYW5kIHRyYWNrZWQgaW4gZ2xvYmFsIHN0YXRlLlxuLy8gV2UgdXNlIFJlYWN0LmNyZWF0ZUNvbnRleHQgYXMgdGhlIGtleSBpbnN0ZWFkIG9mIGp1c3QgUmVhY3QgdG8gYXZvaWRcbi8vIGFtYmlndWl0aWVzIGJldHdlZW4gZGVmYXVsdCBhbmQgbmFtZXNwYWNlIFJlYWN0IGltcG9ydHMuXG5cbmNvbnN0IGNhY2hlID0gbmV3IChjYW5Vc2VXZWFrTWFwID8gV2Vha01hcCA6IE1hcCk8XG4gIHR5cGVvZiBSZWFjdC5jcmVhdGVDb250ZXh0LFxuICBSZWFjdC5Db250ZXh0PEFwb2xsb0NvbnRleHRWYWx1ZT5cbj4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwb2xsb0NvbnRleHQoKSB7XG4gIGxldCBjb250ZXh0ID0gY2FjaGUuZ2V0KFJlYWN0LmNyZWF0ZUNvbnRleHQpITtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgY29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8QXBvbGxvQ29udGV4dFZhbHVlPih7fSk7XG4gICAgY29udGV4dC5kaXNwbGF5TmFtZSA9ICdBcG9sbG9Db250ZXh0JztcbiAgICBjYWNoZS5zZXQoUmVhY3QuY3JlYXRlQ29udGV4dCwgY29udGV4dCk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbmV4cG9ydCB7IGdldEFwb2xsb0NvbnRleHQgYXMgcmVzZXRBcG9sbG9Db250ZXh0IH1cbiIsImltcG9ydCB7XG4gIERvY3VtZW50Tm9kZSxcbiAgRGVmaW5pdGlvbk5vZGUsXG4gIFZhcmlhYmxlRGVmaW5pdGlvbk5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlXG59IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuZXhwb3J0IGVudW0gRG9jdW1lbnRUeXBlIHtcbiAgUXVlcnksXG4gIE11dGF0aW9uLFxuICBTdWJzY3JpcHRpb25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRG9jdW1lbnREZWZpbml0aW9uIHtcbiAgdHlwZTogRG9jdW1lbnRUeXBlO1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhcmlhYmxlczogUmVhZG9ubHlBcnJheTxWYXJpYWJsZURlZmluaXRpb25Ob2RlPjtcbn1cblxuY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVyYXRpb25OYW1lKHR5cGU6IERvY3VtZW50VHlwZSkge1xuICBsZXQgbmFtZTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBEb2N1bWVudFR5cGUuUXVlcnk6XG4gICAgICBuYW1lID0gJ1F1ZXJ5JztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRG9jdW1lbnRUeXBlLk11dGF0aW9uOlxuICAgICAgbmFtZSA9ICdNdXRhdGlvbic7XG4gICAgICBicmVhaztcbiAgICBjYXNlIERvY3VtZW50VHlwZS5TdWJzY3JpcHRpb246XG4gICAgICBuYW1lID0gJ1N1YnNjcmlwdGlvbic7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gbmFtZTtcbn1cblxuLy8gVGhpcyBwYXJzZXIgaXMgbW9zdGx5IHVzZWQgdG8gc2FmdGV5IGNoZWNrIGluY29taW5nIGRvY3VtZW50cy5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZXIoZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSk6IElEb2N1bWVudERlZmluaXRpb24ge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoZG9jdW1lbnQpO1xuICBpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xuXG4gIGxldCB2YXJpYWJsZXMsIHR5cGUsIG5hbWU7XG5cbiAgaW52YXJpYW50KFxuICAgICEhZG9jdW1lbnQgJiYgISFkb2N1bWVudC5raW5kLFxuICAgIGBBcmd1bWVudCBvZiAke2RvY3VtZW50fSBwYXNzZWQgdG8gcGFyc2VyIHdhcyBub3QgYSB2YWxpZCBHcmFwaFFMIGAgK1xuICAgICAgYERvY3VtZW50Tm9kZS4gWW91IG1heSBuZWVkIHRvIHVzZSAnZ3JhcGhxbC10YWcnIG9yIGFub3RoZXIgbWV0aG9kIGAgK1xuICAgICAgYHRvIGNvbnZlcnQgeW91ciBvcGVyYXRpb24gaW50byBhIGRvY3VtZW50YFxuICApO1xuXG4gIGNvbnN0IGZyYWdtZW50cyA9IGRvY3VtZW50LmRlZmluaXRpb25zLmZpbHRlcihcbiAgICAoeDogRGVmaW5pdGlvbk5vZGUpID0+IHgua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbidcbiAgKTtcblxuICBjb25zdCBxdWVyaWVzID0gZG9jdW1lbnQuZGVmaW5pdGlvbnMuZmlsdGVyKFxuICAgICh4OiBEZWZpbml0aW9uTm9kZSkgPT5cbiAgICAgIHgua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIHgub3BlcmF0aW9uID09PSAncXVlcnknXG4gICk7XG5cbiAgY29uc3QgbXV0YXRpb25zID0gZG9jdW1lbnQuZGVmaW5pdGlvbnMuZmlsdGVyKFxuICAgICh4OiBEZWZpbml0aW9uTm9kZSkgPT5cbiAgICAgIHgua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIHgub3BlcmF0aW9uID09PSAnbXV0YXRpb24nXG4gICk7XG5cbiAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IGRvY3VtZW50LmRlZmluaXRpb25zLmZpbHRlcihcbiAgICAoeDogRGVmaW5pdGlvbk5vZGUpID0+XG4gICAgICB4LmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiB4Lm9wZXJhdGlvbiA9PT0gJ3N1YnNjcmlwdGlvbidcbiAgKTtcblxuICBpbnZhcmlhbnQoXG4gICAgIWZyYWdtZW50cy5sZW5ndGggfHxcbiAgICAgIChxdWVyaWVzLmxlbmd0aCB8fCBtdXRhdGlvbnMubGVuZ3RoIHx8IHN1YnNjcmlwdGlvbnMubGVuZ3RoKSxcbiAgICBgUGFzc2luZyBvbmx5IGEgZnJhZ21lbnQgdG8gJ2dyYXBocWwnIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLiBgICtcbiAgICAgIGBZb3UgbXVzdCBpbmNsdWRlIGEgcXVlcnksIHN1YnNjcmlwdGlvbiBvciBtdXRhdGlvbiBhcyB3ZWxsYFxuICApO1xuXG4gIGludmFyaWFudChcbiAgICBxdWVyaWVzLmxlbmd0aCArIG11dGF0aW9ucy5sZW5ndGggKyBzdWJzY3JpcHRpb25zLmxlbmd0aCA8PSAxLFxuICAgIGByZWFjdC1hcG9sbG8gb25seSBzdXBwb3J0cyBhIHF1ZXJ5LCBzdWJzY3JpcHRpb24sIG9yIGEgbXV0YXRpb24gcGVyIEhPQy4gYCArXG4gICAgICBgJHtkb2N1bWVudH0gaGFkICR7cXVlcmllcy5sZW5ndGh9IHF1ZXJpZXMsICR7c3Vic2NyaXB0aW9ucy5sZW5ndGh9IGAgK1xuICAgICAgYHN1YnNjcmlwdGlvbnMgYW5kICR7bXV0YXRpb25zLmxlbmd0aH0gbXV0YXRpb25zLiBgICtcbiAgICAgIGBZb3UgY2FuIHVzZSAnY29tcG9zZScgdG8gam9pbiBtdWx0aXBsZSBvcGVyYXRpb24gdHlwZXMgdG8gYSBjb21wb25lbnRgXG4gICk7XG5cbiAgdHlwZSA9IHF1ZXJpZXMubGVuZ3RoID8gRG9jdW1lbnRUeXBlLlF1ZXJ5IDogRG9jdW1lbnRUeXBlLk11dGF0aW9uO1xuICBpZiAoIXF1ZXJpZXMubGVuZ3RoICYmICFtdXRhdGlvbnMubGVuZ3RoKSB0eXBlID0gRG9jdW1lbnRUeXBlLlN1YnNjcmlwdGlvbjtcblxuICBjb25zdCBkZWZpbml0aW9ucyA9IHF1ZXJpZXMubGVuZ3RoXG4gICAgPyBxdWVyaWVzXG4gICAgOiBtdXRhdGlvbnMubGVuZ3RoXG4gICAgPyBtdXRhdGlvbnNcbiAgICA6IHN1YnNjcmlwdGlvbnM7XG5cbiAgaW52YXJpYW50KFxuICAgIGRlZmluaXRpb25zLmxlbmd0aCA9PT0gMSxcbiAgICBgcmVhY3QtYXBvbGxvIG9ubHkgc3VwcG9ydHMgb25lIGRlZmluaXRpb24gcGVyIEhPQy4gJHtkb2N1bWVudH0gaGFkIGAgK1xuICAgICAgYCR7ZGVmaW5pdGlvbnMubGVuZ3RofSBkZWZpbml0aW9ucy4gYCArXG4gICAgICBgWW91IGNhbiB1c2UgJ2NvbXBvc2UnIHRvIGpvaW4gbXVsdGlwbGUgb3BlcmF0aW9uIHR5cGVzIHRvIGEgY29tcG9uZW50YFxuICApO1xuXG4gIGNvbnN0IGRlZmluaXRpb24gPSBkZWZpbml0aW9uc1swXSBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZTtcbiAgdmFyaWFibGVzID0gZGVmaW5pdGlvbi52YXJpYWJsZURlZmluaXRpb25zIHx8IFtdO1xuXG4gIGlmIChkZWZpbml0aW9uLm5hbWUgJiYgZGVmaW5pdGlvbi5uYW1lLmtpbmQgPT09ICdOYW1lJykge1xuICAgIG5hbWUgPSBkZWZpbml0aW9uLm5hbWUudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgbmFtZSA9ICdkYXRhJzsgLy8gZmFsbGJhY2sgdG8gdXNpbmcgZGF0YSBpZiBubyBuYW1lXG4gIH1cblxuICBjb25zdCBwYXlsb2FkID0geyBuYW1lLCB0eXBlLCB2YXJpYWJsZXMgfTtcbiAgY2FjaGUuc2V0KGRvY3VtZW50LCBwYXlsb2FkKTtcbiAgcmV0dXJuIHBheWxvYWQ7XG59XG4iLCJpbXBvcnQgeyBEb2N1bWVudE5vZGUgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGVxdWFsIH0gZnJvbSAnQHdyeS9lcXVhbGl0eSc7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5pbXBvcnQgeyBBcG9sbG9DbGllbnQgfSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IERvY3VtZW50VHlwZSwgcGFyc2VyLCBvcGVyYXRpb25OYW1lIH0gZnJvbSAnLi4vcGFyc2VyJztcbmltcG9ydCB7IENvbW1vbk9wdGlvbnMgfSBmcm9tICcuLi90eXBlcy90eXBlcyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBPcGVyYXRpb25EYXRhPFRPcHRpb25zID0gYW55PiB7XG4gIHB1YmxpYyBpc01vdW50ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIHByZXZpb3VzT3B0aW9uczogQ29tbW9uT3B0aW9uczxUT3B0aW9ucz4gPSB7fSBhcyBDb21tb25PcHRpb25zPFxuICAgIFRPcHRpb25zXG4gID47XG4gIHB1YmxpYyBjb250ZXh0OiBhbnkgPSB7fTtcbiAgcHVibGljIGNsaWVudDogQXBvbGxvQ2xpZW50PG9iamVjdD47XG5cbiAgcHJpdmF0ZSBvcHRpb25zOiBDb21tb25PcHRpb25zPFRPcHRpb25zPiA9IHt9IGFzIENvbW1vbk9wdGlvbnM8VE9wdGlvbnM+O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBDb21tb25PcHRpb25zPFRPcHRpb25zPiwgY29udGV4dD86IGFueSkge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgKHt9IGFzIENvbW1vbk9wdGlvbnM8VE9wdGlvbnM+KTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0IHx8IHt9O1xuICB9XG5cbiAgcHVibGljIGdldE9wdGlvbnMoKTogQ29tbW9uT3B0aW9uczxUT3B0aW9ucz4ge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gIH1cblxuICBwdWJsaWMgc2V0T3B0aW9ucyhcbiAgICBuZXdPcHRpb25zOiBDb21tb25PcHRpb25zPFRPcHRpb25zPixcbiAgICBzdG9yZVByZXZpb3VzOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgaWYgKHN0b3JlUHJldmlvdXMgJiYgIWVxdWFsKHRoaXMub3B0aW9ucywgbmV3T3B0aW9ucykpIHtcbiAgICAgIHRoaXMucHJldmlvdXNPcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIH1cbiAgICB0aGlzLm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGV4ZWN1dGUoLi4uYXJnczogYW55KTogYW55O1xuICBwdWJsaWMgYWJzdHJhY3QgYWZ0ZXJFeGVjdXRlKC4uLmFyZ3M6IGFueSk6IHZvaWQgfCAoKCkgPT4gdm9pZCk7XG4gIHB1YmxpYyBhYnN0cmFjdCBjbGVhbnVwKCk6IHZvaWQ7XG5cbiAgcHJvdGVjdGVkIHVubW91bnQoKSB7XG4gICAgdGhpcy5pc01vdW50ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWZyZXNoQ2xpZW50KCkge1xuICAgIGNvbnN0IGNsaWVudCA9XG4gICAgICAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jbGllbnQpIHx8XG4gICAgICAodGhpcy5jb250ZXh0ICYmIHRoaXMuY29udGV4dC5jbGllbnQpO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgISFjbGllbnQsXG4gICAgICAnQ291bGQgbm90IGZpbmQgXCJjbGllbnRcIiBpbiB0aGUgY29udGV4dCBvciBwYXNzZWQgaW4gYXMgYW4gb3B0aW9uLiAnICtcbiAgICAgICAgJ1dyYXAgdGhlIHJvb3QgY29tcG9uZW50IGluIGFuIDxBcG9sbG9Qcm92aWRlcj4sIG9yIHBhc3MgYW4gJyArXG4gICAgICAgICdBcG9sbG9DbGllbnQgaW5zdGFuY2UgaW4gdmlhIG9wdGlvbnMuJ1xuICAgICk7XG5cbiAgICBsZXQgaXNOZXcgPSBmYWxzZTtcbiAgICBpZiAoY2xpZW50ICE9PSB0aGlzLmNsaWVudCkge1xuICAgICAgaXNOZXcgPSB0cnVlO1xuICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudDogdGhpcy5jbGllbnQgYXMgQXBvbGxvQ2xpZW50PG9iamVjdD4sXG4gICAgICBpc05ld1xuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgdmVyaWZ5RG9jdW1lbnRUeXBlKGRvY3VtZW50OiBEb2N1bWVudE5vZGUsIHR5cGU6IERvY3VtZW50VHlwZSkge1xuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHBhcnNlcihkb2N1bWVudCk7XG4gICAgY29uc3QgcmVxdWlyZWRPcGVyYXRpb25OYW1lID0gb3BlcmF0aW9uTmFtZSh0eXBlKTtcbiAgICBjb25zdCB1c2VkT3BlcmF0aW9uTmFtZSA9IG9wZXJhdGlvbk5hbWUob3BlcmF0aW9uLnR5cGUpO1xuICAgIGludmFyaWFudChcbiAgICAgIG9wZXJhdGlvbi50eXBlID09PSB0eXBlLFxuICAgICAgYFJ1bm5pbmcgYSAke3JlcXVpcmVkT3BlcmF0aW9uTmFtZX0gcmVxdWlyZXMgYSBncmFwaHFsIGAgK1xuICAgICAgICBgJHtyZXF1aXJlZE9wZXJhdGlvbk5hbWV9LCBidXQgYSAke3VzZWRPcGVyYXRpb25OYW1lfSB3YXMgdXNlZCBpbnN0ZWFkLmBcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuXG5pbXBvcnQgeyBPcGVyYXRpb25EYXRhIH0gZnJvbSAnLi9PcGVyYXRpb25EYXRhJztcbmltcG9ydCB7XG4gIFN1YnNjcmlwdGlvbkN1cnJlbnRPYnNlcnZhYmxlLFxuICBTdWJzY3JpcHRpb25EYXRhT3B0aW9ucyxcbiAgU3Vic2NyaXB0aW9uUmVzdWx0XG59IGZyb20gJy4uL3R5cGVzL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvbkRhdGE8XG4gIFREYXRhID0gYW55LFxuICBUVmFyaWFibGVzID0gYW55XG4+IGV4dGVuZHMgT3BlcmF0aW9uRGF0YTxTdWJzY3JpcHRpb25EYXRhT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4+IHtcbiAgcHJpdmF0ZSBzZXRSZXN1bHQ6IGFueTtcbiAgcHJpdmF0ZSBjdXJyZW50T2JzZXJ2YWJsZTogU3Vic2NyaXB0aW9uQ3VycmVudE9ic2VydmFibGUgPSB7fTtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgb3B0aW9ucyxcbiAgICBjb250ZXh0LFxuICAgIHNldFJlc3VsdFxuICB9OiB7XG4gICAgb3B0aW9uczogU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+O1xuICAgIGNvbnRleHQ6IGFueTtcbiAgICBzZXRSZXN1bHQ6IGFueTtcbiAgfSkge1xuICAgIHN1cGVyKG9wdGlvbnMsIGNvbnRleHQpO1xuICAgIHRoaXMuc2V0UmVzdWx0ID0gc2V0UmVzdWx0O1xuICAgIHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlKHJlc3VsdDogU3Vic2NyaXB0aW9uUmVzdWx0PFREYXRhPikge1xuICAgIGlmICh0aGlzLmdldE9wdGlvbnMoKS5za2lwID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICAgIHZhcmlhYmxlczogdGhpcy5nZXRPcHRpb25zKCkudmFyaWFibGVzXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBjdXJyZW50UmVzdWx0ID0gcmVzdWx0O1xuICAgIGlmICh0aGlzLnJlZnJlc2hDbGllbnQoKS5pc05ldykge1xuICAgICAgY3VycmVudFJlc3VsdCA9IHRoaXMuZ2V0TG9hZGluZ1Jlc3VsdCgpO1xuICAgIH1cblxuICAgIGxldCB7IHNob3VsZFJlc3Vic2NyaWJlIH0gPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICBpZiAodHlwZW9mIHNob3VsZFJlc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzaG91bGRSZXN1YnNjcmliZSA9ICEhc2hvdWxkUmVzdWJzY3JpYmUodGhpcy5nZXRPcHRpb25zKCkpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHNob3VsZFJlc3Vic2NyaWJlICE9PSBmYWxzZSAmJlxuICAgICAgdGhpcy5wcmV2aW91c09wdGlvbnMgJiZcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucHJldmlvdXNPcHRpb25zKS5sZW5ndGggPiAwICYmXG4gICAgICAodGhpcy5wcmV2aW91c09wdGlvbnMuc3Vic2NyaXB0aW9uICE9PSB0aGlzLmdldE9wdGlvbnMoKS5zdWJzY3JpcHRpb24gfHxcbiAgICAgICAgIWVxdWFsKHRoaXMucHJldmlvdXNPcHRpb25zLnZhcmlhYmxlcywgdGhpcy5nZXRPcHRpb25zKCkudmFyaWFibGVzKSB8fFxuICAgICAgICB0aGlzLnByZXZpb3VzT3B0aW9ucy5za2lwICE9PSB0aGlzLmdldE9wdGlvbnMoKS5za2lwKVxuICAgICkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICBjdXJyZW50UmVzdWx0ID0gdGhpcy5nZXRMb2FkaW5nUmVzdWx0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplKHRoaXMuZ2V0T3B0aW9ucygpKTtcbiAgICB0aGlzLnN0YXJ0U3Vic2NyaXB0aW9uKCk7XG5cbiAgICB0aGlzLnByZXZpb3VzT3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuICAgIHJldHVybiB7IC4uLmN1cnJlbnRSZXN1bHQsIHZhcmlhYmxlczogdGhpcy5nZXRPcHRpb25zKCkudmFyaWFibGVzIH07XG4gIH1cblxuICBwdWJsaWMgYWZ0ZXJFeGVjdXRlKCkge1xuICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhbnVwKCkge1xuICAgIHRoaXMuZW5kU3Vic2NyaXB0aW9uKCk7XG4gICAgZGVsZXRlIHRoaXMuY3VycmVudE9ic2VydmFibGUucXVlcnk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUob3B0aW9uczogU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+KSB7XG4gICAgaWYgKHRoaXMuY3VycmVudE9ic2VydmFibGUucXVlcnkgfHwgdGhpcy5nZXRPcHRpb25zKCkuc2tpcCA9PT0gdHJ1ZSkgcmV0dXJuO1xuICAgIHRoaXMuY3VycmVudE9ic2VydmFibGUucXVlcnkgPSB0aGlzLnJlZnJlc2hDbGllbnQoKS5jbGllbnQuc3Vic2NyaWJlKHtcbiAgICAgIHF1ZXJ5OiBvcHRpb25zLnN1YnNjcmlwdGlvbixcbiAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICBmZXRjaFBvbGljeTogb3B0aW9ucy5mZXRjaFBvbGljeSxcbiAgICAgIGNvbnRleHQ6IG9wdGlvbnMuY29udGV4dCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRTdWJzY3JpcHRpb24oKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudE9ic2VydmFibGUuc3Vic2NyaXB0aW9uKSByZXR1cm47XG4gICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZS5zdWJzY3JpcHRpb24gPSB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlLnF1ZXJ5IS5zdWJzY3JpYmUoXG4gICAgICB7XG4gICAgICAgIG5leHQ6IHRoaXMudXBkYXRlQ3VycmVudERhdGEuYmluZCh0aGlzKSxcbiAgICAgICAgZXJyb3I6IHRoaXMudXBkYXRlRXJyb3IuYmluZCh0aGlzKSxcbiAgICAgICAgY29tcGxldGU6IHRoaXMuY29tcGxldGVTdWJzY3JpcHRpb24uYmluZCh0aGlzKVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGdldExvYWRpbmdSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgZGF0YTogdW5kZWZpbmVkXG4gICAgfSBhcyBTdWJzY3JpcHRpb25SZXN1bHQ8VERhdGE+O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSZXN1bHQocmVzdWx0OiBTdWJzY3JpcHRpb25SZXN1bHQpIHtcbiAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgIHRoaXMuc2V0UmVzdWx0KHJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50RGF0YShyZXN1bHQ6IFN1YnNjcmlwdGlvblJlc3VsdDxURGF0YT4pIHtcbiAgICBjb25zdCB7IG9uU3Vic2NyaXB0aW9uRGF0YSB9ID0gdGhpcy5nZXRPcHRpb25zKCk7XG5cbiAgICB0aGlzLnVwZGF0ZVJlc3VsdCh7XG4gICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IHVuZGVmaW5lZFxuICAgIH0pO1xuXG4gICAgaWYgKG9uU3Vic2NyaXB0aW9uRGF0YSkge1xuICAgICAgb25TdWJzY3JpcHRpb25EYXRhKHtcbiAgICAgICAgY2xpZW50OiB0aGlzLnJlZnJlc2hDbGllbnQoKS5jbGllbnQsXG4gICAgICAgIHN1YnNjcmlwdGlvbkRhdGE6IHJlc3VsdFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgdGhpcy51cGRhdGVSZXN1bHQoe1xuICAgICAgZXJyb3IsXG4gICAgICBsb2FkaW5nOiBmYWxzZVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21wbGV0ZVN1YnNjcmlwdGlvbigpIHtcbiAgICAvLyBXZSBoYXZlIHRvIGRlZmVyIHRoaXMgZW5kU3Vic2NyaXB0aW9uIGNhbGwsIGJlY2F1c2Ugb3RoZXJ3aXNlIG11bHRpcGxlXG4gICAgLy8gc3Vic2NyaXB0aW9ucyBmb3IgdGhlIHNhbWUgY29tcG9uZW50IHdpbGwgY2F1c2UgaW5maW5pdGUgcmVuZGVyaW5nLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBvbGxvZ3JhcGhxbC9hcG9sbG8tY2xpZW50L3B1bGwvNzkxN1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgeyBvblN1YnNjcmlwdGlvbkNvbXBsZXRlIH0gPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICAgIGlmIChvblN1YnNjcmlwdGlvbkNvbXBsZXRlKSBvblN1YnNjcmlwdGlvbkNvbXBsZXRlKCk7XG4gICAgICB0aGlzLmVuZFN1YnNjcmlwdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBlbmRTdWJzY3JpcHRpb24oKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudE9ic2VydmFibGUuc3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgZGVsZXRlIHRoaXMuY3VycmVudE9ic2VydmFibGUuc3Vic2NyaXB0aW9uO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcblxuaW1wb3J0IHsgRG9jdW1lbnRUeXBlIH0gZnJvbSAnLi4vcGFyc2VyJztcbmltcG9ydCB7IEFwb2xsb0Vycm9yIH0gZnJvbSAnLi4vLi4vZXJyb3JzJztcbmltcG9ydCB7XG4gIE11dGF0aW9uRGF0YU9wdGlvbnMsXG4gIE11dGF0aW9uVHVwbGUsXG4gIE11dGF0aW9uRnVuY3Rpb25PcHRpb25zLFxuICBNdXRhdGlvblJlc3VsdCxcbn0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHsgT3BlcmF0aW9uRGF0YSB9IGZyb20gJy4vT3BlcmF0aW9uRGF0YSc7XG5pbXBvcnQgeyBPcGVyYXRpb25WYXJpYWJsZXMsIE11dGF0aW9uT3B0aW9ucywgbWVyZ2VPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgeyBGZXRjaFJlc3VsdCB9IGZyb20gJy4uLy4uL2xpbmsvY29yZSc7XG5cbnR5cGUgTXV0YXRpb25SZXN1bHRXaXRob3V0Q2xpZW50PFREYXRhID0gYW55PiA9IE9taXQ8TXV0YXRpb25SZXN1bHQ8VERhdGE+LCAnY2xpZW50Jz47XG5cbmV4cG9ydCBjbGFzcyBNdXRhdGlvbkRhdGE8XG4gIFREYXRhID0gYW55LFxuICBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzXG4+IGV4dGVuZHMgT3BlcmF0aW9uRGF0YTxNdXRhdGlvbkRhdGFPcHRpb25zPFREYXRhLCBUVmFyaWFibGVzPj4ge1xuICBwcml2YXRlIG1vc3RSZWNlbnRNdXRhdGlvbklkOiBudW1iZXI7XG4gIHByaXZhdGUgcmVzdWx0OiBNdXRhdGlvblJlc3VsdFdpdGhvdXRDbGllbnQ8VERhdGE+O1xuICBwcml2YXRlIHByZXZpb3VzUmVzdWx0PzogTXV0YXRpb25SZXN1bHRXaXRob3V0Q2xpZW50PFREYXRhPjtcbiAgcHJpdmF0ZSBzZXRSZXN1bHQ6IChyZXN1bHQ6IE11dGF0aW9uUmVzdWx0V2l0aG91dENsaWVudDxURGF0YT4pID0+IGFueTtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgb3B0aW9ucyxcbiAgICBjb250ZXh0LFxuICAgIHJlc3VsdCxcbiAgICBzZXRSZXN1bHRcbiAgfToge1xuICAgIG9wdGlvbnM6IE11dGF0aW9uRGF0YU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+O1xuICAgIGNvbnRleHQ6IGFueTtcbiAgICByZXN1bHQ6IE11dGF0aW9uUmVzdWx0V2l0aG91dENsaWVudDxURGF0YT47XG4gICAgc2V0UmVzdWx0OiAocmVzdWx0OiBNdXRhdGlvblJlc3VsdFdpdGhvdXRDbGllbnQ8VERhdGE+KSA9PiBhbnk7XG4gIH0pIHtcbiAgICBzdXBlcihvcHRpb25zLCBjb250ZXh0KTtcbiAgICB0aGlzLnZlcmlmeURvY3VtZW50VHlwZShvcHRpb25zLm11dGF0aW9uLCBEb2N1bWVudFR5cGUuTXV0YXRpb24pO1xuICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHRoaXMuc2V0UmVzdWx0ID0gc2V0UmVzdWx0O1xuICAgIHRoaXMubW9zdFJlY2VudE11dGF0aW9uSWQgPSAwO1xuICB9XG5cbiAgcHVibGljIGV4ZWN1dGUocmVzdWx0OiBNdXRhdGlvblJlc3VsdFdpdGhvdXRDbGllbnQ8VERhdGE+KTogTXV0YXRpb25UdXBsZTxURGF0YSwgVFZhcmlhYmxlcz4ge1xuICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICB0aGlzLnZlcmlmeURvY3VtZW50VHlwZSh0aGlzLmdldE9wdGlvbnMoKS5tdXRhdGlvbiwgRG9jdW1lbnRUeXBlLk11dGF0aW9uKTtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5ydW5NdXRhdGlvbixcbiAgICAgIHsgLi4ucmVzdWx0LCBjbGllbnQ6IHRoaXMucmVmcmVzaENsaWVudCgpLmNsaWVudCB9XG4gICAgXSBhcyBNdXRhdGlvblR1cGxlPFREYXRhLCBUVmFyaWFibGVzPjtcbiAgfVxuXG4gIHB1YmxpYyBhZnRlckV4ZWN1dGUoKSB7XG4gICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzLnVubW91bnQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhbnVwKCkge1xuICAgIC8vIE5vIGNsZWFudXAgcmVxdWlyZWQuXG4gIH1cblxuICBwcml2YXRlIHJ1bk11dGF0aW9uID0gKFxuICAgIG11dGF0aW9uRnVuY3Rpb25PcHRpb25zOiBNdXRhdGlvbkZ1bmN0aW9uT3B0aW9uczxcbiAgICAgIFREYXRhLFxuICAgICAgVFZhcmlhYmxlc1xuICAgID4gPSB7fSBhcyBNdXRhdGlvbkZ1bmN0aW9uT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz5cbiAgKSA9PiB7XG4gICAgdGhpcy5vbk11dGF0aW9uU3RhcnQoKTtcbiAgICBjb25zdCBtdXRhdGlvbklkID0gdGhpcy5nZW5lcmF0ZU5ld011dGF0aW9uSWQoKTtcblxuICAgIHJldHVybiB0aGlzLm11dGF0ZShtdXRhdGlvbkZ1bmN0aW9uT3B0aW9ucylcbiAgICAgIC50aGVuKChyZXNwb25zZTogRmV0Y2hSZXN1bHQ8VERhdGE+KSA9PiB7XG4gICAgICAgIHRoaXMub25NdXRhdGlvbkNvbXBsZXRlZChyZXNwb25zZSwgbXV0YXRpb25JZCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yOiBBcG9sbG9FcnJvcikgPT4ge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuICAgICAgICB0aGlzLm9uTXV0YXRpb25FcnJvcihlcnJvciwgbXV0YXRpb25JZCk7XG4gICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVycm9yczogZXJyb3IsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBtdXRhdGUoXG4gICAgb3B0aW9uczogTXV0YXRpb25GdW5jdGlvbk9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+XG4gICkge1xuICAgIHJldHVybiB0aGlzLnJlZnJlc2hDbGllbnQoKS5jbGllbnQubXV0YXRlKFxuICAgICAgbWVyZ2VPcHRpb25zKFxuICAgICAgICB0aGlzLmdldE9wdGlvbnMoKSxcbiAgICAgICAgb3B0aW9ucyBhcyBNdXRhdGlvbk9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+LFxuICAgICAgKSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBvbk11dGF0aW9uU3RhcnQoKSB7XG4gICAgaWYgKCF0aGlzLnJlc3VsdC5sb2FkaW5nICYmICF0aGlzLmdldE9wdGlvbnMoKS5pZ25vcmVSZXN1bHRzKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJlc3VsdCh7XG4gICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgY2FsbGVkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uTXV0YXRpb25Db21wbGV0ZWQoXG4gICAgcmVzcG9uc2U6IEZldGNoUmVzdWx0PFREYXRhPixcbiAgICBtdXRhdGlvbklkOiBudW1iZXJcbiAgKSB7XG4gICAgY29uc3QgeyBvbkNvbXBsZXRlZCwgaWdub3JlUmVzdWx0cyB9ID0gdGhpcy5nZXRPcHRpb25zKCk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9ycyB9ID0gcmVzcG9uc2U7XG4gICAgY29uc3QgZXJyb3IgPVxuICAgICAgZXJyb3JzICYmIGVycm9ycy5sZW5ndGggPiAwXG4gICAgICAgID8gbmV3IEFwb2xsb0Vycm9yKHsgZ3JhcGhRTEVycm9yczogZXJyb3JzIH0pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgY2FsbE9uY29tcGxldGUgPSAoKSA9PlxuICAgICAgb25Db21wbGV0ZWQgPyBvbkNvbXBsZXRlZChkYXRhIGFzIFREYXRhKSA6IG51bGw7XG5cbiAgICBpZiAodGhpcy5pc01vc3RSZWNlbnRNdXRhdGlvbihtdXRhdGlvbklkKSAmJiAhaWdub3JlUmVzdWx0cykge1xuICAgICAgdGhpcy51cGRhdGVSZXN1bHQoe1xuICAgICAgICBjYWxsZWQ6IHRydWUsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBkYXRhLFxuICAgICAgICBlcnJvclxuICAgICAgfSk7XG4gICAgfVxuICAgIGNhbGxPbmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIG9uTXV0YXRpb25FcnJvcihlcnJvcjogQXBvbGxvRXJyb3IsIG11dGF0aW9uSWQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmlzTW9zdFJlY2VudE11dGF0aW9uKG11dGF0aW9uSWQpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJlc3VsdCh7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxuICAgICAgICBjYWxsZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVOZXdNdXRhdGlvbklkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICsrdGhpcy5tb3N0UmVjZW50TXV0YXRpb25JZDtcbiAgfVxuXG4gIHByaXZhdGUgaXNNb3N0UmVjZW50TXV0YXRpb24obXV0YXRpb25JZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMubW9zdFJlY2VudE11dGF0aW9uSWQgPT09IG11dGF0aW9uSWQ7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVJlc3VsdChyZXN1bHQ6IE11dGF0aW9uUmVzdWx0V2l0aG91dENsaWVudDxURGF0YT4pOiBNdXRhdGlvblJlc3VsdFdpdGhvdXRDbGllbnQ8VERhdGE+IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmlzTW91bnRlZCAmJlxuICAgICAgKCF0aGlzLnByZXZpb3VzUmVzdWx0IHx8ICFlcXVhbCh0aGlzLnByZXZpb3VzUmVzdWx0LCByZXN1bHQpKVxuICAgICkge1xuICAgICAgdGhpcy5zZXRSZXN1bHQocmVzdWx0KTtcbiAgICAgIHRoaXMucHJldmlvdXNSZXN1bHQgPSByZXN1bHQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgRXhlY3V0aW9uUmVzdWx0LCBEb2N1bWVudE5vZGUgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuXG5pbXBvcnQgeyBBcG9sbG9MaW5rLCBGZXRjaFJlc3VsdCwgR3JhcGhRTFJlcXVlc3QsIGV4ZWN1dGUgfSBmcm9tICcuLi9saW5rL2NvcmUnO1xuaW1wb3J0IHsgQXBvbGxvQ2FjaGUsIERhdGFQcm94eSB9IGZyb20gJy4uL2NhY2hlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGNvbXBhY3QgfSBmcm9tICcuLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL3ZlcnNpb24nO1xuaW1wb3J0IHsgSHR0cExpbmssIFVyaUZ1bmN0aW9uIH0gZnJvbSAnLi4vbGluay9odHRwJztcblxuaW1wb3J0IHsgUXVlcnlNYW5hZ2VyIH0gZnJvbSAnLi9RdWVyeU1hbmFnZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZVF1ZXJ5IH0gZnJvbSAnLi9PYnNlcnZhYmxlUXVlcnknO1xuXG5pbXBvcnQge1xuICBBcG9sbG9RdWVyeVJlc3VsdCxcbiAgT3BlcmF0aW9uVmFyaWFibGVzLFxuICBSZXNvbHZlcnMsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQge1xuICBRdWVyeU9wdGlvbnMsXG4gIFdhdGNoUXVlcnlPcHRpb25zLFxuICBNdXRhdGlvbk9wdGlvbnMsXG4gIFN1YnNjcmlwdGlvbk9wdGlvbnMsXG4gIFdhdGNoUXVlcnlGZXRjaFBvbGljeSxcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5cbmltcG9ydCB7XG4gIExvY2FsU3RhdGUsXG4gIEZyYWdtZW50TWF0Y2hlcixcbn0gZnJvbSAnLi9Mb2NhbFN0YXRlJztcblxuZXhwb3J0IGludGVyZmFjZSBEZWZhdWx0T3B0aW9ucyB7XG4gIHdhdGNoUXVlcnk/OiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPGFueSwgYW55Pj47XG4gIHF1ZXJ5PzogUGFydGlhbDxRdWVyeU9wdGlvbnM8YW55LCBhbnk+PjtcbiAgbXV0YXRlPzogUGFydGlhbDxNdXRhdGlvbk9wdGlvbnM8YW55LCBhbnk+Pjtcbn1cblxubGV0IGhhc1N1Z2dlc3RlZERldnRvb2xzID0gZmFsc2U7XG5cbmV4cG9ydCB0eXBlIEFwb2xsb0NsaWVudE9wdGlvbnM8VENhY2hlU2hhcGU+ID0ge1xuICB1cmk/OiBzdHJpbmcgfCBVcmlGdW5jdGlvbjtcbiAgY3JlZGVudGlhbHM/OiBzdHJpbmc7XG4gIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBsaW5rPzogQXBvbGxvTGluaztcbiAgY2FjaGU6IEFwb2xsb0NhY2hlPFRDYWNoZVNoYXBlPjtcbiAgc3NyRm9yY2VGZXRjaERlbGF5PzogbnVtYmVyO1xuICBzc3JNb2RlPzogYm9vbGVhbjtcbiAgY29ubmVjdFRvRGV2VG9vbHM/OiBib29sZWFuO1xuICBxdWVyeURlZHVwbGljYXRpb24/OiBib29sZWFuO1xuICBkZWZhdWx0T3B0aW9ucz86IERlZmF1bHRPcHRpb25zO1xuICBhc3N1bWVJbW11dGFibGVSZXN1bHRzPzogYm9vbGVhbjtcbiAgcmVzb2x2ZXJzPzogUmVzb2x2ZXJzIHwgUmVzb2x2ZXJzW107XG4gIHR5cGVEZWZzPzogc3RyaW5nIHwgc3RyaW5nW10gfCBEb2N1bWVudE5vZGUgfCBEb2N1bWVudE5vZGVbXTtcbiAgZnJhZ21lbnRNYXRjaGVyPzogRnJhZ21lbnRNYXRjaGVyO1xuICBuYW1lPzogc3RyaW5nO1xuICB2ZXJzaW9uPzogc3RyaW5nO1xufTtcblxudHlwZSBPcHRpb25zVW5pb248VERhdGEsIFRWYXJpYWJsZXM+ID1cbiAgfCBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT5cbiAgfCBRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVERhdGE+XG4gIHwgTXV0YXRpb25PcHRpb25zPFREYXRhLCBUVmFyaWFibGVzPjtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlT3B0aW9uczxcbiAgVE9wdGlvbnMgZXh0ZW5kcyBPcHRpb25zVW5pb248YW55LCBhbnk+XG4+KFxuICBkZWZhdWx0czogUGFydGlhbDxUT3B0aW9ucz4sXG4gIG9wdGlvbnM6IFRPcHRpb25zLFxuKTogVE9wdGlvbnMge1xuICByZXR1cm4gY29tcGFjdChkZWZhdWx0cywgb3B0aW9ucywgb3B0aW9ucy52YXJpYWJsZXMgJiYge1xuICAgIHZhcmlhYmxlczoge1xuICAgICAgLi4uZGVmYXVsdHMudmFyaWFibGVzLFxuICAgICAgLi4ub3B0aW9ucy52YXJpYWJsZXMsXG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgcHJpbWFyeSBBcG9sbG8gQ2xpZW50IGNsYXNzLiBJdCBpcyB1c2VkIHRvIHNlbmQgR3JhcGhRTCBkb2N1bWVudHMgKGkuZS4gcXVlcmllc1xuICogYW5kIG11dGF0aW9ucykgdG8gYSBHcmFwaFFMIHNwZWMtY29tcGxpYW50IHNlcnZlciBvdmVyIGEge0BsaW5rIE5ldHdvcmtJbnRlcmZhY2V9IGluc3RhbmNlLFxuICogcmVjZWl2ZSByZXN1bHRzIGZyb20gdGhlIHNlcnZlciBhbmQgY2FjaGUgdGhlIHJlc3VsdHMgaW4gYSBzdG9yZS4gSXQgYWxzbyBkZWxpdmVycyB1cGRhdGVzXG4gKiB0byBHcmFwaFFMIHF1ZXJpZXMgdGhyb3VnaCB7QGxpbmsgT2JzZXJ2YWJsZX0gaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQXBvbGxvQ2xpZW50PFRDYWNoZVNoYXBlPiBpbXBsZW1lbnRzIERhdGFQcm94eSB7XG4gIHB1YmxpYyBsaW5rOiBBcG9sbG9MaW5rO1xuICBwdWJsaWMgY2FjaGU6IEFwb2xsb0NhY2hlPFRDYWNoZVNoYXBlPjtcbiAgcHVibGljIGRpc2FibGVOZXR3b3JrRmV0Y2hlczogYm9vbGVhbjtcbiAgcHVibGljIHZlcnNpb246IHN0cmluZztcbiAgcHVibGljIHF1ZXJ5RGVkdXBsaWNhdGlvbjogYm9vbGVhbjtcbiAgcHVibGljIGRlZmF1bHRPcHRpb25zOiBEZWZhdWx0T3B0aW9ucyA9IHt9O1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZURlZnM6IEFwb2xsb0NsaWVudE9wdGlvbnM8VENhY2hlU2hhcGU+Wyd0eXBlRGVmcyddO1xuXG4gIHByaXZhdGUgcXVlcnlNYW5hZ2VyOiBRdWVyeU1hbmFnZXI8VENhY2hlU2hhcGU+O1xuICBwcml2YXRlIGRldlRvb2xzSG9va0NiOiBGdW5jdGlvbjtcbiAgcHJpdmF0ZSByZXNldFN0b3JlQ2FsbGJhY2tzOiBBcnJheTwoKSA9PiBQcm9taXNlPGFueT4+ID0gW107XG4gIHByaXZhdGUgY2xlYXJTdG9yZUNhbGxiYWNrczogQXJyYXk8KCkgPT4gUHJvbWlzZTxhbnk+PiA9IFtdO1xuICBwcml2YXRlIGxvY2FsU3RhdGU6IExvY2FsU3RhdGU8VENhY2hlU2hhcGU+O1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGFuIGluc3RhbmNlIG9mIHtAbGluayBBcG9sbG9DbGllbnR9LlxuICAgKlxuICAgKiBAcGFyYW0gdXJpIFRoZSBHcmFwaFFMIGVuZHBvaW50IHRoYXQgQXBvbGxvIENsaWVudCB3aWxsIGNvbm5lY3QgdG8uIElmXG4gICAqICAgICAgICAgICAgYGxpbmtgIGlzIGNvbmZpZ3VyZWQsIHRoaXMgb3B0aW9uIGlzIGlnbm9yZWQuXG4gICAqIEBwYXJhbSBsaW5rIFRoZSB7QGxpbmsgQXBvbGxvTGlua30gb3ZlciB3aGljaCBHcmFwaFFMIGRvY3VtZW50cyB3aWxsIGJlIHJlc29sdmVkIGludG8gYSByZXNwb25zZS5cbiAgICpcbiAgICogQHBhcmFtIGNhY2hlIFRoZSBpbml0aWFsIGNhY2hlIHRvIHVzZSBpbiB0aGUgZGF0YSBzdG9yZS5cbiAgICpcbiAgICogQHBhcmFtIHNzck1vZGUgRGV0ZXJtaW5lcyB3aGV0aGVyIHRoaXMgaXMgYmVpbmcgcnVuIGluIFNlcnZlciBTaWRlIFJlbmRlcmluZyAoU1NSKSBtb2RlLlxuICAgKlxuICAgKiBAcGFyYW0gc3NyRm9yY2VGZXRjaERlbGF5IERldGVybWluZXMgdGhlIHRpbWUgaW50ZXJ2YWwgYmVmb3JlIHdlIGZvcmNlIGZldGNoIHF1ZXJpZXMgZm9yIGFcbiAgICogc2VydmVyIHNpZGUgcmVuZGVyLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnlEZWR1cGxpY2F0aW9uIElmIHNldCB0byBmYWxzZSwgYSBxdWVyeSB3aWxsIHN0aWxsIGJlIHNlbnQgdG8gdGhlIHNlcnZlciBldmVuIGlmIGEgcXVlcnlcbiAgICogd2l0aCBpZGVudGljYWwgcGFyYW1ldGVycyAocXVlcnksIHZhcmlhYmxlcywgb3BlcmF0aW9uTmFtZSkgaXMgYWxyZWFkeSBpbiBmbGlnaHQuXG4gICAqXG4gICAqIEBwYXJhbSBkZWZhdWx0T3B0aW9ucyBVc2VkIHRvIHNldCBhcHBsaWNhdGlvbiB3aWRlIGRlZmF1bHRzIGZvciB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgc3VwcGxpZWQgdG8gYHdhdGNoUXVlcnlgLCBgcXVlcnlgLCBvclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgYG11dGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSBhc3N1bWVJbW11dGFibGVSZXN1bHRzIFdoZW4gdGhpcyBvcHRpb24gaXMgdHJ1ZSwgdGhlIGNsaWVudCB3aWxsIGFzc3VtZSByZXN1bHRzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWQgZnJvbSB0aGUgY2FjaGUgYXJlIG5ldmVyIG11dGF0ZWQgYnkgYXBwbGljYXRpb24gY29kZSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggZW5hYmxlcyBzdWJzdGFudGlhbCBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25zLiBQYXNzaW5nXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB7IGZyZWV6ZVJlc3VsdHM6IHRydWUgfWAgdG8gdGhlIGBJbk1lbW9yeUNhY2hlYCBjb25zdHJ1Y3RvclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW4gaGVscCBlbmZvcmNlIHRoaXMgaW1tdXRhYmlsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSBBIGN1c3RvbSBuYW1lIHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhpcyBjbGllbnQsIHdoZW5cbiAgICogICAgICAgICAgICAgdXNpbmcgQXBvbGxvIGNsaWVudCBhd2FyZW5lc3MgZmVhdHVyZXMuIEUuZy4gXCJpT1NcIi5cbiAgICpcbiAgICogQHBhcmFtIHZlcnNpb24gQSBjdXN0b20gdmVyc2lvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoaXMgY2xpZW50LFxuICAgKiAgICAgICAgICAgICAgICB3aGVuIHVzaW5nIEFwb2xsbyBjbGllbnQgYXdhcmVuZXNzIGZlYXR1cmVzLiBUaGlzIGlzIHRoZVxuICAgKiAgICAgICAgICAgICAgICB2ZXJzaW9uIG9mIHlvdXIgY2xpZW50LCB3aGljaCB5b3UgbWF5IHdhbnQgdG8gaW5jcmVtZW50IG9uXG4gICAqICAgICAgICAgICAgICAgIG5ldyBidWlsZHMuIFRoaXMgaXMgTk9UIHRoZSB2ZXJzaW9uIG9mIEFwb2xsbyBDbGllbnQgdGhhdFxuICAgKiAgICAgICAgICAgICAgICB5b3UgYXJlIHVzaW5nLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9uczogQXBvbGxvQ2xpZW50T3B0aW9uczxUQ2FjaGVTaGFwZT4pIHtcbiAgICBjb25zdCB7XG4gICAgICB1cmksXG4gICAgICBjcmVkZW50aWFscyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBjYWNoZSxcbiAgICAgIHNzck1vZGUgPSBmYWxzZSxcbiAgICAgIHNzckZvcmNlRmV0Y2hEZWxheSA9IDAsXG4gICAgICBjb25uZWN0VG9EZXZUb29scyA9XG4gICAgICAgIC8vIEV4cG9zZSB0aGUgY2xpZW50IGluc3RhbmNlIGFzIHdpbmRvdy5fX0FQT0xMT19DTElFTlRfXyBhbmQgY2FsbFxuICAgICAgICAvLyBvbkJyb2FkY2FzdCBpbiBxdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcyB0byBlbmFibGUgYnJvd3NlclxuICAgICAgICAvLyBkZXZ0b29scywgYnV0IGRpc2FibGUgdGhlbSBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24uXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmXG4gICAgICAgICEod2luZG93IGFzIGFueSkuX19BUE9MTE9fQ0xJRU5UX18gJiZcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHRydWUsXG4gICAgICBkZWZhdWx0T3B0aW9ucyxcbiAgICAgIGFzc3VtZUltbXV0YWJsZVJlc3VsdHMgPSBmYWxzZSxcbiAgICAgIHJlc29sdmVycyxcbiAgICAgIHR5cGVEZWZzLFxuICAgICAgZnJhZ21lbnRNYXRjaGVyLFxuICAgICAgbmFtZTogY2xpZW50QXdhcmVuZXNzTmFtZSxcbiAgICAgIHZlcnNpb246IGNsaWVudEF3YXJlbmVzc1ZlcnNpb24sXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBsZXQgeyBsaW5rIH0gPSBvcHRpb25zO1xuXG4gICAgaWYgKCFsaW5rKSB7XG4gICAgICBsaW5rID0gdXJpXG4gICAgICAgID8gbmV3IEh0dHBMaW5rKHsgdXJpLCBjcmVkZW50aWFscywgaGVhZGVycyB9KVxuICAgICAgICA6IEFwb2xsb0xpbmsuZW1wdHkoKTtcbiAgICB9XG5cbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAgIFwiVG8gaW5pdGlhbGl6ZSBBcG9sbG8gQ2xpZW50LCB5b3UgbXVzdCBzcGVjaWZ5IGEgJ2NhY2hlJyBwcm9wZXJ0eSBcIiArXG4gICAgICAgIFwiaW4gdGhlIG9wdGlvbnMgb2JqZWN0LiBcXG5cIiArXG4gICAgICAgIFwiRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSB2aXNpdDogaHR0cHM6Ly9nby5hcG9sbG8uZGV2L2MvZG9jc1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzID0gc3NyTW9kZSB8fCBzc3JGb3JjZUZldGNoRGVsYXkgPiAwO1xuICAgIHRoaXMucXVlcnlEZWR1cGxpY2F0aW9uID0gcXVlcnlEZWR1cGxpY2F0aW9uO1xuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLnR5cGVEZWZzID0gdHlwZURlZnM7XG5cbiAgICBpZiAoc3NyRm9yY2VGZXRjaERlbGF5KSB7XG4gICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiAodGhpcy5kaXNhYmxlTmV0d29ya0ZldGNoZXMgPSBmYWxzZSksXG4gICAgICAgIHNzckZvcmNlRmV0Y2hEZWxheSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy53YXRjaFF1ZXJ5ID0gdGhpcy53YXRjaFF1ZXJ5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuYmluZCh0aGlzKTtcbiAgICB0aGlzLm11dGF0ZSA9IHRoaXMubXV0YXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXNldFN0b3JlID0gdGhpcy5yZXNldFN0b3JlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPSB0aGlzLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcy5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKGNvbm5lY3RUb0RldlRvb2xzICYmIHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7XG4gICAgICAod2luZG93IGFzIGFueSkuX19BUE9MTE9fQ0xJRU5UX18gPSB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN1Z2dlc3QgaW5zdGFsbGluZyB0aGUgZGV2dG9vbHMgZm9yIGRldmVsb3BlcnMgd2hvIGRvbid0IGhhdmUgdGhlbVxuICAgICAqL1xuICAgIGlmICghaGFzU3VnZ2VzdGVkRGV2dG9vbHMgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaGFzU3VnZ2VzdGVkRGV2dG9vbHMgPSB0cnVlO1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB3aW5kb3cuZG9jdW1lbnQgJiZcbiAgICAgICAgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYgJiZcbiAgICAgICAgISh3aW5kb3cgYXMgYW55KS5fX0FQT0xMT19ERVZUT09MU19HTE9CQUxfSE9PS19fXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbmF2ID0gd2luZG93Lm5hdmlnYXRvcjtcbiAgICAgICAgY29uc3QgdWEgPSBuYXYgJiYgbmF2LnVzZXJBZ2VudDtcbiAgICAgICAgbGV0IHVybDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHlwZW9mIHVhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgaWYgKHVhLmluZGV4T2YoXCJDaHJvbWUvXCIpID4gLTEpIHtcbiAgICAgICAgICAgIHVybCA9IFwiaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvXCIgK1xuICAgICAgICAgICAgICBcImFwb2xsby1jbGllbnQtZGV2ZWxvcGVyLXQvamRra25ra2JlYmJhcGlsZ29lY2NjaWdsa2ZibWJuZm1cIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoXCJGaXJlZm94L1wiKSA+IC0xKSB7XG4gICAgICAgICAgICB1cmwgPSBcImh0dHBzOi8vYWRkb25zLm1vemlsbGEub3JnL2VuLVVTL2ZpcmVmb3gvYWRkb24vYXBvbGxvLWRldmVsb3Blci10b29scy9cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgIGludmFyaWFudC5sb2coXG4gICAgICAgICAgICBcIkRvd25sb2FkIHRoZSBBcG9sbG8gRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IFwiICtcbiAgICAgICAgICAgICAgXCJleHBlcmllbmNlOiBcIiArIHVybFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuXG4gICAgdGhpcy5sb2NhbFN0YXRlID0gbmV3IExvY2FsU3RhdGUoe1xuICAgICAgY2FjaGUsXG4gICAgICBjbGllbnQ6IHRoaXMsXG4gICAgICByZXNvbHZlcnMsXG4gICAgICBmcmFnbWVudE1hdGNoZXIsXG4gICAgfSk7XG5cbiAgICB0aGlzLnF1ZXJ5TWFuYWdlciA9IG5ldyBRdWVyeU1hbmFnZXIoe1xuICAgICAgY2FjaGU6IHRoaXMuY2FjaGUsXG4gICAgICBsaW5rOiB0aGlzLmxpbmssXG4gICAgICBxdWVyeURlZHVwbGljYXRpb24sXG4gICAgICBzc3JNb2RlLFxuICAgICAgY2xpZW50QXdhcmVuZXNzOiB7XG4gICAgICAgIG5hbWU6IGNsaWVudEF3YXJlbmVzc05hbWUhLFxuICAgICAgICB2ZXJzaW9uOiBjbGllbnRBd2FyZW5lc3NWZXJzaW9uISxcbiAgICAgIH0sXG4gICAgICBsb2NhbFN0YXRlOiB0aGlzLmxvY2FsU3RhdGUsXG4gICAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzLFxuICAgICAgb25Ccm9hZGNhc3Q6IGNvbm5lY3RUb0RldlRvb2xzID8gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5kZXZUb29sc0hvb2tDYikge1xuICAgICAgICAgIHRoaXMuZGV2VG9vbHNIb29rQ2Ioe1xuICAgICAgICAgICAgYWN0aW9uOiB7fSxcbiAgICAgICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgICAgIHF1ZXJpZXM6IHRoaXMucXVlcnlNYW5hZ2VyLmdldFF1ZXJ5U3RvcmUoKSxcbiAgICAgICAgICAgICAgbXV0YXRpb25zOiB0aGlzLnF1ZXJ5TWFuYWdlci5tdXRhdGlvblN0b3JlIHx8IHt9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFXaXRoT3B0aW1pc3RpY1Jlc3VsdHM6IHRoaXMuY2FjaGUuZXh0cmFjdCh0cnVlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSA6IHZvaWQgMCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIHRlcm1pbmF0ZSBhbnkgYWN0aXZlIGNsaWVudCBwcm9jZXNzZXMsIG1ha2luZyBpdCBzYWZlXG4gICAqIHRvIGRpc3Bvc2Ugb2YgdGhpcyBgQXBvbGxvQ2xpZW50YCBpbnN0YW5jZS5cbiAgICovXG4gIHB1YmxpYyBzdG9wKCkge1xuICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3AoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHdhdGNoZXMgdGhlIGNhY2hlIHN0b3JlIG9mIHRoZSBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZFxuICAgKiByZXR1cm5zIGFuIHtAbGluayBPYnNlcnZhYmxlUXVlcnl9LiBXZSBjYW4gc3Vic2NyaWJlIHRvIHRoaXMge0BsaW5rIE9ic2VydmFibGVRdWVyeX0gYW5kXG4gICAqIHJlY2VpdmUgdXBkYXRlZCByZXN1bHRzIHRocm91Z2ggYSBHcmFwaFFMIG9ic2VydmVyIHdoZW4gdGhlIGNhY2hlIHN0b3JlIGNoYW5nZXMuXG4gICAqIDxwIC8+PHAgLz5cbiAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBpbXBsZW1lbnRhdGlvbiBvZiBHcmFwaFFMIHN1YnNjcmlwdGlvbnMuIFJhdGhlcixcbiAgICogaXQgdXNlcyBBcG9sbG8ncyBzdG9yZSBpbiBvcmRlciB0byByZWFjdGl2ZWx5IGRlbGl2ZXIgdXBkYXRlcyB0byB5b3VyIHF1ZXJ5IHJlc3VsdHMuXG4gICAqIDxwIC8+PHAgLz5cbiAgICogRm9yIGV4YW1wbGUsIHN1cHBvc2UgeW91IGNhbGwgd2F0Y2hRdWVyeSBvbiBhIEdyYXBoUUwgcXVlcnkgdGhhdCBmZXRjaGVzIGEgcGVyc29uJ3NcbiAgICogZmlyc3QgYW5kIGxhc3QgbmFtZSBhbmQgdGhpcyBwZXJzb24gaGFzIGEgcGFydGljdWxhciBvYmplY3QgaWRlbnRpZmVyLCBwcm92aWRlZCBieVxuICAgKiBkYXRhSWRGcm9tT2JqZWN0LiBMYXRlciwgYSBkaWZmZXJlbnQgcXVlcnkgZmV0Y2hlcyB0aGF0IHNhbWUgcGVyc29uJ3NcbiAgICogZmlyc3QgYW5kIGxhc3QgbmFtZSBhbmQgdGhlIGZpcnN0IG5hbWUgaGFzIG5vdyBjaGFuZ2VkLiBUaGVuLCBhbnkgb2JzZXJ2ZXJzIGFzc29jaWF0ZWRcbiAgICogd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgZmlyc3QgcXVlcnkgd2lsbCBiZSB1cGRhdGVkIHdpdGggYSBuZXcgcmVzdWx0IG9iamVjdC5cbiAgICogPHAgLz48cCAvPlxuICAgKiBOb3RlIHRoYXQgaWYgdGhlIGNhY2hlIGRvZXMgbm90IGNoYW5nZSwgdGhlIHN1YnNjcmliZXIgd2lsbCAqbm90KiBiZSBub3RpZmllZC5cbiAgICogPHAgLz48cCAvPlxuICAgKiBTZWUgW2hlcmVdKGh0dHBzOi8vbWVkaXVtLmNvbS9hcG9sbG8tc3RhY2svdGhlLWNvbmNlcHRzLW9mLWdyYXBocWwtYmM2OGJkODE5YmUzIy4zbWIwY2JjbWMpIGZvclxuICAgKiBhIGRlc2NyaXB0aW9uIG9mIHN0b3JlIHJlYWN0aXZpdHkuXG4gICAqL1xuICBwdWJsaWMgd2F0Y2hRdWVyeTxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBUPixcbiAgKTogT2JzZXJ2YWJsZVF1ZXJ5PFQsIFRWYXJpYWJsZXM+IHtcbiAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy53YXRjaFF1ZXJ5KSB7XG4gICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gWFhYIE92ZXJ3cml0aW5nIG9wdGlvbnMgaXMgcHJvYmFibHkgbm90IHRoZSBiZXN0IHdheSB0byBkbyB0aGlzIGxvbmcgdGVybS4uLlxuICAgIGlmIChcbiAgICAgIHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzICYmXG4gICAgICAob3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gJ25ldHdvcmstb25seScgfHxcbiAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gJ2NhY2hlLWFuZC1uZXR3b3JrJylcbiAgICApIHtcbiAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMsIGZldGNoUG9saWN5OiAnY2FjaGUtZmlyc3QnIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLndhdGNoUXVlcnk8VCwgVFZhcmlhYmxlcz4ob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyByZXNvbHZlcyBhIHNpbmdsZSBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZFxuICAgKiByZXR1cm5zIGEge0BsaW5rIFByb21pc2V9IHdoaWNoIGlzIGVpdGhlciByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgZGF0YVxuICAgKiBvciByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3Qgb2YgdHlwZSB7QGxpbmsgUXVlcnlPcHRpb25zfSB0aGF0IGFsbG93cyB1cyB0b1xuICAgKiBkZXNjcmliZSBob3cgdGhpcyBxdWVyeSBzaG91bGQgYmUgdHJlYXRlZCBlLmcuIHdoZXRoZXIgaXQgc2hvdWxkIGhpdCB0aGVcbiAgICogc2VydmVyIGF0IGFsbCBvciBqdXN0IHJlc29sdmUgZnJvbSB0aGUgY2FjaGUsIGV0Yy5cbiAgICovXG4gIHB1YmxpYyBxdWVyeTxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVD4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VD4+IHtcbiAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy5xdWVyeSkge1xuICAgICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmRlZmF1bHRPcHRpb25zLnF1ZXJ5LCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQoXG4gICAgICAob3B0aW9ucy5mZXRjaFBvbGljeSBhcyBXYXRjaFF1ZXJ5RmV0Y2hQb2xpY3kpICE9PSAnY2FjaGUtYW5kLW5ldHdvcmsnLFxuICAgICAgJ1RoZSBjYWNoZS1hbmQtbmV0d29yayBmZXRjaFBvbGljeSBkb2VzIG5vdCB3b3JrIHdpdGggY2xpZW50LnF1ZXJ5LCBiZWNhdXNlICcgK1xuICAgICAgJ2NsaWVudC5xdWVyeSBjYW4gb25seSByZXR1cm4gYSBzaW5nbGUgcmVzdWx0LiBQbGVhc2UgdXNlIGNsaWVudC53YXRjaFF1ZXJ5ICcgK1xuICAgICAgJ3RvIHJlY2VpdmUgbXVsdGlwbGUgcmVzdWx0cyBmcm9tIHRoZSBjYWNoZSBhbmQgdGhlIG5ldHdvcmssIG9yIGNvbnNpZGVyICcgK1xuICAgICAgJ3VzaW5nIGEgZGlmZmVyZW50IGZldGNoUG9saWN5LCBzdWNoIGFzIGNhY2hlLWZpcnN0IG9yIG5ldHdvcmstb25seS4nXG4gICAgKTtcblxuICAgIGlmICh0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyAmJiBvcHRpb25zLmZldGNoUG9saWN5ID09PSAnbmV0d29yay1vbmx5Jykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgZmV0Y2hQb2xpY3k6ICdjYWNoZS1maXJzdCcgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIucXVlcnk8VCwgVFZhcmlhYmxlcz4ob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyByZXNvbHZlcyBhIHNpbmdsZSBtdXRhdGlvbiBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZCByZXR1cm5zIGFcbiAgICoge0BsaW5rIFByb21pc2V9IHdoaWNoIGlzIGVpdGhlciByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgZGF0YSBvciByZWplY3RlZCB3aXRoIGFuXG4gICAqIGVycm9yLlxuICAgKlxuICAgKiBJdCB0YWtlcyBvcHRpb25zIGFzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBhbmQgdmFsdWVzOlxuICAgKi9cbiAgcHVibGljIG11dGF0ZTxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBNdXRhdGlvbk9wdGlvbnM8VCwgVFZhcmlhYmxlcz4sXG4gICk6IFByb21pc2U8RmV0Y2hSZXN1bHQ8VD4+IHtcbiAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUpIHtcbiAgICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIubXV0YXRlPFQ+KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgc3Vic2NyaWJlcyB0byBhIGdyYXBocWwgc3Vic2NyaXB0aW9uIGFjY29yZGluZyB0byB0aGUgb3B0aW9ucyBzcGVjaWZpZWQgYW5kIHJldHVybnMgYW5cbiAgICoge0BsaW5rIE9ic2VydmFibGV9IHdoaWNoIGVpdGhlciBlbWl0cyByZWNlaXZlZCBkYXRhIG9yIGFuIGVycm9yLlxuICAgKi9cbiAgcHVibGljIHN1YnNjcmliZTxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBTdWJzY3JpcHRpb25PcHRpb25zPFRWYXJpYWJsZXMsIFQ+LFxuICApOiBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PFQ+PiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLnN0YXJ0R3JhcGhRTFN1YnNjcmlwdGlvbjxUPihvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmllcyB0byByZWFkIHNvbWUgZGF0YSBmcm9tIHRoZSBzdG9yZSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkXG4gICAqIEdyYXBoUUwgcXVlcnkgd2l0aG91dCBtYWtpbmcgYSBuZXR3b3JrIHJlcXVlc3QuIFRoaXMgbWV0aG9kIHdpbGwgc3RhcnQgYXRcbiAgICogdGhlIHJvb3QgcXVlcnkuIFRvIHN0YXJ0IGF0IGEgc3BlY2lmaWMgaWQgcmV0dXJuZWQgYnkgYGRhdGFJZEZyb21PYmplY3RgXG4gICAqIHVzZSBgcmVhZEZyYWdtZW50YC5cbiAgICpcbiAgICogQHBhcmFtIG9wdGltaXN0aWMgU2V0IHRvIGB0cnVlYCB0byBhbGxvdyBgcmVhZFF1ZXJ5YCB0byByZXR1cm5cbiAgICogb3B0aW1pc3RpYyByZXN1bHRzLiBJcyBgZmFsc2VgIGJ5IGRlZmF1bHQuXG4gICAqL1xuICBwdWJsaWMgcmVhZFF1ZXJ5PFQgPSBhbnksIFRWYXJpYWJsZXMgPSBPcGVyYXRpb25WYXJpYWJsZXM+KFxuICAgIG9wdGlvbnM6IERhdGFQcm94eS5RdWVyeTxUVmFyaWFibGVzLCBUPixcbiAgICBvcHRpbWlzdGljOiBib29sZWFuID0gZmFsc2UsXG4gICk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5yZWFkUXVlcnk8VCwgVFZhcmlhYmxlcz4ob3B0aW9ucywgb3B0aW1pc3RpYyk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZXMgdG8gcmVhZCBzb21lIGRhdGEgZnJvbSB0aGUgc3RvcmUgaW4gdGhlIHNoYXBlIG9mIHRoZSBwcm92aWRlZFxuICAgKiBHcmFwaFFMIGZyYWdtZW50IHdpdGhvdXQgbWFraW5nIGEgbmV0d29yayByZXF1ZXN0LiBUaGlzIG1ldGhvZCB3aWxsIHJlYWQgYVxuICAgKiBHcmFwaFFMIGZyYWdtZW50IGZyb20gYW55IGFyYml0cmFyeSBpZCB0aGF0IGlzIGN1cnJlbnRseSBjYWNoZWQsIHVubGlrZVxuICAgKiBgcmVhZFF1ZXJ5YCB3aGljaCB3aWxsIG9ubHkgcmVhZCBmcm9tIHRoZSByb290IHF1ZXJ5LlxuICAgKlxuICAgKiBZb3UgbXVzdCBwYXNzIGluIGEgR3JhcGhRTCBkb2N1bWVudCB3aXRoIGEgc2luZ2xlIGZyYWdtZW50IG9yIGEgZG9jdW1lbnRcbiAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHJlYWRpbmcuIElmIHlvdSBwYXNzXG4gICAqIGluIGEgZG9jdW1lbnQgd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhlbiB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgYVxuICAgKiBgZnJhZ21lbnROYW1lYC5cbiAgICpcbiAgICogQHBhcmFtIG9wdGltaXN0aWMgU2V0IHRvIGB0cnVlYCB0byBhbGxvdyBgcmVhZEZyYWdtZW50YCB0byByZXR1cm5cbiAgICogb3B0aW1pc3RpYyByZXN1bHRzLiBJcyBgZmFsc2VgIGJ5IGRlZmF1bHQuXG4gICAqL1xuICBwdWJsaWMgcmVhZEZyYWdtZW50PFQgPSBhbnksIFRWYXJpYWJsZXMgPSBPcGVyYXRpb25WYXJpYWJsZXM+KFxuICAgIG9wdGlvbnM6IERhdGFQcm94eS5GcmFnbWVudDxUVmFyaWFibGVzLCBUPixcbiAgICBvcHRpbWlzdGljOiBib29sZWFuID0gZmFsc2UsXG4gICk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5yZWFkRnJhZ21lbnQ8VCwgVFZhcmlhYmxlcz4ob3B0aW9ucywgb3B0aW1pc3RpYyk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIHNvbWUgZGF0YSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkIEdyYXBoUUwgcXVlcnkgZGlyZWN0bHkgdG9cbiAgICogdGhlIHN0b3JlLiBUaGlzIG1ldGhvZCB3aWxsIHN0YXJ0IGF0IHRoZSByb290IHF1ZXJ5LiBUbyBzdGFydCBhdCBhXG4gICAqIHNwZWNpZmljIGlkIHJldHVybmVkIGJ5IGBkYXRhSWRGcm9tT2JqZWN0YCB0aGVuIHVzZSBgd3JpdGVGcmFnbWVudGAuXG4gICAqL1xuICBwdWJsaWMgd3JpdGVRdWVyeTxURGF0YSA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogRGF0YVByb3h5LldyaXRlUXVlcnlPcHRpb25zPFREYXRhLCBUVmFyaWFibGVzPixcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS53cml0ZVF1ZXJ5PFREYXRhLCBUVmFyaWFibGVzPihvcHRpb25zKTtcbiAgICB0aGlzLnF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIHNvbWUgZGF0YSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkIEdyYXBoUUwgZnJhZ21lbnQgZGlyZWN0bHkgdG9cbiAgICogdGhlIHN0b3JlLiBUaGlzIG1ldGhvZCB3aWxsIHdyaXRlIHRvIGEgR3JhcGhRTCBmcmFnbWVudCBmcm9tIGFueSBhcmJpdHJhcnlcbiAgICogaWQgdGhhdCBpcyBjdXJyZW50bHkgY2FjaGVkLCB1bmxpa2UgYHdyaXRlUXVlcnlgIHdoaWNoIHdpbGwgb25seSB3cml0ZVxuICAgKiBmcm9tIHRoZSByb290IHF1ZXJ5LlxuICAgKlxuICAgKiBZb3UgbXVzdCBwYXNzIGluIGEgR3JhcGhRTCBkb2N1bWVudCB3aXRoIGEgc2luZ2xlIGZyYWdtZW50IG9yIGEgZG9jdW1lbnRcbiAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHdyaXRpbmcuIElmIHlvdSBwYXNzXG4gICAqIGluIGEgZG9jdW1lbnQgd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhlbiB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgYVxuICAgKiBgZnJhZ21lbnROYW1lYC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZUZyYWdtZW50PFREYXRhID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBEYXRhUHJveHkuV3JpdGVGcmFnbWVudE9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+LFxuICApOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlLndyaXRlRnJhZ21lbnQ8VERhdGEsIFRWYXJpYWJsZXM+KG9wdGlvbnMpO1xuICAgIHRoaXMucXVlcnlNYW5hZ2VyLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBfX2FjdGlvbkhvb2tGb3JEZXZUb29scyhjYjogKCkgPT4gYW55KSB7XG4gICAgdGhpcy5kZXZUb29sc0hvb2tDYiA9IGNiO1xuICB9XG5cbiAgcHVibGljIF9fcmVxdWVzdFJhdyhwYXlsb2FkOiBHcmFwaFFMUmVxdWVzdCk6IE9ic2VydmFibGU8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgcmV0dXJuIGV4ZWN1dGUodGhpcy5saW5rLCBwYXlsb2FkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgeW91ciBlbnRpcmUgc3RvcmUgYnkgY2xlYXJpbmcgb3V0IHlvdXIgY2FjaGUgYW5kIHRoZW4gcmUtZXhlY3V0aW5nXG4gICAqIGFsbCBvZiB5b3VyIGFjdGl2ZSBxdWVyaWVzLiBUaGlzIG1ha2VzIGl0IHNvIHRoYXQgeW91IG1heSBndWFyYW50ZWUgdGhhdFxuICAgKiB0aGVyZSBpcyBubyBkYXRhIGxlZnQgaW4geW91ciBzdG9yZSBmcm9tIGEgdGltZSBiZWZvcmUgeW91IGNhbGxlZCB0aGlzXG4gICAqIG1ldGhvZC5cbiAgICpcbiAgICogYHJlc2V0U3RvcmUoKWAgaXMgdXNlZnVsIHdoZW4geW91ciB1c2VyIGp1c3QgbG9nZ2VkIG91dC4gWW914oCZdmUgcmVtb3ZlZCB0aGVcbiAgICogdXNlciBzZXNzaW9uLCBhbmQgeW91IG5vdyB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGFueSByZWZlcmVuY2VzIHRvIGRhdGEgeW91XG4gICAqIG1pZ2h0IGhhdmUgZmV0Y2hlZCB3aGlsZSB0aGUgdXNlciBzZXNzaW9uIHdhcyBhY3RpdmUgaXMgZ29uZS5cbiAgICpcbiAgICogSXQgaXMgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgYHJlc2V0U3RvcmUoKWAgKndpbGwqIHJlZmV0Y2ggYW55IGFjdGl2ZVxuICAgKiBxdWVyaWVzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGNvbXBvbmVudHMgdGhhdCBtaWdodCBiZSBtb3VudGVkIHdpbGwgZXhlY3V0ZVxuICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgKiByZS1leGVjdXRlIGFueSBxdWVyaWVzIHRoZW4geW91IHNob3VsZCBtYWtlIHN1cmUgdG8gc3RvcCB3YXRjaGluZyBhbnlcbiAgICogYWN0aXZlIHF1ZXJpZXMuXG4gICAqL1xuICBwdWJsaWMgcmVzZXRTdG9yZSgpOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PGFueT5bXSB8IG51bGw+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgIC50aGVuKCgpID0+IHRoaXMucXVlcnlNYW5hZ2VyLmNsZWFyU3RvcmUoKSlcbiAgICAgIC50aGVuKCgpID0+IFByb21pc2UuYWxsKHRoaXMucmVzZXRTdG9yZUNhbGxiYWNrcy5tYXAoZm4gPT4gZm4oKSkpKVxuICAgICAgLnRoZW4oKCkgPT4gdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBkYXRhIGZyb20gdGhlIHN0b3JlLiBVbmxpa2UgYHJlc2V0U3RvcmVgLCBgY2xlYXJTdG9yZWAgd2lsbFxuICAgKiBub3QgcmVmZXRjaCBhbnkgYWN0aXZlIHF1ZXJpZXMuXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTdG9yZSgpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAudGhlbigoKSA9PiB0aGlzLnF1ZXJ5TWFuYWdlci5jbGVhclN0b3JlKCkpXG4gICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbCh0aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MubWFwKGZuID0+IGZuKCkpKSk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIGNhbGxiYWNrcyB0byBiZSByZWdpc3RlcmVkIHRoYXQgYXJlIGV4ZWN1dGVkIHdoZW4gdGhlIHN0b3JlIGlzXG4gICAqIHJlc2V0LiBgb25SZXNldFN0b3JlYCByZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWRcbiAgICogdG8gcmVtb3ZlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKi9cbiAgcHVibGljIG9uUmVzZXRTdG9yZShjYjogKCkgPT4gUHJvbWlzZTxhbnk+KTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MgPSB0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MuZmlsdGVyKGMgPT4gYyAhPT0gY2IpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIGNhbGxiYWNrcyB0byBiZSByZWdpc3RlcmVkIHRoYXQgYXJlIGV4ZWN1dGVkIHdoZW4gdGhlIHN0b3JlIGlzXG4gICAqIGNsZWFyZWQuIGBvbkNsZWFyU3RvcmVgIHJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZFxuICAgKiB0byByZW1vdmUgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAqL1xuICBwdWJsaWMgb25DbGVhclN0b3JlKGNiOiAoKSA9PiBQcm9taXNlPGFueT4pOiAoKSA9PiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MucHVzaChjYik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcyA9IHRoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcy5maWx0ZXIoYyA9PiBjICE9PSBjYik7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZldGNoZXMgYWxsIG9mIHlvdXIgYWN0aXZlIHF1ZXJpZXMuXG4gICAqXG4gICAqIGByZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoKWAgaXMgdXNlZnVsIGlmIHlvdSB3YW50IHRvIGJyaW5nIHRoZSBjbGllbnQgYmFjayB0byBwcm9wZXIgc3RhdGUgaW4gY2FzZSBvZiBhIG5ldHdvcmsgb3V0YWdlXG4gICAqXG4gICAqIEl0IGlzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IGByZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoKWAgKndpbGwqIHJlZmV0Y2ggYW55IGFjdGl2ZVxuICAgKiBxdWVyaWVzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGNvbXBvbmVudHMgdGhhdCBtaWdodCBiZSBtb3VudGVkIHdpbGwgZXhlY3V0ZVxuICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgKiByZS1leGVjdXRlIGFueSBxdWVyaWVzIHRoZW4geW91IHNob3VsZCBtYWtlIHN1cmUgdG8gc3RvcCB3YXRjaGluZyBhbnlcbiAgICogYWN0aXZlIHF1ZXJpZXMuXG4gICAqIFRha2VzIG9wdGlvbmFsIHBhcmFtZXRlciBgaW5jbHVkZVN0YW5kYnlgIHdoaWNoIHdpbGwgaW5jbHVkZSBxdWVyaWVzIGluIHN0YW5kYnktbW9kZSB3aGVuIHJlZmV0Y2hpbmcuXG4gICAqL1xuICBwdWJsaWMgcmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKFxuICAgIGluY2x1ZGVTdGFuZGJ5PzogYm9vbGVhbixcbiAgKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxhbnk+W10+IHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIucmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGVTdGFuZGJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvc2VzIHRoZSBjYWNoZSdzIGNvbXBsZXRlIHN0YXRlLCBpbiBhIHNlcmlhbGl6YWJsZSBmb3JtYXQgZm9yIGxhdGVyIHJlc3RvcmF0aW9uLlxuICAgKi9cbiAgcHVibGljIGV4dHJhY3Qob3B0aW1pc3RpYz86IGJvb2xlYW4pOiBUQ2FjaGVTaGFwZSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZXh0cmFjdChvcHRpbWlzdGljKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBleGlzdGluZyBzdGF0ZSBpbiB0aGUgY2FjaGUgKGlmIGFueSkgd2l0aCB0aGUgdmFsdWVzIGV4cHJlc3NlZCBieVxuICAgKiBgc2VyaWFsaXplZFN0YXRlYC5cbiAgICpcbiAgICogQ2FsbGVkIHdoZW4gaHlkcmF0aW5nIGEgY2FjaGUgKHNlcnZlciBzaWRlIHJlbmRlcmluZywgb3Igb2ZmbGluZSBzdG9yYWdlKSxcbiAgICogYW5kIGFsc28gKHBvdGVudGlhbGx5KSBkdXJpbmcgaG90IHJlbG9hZHMuXG4gICAqL1xuICBwdWJsaWMgcmVzdG9yZShzZXJpYWxpemVkU3RhdGU6IFRDYWNoZVNoYXBlKTogQXBvbGxvQ2FjaGU8VENhY2hlU2hhcGU+IHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5yZXN0b3JlKHNlcmlhbGl6ZWRTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFkZGl0aW9uYWwgbG9jYWwgcmVzb2x2ZXJzLlxuICAgKi9cbiAgcHVibGljIGFkZFJlc29sdmVycyhyZXNvbHZlcnM6IFJlc29sdmVycyB8IFJlc29sdmVyc1tdKSB7XG4gICAgdGhpcy5sb2NhbFN0YXRlLmFkZFJlc29sdmVycyhyZXNvbHZlcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCAob3ZlcnJpZGUgZXhpc3RpbmcpIGxvY2FsIHJlc29sdmVycy5cbiAgICovXG4gIHB1YmxpYyBzZXRSZXNvbHZlcnMocmVzb2x2ZXJzOiBSZXNvbHZlcnMgfCBSZXNvbHZlcnNbXSkge1xuICAgIHRoaXMubG9jYWxTdGF0ZS5zZXRSZXNvbHZlcnMocmVzb2x2ZXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHJlZ2lzdGVyZWQgbG9jYWwgcmVzb2x2ZXJzLlxuICAgKi9cbiAgcHVibGljIGdldFJlc29sdmVycygpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLmdldFJlc29sdmVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGN1c3RvbSBsb2NhbCBzdGF0ZSBmcmFnbWVudCBtYXRjaGVyLlxuICAgKi9cbiAgcHVibGljIHNldExvY2FsU3RhdGVGcmFnbWVudE1hdGNoZXIoZnJhZ21lbnRNYXRjaGVyOiBGcmFnbWVudE1hdGNoZXIpIHtcbiAgICB0aGlzLmxvY2FsU3RhdGUuc2V0RnJhZ21lbnRNYXRjaGVyKGZyYWdtZW50TWF0Y2hlcik7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lIGEgbmV3IEFwb2xsb0xpbmsgKG9yIGxpbmsgY2hhaW4pIHRoYXQgQXBvbGxvIENsaWVudCB3aWxsIHVzZS5cbiAgICovXG4gIHB1YmxpYyBzZXRMaW5rKG5ld0xpbms6IEFwb2xsb0xpbmspIHtcbiAgICB0aGlzLmxpbmsgPSB0aGlzLnF1ZXJ5TWFuYWdlci5saW5rID0gbmV3TGluaztcbiAgfVxufVxuIiwiaW1wb3J0IHsgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRG9jdW1lbnROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBUeXBlZERvY3VtZW50Tm9kZSB9IGZyb20gJ0BncmFwaHFsLXR5cGVkLWRvY3VtZW50LW5vZGUvY29yZSc7XG5cbmltcG9ydCB7IE11dGF0aW9uSG9va09wdGlvbnMsIE11dGF0aW9uVHVwbGUgfSBmcm9tICcuLi90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBNdXRhdGlvbkRhdGEgfSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCB7IE9wZXJhdGlvblZhcmlhYmxlcyB9IGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0IHsgZ2V0QXBvbGxvQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTXV0YXRpb248VERhdGEgPSBhbnksIFRWYXJpYWJsZXMgPSBPcGVyYXRpb25WYXJpYWJsZXM+KFxuICBtdXRhdGlvbjogRG9jdW1lbnROb2RlIHwgVHlwZWREb2N1bWVudE5vZGU8VERhdGEsIFRWYXJpYWJsZXM+LFxuICBvcHRpb25zPzogTXV0YXRpb25Ib29rT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz5cbik6IE11dGF0aW9uVHVwbGU8VERhdGEsIFRWYXJpYWJsZXM+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoZ2V0QXBvbGxvQ29udGV4dCgpKTtcbiAgY29uc3QgW3Jlc3VsdCwgc2V0UmVzdWx0XSA9IHVzZVN0YXRlKHsgY2FsbGVkOiBmYWxzZSwgbG9hZGluZzogZmFsc2UgfSk7XG4gIGNvbnN0IHVwZGF0ZWRPcHRpb25zID0gb3B0aW9ucyA/IHsgLi4ub3B0aW9ucywgbXV0YXRpb24gfSA6IHsgbXV0YXRpb24gfTtcblxuICBjb25zdCBtdXRhdGlvbkRhdGFSZWYgPSB1c2VSZWY8TXV0YXRpb25EYXRhPFREYXRhLCBUVmFyaWFibGVzPj4oKTtcbiAgZnVuY3Rpb24gZ2V0TXV0YXRpb25EYXRhUmVmKCkge1xuICAgIGlmICghbXV0YXRpb25EYXRhUmVmLmN1cnJlbnQpIHtcbiAgICAgIG11dGF0aW9uRGF0YVJlZi5jdXJyZW50ID0gbmV3IE11dGF0aW9uRGF0YTxURGF0YSwgVFZhcmlhYmxlcz4oe1xuICAgICAgICBvcHRpb25zOiB1cGRhdGVkT3B0aW9ucyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBzZXRSZXN1bHRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbXV0YXRpb25EYXRhUmVmLmN1cnJlbnQ7XG4gIH1cblxuICBjb25zdCBtdXRhdGlvbkRhdGEgPSBnZXRNdXRhdGlvbkRhdGFSZWYoKTtcbiAgbXV0YXRpb25EYXRhLnNldE9wdGlvbnModXBkYXRlZE9wdGlvbnMpO1xuICBtdXRhdGlvbkRhdGEuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgdXNlRWZmZWN0KCgpID0+IG11dGF0aW9uRGF0YS5hZnRlckV4ZWN1dGUoKSk7XG5cbiAgcmV0dXJuIG11dGF0aW9uRGF0YS5leGVjdXRlKHJlc3VsdCk7XG59XG4iLCJpbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuXG5pbXBvcnQgeyBBcG9sbG9FcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycyc7XG5cbmltcG9ydCB7XG4gIEFwb2xsb0NsaWVudCxcbiAgTmV0d29ya1N0YXR1cyxcbiAgRmV0Y2hNb3JlUXVlcnlPcHRpb25zLFxuICBTdWJzY3JpYmVUb01vcmVPcHRpb25zLFxuICBPYnNlcnZhYmxlUXVlcnksXG4gIEZldGNoTW9yZU9wdGlvbnMsXG4gIFVwZGF0ZVF1ZXJ5T3B0aW9ucyxcbiAgRG9jdW1lbnROb2RlLFxuICBUeXBlZERvY3VtZW50Tm9kZVxufSBmcm9tICcuLi8uLi9jb3JlJztcblxuaW1wb3J0IHtcbiAgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvblxufSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuXG5pbXBvcnQgeyBEb2N1bWVudFR5cGUgfSBmcm9tICcuLi9wYXJzZXInO1xuaW1wb3J0IHtcbiAgUXVlcnlSZXN1bHQsXG4gIFF1ZXJ5RGF0YU9wdGlvbnMsXG4gIFF1ZXJ5VHVwbGUsXG4gIFF1ZXJ5TGF6eU9wdGlvbnMsXG4gIE9ic2VydmFibGVRdWVyeUZpZWxkcyxcbn0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHsgT3BlcmF0aW9uRGF0YSB9IGZyb20gJy4vT3BlcmF0aW9uRGF0YSc7XG5cbmV4cG9ydCBjbGFzcyBRdWVyeURhdGE8VERhdGEsIFRWYXJpYWJsZXM+IGV4dGVuZHMgT3BlcmF0aW9uRGF0YTxcbiAgUXVlcnlEYXRhT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz5cbj4ge1xuICBwdWJsaWMgb25OZXdEYXRhOiAoKSA9PiB2b2lkO1xuICBwcml2YXRlIGN1cnJlbnRPYnNlcnZhYmxlPzogT2JzZXJ2YWJsZVF1ZXJ5PFREYXRhLCBUVmFyaWFibGVzPjtcbiAgcHJpdmF0ZSBjdXJyZW50U3Vic2NyaXB0aW9uPzogT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBydW5MYXp5OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgbGF6eU9wdGlvbnM/OiBRdWVyeUxhenlPcHRpb25zPFRWYXJpYWJsZXM+O1xuICBwcml2YXRlIHByZXZpb3VzOiB7XG4gICAgY2xpZW50PzogQXBvbGxvQ2xpZW50PG9iamVjdD47XG4gICAgcXVlcnk/OiBEb2N1bWVudE5vZGUgfCBUeXBlZERvY3VtZW50Tm9kZTxURGF0YSwgVFZhcmlhYmxlcz47XG4gICAgb2JzZXJ2YWJsZVF1ZXJ5T3B0aW9ucz86IHt9O1xuICAgIHJlc3VsdD86IFF1ZXJ5UmVzdWx0PFREYXRhLCBUVmFyaWFibGVzPjtcbiAgICBsb2FkaW5nPzogYm9vbGVhbjtcbiAgICBvcHRpb25zPzogUXVlcnlEYXRhT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz47XG4gICAgZXJyb3I/OiBBcG9sbG9FcnJvcjtcbiAgfSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIG9wdGlvbnMsXG4gICAgY29udGV4dCxcbiAgICBvbk5ld0RhdGFcbiAgfToge1xuICAgIG9wdGlvbnM6IFF1ZXJ5RGF0YU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+O1xuICAgIGNvbnRleHQ6IGFueTtcbiAgICBvbk5ld0RhdGE6ICgpID0+IHZvaWQ7XG4gIH0pIHtcbiAgICBzdXBlcihvcHRpb25zLCBjb250ZXh0KTtcbiAgICB0aGlzLm9uTmV3RGF0YSA9IG9uTmV3RGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlKCk6IFF1ZXJ5UmVzdWx0PFREYXRhLCBUVmFyaWFibGVzPiB7XG4gICAgdGhpcy5yZWZyZXNoQ2xpZW50KCk7XG5cbiAgICBjb25zdCB7IHNraXAsIHF1ZXJ5IH0gPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICBpZiAoc2tpcCB8fCBxdWVyeSAhPT0gdGhpcy5wcmV2aW91cy5xdWVyeSkge1xuICAgICAgdGhpcy5yZW1vdmVRdWVyeVN1YnNjcmlwdGlvbigpO1xuICAgICAgdGhpcy5yZW1vdmVPYnNlcnZhYmxlKCFza2lwKTtcbiAgICAgIHRoaXMucHJldmlvdXMucXVlcnkgPSBxdWVyeTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZU9ic2VydmFibGVRdWVyeSgpO1xuXG4gICAgaWYgKHRoaXMuaXNNb3VudGVkKSB0aGlzLnN0YXJ0UXVlcnlTdWJzY3JpcHRpb24oKTtcblxuICAgIHJldHVybiB0aGlzLmdldEV4ZWN1dGVTc3JSZXN1bHQoKSB8fCB0aGlzLmdldEV4ZWN1dGVSZXN1bHQoKTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlTGF6eSgpOiBRdWVyeVR1cGxlPFREYXRhLCBUVmFyaWFibGVzPiB7XG4gICAgcmV0dXJuICF0aGlzLnJ1bkxhenlcbiAgICAgID8gW1xuICAgICAgICAgIHRoaXMucnVuTGF6eVF1ZXJ5LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5yZWFkeSxcbiAgICAgICAgICAgIGNhbGxlZDogZmFsc2UsXG4gICAgICAgICAgICBkYXRhOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIDogW3RoaXMucnVuTGF6eVF1ZXJ5LCB0aGlzLmV4ZWN1dGUoKV07XG4gIH1cblxuICAvLyBGb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nXG4gIHB1YmxpYyBmZXRjaERhdGEoKTogUHJvbWlzZTx2b2lkPiB8IGJvb2xlYW4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICBpZiAob3B0aW9ucy5za2lwIHx8IG9wdGlvbnMuc3NyID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuc3RhcnRRdWVyeVN1YnNjcmlwdGlvbihyZXNvbHZlKSk7XG4gIH1cblxuICBwdWJsaWMgYWZ0ZXJFeGVjdXRlKHsgbGF6eSA9IGZhbHNlIH06IHsgbGF6eT86IGJvb2xlYW4gfSA9IHt9KSB7XG4gICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuXG4gICAgaWYgKCFsYXp5IHx8IHRoaXMucnVuTGF6eSkge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvck9yQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5wcmV2aW91c09wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICByZXR1cm4gdGhpcy51bm1vdW50LmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgY2xlYW51cCgpIHtcbiAgICB0aGlzLnJlbW92ZVF1ZXJ5U3Vic2NyaXB0aW9uKCk7XG4gICAgdGhpcy5yZW1vdmVPYnNlcnZhYmxlKHRydWUpO1xuICAgIGRlbGV0ZSB0aGlzLnByZXZpb3VzLnJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPcHRpb25zKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBzdXBlci5nZXRPcHRpb25zKCk7XG5cbiAgICBpZiAodGhpcy5sYXp5T3B0aW9ucykge1xuICAgICAgb3B0aW9ucy52YXJpYWJsZXMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAuLi50aGlzLmxhenlPcHRpb25zLnZhcmlhYmxlc1xuICAgICAgfSBhcyBUVmFyaWFibGVzO1xuICAgICAgb3B0aW9ucy5jb250ZXh0ID0ge1xuICAgICAgICAuLi5vcHRpb25zLmNvbnRleHQsXG4gICAgICAgIC4uLnRoaXMubGF6eU9wdGlvbnMuY29udGV4dFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBza2lwIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB1c2luZyBsYXp5IHF1ZXJ5IGV4ZWN1dGlvbi5cbiAgICBpZiAodGhpcy5ydW5MYXp5KSB7XG4gICAgICBkZWxldGUgb3B0aW9ucy5za2lwO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgcHVibGljIHNzckluaXRpYXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0ICYmIHRoaXMuY29udGV4dC5yZW5kZXJQcm9taXNlcztcbiAgfVxuXG4gIHByaXZhdGUgcnVuTGF6eVF1ZXJ5ID0gKG9wdGlvbnM/OiBRdWVyeUxhenlPcHRpb25zPFRWYXJpYWJsZXM+KSA9PiB7XG4gICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgdGhpcy5ydW5MYXp5ID0gdHJ1ZTtcbiAgICB0aGlzLmxhenlPcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLm9uTmV3RGF0YSgpO1xuICB9O1xuXG4gIHByaXZhdGUgZ2V0RXhlY3V0ZVJlc3VsdCgpOiBRdWVyeVJlc3VsdDxURGF0YSwgVFZhcmlhYmxlcz4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZ2V0UXVlcnlSZXN1bHQoKTtcbiAgICB0aGlzLnN0YXJ0UXVlcnlTdWJzY3JpcHRpb24oKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHByaXZhdGUgZ2V0RXhlY3V0ZVNzclJlc3VsdCgpIHtcbiAgICBjb25zdCB7IHNzciwgc2tpcCB9ID0gdGhpcy5nZXRPcHRpb25zKCk7XG4gICAgY29uc3Qgc3NyRGlzYWJsZWQgPSBzc3IgPT09IGZhbHNlO1xuICAgIGNvbnN0IGZldGNoRGlzYWJsZWQgPSB0aGlzLnJlZnJlc2hDbGllbnQoKS5jbGllbnQuZGlzYWJsZU5ldHdvcmtGZXRjaGVzO1xuXG4gICAgY29uc3Qgc3NyTG9hZGluZyA9IHtcbiAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsXG4gICAgICBjYWxsZWQ6IHRydWUsXG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICBzdGFsZTogZmFsc2UsXG4gICAgICBjbGllbnQ6IHRoaXMuY2xpZW50LFxuICAgICAgLi4udGhpcy5vYnNlcnZhYmxlUXVlcnlGaWVsZHMoKSxcbiAgICB9IGFzIFF1ZXJ5UmVzdWx0PFREYXRhLCBUVmFyaWFibGVzPjtcblxuICAgIC8vIElmIFNTUiBoYXMgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLCBhbmQgdGhpcyBmdW5jdGlvbiBoYXMgYmVlbiBjYWxsZWRcbiAgICAvLyBvbiB0aGUgc2VydmVyIHNpZGUsIHJldHVybiB0aGUgZGVmYXVsdCBsb2FkaW5nIHN0YXRlLlxuICAgIGlmIChzc3JEaXNhYmxlZCAmJiAodGhpcy5zc3JJbml0aWF0ZWQoKSB8fCBmZXRjaERpc2FibGVkKSkge1xuICAgICAgdGhpcy5wcmV2aW91cy5yZXN1bHQgPSBzc3JMb2FkaW5nO1xuICAgICAgcmV0dXJuIHNzckxvYWRpbmc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3NySW5pdGlhdGVkKCkpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZ2V0UXVlcnlSZXN1bHQoKSB8fCBzc3JMb2FkaW5nO1xuICAgICAgaWYgKHJlc3VsdC5sb2FkaW5nICYmICFza2lwKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5yZW5kZXJQcm9taXNlcyEuYWRkUXVlcnlQcm9taXNlKHRoaXMsICgpID0+IG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHByZXBhcmVPYnNlcnZhYmxlUXVlcnlPcHRpb25zKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcbiAgICB0aGlzLnZlcmlmeURvY3VtZW50VHlwZShvcHRpb25zLnF1ZXJ5LCBEb2N1bWVudFR5cGUuUXVlcnkpO1xuICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gb3B0aW9ucy5kaXNwbGF5TmFtZSB8fCAnUXVlcnknO1xuXG4gICAgLy8gU2V0IHRoZSBmZXRjaFBvbGljeSB0byBjYWNoZS1maXJzdCBmb3IgbmV0d29yay1vbmx5IGFuZCBjYWNoZS1hbmQtbmV0d29ya1xuICAgIC8vIGZldGNoZXMgZm9yIHNlcnZlciBzaWRlIHJlbmRlcnMuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zc3JJbml0aWF0ZWQoKSAmJlxuICAgICAgKG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICduZXR3b3JrLW9ubHknIHx8XG4gICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICdjYWNoZS1hbmQtbmV0d29yaycpXG4gICAgKSB7XG4gICAgICBvcHRpb25zLmZldGNoUG9saWN5ID0gJ2NhY2hlLWZpcnN0JztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgY29udGV4dDogb3B0aW9ucy5jb250ZXh0LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVPYnNlcnZhYmxlUXVlcnkoKSB7XG4gICAgLy8gU2VlIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ic2VydmFibGUgdGhhdCB3YXMgdXNlZCB0byBmZXRjaCB0aGUgc2FtZVxuICAgIC8vIGRhdGEgYW5kIGlmIHNvLCB1c2UgaXQgaW5zdGVhZCBzaW5jZSBpdCB3aWxsIGNvbnRhaW4gdGhlIHByb3BlciBxdWVyeUlkXG4gICAgLy8gdG8gZmV0Y2ggdGhlIHJlc3VsdCBzZXQuIFRoaXMgaXMgdXNlZCBkdXJpbmcgU1NSLlxuICAgIGlmICh0aGlzLnNzckluaXRpYXRlZCgpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlID0gdGhpcy5jb250ZXh0IS5yZW5kZXJQcm9taXNlcyEuZ2V0U1NST2JzZXJ2YWJsZShcbiAgICAgICAgdGhpcy5nZXRPcHRpb25zKClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRPYnNlcnZhYmxlKSB7XG4gICAgICBjb25zdCBvYnNlcnZhYmxlUXVlcnlPcHRpb25zID0gdGhpcy5wcmVwYXJlT2JzZXJ2YWJsZVF1ZXJ5T3B0aW9ucygpO1xuXG4gICAgICB0aGlzLnByZXZpb3VzLm9ic2VydmFibGVRdWVyeU9wdGlvbnMgPSB7XG4gICAgICAgIC4uLm9ic2VydmFibGVRdWVyeU9wdGlvbnMsXG4gICAgICAgIGNoaWxkcmVuOiBudWxsXG4gICAgICB9O1xuICAgICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZSA9IHRoaXMucmVmcmVzaENsaWVudCgpLmNsaWVudC53YXRjaFF1ZXJ5KHtcbiAgICAgICAgLi4ub2JzZXJ2YWJsZVF1ZXJ5T3B0aW9uc1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnNzckluaXRpYXRlZCgpKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCEucmVuZGVyUHJvbWlzZXMhLnJlZ2lzdGVyU1NST2JzZXJ2YWJsZShcbiAgICAgICAgICB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlLFxuICAgICAgICAgIG9ic2VydmFibGVRdWVyeU9wdGlvbnNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU9ic2VydmFibGVRdWVyeSgpIHtcbiAgICAvLyBJZiB3ZSBza2lwcGVkIGluaXRpYWxseSwgd2UgbWF5IG5vdCBoYXZlIHlldCBjcmVhdGVkIHRoZSBvYnNlcnZhYmxlXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRPYnNlcnZhYmxlKSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVPYnNlcnZhYmxlUXVlcnkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nZXRPcHRpb25zKCkuc2tpcCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV3T2JzZXJ2YWJsZVF1ZXJ5T3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMucHJlcGFyZU9ic2VydmFibGVRdWVyeU9wdGlvbnMoKSxcbiAgICAgIGNoaWxkcmVuOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChcbiAgICAgICFlcXVhbChcbiAgICAgICAgbmV3T2JzZXJ2YWJsZVF1ZXJ5T3B0aW9ucyxcbiAgICAgICAgdGhpcy5wcmV2aW91cy5vYnNlcnZhYmxlUXVlcnlPcHRpb25zXG4gICAgICApXG4gICAgKSB7XG4gICAgICB0aGlzLnByZXZpb3VzLm9ic2VydmFibGVRdWVyeU9wdGlvbnMgPSBuZXdPYnNlcnZhYmxlUXVlcnlPcHRpb25zO1xuICAgICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZVxuICAgICAgICAuc2V0T3B0aW9ucyhuZXdPYnNlcnZhYmxlUXVlcnlPcHRpb25zKVxuICAgICAgICAvLyBUaGUgZXJyb3Igd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGNoaWxkIGNvbnRhaW5lciwgc28gd2UgZG9uJ3RcbiAgICAgICAgLy8gbmVlZCB0byBsb2cgaXQgaGVyZS4gV2UgY291bGQgY29uY2VpdmFibHkgbG9nIHNvbWV0aGluZyBpZlxuICAgICAgICAvLyBhbiBvcHRpb24gd2FzIHNldC4gT1RPSCB3ZSBkb24ndCBsb2cgZXJyb3JzIHcvIHRoZSBvcmlnaW5hbFxuICAgICAgICAvLyBxdWVyeS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcG9sbG9zdGFjay9yZWFjdC1hcG9sbG8vaXNzdWVzLzQwNFxuICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHVwIGEgc3Vic2NyaXB0aW9uIHRvIHdhdGNoIGZvciBBcG9sbG8gQ2xpZW50IGBPYnNlcnZhYmxlUXVlcnlgIGNoYW5nZXMuXG4gIC8vIFdoZW4gbmV3IGRhdGEgaXMgcmVjZWl2ZWQsIGFuZCBpdCBkb2Vzbid0IG1hdGNoIHRoZSBkYXRhIHRoYXQgd2FzIHVzZWRcbiAgLy8gZHVyaW5nIHRoZSBsYXN0IGBRdWVyeURhdGEuZXhlY3V0ZWAgY2FsbCAoYW5kIHVsdGltYXRlbHkgdGhlIGxhc3QgcXVlcnlcbiAgLy8gY29tcG9uZW50IHJlbmRlciksIHRyaWdnZXIgdGhlIGBvbk5ld0RhdGFgIGNhbGxiYWNrLiBJZiBub3Qgc3BlY2lmaWVkLFxuICAvLyBgb25OZXdEYXRhYCB3aWxsIGZhbGxiYWNrIHRvIHRoZSBkZWZhdWx0IGBRdWVyeURhdGEub25OZXdEYXRhYCBmdW5jdGlvblxuICAvLyAod2hpY2ggdXN1YWxseSBsZWFkcyB0byBhIHF1ZXJ5IGNvbXBvbmVudCByZS1yZW5kZXIpLlxuICBwcml2YXRlIHN0YXJ0UXVlcnlTdWJzY3JpcHRpb24ob25OZXdEYXRhOiAoKSA9PiB2b2lkID0gdGhpcy5vbk5ld0RhdGEpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50U3Vic2NyaXB0aW9uIHx8IHRoaXMuZ2V0T3B0aW9ucygpLnNraXApIHJldHVybjtcblxuICAgIHRoaXMuY3VycmVudFN1YnNjcmlwdGlvbiA9IHRoaXMuY3VycmVudE9ic2VydmFibGUhLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAoeyBsb2FkaW5nLCBuZXR3b3JrU3RhdHVzLCBkYXRhIH0pID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZXN1bHQgPSB0aGlzLnByZXZpb3VzLnJlc3VsdDtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UncmUgbm90IGF0dGVtcHRpbmcgdG8gcmUtcmVuZGVyIHNpbWlsYXIgcmVzdWx0c1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJldmlvdXNSZXN1bHQgJiZcbiAgICAgICAgICBwcmV2aW91c1Jlc3VsdC5sb2FkaW5nID09PSBsb2FkaW5nICYmXG4gICAgICAgICAgcHJldmlvdXNSZXN1bHQubmV0d29ya1N0YXR1cyA9PT0gbmV0d29ya1N0YXR1cyAmJlxuICAgICAgICAgIGVxdWFsKHByZXZpb3VzUmVzdWx0LmRhdGEsIGRhdGEpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uTmV3RGF0YSgpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBlcnJvciA9PiB7XG4gICAgICAgIHRoaXMucmVzdWJzY3JpYmVUb1F1ZXJ5KCk7XG4gICAgICAgIGlmICghZXJyb3IuaGFzT3duUHJvcGVydHkoJ2dyYXBoUUxFcnJvcnMnKSkgdGhyb3cgZXJyb3I7XG5cbiAgICAgICAgY29uc3QgcHJldmlvdXNSZXN1bHQgPSB0aGlzLnByZXZpb3VzLnJlc3VsdDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChwcmV2aW91c1Jlc3VsdCAmJiBwcmV2aW91c1Jlc3VsdC5sb2FkaW5nKSB8fFxuICAgICAgICAgICFlcXVhbChlcnJvciwgdGhpcy5wcmV2aW91cy5lcnJvcilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5wcmV2aW91cy5lcnJvciA9IGVycm9yO1xuICAgICAgICAgIG9uTmV3RGF0YSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlc3Vic2NyaWJlVG9RdWVyeSgpIHtcbiAgICB0aGlzLnJlbW92ZVF1ZXJ5U3Vic2NyaXB0aW9uKCk7XG5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCBpZiBgbGFzdEVycm9yYCBpcyBzZXQgaW4gdGhlIGN1cnJlbnRcbiAgICAvLyBgb2JzZXJ2YWJsZVF1ZXJ5YCB3aGVuIHRoZSBzdWJzY3JpcHRpb24gaXMgcmUtY3JlYXRlZCxcbiAgICAvLyB0aGUgc3Vic2NyaXB0aW9uIHdpbGwgaW1tZWRpYXRlbHkgcmVjZWl2ZSB0aGUgZXJyb3IsIHdoaWNoIHdpbGxcbiAgICAvLyBjYXVzZSBpdCB0byB0ZXJtaW5hdGUgYWdhaW4uIFRvIGF2b2lkIHRoaXMsIHdlIGZpcnN0IGNsZWFyXG4gICAgLy8gdGhlIGxhc3QgZXJyb3IvcmVzdWx0IGZyb20gdGhlIGBvYnNlcnZhYmxlUXVlcnlgIGJlZm9yZSByZS1zdGFydGluZ1xuICAgIC8vIHRoZSBzdWJzY3JpcHRpb24sIGFuZCByZXN0b3JlIGl0IGFmdGVyd2FyZHMgKHNvIHRoZSBzdWJzY3JpcHRpb25cbiAgICAvLyBoYXMgYSBjaGFuY2UgdG8gc3RheSBvcGVuKS5cbiAgICBjb25zdCB7IGN1cnJlbnRPYnNlcnZhYmxlIH0gPSB0aGlzO1xuICAgIGlmIChjdXJyZW50T2JzZXJ2YWJsZSkge1xuICAgICAgY29uc3QgbGFzdEVycm9yID0gY3VycmVudE9ic2VydmFibGUuZ2V0TGFzdEVycm9yKCk7XG4gICAgICBjb25zdCBsYXN0UmVzdWx0ID0gY3VycmVudE9ic2VydmFibGUuZ2V0TGFzdFJlc3VsdCgpO1xuICAgICAgY3VycmVudE9ic2VydmFibGUucmVzZXRMYXN0UmVzdWx0cygpO1xuICAgICAgdGhpcy5zdGFydFF1ZXJ5U3Vic2NyaXB0aW9uKCk7XG4gICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRPYnNlcnZhYmxlLCB7XG4gICAgICAgIGxhc3RFcnJvcixcbiAgICAgICAgbGFzdFJlc3VsdFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRRdWVyeVJlc3VsdCA9ICgpOiBRdWVyeVJlc3VsdDxURGF0YSwgVFZhcmlhYmxlcz4gPT4ge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLm9ic2VydmFibGVRdWVyeUZpZWxkcygpIGFzIFF1ZXJ5UmVzdWx0PFREYXRhLCBUVmFyaWFibGVzPjtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5nZXRPcHRpb25zKCk7XG5cbiAgICAvLyBXaGVuIHNraXBwaW5nIGEgcXVlcnkgKGllLiB3ZSdyZSBub3QgcXVlcnlpbmcgZm9yIGRhdGEgYnV0IHN0aWxsIHdhbnRcbiAgICAvLyB0byByZW5kZXIgY2hpbGRyZW4pLCBtYWtlIHN1cmUgdGhlIGBkYXRhYCBpcyBjbGVhcmVkIG91dCBhbmRcbiAgICAvLyBgbG9hZGluZ2AgaXMgc2V0IHRvIGBmYWxzZWAgKHNpbmNlIHdlIGFyZW4ndCBsb2FkaW5nIGFueXRoaW5nKS5cbiAgICAvL1xuICAgIC8vIE5PVEU6IFdlIG5vIGxvbmdlciB0aGluayB0aGlzIGlzIHRoZSBjb3JyZWN0IGJlaGF2aW9yLiBTa2lwcGluZyBzaG91bGRcbiAgICAvLyBub3QgYXV0b21hdGljYWxseSBzZXQgYGRhdGFgIHRvIGB1bmRlZmluZWRgLCBidXQgaW5zdGVhZCBsZWF2ZSB0aGVcbiAgICAvLyBwcmV2aW91cyBkYXRhIGluIHBsYWNlLiBJbiBvdGhlciB3b3Jkcywgc2tpcHBpbmcgc2hvdWxkIG5vdCBtYW5kYXRlXG4gICAgLy8gdGhhdCBwcmV2aW91c2x5IHJlY2VpdmVkIGRhdGEgaXMgYWxsIG9mIGEgc3VkZGVuIHJlbW92ZWQuIFVuZm9ydHVuYXRlbHksXG4gICAgLy8gY2hhbmdpbmcgdGhpcyBpcyBicmVha2luZywgc28gd2UnbGwgaGF2ZSB0byB3YWl0IHVudGlsIEFwb2xsbyBDbGllbnRcbiAgICAvLyA0LjAgdG8gYWRkcmVzcyB0aGlzLlxuICAgIGlmIChvcHRpb25zLnNraXApIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLnJlYWR5LFxuICAgICAgICBjYWxsZWQ6IHRydWUsXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50T2JzZXJ2YWJsZSkge1xuICAgICAgLy8gRmV0Y2ggdGhlIGN1cnJlbnQgcmVzdWx0IChpZiBhbnkpIGZyb20gdGhlIHN0b3JlLlxuICAgICAgY29uc3QgY3VycmVudFJlc3VsdCA9IHRoaXMuY3VycmVudE9ic2VydmFibGUuZ2V0Q3VycmVudFJlc3VsdCgpO1xuICAgICAgY29uc3QgeyBkYXRhLCBsb2FkaW5nLCBwYXJ0aWFsLCBuZXR3b3JrU3RhdHVzLCBlcnJvcnMgfSA9IGN1cnJlbnRSZXN1bHQ7XG4gICAgICBsZXQgeyBlcnJvciB9ID0gY3VycmVudFJlc3VsdDtcblxuICAgICAgLy8gVW50aWwgYSBzZXQgbmFtaW5nIGNvbnZlbnRpb24gZm9yIG5ldHdvcmtFcnJvciBhbmQgZ3JhcGhRTEVycm9ycyBpc1xuICAgICAgLy8gZGVjaWRlZCB1cG9uLCB3ZSBtYXAgZXJyb3JzIChncmFwaFFMRXJyb3JzKSB0byB0aGUgZXJyb3Igb3B0aW9ucy5cbiAgICAgIGlmIChlcnJvcnMgJiYgZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZXJyb3IgPSBuZXcgQXBvbGxvRXJyb3IoeyBncmFwaFFMRXJyb3JzOiBlcnJvcnMgfSk7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBkYXRhLFxuICAgICAgICBsb2FkaW5nLFxuICAgICAgICBuZXR3b3JrU3RhdHVzLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgY2FsbGVkOiB0cnVlXG4gICAgICB9O1xuXG4gICAgICBpZiAobG9hZGluZykge1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggd2l0aG91dCBtb2RpZnlpbmcgcmVzdWx0Li4uXG4gICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LCB7XG4gICAgICAgICAgZGF0YTogKHRoaXMuY3VycmVudE9ic2VydmFibGUuZ2V0TGFzdFJlc3VsdCgpIHx8ICh7fSBhcyBhbnkpKVxuICAgICAgICAgICAgLmRhdGFcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IGZldGNoUG9saWN5IH0gPSB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgcGFydGlhbFJlZmV0Y2ggfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYXJ0aWFsUmVmZXRjaCAmJlxuICAgICAgICAgIHBhcnRpYWwgJiZcbiAgICAgICAgICAoIWRhdGEgfHwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSAmJlxuICAgICAgICAgIGZldGNoUG9saWN5ICE9PSAnY2FjaGUtb25seSdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIGBRdWVyeWAgY29tcG9uZW50IGlzIG1vdW50ZWQsIGFuZCBhIG11dGF0aW9uIGlzIGV4ZWN1dGVkXG4gICAgICAgICAgLy8gdGhhdCByZXR1cm5zIHRoZSBzYW1lIElEIGFzIHRoZSBtb3VudGVkIGBRdWVyeWAsIGJ1dCBoYXMgbGVzc1xuICAgICAgICAgIC8vIGZpZWxkcyBpbiBpdHMgcmVzdWx0LCBBcG9sbG8gQ2xpZW50J3MgYFF1ZXJ5TWFuYWdlcmAgcmV0dXJucyB0aGVcbiAgICAgICAgICAvLyBkYXRhIGFzIGB1bmRlZmluZWRgIHNpbmNlIGEgaGl0IGNhbid0IGJlIGZvdW5kIGluIHRoZSBjYWNoZS5cbiAgICAgICAgICAvLyBUaGlzIGNhbiBsZWFkIHRvIGFwcGxpY2F0aW9uIGVycm9ycyB3aGVuIHRoZSBVSSBlbGVtZW50cyByZW5kZXJlZCBieVxuICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBgUXVlcnlgIGNvbXBvbmVudCBhcmUgZXhwZWN0aW5nIGNlcnRhaW4gZGF0YSB2YWx1ZXMgdG9cbiAgICAgICAgICAvLyBleGlzdCwgYW5kIHRoZXkncmUgYWxsIG9mIGEgc3VkZGVuIHN0cmlwcGVkIGF3YXkuIFRvIGhlbHAgYXZvaWRcbiAgICAgICAgICAvLyB0aGlzIHdlJ2xsIGF0dGVtcHQgdG8gcmVmZXRjaCB0aGUgYFF1ZXJ5YCBkYXRhLlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LCB7XG4gICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5sb2FkaW5nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzdWx0LnJlZmV0Y2goKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVzdWx0LmNsaWVudCA9IHRoaXMuY2xpZW50O1xuICAgIC8vIFN0b3JlIG9wdGlvbnMgYXMgdGhpcy5wcmV2aW91c09wdGlvbnMuXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMsIHRydWUpO1xuXG4gICAgY29uc3QgcHJldmlvdXNSZXN1bHQgPSB0aGlzLnByZXZpb3VzLnJlc3VsdDtcblxuICAgIHRoaXMucHJldmlvdXMubG9hZGluZyA9XG4gICAgICBwcmV2aW91c1Jlc3VsdCAmJiBwcmV2aW91c1Jlc3VsdC5sb2FkaW5nIHx8IGZhbHNlO1xuXG4gICAgLy8gRW5zdXJlIHRoZSByZXR1cm5lZCByZXN1bHQgY29udGFpbnMgcHJldmlvdXNEYXRhIGFzIGEgc2VwYXJhdGVcbiAgICAvLyBwcm9wZXJ0eSwgdG8gZ2l2ZSBkZXZlbG9wZXJzIHRoZSBmbGV4aWJpbGl0eSBvZiBsZXZlcmFnaW5nIG91dGRhdGVkXG4gICAgLy8gZGF0YSB3aGlsZSBuZXcgZGF0YSBpcyBsb2FkaW5nIGZyb20gdGhlIG5ldHdvcmsuIEZhbGxpbmcgYmFjayB0b1xuICAgIC8vIHByZXZpb3VzUmVzdWx0LnByZXZpb3VzRGF0YSB3aGVuIHByZXZpb3VzUmVzdWx0LmRhdGEgaXMgZmFsc3kgaGVyZVxuICAgIC8vIGFsbG93cyByZXN1bHQucHJldmlvdXNEYXRhIHRvIHBlcnNpc3QgYWNyb3NzIG11bHRpcGxlIHJlc3VsdHMuXG4gICAgcmVzdWx0LnByZXZpb3VzRGF0YSA9IHByZXZpb3VzUmVzdWx0ICYmXG4gICAgICAocHJldmlvdXNSZXN1bHQuZGF0YSB8fCBwcmV2aW91c1Jlc3VsdC5wcmV2aW91c0RhdGEpO1xuXG4gICAgdGhpcy5wcmV2aW91cy5yZXN1bHQgPSByZXN1bHQ7XG5cbiAgICAvLyBBbnkgcXVlcnkgZXJyb3JzIHRoYXQgZXhpc3QgYXJlIG5vdyBhdmFpbGFibGUgaW4gYHJlc3VsdGAsIHNvIHdlJ2xsXG4gICAgLy8gcmVtb3ZlIHRoZSBvcmlnaW5hbCBlcnJvcnMgZnJvbSB0aGUgYE9ic2VydmFibGVRdWVyeWAgcXVlcnkgc3RvcmUgdG9cbiAgICAvLyBtYWtlIHN1cmUgdGhleSBhcmVuJ3QgcmUtZGlzcGxheWVkIG9uIHN1YnNlcXVlbnQgKHBvdGVudGlhbGx5IGVycm9yXG4gICAgLy8gZnJlZSkgcmVxdWVzdHMvcmVzcG9uc2VzLlxuICAgIHRoaXMuY3VycmVudE9ic2VydmFibGUgJiYgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZS5yZXNldFF1ZXJ5U3RvcmVFcnJvcnMoKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUVycm9yT3JDb21wbGV0ZWQoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRPYnNlcnZhYmxlIHx8ICF0aGlzLnByZXZpb3VzLnJlc3VsdCkgcmV0dXJuO1xuXG4gICAgY29uc3QgeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9ID0gdGhpcy5wcmV2aW91cy5yZXN1bHQ7XG5cbiAgICBpZiAoIWxvYWRpbmcpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcXVlcnksXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgb25Db21wbGV0ZWQsXG4gICAgICAgIG9uRXJyb3IsXG4gICAgICAgIHNraXBcbiAgICAgIH0gPSB0aGlzLmdldE9wdGlvbnMoKTtcblxuICAgICAgLy8gTm8gY2hhbmdlcywgc28gd2Ugd29uJ3QgY2FsbCBvbkVycm9yL29uQ29tcGxldGVkLlxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnByZXZpb3VzT3B0aW9ucyAmJlxuICAgICAgICAhdGhpcy5wcmV2aW91cy5sb2FkaW5nICYmXG4gICAgICAgIGVxdWFsKHRoaXMucHJldmlvdXNPcHRpb25zLnF1ZXJ5LCBxdWVyeSkgJiZcbiAgICAgICAgZXF1YWwodGhpcy5wcmV2aW91c09wdGlvbnMudmFyaWFibGVzLCB2YXJpYWJsZXMpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAob25Db21wbGV0ZWQgJiYgIWVycm9yICYmICFza2lwKSB7XG4gICAgICAgIG9uQ29tcGxldGVkKGRhdGEgYXMgVERhdGEpO1xuICAgICAgfSBlbHNlIGlmIChvbkVycm9yICYmIGVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlUXVlcnlTdWJzY3JpcHRpb24oKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICBkZWxldGUgdGhpcy5jdXJyZW50U3Vic2NyaXB0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlT2JzZXJ2YWJsZShhbmREZWxldGU6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5jdXJyZW50T2JzZXJ2YWJsZSkge1xuICAgICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZVtcInRlYXJEb3duUXVlcnlcIl0oKTtcbiAgICAgIGlmIChhbmREZWxldGUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY3VycmVudE9ic2VydmFibGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvYnNSZWZldGNoID0gKHZhcmlhYmxlcz86IFBhcnRpYWw8VFZhcmlhYmxlcz4pID0+XG4gICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZT8ucmVmZXRjaCh2YXJpYWJsZXMpO1xuXG4gIHByaXZhdGUgb2JzRmV0Y2hNb3JlID0gPEsgZXh0ZW5kcyBrZXlvZiBUVmFyaWFibGVzPihcbiAgICBmZXRjaE1vcmVPcHRpb25zOiBGZXRjaE1vcmVRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgSywgVERhdGE+ICZcbiAgICAgIEZldGNoTW9yZU9wdGlvbnM8VERhdGEsIFRWYXJpYWJsZXM+XG4gICkgPT4gdGhpcy5jdXJyZW50T2JzZXJ2YWJsZSEuZmV0Y2hNb3JlKGZldGNoTW9yZU9wdGlvbnMpO1xuXG4gIHByaXZhdGUgb2JzVXBkYXRlUXVlcnkgPSA8VFZhcnMgPSBUVmFyaWFibGVzPihcbiAgICBtYXBGbjogKFxuICAgICAgcHJldmlvdXNRdWVyeVJlc3VsdDogVERhdGEsXG4gICAgICBvcHRpb25zOiBVcGRhdGVRdWVyeU9wdGlvbnM8VFZhcnM+XG4gICAgKSA9PiBURGF0YVxuICApID0+IHRoaXMuY3VycmVudE9ic2VydmFibGUhLnVwZGF0ZVF1ZXJ5KG1hcEZuKTtcblxuICBwcml2YXRlIG9ic1N0YXJ0UG9sbGluZyA9IChwb2xsSW50ZXJ2YWw6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuY3VycmVudE9ic2VydmFibGU/LnN0YXJ0UG9sbGluZyhwb2xsSW50ZXJ2YWwpO1xuICB9O1xuXG4gIHByaXZhdGUgb2JzU3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgdGhpcy5jdXJyZW50T2JzZXJ2YWJsZT8uc3RvcFBvbGxpbmcoKTtcbiAgfTtcblxuICBwcml2YXRlIG9ic1N1YnNjcmliZVRvTW9yZSA9IDxcbiAgICBUU3Vic2NyaXB0aW9uRGF0YSA9IFREYXRhLFxuICAgIFRTdWJzY3JpcHRpb25WYXJpYWJsZXMgPSBUVmFyaWFibGVzXG4gID4oXG4gICAgb3B0aW9uczogU3Vic2NyaWJlVG9Nb3JlT3B0aW9uczxcbiAgICAgIFREYXRhLFxuICAgICAgVFN1YnNjcmlwdGlvblZhcmlhYmxlcyxcbiAgICAgIFRTdWJzY3JpcHRpb25EYXRhXG4gICAgPlxuICApID0+IHRoaXMuY3VycmVudE9ic2VydmFibGUhLnN1YnNjcmliZVRvTW9yZShvcHRpb25zKTtcblxuICBwcml2YXRlIG9ic2VydmFibGVRdWVyeUZpZWxkcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFyaWFibGVzOiB0aGlzLmN1cnJlbnRPYnNlcnZhYmxlPy52YXJpYWJsZXMsXG4gICAgICByZWZldGNoOiB0aGlzLm9ic1JlZmV0Y2gsXG4gICAgICBmZXRjaE1vcmU6IHRoaXMub2JzRmV0Y2hNb3JlLFxuICAgICAgdXBkYXRlUXVlcnk6IHRoaXMub2JzVXBkYXRlUXVlcnksXG4gICAgICBzdGFydFBvbGxpbmc6IHRoaXMub2JzU3RhcnRQb2xsaW5nLFxuICAgICAgc3RvcFBvbGxpbmc6IHRoaXMub2JzU3RvcFBvbGxpbmcsXG4gICAgICBzdWJzY3JpYmVUb01vcmU6IHRoaXMub2JzU3Vic2NyaWJlVG9Nb3JlXG4gICAgfSBhcyBPYnNlcnZhYmxlUXVlcnlGaWVsZHM8VERhdGEsIFRWYXJpYWJsZXM+O1xuICB9XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBncWwsIHVzZU11dGF0aW9uIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnO1xuaW1wb3J0IHN3YWwgZnJvbSAnc3dlZXRhbGVydCc7XG5cbmNvbnN0IG11dGF0aW9uID0gZ3FsYFxuICBtdXRhdGlvbiBjb250YWN0KCRpbnB1dDogQ29udGFjdElucHV0ISkge1xuICAgIGNvbnRhY3QoaW5wdXQ6ICRpbnB1dCkge1xuICAgICAgc3VjY2Vzc1xuICAgIH1cbiAgfVxuYDtcblxuY29uc3QgdXNlU3VibWl0Q29udGFjdCA9ICgpID0+IHtcbiAgY29uc3QgW2V4ZWN1dGUsIHsgZGF0YSwgZXJyb3IsIGxvYWRpbmcgfV0gPSB1c2VNdXRhdGlvbihtdXRhdGlvbik7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHN3YWwoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIGlmIChkYXRhICYmIGRhdGEuY29udGFjdCkge1xuICAgICAgc3dhbCgnTWVzc2FnZSBzZW50IScpO1xuICAgIH1cbiAgfSwgW2Vycm9yLCBkYXRhXSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKHZhbHVlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKCd1c2VTdWJtaXRDb250YWN0LmpzJyk7XG4gICAgYXdhaXQgZXhlY3V0ZSh7IHZhcmlhYmxlczogeyBpbnB1dDogdmFsdWVzIH0gfSk7XG4gIH07XG5cbiAgcmV0dXJuIFtoYW5kbGVTdWJtaXQsIHsgZGF0YSwgZXJyb3IsIGxvYWRpbmcgfV07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VTdWJtaXRDb250YWN0O1xuIiwiaW1wb3J0IGhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCBsaWJzIGZyb20gJy4vbGlicyc7XG5pbXBvcnQgYXV0aCBmcm9tICcuL2F1dGgnO1xuaW1wb3J0IGhvb2tzIGZyb20gJy4vaG9va3MnO1xuaW1wb3J0IGVsZW1lbnRzIGZyb20gJy4vZWxlbWVudHMnO1xuXG4vLyBleHBvcnQgY29uc3QgSGVscGVycyA9IGhlbHBlcnM7XG4vLyBleHBvcnQgY29uc3QgTGlicyA9IGxpYnM7XG4vLyBleHBvcnQgY29uc3QgQXV0aCA9IGF1dGg7XG5cbmV4cG9ydCBkZWZhdWx0IHsgLi4uaGVscGVycywgLi4ubGlicywgLi4uYXV0aCwgLi4uaG9va3MsIC4uLmVsZW1lbnRzIH07XG4iLCJpbXBvcnQgdXNlU3VibWl0Q29udGFjdCBmcm9tICcuL3VzZVN1Ym1pdENvbnRhY3QnO1xuXG5leHBvcnQgZGVmYXVsdCB7IHVzZVN1Ym1pdENvbnRhY3QgfTtcbiIsImltcG9ydCBCdXR0b24gZnJvbSAnLi9CdXR0b24nO1xuXG5leHBvcnQgZGVmYXVsdCB7IEJ1dHRvbiB9O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgVGhlbWVDb250ZXh0IH0gZnJvbSAnLi4vbGlicy9aZWlxVGhlbWVQcm92aWRlcic7XG5cbmNvbnN0IEJ1dHRvbiA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8VGhlbWVDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgeyh2YWx1ZSwgdGhlbWUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVlJywgdmFsdWUsIHRoZW1lKTtcbiAgICAgICAgcmV0dXJuIDxidXR0b24gdHlwZT1cImJ1dHRvblwiPk15IEJ1dHRvbjwvYnV0dG9uPjtcbiAgICAgIH19XG4gICAgPC9UaGVtZUNvbnRleHQuQ29uc3VtZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCdXR0b247XG4iXSwibmFtZXMiOlsibWFrZUlkIiwibGVuZ3RoIiwicmVzdWx0IiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWJzb2x1dGVVcmwiLCJyZXEiLCJzZXRMb2NhbGhvc3QiLCJwcm90b2NvbCIsImhvc3QiLCJoZWFkZXJzIiwid2luZG93IiwibG9jYXRpb24iLCJpbmRleE9mIiwib3JpZ2luIiwidXJsIiwiVGhlbWVDb250ZXh0IiwiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwiWmVpcVRoZW1lUHJvdmlkZXIiLCJjaGlsZHJlbiIsInZhbHVlIiwiUHJvdmlkZXIiLCJnZXRBcHBDb29raWVzIiwicGFyc2VkSXRlbXMiLCJjb29raWUiLCJzcGxpdCIsImZvckVhY2giLCJjb29raWVzIiwicGFyc2VkSXRlbSIsImRlY29kZVVSSSIsImV4dGVuZFN0YXRpY3MiLCJkIiwiYiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfX2V4dGVuZHMiLCJfXyIsInRoaXMiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9fYXNzaWduIiwiYXNzaWduIiwidCIsInMiLCJuIiwiYXJndW1lbnRzIiwiY2FsbCIsImFwcGx5IiwiX19yZXN0IiwiZSIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiX19zcHJlYWRBcnJheXMiLCJpbCIsInIiLCJrIiwiYSIsImoiLCJqbCIsImdlbmVyaWNNZXNzYWdlIiwiX2EiLCJvYmoiLCJwcm90byIsIm1lc3NhZ2UiLCJfc3VwZXIiLCJfdGhpcyIsIkludmFyaWFudEVycm9yIiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiRXJyb3IiLCJpbnZhcmlhbnQiLCJjb25kaXRpb24iLCJ2ZXJib3NpdHlMZXZlbHMiLCJ2ZXJib3NpdHlMZXZlbCIsIndyYXBDb25zb2xlTWV0aG9kIiwibWV0aG9kIiwiY29uc29sZSIsInNob3VsZEluY2x1ZGUiLCJ2YXJpYWJsZXMiLCJkaXJlY3RpdmVzIiwiZGlyZWN0aXZlIiwiaXNJbmNsdXNpb25EaXJlY3RpdmUiLCJkaXJlY3RpdmVBcmd1bWVudHMiLCJkaXJlY3RpdmVOYW1lIiwibmFtZSIsImlmQXJndW1lbnQiLCJpZlZhbHVlIiwiZ2V0SW5jbHVzaW9uRGlyZWN0aXZlcyIsImV2ZXJ5IiwiZXZhbGVkVmFsdWUiLCJraW5kIiwiaGFzRGlyZWN0aXZlcyIsIm5hbWVzIiwicm9vdCIsInZpc2l0IiwiRGlyZWN0aXZlIiwibm9kZSIsInB1c2giLCJnZXREaXJlY3RpdmVOYW1lcyIsInNvbWUiLCJnZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQiLCJkb2N1bWVudCIsImZyYWdtZW50TmFtZSIsImFjdHVhbEZyYWdtZW50TmFtZSIsImZyYWdtZW50cyIsImRlZmluaXRpb25zIiwiZGVmaW5pdGlvbiIsIm9wZXJhdGlvbiIsInNlbGVjdGlvblNldCIsInNlbGVjdGlvbnMiLCJjcmVhdGVGcmFnbWVudE1hcCIsInN5bVRhYmxlIiwiZnJhZ21lbnQiLCJnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24iLCJzZWxlY3Rpb24iLCJmcmFnbWVudE1hcCIsInByb2Nlc3MiLCJlbnYiLCJtYWtlUmVmZXJlbmNlIiwiaWQiLCJfX3JlZiIsImlzUmVmZXJlbmNlIiwiQm9vbGVhbiIsInZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbiIsImFyZ09iaiIsImlzSW50VmFsdWUiLCJpc0Zsb2F0VmFsdWUiLCJOdW1iZXIiLCJpc0Jvb2xlYW5WYWx1ZSIsImlzU3RyaW5nVmFsdWUiLCJpc09iamVjdFZhbHVlIiwibmVzdGVkQXJnT2JqXzEiLCJmaWVsZHMiLCJtYXAiLCJpc1ZhcmlhYmxlIiwidmFyaWFibGVWYWx1ZSIsImlzTGlzdFZhbHVlIiwidmFsdWVzIiwibGlzdFZhbHVlIiwibmVzdGVkQXJnQXJyYXlPYmoiLCJpc0VudW1WYWx1ZSIsImlzTnVsbFZhbHVlIiwiS05PV05fRElSRUNUSVZFUyIsImdldFN0b3JlS2V5TmFtZSIsImZpZWxkTmFtZSIsImFyZ3MiLCJmaWx0ZXJLZXlzIiwic29ydCIsImZpbHRlcmVkQXJnc18xIiwia2V5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbXBsZXRlRmllbGROYW1lIiwic3RyaW5naWZpZWRBcmdzIiwiZGF0YSIsIm9wdHMiLCJjbXAiLCJmIiwiY3ljbGVzIiwiYW9iaiIsImJvYmoiLCJzZWVuIiwidG9KU09OIiwidW5kZWZpbmVkIiwiaXNGaW5pdGUiLCJvdXQiLCJpc0FycmF5Iiwic2VlbkluZGV4Iiwia2V5cyIsInNwbGljZSIsInJlc3VsdEtleU5hbWVGcm9tRmllbGQiLCJmaWVsZCIsImFsaWFzIiwiZ2V0VHlwZW5hbWVGcm9tUmVzdWx0IiwiX190eXBlbmFtZSIsIl9pIiwiaXNGaWVsZCIsInR5cGVuYW1lIiwiY2hlY2tEb2N1bWVudCIsImRvYyIsIm9wZXJhdGlvbnMiLCJmaWx0ZXIiLCJnZXRPcGVyYXRpb25EZWZpbml0aW9uIiwiZ2V0RnJhZ21lbnREZWZpbml0aW9ucyIsImdldE1haW5EZWZpbml0aW9uIiwicXVlcnlEb2MiLCJmcmFnbWVudERlZmluaXRpb24iLCJnZXREZWZhdWx0VmFsdWVzIiwiZGVmYXVsdFZhbHVlcyIsImRlZnMiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwiZGVmIiwiZGVmYXVsdFZhbHVlIiwidmFyaWFibGUiLCJUWVBFTkFNRV9GSUVMRCIsImFkZFR5cGVuYW1lVG9Eb2N1bWVudCIsIlNlbGVjdGlvblNldCIsImVudGVyIiwiX2tleSIsInBhcmVudCIsImxhc3RJbmRleE9mIiwiYWRkZWQiLCJpc09iamVjdCIsImRlZmF1bHRSZWNvbmNpbGVyIiwidGFyZ2V0Iiwic291cmNlIiwicHJvcGVydHkiLCJtZXJnZSIsInJlY29uY2lsZXIiLCJTZXQiLCJEZWVwTWVyZ2VyIiwiY29udGV4dCIsInNvdXJjZUtleSIsInRhcmdldFZhbHVlIiwic2hhbGxvd0NvcHlGb3JNZXJnZSIsInBhc3RDb3BpZXMiLCJoYXMiLCJzbGljZSIsImdldFByb3RvdHlwZU9mIiwiYWRkIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJleHBvcnRzIiwiaGFzU3ltYm9scyIsIlN5bWJvbCIsImhhc1N5bWJvbCIsImdldFN5bWJvbCIsIm9ic2VydmFibGUiLCJTeW1ib2xJdGVyYXRvciIsIlN5bWJvbE9ic2VydmFibGUiLCJTeW1ib2xTcGVjaWVzIiwiZ2V0TWV0aG9kIiwiZ2V0U3BlY2llcyIsImN0b3IiLCJPYnNlcnZhYmxlIiwiaXNPYnNlcnZhYmxlIiwieCIsImhvc3RSZXBvcnRFcnJvciIsImxvZyIsInNldFRpbWVvdXQiLCJlbnF1ZXVlIiwiZm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJjbGVhbnVwU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uIiwiY2xlYW51cCIsIl9jbGVhbnVwIiwidW5zdWJzY3JpYmUiLCJjbG9zZVN1YnNjcmlwdGlvbiIsIl9vYnNlcnZlciIsIl9xdWV1ZSIsIl9zdGF0ZSIsIm5vdGlmeVN1YnNjcmlwdGlvbiIsInR5cGUiLCJvYnNlcnZlciIsIm0iLCJvbk5vdGlmeSIsInF1ZXVlIiwiZmx1c2hTdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb24iLCJzdWJzY3JpYmVyIiwic3Vic2NyaXB0aW9uT2JzZXJ2ZXIiLCJTdWJzY3JpcHRpb25PYnNlcnZlciIsImVycm9yIiwiZ2V0IiwiX3N1YnNjcmlwdGlvbiIsIl9zdWJzY3JpYmVyIiwibmV4dCIsImNvbXBsZXRlIiwicmVqZWN0Iiwic3Vic2NyaWJlIiwiZG9uZSIsIl90aGlzMiIsIl90aGlzMyIsIl90aGlzNCIsIkMiLCJoYXNTZWVkIiwiaGFzVmFsdWUiLCJzZWVkIiwiYWNjIiwiZmlyc3QiLCJfdGhpczUiLCJfbGVuIiwic291cmNlcyIsImluZGV4Iiwic3RhcnROZXh0IiwidiIsImZyb20iLCJfdGhpczYiLCJzdWJzY3JpcHRpb25zIiwib3V0ZXIiLCJpbm5lciIsImNvbXBsZXRlSWZEb25lIiwiY2xvc2VkIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsIml0ZXJhdG9yIiwiX2l0ZW0iLCJlcnIiLCJyZXR1cm4iLCJfbGVuMiIsIml0ZW1zIiwiX2tleTIiLCJzeW1ib2wiLCJyZXF1aXJlJCQwIiwiZm9yIiwic2VsZiIsImdsb2JhbCIsIm1vZHVsZSIsIkZ1bmN0aW9uIiwiZmFrZU9ic1N5bWJvbCIsInRvU3RyaW5nIiwiY2xvbmVEZWVwIiwiY2xvbmVEZWVwSGVscGVyIiwidmFsIiwiTWFwIiwiY29weV8xIiwic2V0IiwiY2hpbGQiLCJjb3B5XzIiLCJpc0VudiIsIm1heWJlRGVlcEZyZWV6ZSIsIndvcmtTZXQiLCJpc0Zyb3plbiIsImZyZWV6ZSIsImdldE93blByb3BlcnR5TmFtZXMiLCJpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5Iiwib2JzZXJ2ZXJzIiwiYXJndW1lbnQiLCJvYnNlcnZlcnNXaXRoTWV0aG9kIiwib2JzIiwiZml4T2JzZXJ2YWJsZVN1YmNsYXNzIiwic3ViY2xhc3MiLCJzcGVjaWVzIiwiaXNQcm9taXNlTGlrZSIsImlzTm9uRW1wdHlBcnJheSIsImFkZE9ic2VydmVyIiwicmVtb3ZlT2JzZXJ2ZXIiLCJzdWIiLCJsYXRlc3QiLCJzaGlmdCIsImhhbmRsZXJzIiwicmVhc29uIiwicHJvbWlzZSIsImNhdGNoIiwiXyIsIml0ZXJhYmxlIiwic3RhcnQiLCJDb25jYXN0IiwibmV4dE9yRXJyb3IiLCJkZWxpdmVyTGFzdE1lc3NhZ2UiLCJhZGRDb3VudCIsInF1aWV0bHkiLCJkZWxldGUiLCJjYWxsYmFjayIsImNhbGxlZCIsIm9uY2UiLCJjb3VudCIsImNhblVzZVdlYWtNYXAiLCJXZWFrTWFwIiwibmF2aWdhdG9yIiwicHJvZHVjdCIsImNvbXBhY3QiLCJvYmplY3RzIiwiZnJvbUVycm9yIiwiZXJyb3JWYWx1ZSIsInRocm93U2VydmVyRXJyb3IiLCJyZXNwb25zZSIsInN0YXR1c0NvZGUiLCJzdGF0dXMiLCJwYXNzdGhyb3VnaCIsIm9wIiwiZm9yd2FyZCIsIm9mIiwidG9MaW5rIiwiaGFuZGxlciIsIkFwb2xsb0xpbmsiLCJpc1Rlcm1pbmF0aW5nIiwibGluayIsInJlcXVlc3QiLCJsaW5rcyIsImVtcHR5IiwicmVkdWNlIiwieSIsImNvbmNhdCIsInRlc3QiLCJsZWZ0IiwicmlnaHQiLCJsZWZ0TGluayIsInJpZ2h0TGluayIsInN0YXJ0aW5nIiwiY3JlYXRlT3BlcmF0aW9uIiwidHJhbnNmb3JtZWRPcGVyYXRpb24iLCJleHRlbnNpb25zIiwib3BlcmF0aW9uTmFtZSIsInF1ZXJ5IiwidHJhbnNmb3JtT3BlcmF0aW9uIiwiT1BFUkFUSU9OX0ZJRUxEUyIsInZhbGlkYXRlT3BlcmF0aW9uIiwic2Vjb25kIiwiZmlyc3RMaW5rIiwibmV4dExpbmsiLCJvbkVycm9yIiwic2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIiLCJsYWJlbCIsInNlcmlhbGl6ZWQiLCJwYXJzZUVycm9yIiwiZmFsbGJhY2tIdHRwQ29uZmlnIiwiaHR0cCIsImluY2x1ZGVRdWVyeSIsImluY2x1ZGVFeHRlbnNpb25zIiwiYWNjZXB0IiwiY29udGVudC10eXBlIiwib3B0aW9ucyIsImNyZWF0ZUh0dHBMaW5rIiwibGlua09wdGlvbnMiLCJ1cmkiLCJmZXRjaGVyIiwidXNlR0VURm9yUXVlcmllcyIsIl9iIiwiaW5jbHVkZVVudXNlZFZhcmlhYmxlcyIsInJlcXVlc3RPcHRpb25zIiwiZmV0Y2giLCJjaGVja0ZldGNoZXIiLCJsaW5rQ29uZmlnIiwiZmV0Y2hPcHRpb25zIiwiY3JlZGVudGlhbHMiLCJjaG9zZW5VUkkiLCJmYWxsYmFja1VSSSIsImdldENvbnRleHQiLCJzZWxlY3RVUkkiLCJjbGllbnRBd2FyZW5lc3NIZWFkZXJzIiwiY2xpZW50QXdhcmVuZXNzIiwibmFtZV8xIiwidmVyc2lvbiIsImNvbnRyb2xsZXIiLCJjb250ZXh0SGVhZGVycyIsImNvbnRleHRDb25maWciLCJmYWxsYmFja0NvbmZpZyIsImNvbmZpZ3MiLCJjb25maWciLCJib2R5IiwicHJpbnQiLCJzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHkiLCJ1bnVzZWROYW1lc18xIiwiVmFyaWFibGUiLCJzaXplIiwic2lnbmFsIiwiX2MiLCJBYm9ydENvbnRyb2xsZXIiLCJjcmVhdGVTaWduYWxJZlN1cHBvcnRlZCIsIl9jb250cm9sbGVyIiwiX2QiLCJxdWVyeVBhcmFtcyIsImFkZFF1ZXJ5UGFyYW0iLCJlbmNvZGVVUklDb21wb25lbnQiLCJzZXJpYWxpemVkVmFyaWFibGVzIiwic2VyaWFsaXplZEV4dGVuc2lvbnMiLCJwcmVGcmFnbWVudCIsImZyYWdtZW50U3RhcnQiLCJzdWJzdHIiLCJxdWVyeVBhcmFtc1ByZWZpeCIsIm5ld1VSSSIsImpvaW4iLCJyZXdyaXRlVVJJRm9yR0VUIiwic2V0Q29udGV4dCIsInRleHQiLCJib2R5VGV4dCIsInBhcnNlIiwiZXJyb3JzIiwiYWJvcnQiLCJmblRvU3RyIiwicHJldmlvdXNDb21wYXJpc29ucyIsImVxdWFsIiwiY2hlY2siLCJjbGVhciIsImZ1bGwiLCJzdWZmaXgiLCJmcm9tSW5kZXgiLCJhVGFnIiwicHJldmlvdXNseUNvbXBhcmVkIiwiYUtleXMiLCJkZWZpbmVkS2V5cyIsImJLZXlzIiwia2V5Q291bnQiLCJhSXRlcmF0b3IiLCJlbnRyaWVzIiwiaXNNYXAiLCJpbmZvIiwiYUtleSIsImFWYWx1ZSIsImFDb2RlIiwibmF0aXZlQ29kZVN1ZmZpeCIsImlzRGVmaW5lZEtleSIsImJTZXQiLCJOZXR3b3JrU3RhdHVzIiwiZ3JhcGhRTEVycm9ycyIsIm5ldHdvcmtFcnJvciIsImVycm9yTWVzc2FnZSIsImV4dHJhSW5mbyIsImdyYXBoUUxFcnJvciIsInJlcGxhY2UiLCJBcG9sbG9FcnJvciIsImlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCIsIm5ldHdvcmtTdGF0dXMiLCJzaG91bGRGZXRjaCIsIlJlb2JzZXJ2ZXIiLCJuZXdPcHRpb25zIiwibmV3TmV0d29ya1N0YXR1cyIsInVwZGF0ZU9wdGlvbnMiLCJ1cGRhdGVQb2xsaW5nIiwiY29uY2FzdCIsInBvbGxpbmdJbmZvIiwiY2xlYXJUaW1lb3V0IiwidGltZW91dCIsInBvbGxJbnRlcnZhbCIsImludGVydmFsIiwibWF5YmVGZXRjaCIsInJlb2JzZXJ2ZSIsImZldGNoUG9saWN5IiwibmV4dEZldGNoUG9saWN5IiwicG9sbCIsIndhcm5lZEFib3V0VXBkYXRlUXVlcnkiLCJkZWZhdWx0U3Vic2NyaXB0aW9uT2JzZXJ2ZXJFcnJvckNhbGxiYWNrIiwicXVlcnlNYW5hZ2VyIiwicXVlcnlJbmZvIiwib25TdWJzY3JpYmUiLCJsYXN0RXJyb3IiLCJpc0RpZmZlcmVudEZyb21MYXN0UmVzdWx0IiwidXBkYXRlTGFzdFJlc3VsdCIsImxhc3RSZXN1bHQiLCJsb2FkaW5nIiwiaXNUb3JuRG93biIsInF1ZXJ5SWQiLCJnZW5lcmF0ZVF1ZXJ5SWQiLCJvcERlZiIsInF1ZXJ5TmFtZSIsIk9ic2VydmFibGVRdWVyeSIsInJlbW92ZVF1ZXJ5Iiwic2F2ZUFzTGFzdFJlc3VsdCIsInJlYWR5IiwicGFydGlhbCIsInRyYW5zZm9ybSIsImhhc0ZvcmNlZFJlc29sdmVycyIsImRpZmYiLCJnZXREaWZmIiwicmV0dXJuUGFydGlhbERhdGEiLCJuZXdSZXN1bHQiLCJsYXN0UmVzdWx0U25hcHNob3QiLCJyZXNldEVycm9ycyIsInJlb2JzZXJ2ZU9wdGlvbnMiLCJuZXdSZW9ic2VydmVyIiwicmVmZXRjaCIsImZldGNoTW9yZU9wdGlvbnMiLCJjb21iaW5lZE9wdGlvbnMiLCJxaWQiLCJub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UiLCJmZXRjaE1vcmUiLCJvYnNlcnZlIiwiZmV0Y2hRdWVyeSIsImZldGNoTW9yZVJlc3VsdCIsInVwZGF0ZVF1ZXJ5IiwicHJldmlvdXMiLCJjYWNoZSIsIndyaXRlUXVlcnkiLCJmaW5hbGx5Iiwic3RvcFF1ZXJ5Iiwic3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uRGF0YSIsInNldFZhcmlhYmxlcyIsIm1hcEZuIiwicHJldmlvdXNSZXN1bHQiLCJvcHRpbWlzdGljIiwiYnJvYWRjYXN0UXVlcmllcyIsImdldFJlb2JzZXJ2ZXIiLCJyZW9ic2VydmVyIiwiYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyIsInN1Yk9ic2VydmVyIiwidGVhckRvd25RdWVyeSIsInNoYXJlT3B0aW9ucyIsInNldE9ic2VydmFibGVRdWVyeSIsImN1cnJlbnRPcHRpb25zIiwiZmV0Y2hRdWVyeU9ic2VydmFibGUiLCJzc3JNb2RlIiwiZ2V0Q3VycmVudFJlc3VsdCIsInN0b3AiLCJkZWZhdWx0TWFrZURhdGEiLCJ3ZWFrbmVzcyIsIm1ha2VEYXRhIiwiVHJpZSIsImFycmF5IiwibG9va3VwQXJyYXkiLCJnZXRDaGlsZFRyaWUiLCJpc09ialJlZiIsIndlYWsiLCJzdHJvbmciLCJjdXJyZW50Q29udGV4dCIsIk1JU1NJTkdfVkFMVUUiLCJpZENvdW50ZXIiLCJnbG9iYWxLZXkiLCJTbG90IiwiRGF0ZSIsIm5vdyIsImNvbnRleHRfMSIsInNsb3RzIiwidGhpc0FyZyIsInNhdmVkIiwiZGVmYXVsdERpc3Bvc2UiLCJtYXgiLCJkaXNwb3NlIiwiQ2FjaGUiLCJnZXROb2RlIiwibmV3ZXN0Iiwib2xkZXIiLCJuZXdlciIsIm9sZGVzdCIsInBhcmVudEVudHJ5U2xvdCIsInRvQXJyYXkiLCJjb2xsZWN0aW9uIiwiaXRlbSIsIm1heWJlVW5zdWJzY3JpYmUiLCJlbnRyeU9yRGVwIiwiZW1wdHlTZXRQb29sIiwiYXNzZXJ0Iiwib3B0aW9uYWxNZXNzYWdlIiwidmFsdWVHZXQiLCJFbnRyeSIsIm1pZ2h0QmVEaXJ0eSIsInJlbWVtYmVyUGFyZW50IiwicmVjb21wdXRpbmciLCJlbnRyeSIsImZvcmdldENoaWxkcmVuIiwid2l0aFZhbHVlIiwicmVjb21wdXRlTmV3VmFsdWUiLCJzZXREaXJ0eSIsIm1heWJlU3Vic2NyaWJlIiwiZGlydHkiLCJyZXBvcnRDbGVhbiIsInNldENsZWFuIiwicmVhbGx5UmVjb21wdXRlIiwicmVwb3J0RGlydHkiLCJlYWNoUGFyZW50IiwiZm9yZ2V0Q2hpbGQiLCJkZXAiLCJkZXBzIiwicG9wIiwiZ2V0VmFsdWUiLCJwYXJlbnRzIiwiY2hpbGRWYWx1ZXMiLCJyZXBvcnREaXJ0eUNoaWxkIiwicmVwb3J0Q2xlYW5DaGlsZCIsImRpcnR5Q2hpbGRyZW4iLCJwYXJlbnRDb3VudCIsInBhcmVudFdhc0NsZWFuIiwibGVuIiwiY2hpbGRWYWx1ZSIsInJlbW92ZURpcnR5Q2hpbGQiLCJkYyIsIl92YWx1ZSIsImZvcmdldERlcHMiLCJFbnRyeU1ldGhvZHMiLCJmb3JnZXQiLCJkZXBzQnlLZXkiLCJkZXBlbmQiLCJkZXBfMSIsImRlcGVuZE9uIiwiZW50cnlNZXRob2ROYW1lIiwibV8xIiwibWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbiIsImtleVRyaWUiLCJjYWNoZXMiLCJ3cmFwIiwib3JpZ2luYWxGdW5jdGlvbiIsInBvdyIsImtleUFyZ3MiLCJtYWtlQ2FjaGVLZXkiLCJyZWNvbXB1dGUiLCJjbGVhbiIsImRpcnR5S2V5IiwicGVla0tleSIsInBlZWsiLCJmb3JnZXRLZXkiLCJnZXRLZXkiLCJBcG9sbG9DYWNoZSIsInRyYW5zYWN0aW9uIiwib3B0aW1pc3RpY0lkIiwicGVyZm9ybVRyYW5zYWN0aW9uIiwib2JqZWN0IiwicmVhZCIsInJvb3RJZCIsImdldEZyYWdtZW50RG9jIiwid3JpdGUiLCJkYXRhSWQiLCJicm9hZGNhc3QiLCJwYXRoIiwiY2xpZW50T25seSIsImhhc093biIsIlR5cGVPckZpZWxkTmFtZVJlZ0V4cCIsImZpZWxkTmFtZUZyb21TdG9yZU5hbWUiLCJzdG9yZUZpZWxkTmFtZSIsIm1hdGNoIiwic2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCIsInN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0IiwiREVMRVRFIiwiZGVsTW9kaWZpZXIiLCJJTlZBTElEQVRFIiwicG9saWNpZXMiLCJncm91cCIsIm9iamVjdE9yUmVmZXJlbmNlIiwib2JqT3JSZWYiLCJvYmpPcklkT3JSZWYiLCJtZXJnZUludG9TdG9yZSIsImlkZW50aWZ5IiwicmVmIiwiRW50aXR5U3RvcmUiLCJsb29rdXAiLCJzdG9yZU9iamVjdCIsInJvb3RUeXBlbmFtZXNCeUlkIiwiTGF5ZXIiLCJkZXBlbmRPbkV4aXN0ZW5jZSIsImluY29taW5nIiwiZXhpc3RpbmciLCJtZXJnZWQiLCJzdG9yZU9iamVjdFJlY29uY2lsZXIiLCJyZWZzIiwiY2FjaGluZyIsImZpZWxkc1RvRGlydHlfMSIsIl9fZXhpc3RzIiwiaGFzS2V5QXJncyIsImNoYW5nZWRGaWVsZHNfMSIsIm5lZWRUb01lcmdlXzEiLCJhbGxEZWxldGVkXzEiLCJzaGFyZWREZXRhaWxzXzEiLCJ0b1JlZmVyZW5jZSIsImNhblJlYWQiLCJyZWFkRmllbGQiLCJmaWVsZE5hbWVPck9wdGlvbnMiLCJzdG9yZSIsImZpZWxkVmFsdWUiLCJtb2RpZnkiLCJuZXdWYWx1ZSIsInN0b3JhZ2UiLCJnZXRTdG9yYWdlIiwiZ2V0RmllbGRWYWx1ZSIsImdldFN0b3JlRmllbGROYW1lIiwiZXZpY3RlZCIsImV2aWN0IiwidG9PYmplY3QiLCJleHRyYVJvb3RJZHMiLCJnZXRSb290SWRTZXQiLCJfX01FVEEiLCJuZXdEYXRhIiwicmVzdF8xIiwicmV0YWluIiwicm9vdElkcyIsImlkcyIsInNuYXBzaG90IiwiZmluZENoaWxkUmVmSWRzIiwiaWRzVG9SZW1vdmUiLCJyb290XzEiLCJmb3VuZF8xIiwid29ya1NldF8xIiwiY2FuVHJhdmVyc2VfMSIsImtleU1ha2VyIiwiS2V5VHJpZSIsIkNhY2hlR3JvdXAiLCJtYWtlRGVwS2V5IiwicmVzdWx0Q2FjaGluZyIsInNoYXJlZExheWVyR3JvdXAiLCJSb290IiwibGF5ZXJJZCIsInJlcGxheSIsInN0b3JhZ2VUcmllIiwicmVtb3ZlTGF5ZXIiLCJhZGRMYXllciIsImZyb21QYXJlbnQiLCJleGlzdGluZ09iamVjdCIsImluY29taW5nT2JqZWN0IiwiZXhpc3RpbmdWYWx1ZSIsImluY29taW5nVmFsdWUiLCJzdXBwb3J0c1Jlc3VsdENhY2hpbmciLCJtaXNzaW5nRnJvbUludmFyaWFudCIsIk1pc3NpbmdGaWVsZEVycm9yIiwiZXhlY1NlbGVjdGlvblNldEltcGwiLCJ2YXJTdHJpbmciLCJleGVjU3ViU2VsZWN0ZWRBcnJheUltcGwiLCJhZGRUeXBlbmFtZSIsIlN0b3JlUmVhZGVyIiwicXVlcnlEZWYiLCJleGVjUmVzdWx0IiwiZXhlY3V0ZVNlbGVjdGlvblNldCIsImhhc01pc3NpbmdGaWVsZHMiLCJtaXNzaW5nIiwia25vd25SZXN1bHRzIiwib2JqZWN0c1RvTWVyZ2UiLCJmaW5hbFJlc3VsdCIsImdldE1pc3NpbmciLCJoYW5kbGVNaXNzaW5nIiwicm9vdElkc0J5VHlwZW5hbWUiLCJyZXN1bHROYW1lIiwid2FzQ2xpZW50T25seSIsImV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5IiwiYXNzZXJ0U2VsZWN0aW9uU2V0Rm9ySWRWYWx1ZSIsImZyYWdtZW50TWF0Y2hlcyIsIm1lcmdlciIsIm1lcmdlRGVlcEFycmF5IiwiY2hpbGRSZXN1bHQiLCJyZWFkZXIiLCJTdG9yZVdyaXRlciIsIm9wZXJhdGlvbkRlZmluaXRpb24iLCJwcm9jZXNzU2VsZWN0aW9uU2V0IiwibWVyZ2VUcmVlIiwid3JpdHRlbiIsImtleU9iamVjdCIsInNldHMiLCJpc0ZyZXNoIiwiaW5jb21pbmdGaWVsZHMiLCJyZXN1bHRGaWVsZEtleSIsImNoaWxkVHJlZSIsImdldENoaWxkTWVyZ2VUcmVlIiwicHJvY2Vzc0ZpZWxkVmFsdWUiLCJjaGlsZFR5cGVuYW1lIiwiZ2V0TWVyZ2VGdW5jdGlvbiIsIm1heWJlUmVjeWNsZUNoaWxkTWVyZ2VUcmVlIiwidXNpbmdQb3NzaWJsZVR5cGVzIiwiZW50aXR5UmVmXzEiLCJhcHBseU1lcmdlcyIsImZpZWxkc1dpdGhTZWxlY3Rpb25TZXRzXzEiLCJoYXNTZWxlY3Rpb25TZXRfMSIsImhhc01lcmdlRnVuY3Rpb25fMSIsImV4aXN0aW5nUmVmIiwiaW5jb21pbmdPYmoiLCJnZXRDaGlsZCIsInBhcmVudFR5cGUiLCJ0eXBlRG90TmFtZSIsIndhcm5pbmdzIiwiY2hpbGRUeXBlbmFtZXMiLCJpbmNsdWRlcyIsIndhcm5BYm91dERhdGFMb3NzIiwiZ2V0U3RvcmFnZUFyZ3MiLCJlXzEiLCJpXzEiLCJnZXRWYWx1ZV8xIiwiZVZhbCIsImlWYWwiLCJhVmFsIiwicnVuTWVyZ2VGdW5jdGlvbiIsImVtcHR5TWVyZ2VUcmVlUG9vbCIsImNhY2hlU2xvdCIsImNhY2hlSW5mb01hcCIsImdldENhY2hlSW5mbyIsInZhcnMiLCJtYWtlVmFyIiwibGlzdGVuZXJzIiwicnYiLCJvbGRMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsImF0dGFjaCIsIm9uTmV4dENoYW5nZSIsImF0dGFjaENhY2hlIiwiZm9yZ2V0Q2FjaGUiLCJicm9hZGNhc3RXYXRjaGVzIiwiYXJnc0Zyb21GaWVsZFNwZWNpZmllciIsInNwZWMiLCJhcmdPYmpfMSIsImFyZ3VtZW50c09iamVjdEZyb21GaWVsZCIsImRlZmF1bHREYXRhSWRGcm9tT2JqZWN0IiwiX2lkIiwibnVsbEtleUZpZWxkc0ZuIiwic2ltcGxlS2V5QXJnc0ZuIiwiX2FyZ3MiLCJtZXJnZVRydWVGbiIsIm1lcmdlT2JqZWN0cyIsIm1lcmdlRmFsc2VGbiIsImRhdGFJZEZyb21PYmplY3QiLCJzZXRSb290VHlwZW5hbWUiLCJwb3NzaWJsZVR5cGVzIiwiYWRkUG9zc2libGVUeXBlcyIsInR5cGVQb2xpY2llcyIsImFkZFR5cGVQb2xpY2llcyIsIlBvbGljaWVzIiwiUk9PVF9RVUVSWSIsInBvbGljeSIsImdldFR5cGVQb2xpY3kiLCJrZXlGbiIsInNwZWNpZmllck9ySWQiLCJrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIiLCJxdWVyeVR5cGUiLCJtdXRhdGlvblR5cGUiLCJzdWJzY3JpcHRpb25UeXBlIiwidG9CZUFkZGVkIiwia2V5RmllbGRzIiwic2V0TWVyZ2UiLCJnZXRGaWVsZFBvbGljeSIsImtleUFyZ3NGbkZyb21TcGVjaWZpZXIiLCJ3aGljaCIsInRvVXBwZXJDYXNlIiwib2xkIiwic3VwZXJ0eXBlIiwiZ2V0U3VwZXJ0eXBlU2V0Iiwic3VidHlwZSIsImZ1enp5U3VidHlwZXMiLCJSZWdFeHAiLCJwb2xpY3lfMSIsInN1cGVydHlwZXMiLCJzdXBlcnR5cGVNYXAiLCJyZXN0IiwiaW5ib3giLCJ1cGRhdGVUeXBlUG9saWN5IiwiY3JlYXRlSWZNaXNzaW5nIiwiZmllbGRQb2xpY2llcyIsInN1cGVydHlwZVNldCIsInR5cGVDb25kaXRpb24iLCJ0eXBlbmFtZVN1cGVydHlwZVNldCIsIndvcmtRdWV1ZV8xIiwibWF5YmVFbnF1ZXVlXzEiLCJuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMiLCJjaGVja2luZ0Z1enp5U3VidHlwZXMiLCJyZWdFeHAiLCJmdXp6eVN0cmluZyIsImZpZWxkU3BlYyIsInNwZWNpZmllck9yU3RyaW5nIiwiZGlyZWN0aXZlc09iaiIsInN0b3JlS2V5TmFtZUZyb21GaWVsZCIsInJlYWRPcHRpb25zIiwibWFrZUZpZWxkRnVuY3Rpb25PcHRpb25zIiwicGFyZW50VHlwZW5hbWUiLCJtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24iLCJlVHlwZSIsImlUeXBlIiwic3BlY2lmaWVyIiwiY29tcHV0ZUtleU9iamVjdCIsInRyaWUiLCJhbGlhc01hcCIsIm1ha2VBbGlhc01hcCIsIndvcmtRdWV1ZSIsInJlc3BvbnNlS2V5Iiwic3RvcmVLZXkiLCJhbGlhc2VzIiwic3Vic2V0cyIsInN0cmljdCIsInByZXZLZXkiLCJrZXlPYmoiLCJzdWJzZXQiLCJyZXNwb25zZU5hbWUiLCJkZWZhdWx0Q29uZmlnIiwiYyIsImZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24iLCJicm9hZGNhc3RXYXRjaCIsIm9wdGltaXN0aWNEYXRhIiwic3RvcmVXcml0ZXIiLCJzdG9yZVJlYWRlciIsIkluTWVtb3J5Q2FjaGUiLCJleHRyYWN0IiwiZGlmZlF1ZXJ5QWdhaW5zdFN0b3JlIiwidHhDb3VudCIsIndyaXRlVG9TdG9yZSIsIndhdGNoIiwid2F0Y2hlcyIsInJlY2FsbENhY2hlIiwiaW1tZWRpYXRlIiwibWF5YmVCcm9hZGNhc3RXYXRjaCIsIndhdGNoRGVwIiwiZ2MiLCJyZWxlYXNlIiwiaWRUb1JlbW92ZSIsIm5ld09wdGltaXN0aWNEYXRhIiwicGVyZm9ybSIsImxheWVyIiwidHlwZW5hbWVEb2N1bWVudENhY2hlIiwiZG9jQ2FjaGUiLCJmcmFnbWVudFNvdXJjZU1hcCIsInByaW50RnJhZ21lbnRXYXJuaW5ncyIsImV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzIiwibm9ybWFsaXplIiwic3RyaW5nIiwidHJpbSIsInByb2Nlc3NGcmFnbWVudHMiLCJhc3QiLCJzZWVuS2V5cyIsImxvYyIsInN1YnN0cmluZyIsImVuZCIsInNvdXJjZUtleVNldCIsIndhcm4iLCJwYXJzZURvY3VtZW50IiwiY2FjaGVLZXkiLCJwYXJzZWQiLCJzdGFydFRva2VuIiwiZW5kVG9rZW4iLCJzdHJpcExvYyIsImdxbCIsImxpdGVyYWxzIiwiYXJnIiwiZ3FsXzEiLCJleHRyYXMiLCJsZXZlbCIsIkRvY3VtZW50VHlwZSIsIlF1ZXJ5IiwiTXV0YXRpb24iLCJPcGVyYXRpb25EYXRhIiwic3RvcmVQcmV2aW91cyIsInByZXZpb3VzT3B0aW9ucyIsImlzTW91bnRlZCIsImNsaWVudCIsImlzTmV3IiwiY2FjaGVkIiwicXVlcmllcyIsIm11dGF0aW9ucyIsInBhcnNlciIsInJlcXVpcmVkT3BlcmF0aW9uTmFtZSIsInVzZWRPcGVyYXRpb25OYW1lIiwic2V0UmVzdWx0IiwiaW5pdGlhbGl6ZSIsIlN1YnNjcmlwdGlvbkRhdGEiLCJnZXRPcHRpb25zIiwic2tpcCIsImN1cnJlbnRSZXN1bHQiLCJyZWZyZXNoQ2xpZW50IiwiZ2V0TG9hZGluZ1Jlc3VsdCIsInNob3VsZFJlc3Vic2NyaWJlIiwic3RhcnRTdWJzY3JpcHRpb24iLCJlbmRTdWJzY3JpcHRpb24iLCJjdXJyZW50T2JzZXJ2YWJsZSIsInVwZGF0ZUN1cnJlbnREYXRhIiwiYmluZCIsInVwZGF0ZUVycm9yIiwiY29tcGxldGVTdWJzY3JpcHRpb24iLCJvblN1YnNjcmlwdGlvbkRhdGEiLCJ1cGRhdGVSZXN1bHQiLCJvblN1YnNjcmlwdGlvbkNvbXBsZXRlIiwibXV0YXRpb25GdW5jdGlvbk9wdGlvbnMiLCJvbk11dGF0aW9uU3RhcnQiLCJtdXRhdGlvbklkIiwiZ2VuZXJhdGVOZXdNdXRhdGlvbklkIiwibXV0YXRlIiwib25NdXRhdGlvbkNvbXBsZXRlZCIsIm9uTXV0YXRpb25FcnJvciIsInZlcmlmeURvY3VtZW50VHlwZSIsIm11dGF0aW9uIiwibW9zdFJlY2VudE11dGF0aW9uSWQiLCJNdXRhdGlvbkRhdGEiLCJydW5NdXRhdGlvbiIsInVubW91bnQiLCJkZWZhdWx0cyIsIm1lcmdlT3B0aW9ucyIsImlnbm9yZVJlc3VsdHMiLCJvbkNvbXBsZXRlZCIsImlzTW9zdFJlY2VudE11dGF0aW9uIiwidXNlTXV0YXRpb24iLCJ1c2VDb250ZXh0IiwiZGlzcGxheU5hbWUiLCJnZXRBcG9sbG9Db250ZXh0IiwidXNlU3RhdGUiLCJ1cGRhdGVkT3B0aW9ucyIsIm11dGF0aW9uRGF0YVJlZiIsInVzZVJlZiIsIm11dGF0aW9uRGF0YSIsImN1cnJlbnQiLCJzZXRPcHRpb25zIiwidXNlRWZmZWN0IiwiYWZ0ZXJFeGVjdXRlIiwiZXhlY3V0ZSIsIm9uTmV3RGF0YSIsInJ1bkxhenkiLCJsYXp5T3B0aW9ucyIsIm9ic2VydmFibGVRdWVyeUZpZWxkcyIsImdldExhc3RSZXN1bHQiLCJwcmV2aW91c0RhdGEiLCJyZXNldFF1ZXJ5U3RvcmVFcnJvcnMiLCJzdGFydFBvbGxpbmciLCJzdG9wUG9sbGluZyIsInN1YnNjcmliZVRvTW9yZSIsIlF1ZXJ5RGF0YSIsInJlbW92ZVF1ZXJ5U3Vic2NyaXB0aW9uIiwicmVtb3ZlT2JzZXJ2YWJsZSIsInVwZGF0ZU9ic2VydmFibGVRdWVyeSIsInN0YXJ0UXVlcnlTdWJzY3JpcHRpb24iLCJnZXRFeGVjdXRlU3NyUmVzdWx0IiwiZ2V0RXhlY3V0ZVJlc3VsdCIsInJ1bkxhenlRdWVyeSIsInNzciIsImxhenkiLCJoYW5kbGVFcnJvck9yQ29tcGxldGVkIiwicmVuZGVyUHJvbWlzZXMiLCJnZXRRdWVyeVJlc3VsdCIsInNzckRpc2FibGVkIiwiZmV0Y2hEaXNhYmxlZCIsImRpc2FibGVOZXR3b3JrRmV0Y2hlcyIsInNzckxvYWRpbmciLCJzdGFsZSIsInNzckluaXRpYXRlZCIsImFkZFF1ZXJ5UHJvbWlzZSIsImdldFNTUk9ic2VydmFibGUiLCJvYnNlcnZhYmxlUXVlcnlPcHRpb25zIiwicHJlcGFyZU9ic2VydmFibGVRdWVyeU9wdGlvbnMiLCJ3YXRjaFF1ZXJ5IiwicmVnaXN0ZXJTU1JPYnNlcnZhYmxlIiwibmV3T2JzZXJ2YWJsZVF1ZXJ5T3B0aW9ucyIsImluaXRpYWxpemVPYnNlcnZhYmxlUXVlcnkiLCJjdXJyZW50U3Vic2NyaXB0aW9uIiwicmVzdWJzY3JpYmVUb1F1ZXJ5IiwiZ2V0TGFzdEVycm9yIiwicmVzZXRMYXN0UmVzdWx0cyIsImFuZERlbGV0ZSIsIm9ic1JlZmV0Y2giLCJvYnNGZXRjaE1vcmUiLCJvYnNVcGRhdGVRdWVyeSIsIm9ic1N0YXJ0UG9sbGluZyIsIm9ic1N0b3BQb2xsaW5nIiwib2JzU3Vic2NyaWJlVG9Nb3JlIiwiaGVscGVycyIsImxpYnMiLCJhdXRoIiwidXNlU3VibWl0Q29udGFjdCIsInN3YWwiLCJjb250YWN0IiwiYXN5bmMiLCJpbnB1dCIsIkJ1dHRvbiIsIkNvbnN1bWVyIiwidGhlbWUiXSwibWFwcGluZ3MiOiJrY0FHZSxDQUFFQSxPQ0hEQyxRQUNWQyxFQUFTLFNBQ1BDLEVBQ0osaUVBQ0lDLEVBQW1CRCxFQUFXRixXQUUvQixJQUFJSSxFQUFJLEVBQUdBLEVBQUlKLEVBQVFJLElBQzFCSCxHQUFVQyxFQUFXRyxPQUFPQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXTCxXQUVsREYsR0ROZ0JRLGFFSFRDLEVBQUtDLFNBQ2ZDLEVBQVcsU0FDWEMsRUFBT0gsRUFDUEEsRUFBSUksUUFBUSxxQkFBdUJKLEVBQUlJLFFBQVFELEtBQy9DRSxPQUFPQyxTQUFTSCxZQUNoQkEsRUFBS0ksUUFBUSxjQUFnQixJQUMzQk4sSUFBY0UsRUFBT0YsR0FDekJDLEVBQVcsU0FFTixDQUNMQSxTQUFBQSxFQUNBQyxLQUFBQSxFQUNBSyxPQUFTLEdBQUVOLE1BQWFDLElBQ3hCTSxJQUFLVCxLQ1hGLE1BQU1VLEVBQWVDLFVBQU1DLHNCQ0FuQixDQUFFQyxrQkRFUyxFQUFHQyxTQUFBQSxFQUFVQyxNQUFBQSxLQUVuQ0osd0JBQUNELEVBQWFNLFVBQVNELE1BQU9BLEdBQVFELE1FSjNCLENBQUVHLGNDRURqQixVQUNSa0IsRUFBYyxNQUNoQmxCLEVBQUlJLFFBQVFlLE9BQVEsQ0FDRG5CLEVBQUlJLFFBQVFlLE9BQU9DLE1BQU0sTUFDakNDLFNBQVNDLFVBQ2RDLEVBQWFELEVBQVFGLE1BQU0sS0FDakNGLEVBQVlLLEVBQVcsSUFBTUMsVUFBVUQsRUFBVyxjQUcvQ0wsSUNHTE8sRUFBZ0IsU0FBU0MsRUFBR0MsR0FJNUIsT0FIQUYsRUFBZ0JHLE9BQU9DLGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVMLEVBQUdDLEdBQUtELEVBQUVJLFVBQVlILElBQ3ZFLFNBQVVELEVBQUdDLEdBQUssSUFBSyxJQUFJSyxLQUFLTCxFQUFPQSxFQUFFTSxlQUFlRCxLQUFJTixFQUFFTSxHQUFLTCxFQUFFSyxNQUNwRE4sRUFBR0MsSUFHckIsU0FBU08sRUFBVVIsRUFBR0MsR0FFekIsU0FBU1EsSUFBT0MsS0FBS0MsWUFBY1gsRUFEbkNELEVBQWNDLEVBQUdDLEdBRWpCRCxFQUFFWSxVQUFrQixPQUFOWCxFQUFhQyxPQUFPVyxPQUFPWixJQUFNUSxFQUFHRyxVQUFZWCxFQUFFVyxVQUFXLElBQUlILEdBRzVFLElBQUlLLEVBQVcsV0FRbEIsT0FQQUEsRUFBV1osT0FBT2EsUUFBVSxTQUFrQkMsR0FDMUMsSUFBSyxJQUFJQyxFQUFHakQsRUFBSSxFQUFHa0QsRUFBSUMsVUFBVXZELE9BQVFJLEVBQUlrRCxFQUFHbEQsSUFFNUMsSUFBSyxJQUFJc0MsS0FEVFcsRUFBSUUsVUFBVW5ELEdBQ09rQyxPQUFPVSxVQUFVTCxlQUFlYSxLQUFLSCxFQUFHWCxLQUFJVSxFQUFFVixHQUFLVyxFQUFFWCxJQUU5RSxPQUFPVSxJQUVLSyxNQUFNWCxLQUFNUyxZQUd6QixTQUFTRyxFQUFPTCxFQUFHTSxHQUN0QixJQUFJUCxFQUFJLEdBQ1IsSUFBSyxJQUFJVixLQUFLVyxFQUFPZixPQUFPVSxVQUFVTCxlQUFlYSxLQUFLSCxFQUFHWCxJQUFNaUIsRUFBRTFDLFFBQVF5QixHQUFLLElBQzlFVSxFQUFFVixHQUFLVyxFQUFFWCxJQUNiLEdBQVMsTUFBTFcsR0FBcUQsbUJBQWpDZixPQUFPc0Isc0JBQ3RCLENBQUEsSUFBSXhELEVBQUksRUFBYixJQUFnQnNDLEVBQUlKLE9BQU9zQixzQkFBc0JQLEdBQUlqRCxFQUFJc0MsRUFBRTFDLE9BQVFJLElBQzNEdUQsRUFBRTFDLFFBQVF5QixFQUFFdEMsSUFBTSxHQUFLa0MsT0FBT1UsVUFBVWEscUJBQXFCTCxLQUFLSCxFQUFHWCxFQUFFdEMsTUFDdkVnRCxFQUFFVixFQUFFdEMsSUFBTWlELEVBQUVYLEVBQUV0QyxLQUUxQixPQUFPZ0QsRUFvR0osU0FBU1UsSUFDWixJQUFLLElBQUlULEVBQUksRUFBR2pELEVBQUksRUFBRzJELEVBQUtSLFVBQVV2RCxPQUFRSSxFQUFJMkQsRUFBSTNELElBQUtpRCxHQUFLRSxVQUFVbkQsR0FBR0osT0FDeEUsSUFBSWdFLEVBQUl2QixNQUFNWSxHQUFJWSxFQUFJLEVBQTNCLElBQThCN0QsRUFBSSxFQUFHQSxFQUFJMkQsRUFBSTNELElBQ3pDLElBQUssSUFBSThELEVBQUlYLFVBQVVuRCxHQUFJK0QsRUFBSSxFQUFHQyxFQUFLRixFQUFFbEUsT0FBUW1FLEVBQUlDLEVBQUlELElBQUtGLElBQzFERCxFQUFFQyxHQUFLQyxFQUFFQyxHQUNqQixPQUFPSDs7Ozs7Ozs7Ozs7Ozs7a0ZDMUlYLElBQUk3QixFQUFnQixTQUFTQyxFQUFHQyxHQUk1QixPQUhBRixFQUFnQkcsT0FBT0MsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUwsRUFBR0MsR0FBS0QsRUFBRUksVUFBWUgsSUFDdkUsU0FBVUQsRUFBR0MsR0FBSyxJQUFLLElBQUlLLEtBQUtMLEVBQU9DLE9BQU9VLFVBQVVMLGVBQWVhLEtBQUtuQixFQUFHSyxLQUFJTixFQUFFTSxHQUFLTCxFQUFFSyxNQUMzRU4sRUFBR0MsSUNwQjVCLElBQU1nQyxFQUFpQixzQkFFckJDLEVBSUVoQyxzQkFKRkMsYUFBaUIsU0FBVWdDLEVBQVVDLEdBRW5DLE9BREFELEVBQUkvQixVQUFZZ0MsRUFDVEQsbUJBT1QsV0FBWUUsZ0JBQUFBLEtBQVosTUFDRUMsWUFDcUIsaUJBQVpELEVBQ0FKLE9BQW1CSSwrREFDdEJBLGdCQU5SRSxjQUFjLEVBQ2RBLE9BQU9OLEVBT0w5QixFQUFlb0MsRUFBTUMsRUFBZTVCLGFBRXhDLE9ESU8sU0FBbUJaLEVBQUdDLEdBQ3pCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUl3QyxVQUFVLHVCQUF5QkMsT0FBT3pDLEdBQUssaUNBRTdELFNBQVNRLElBQU9DLEtBQUtDLFlBQWNYLEVBRG5DRCxFQUFjQyxFQUFHQyxHQUVqQkQsRUFBRVksVUFBa0IsT0FBTlgsRUFBYUMsT0FBT1csT0FBT1osSUFBTVEsRUFBR0csVUFBWVgsRUFBRVcsVUFBVyxJQUFJSCxHQ3BCL0NELFNBQUFtQyxnQkFhcEJDLEVBQ2RDLEVBQ0FSLEdBRUEsSUFBS1EsRUFDSCxNQUFNLElBQUlMLEVBQWVILEdBSTdCLElBQU1TLEVBQWtCLENBQUMsTUFBTyxPQUFRLFFBQVMsVUFHN0NDLEVBQWlCRCxFQUFnQmpFLFFBQVEsT0FFN0MsU0FBU21FLEVBQStDQyxHQUN0RCxPQUFPLFdBQ0wsR0FBSUgsRUFBZ0JqRSxRQUFRb0UsSUFBV0YsRUFDckMsT0FBT0csUUFBUUQsR0FBUTVCLE1BQU02QixRQUFTL0IscUJDbEI1QmdDLEVBQ2RqQixFQUNBa0IsT0FERUMsZUFHRixPQUFLQSxJQUFlQSxFQUFXekYsaUJBd0QvQnlGLEdBRUEsSUFBTXhGLEVBQThCLEdBRWhDd0YsR0FBY0EsRUFBV3pGLFFBQzNCeUYsRUFBVzFELFNBQVEsU0FBQTJELEdBQ2pCLEdBWE4sU0FBOEJwQixPQUFVN0MsZUFDdEMsTUFBaUIsU0FBVkEsR0FBOEIsWUFBVkEsRUFVbEJrRSxDQUFxQkQsR0FBMUIsQ0FFQSxJQUFNRSxFQUFxQkYsRUFBVW5DLFVBQy9Cc0MsRUFBZ0JILEVBQVVJLEtBQUtyRSxtRkFPckMsSUFBTXNFLEVBQWFILEVBQW9CLCtFQU12QyxJQUFNSSxFQUFxQkQsRUFBV3RFLGtEQVNidUUsb0lBcEZ0QkMsQ0FDTFIsR0FDQVMsT0FBTSxTQUFDNUIsT0FBRW9CLGNBQVdLLGVBQ2hCSSxHQUF1QixFQVUzQixNQVQ4QixhQUExQkosRUFBV3RFLE1BQU0yRSxLQUkyQnBCLFlBSDlDbUIsRUFBY1gsR0FBYUEsRUFBV08sRUFBV3RFLE1BQXVCcUUsS0FBS3JFLHVFQU03RTBFLEVBQWVKLEVBQVd0RSxNQUEyQkEsTUFFdkIsU0FBekJpRSxFQUFVSSxLQUFLckUsT0FBb0IwRSxFQUFjQSxjQWdCNUNFLEVBQWNDLEVBQWlCQyxHQUM3QyxnQkFiZ0NBLEdBQ2hDLElBQU1ELEVBQWtCLEdBUXhCLE9BTkFFLFFBQU1ELEVBQU0sQ0FDVkUsVUFBQSxTQUFVQyxHQUNSSixFQUFNSyxLQUFLRCxFQUFLWixLQUFLckUsVUFJbEI2RSxFQUlBTSxDQUFrQkwsR0FBTU0sTUFDN0IsU0FBQ2YsR0FBaUIsT0FBQVEsRUFBTXJGLFFBQVE2RSxJQUFTLGNDNUI3QmdCLEVBQ2RDLEVBQ0FDLEdBRUEsSUFBSUMsRUFBcUJELEVBS25CRSxFQUEyQyxHQXdEakQsT0F2REFILEVBQVNJLFlBQVlwRixTQUFRLFNBQUFxRixHQUczQixHQUF3Qix3QkFBcEJBLEVBQVdoQixLQUNiLHFMQVNzQix1QkFBcEJnQixFQUFXaEIsTUFDYmMsRUFBVVAsS0FBS1MsV0FNZSxJQUF2QkgsMEhBT1RBLEVBQXFCQyxFQUFVLEdBQUdwQixLQUFLckUsY0FNcENzRixJQUNISSxlQUNFLENBQ0VmLEtBQU0sc0JBQ05pQixVQUFXLFFBQ1hDLGFBQWMsQ0FDWmxCLEtBQU0sZUFDTm1CLFdBQVksQ0FDVixDQUNFbkIsS0FBTSxpQkFDTk4sS0FBTSxDQUNKTSxLQUFNLE9BQ04zRSxNQUFPd0YsUUFNZEYsRUFBU0ksd0JBZ0JGSyxFQUNkTixnQkFBQUEsTUFFQSxJQUFNTyxFQUF3QixHQUk5QixPQUhBUCxFQUFVbkYsU0FBUSxTQUFBMkYsR0FDaEJELEVBQVNDLEVBQVM1QixLQUFLckUsT0FBU2lHLEtBRTNCRCxXQUdPRSxFQUNkQyxFQUNBQyxHQUVBLE9BQVFELEVBQVV4QixNQUNoQixJQUFLLGlCQUNILE9BQU93QixFQUNULElBQUssaUJBQ0gsSUFBTUYsRUFBV0csR0FBZUEsRUFBWUQsRUFBVTlCLEtBQUtyRSxPQUUzRCxrREFBT2lHLEVBRVQsUUFDRSxPQUFPLE9GdkZiLFNBQWlCMUMsR0FDRkEsTUFBTUksRUFBa0IsT0FDeEJKLE9BQU9JLEVBQWtCLFFBQ3pCSixRQUFRSSxFQUFrQixTQUh6QyxDQUFpQkosSUFBQUEsT0FzQkksaUJBQVo4QyxTQUNnQixpQkFBaEJBLFFBQVFDLEtBQ2JELGlCR3hDWUUsRUFBY0MsR0FDNUIsTUFBTyxDQUFFQyxNQUFPcEQsT0FBT21ELGFBR1RFLEVBQVk1RCxHQUMxQixPQUFPNkQsUUFBUTdELEdBQXNCLGlCQUFSQSxHQUF5QyxpQkFBZEEsRUFBSTJELGdCQXVEOUNHLEVBQ2RDLEVBQ0F4QyxFQUNBckUsRUFDQStELEdBRUEsR0FsQ0YsU0FBb0IvRCxHQUNsQixNQUFzQixhQUFmQSxFQUFNMkUsS0FpQ1RtQyxDQUFXOUcsSUE5QmpCLFNBQXNCQSxHQUNwQixNQUFzQixlQUFmQSxFQUFNMkUsS0E2QllvQyxDQUFhL0csR0FDcEM2RyxFQUFPeEMsRUFBS3JFLE9BQVNnSCxPQUFPaEgsRUFBTUEsWUFDN0IsR0F4Q1QsU0FBd0JBLEdBQ3RCLE1BQXNCLGlCQUFmQSxFQUFNMkUsS0F1Q0ZzQyxDQUFlakgsSUE1QzVCLFNBQXVCQSxHQUNyQixNQUFzQixnQkFBZkEsRUFBTTJFLEtBMkN1QnVDLENBQWNsSCxHQUNoRDZHLEVBQU94QyxFQUFLckUsT0FBU0EsRUFBTUEsV0FDdEIsR0ExQlQsU0FBdUJBLEdBQ3JCLE1BQXNCLGdCQUFmQSxFQUFNMkUsS0F5QkZ3QyxDQUFjbkgsR0FBUSxDQUMvQixJQUFNb0gsRUFBZSxHQUNyQnBILEVBQU1xSCxPQUFPQyxLQUFJLFNBQUF4RSxHQUNmLE9BQUE4RCxFQUE0QlEsRUFBY3RFLEVBQUl1QixLQUFNdkIsRUFBSTlDLE1BQU8rRCxNQUVqRThDLEVBQU94QyxFQUFLckUsT0FBU29ILE9BQ2hCLEdBcENULFNBQW9CcEgsR0FDbEIsTUFBc0IsYUFBZkEsRUFBTTJFLEtBbUNGNEMsQ0FBV3ZILEdBQVEsQ0FDNUIsSUFBTXdILEdBQWlCekQsR0FBYyxJQUFZL0QsRUFBTXFFLEtBQUtyRSxPQUM1RDZHLEVBQU94QyxFQUFLckUsT0FBU3dILE9BQ2hCLEdBL0JULFNBQXFCeEgsR0FDbkIsTUFBc0IsY0FBZkEsRUFBTTJFLEtBOEJGOEMsQ0FBWXpILEdBQ3JCNkcsRUFBT3hDLEVBQUtyRSxPQUFTQSxFQUFNMEgsT0FBT0osS0FBSSxTQUFBSyxHQUNwQyxJQUFNQyxFQUFvQixHQU8xQixPQU5BaEIsRUFDRWdCLEVBQ0F2RCxFQUNBc0QsRUFDQTVELEdBRU02RCxFQUEwQnZELEVBQUtyRSxlQUVwQyxHQXRDVCxTQUFxQkEsR0FDbkIsTUFBc0IsY0FBZkEsRUFBTTJFLEtBcUNGa0QsQ0FBWTdILEdBQ3JCNkcsRUFBT3hDLEVBQUtyRSxPQUFVQSxFQUF3QkEsVUFDekMsQ0FBQSxJQXBDVCxTQUFxQkEsR0FDbkIsTUFBc0IsY0FBZkEsRUFBTTJFLEtBbUNGbUQsQ0FBWTlILEdBR3JCLDhKQUZBNkcsRUFBT3hDLEVBQUtyRSxPQUFTLE1Ba0R6QixJQUFNK0gsRUFBNkIsQ0FDakMsYUFDQSxVQUNBLE9BQ0EsU0FDQSxPQUNBLG1CQUdjQyxFQUNkQyxFQUNBQyxFQUNBbEUsR0FFQSxHQUNFa0UsR0FDQWxFLEdBQ0FBLEVBQXVCLFlBQ3ZCQSxFQUF1QixXQUFPLElBQzlCLENBQ0EsR0FDRUEsRUFBdUIsV0FBVSxRQUNoQ0EsRUFBdUIsV0FBVSxPQUFlekYsT0FBUyxFQUMxRCxDQUNBLElBQU00SixFQUFhbkUsRUFBdUIsV0FBVSxPQUMvQ0EsRUFBdUIsV0FBVSxPQUNsQyxHQUNKbUUsRUFBV0MsT0FFWCxJQUFNQyxFQUFlLEdBS3JCLE9BSkFGLEVBQVc3SCxTQUFRLFNBQUFnSSxHQUNqQkQsRUFBYUMsR0FBT0osRUFBS0ksTUFHakJ0RSxFQUF1QixXQUFPLFFBQUt1RSxLQUFLQyxVQUNoREgsT0FHRixPQUFPckUsRUFBdUIsV0FBTyxJQUl6QyxJQUFJeUUsRUFBNEJSLEVBRWhDLEdBQUlDLEVBQU0sQ0FJUixJQUFNUSxFQ3hOTyxTQUFVQyxFQUFNQyxHQUN4QkEsSUFBTUEsRUFBTyxJQUNFLG1CQUFUQSxJQUFxQkEsRUFBTyxDQUFFQyxJQUFLRCxJQUM5QyxJQUVpQ0UsRUFGN0JDLEVBQWlDLGtCQUFoQkgsRUFBS0csUUFBd0JILEVBQUtHLE9BRW5ERixFQUFNRCxFQUFLQyxNQUFrQkMsRUFROUJGLEVBQUtDLElBUEcsU0FBVTVELEdBQ2IsT0FBTyxTQUFVeEMsRUFBRzdCLEdBQ2hCLElBQUlvSSxFQUFPLENBQUVWLElBQUs3RixFQUFHekMsTUFBT2lGLEVBQUt4QyxJQUM3QndHLEVBQU8sQ0FBRVgsSUFBSzFILEVBQUdaLE1BQU9pRixFQUFLckUsSUFDakMsT0FBT2tJLEVBQUVFLEVBQU1DLE1BS3ZCQyxFQUFPLEdBQ1gsT0FBTyxTQUFVVixFQUFXdkQsR0FLeEIsR0FKSUEsR0FBUUEsRUFBS2tFLFFBQWlDLG1CQUFoQmxFLEVBQUtrRSxTQUNuQ2xFLEVBQU9BLEVBQUtrRSxlQUdIQyxJQUFUbkUsRUFBSixDQUNBLEdBQW1CLGlCQUFSQSxFQUFrQixPQUFPb0UsU0FBU3BFLEdBQVEsR0FBS0EsRUFBTyxPQUNqRSxHQUFvQixpQkFBVEEsRUFBbUIsT0FBT3NELEtBQUtDLFVBQVV2RCxHQUVwRCxJQUFJdEcsRUFBRzJLLEVBQ1AsR0FBSXRJLE1BQU11SSxRQUFRdEUsR0FBTyxDQUVyQixJQURBcUUsRUFBTSxJQUNEM0ssRUFBSSxFQUFHQSxFQUFJc0csRUFBSzFHLE9BQVFJLElBQ3JCQSxJQUFHMkssR0FBTyxLQUNkQSxHQUFPZCxFQUFVdkQsRUFBS3RHLEtBQU8sT0FFakMsT0FBTzJLLEVBQU0sSUFHakIsR0FBYSxPQUFUckUsRUFBZSxNQUFPLE9BRTFCLElBQTRCLElBQXhCaUUsRUFBSzFKLFFBQVF5RixHQUFjLENBQzNCLEdBQUk4RCxFQUFRLE9BQU9SLEtBQUtDLFVBQVUsYUFDbEMsTUFBTSxJQUFJcEYsVUFBVSx5Q0FHeEIsSUFBSW9HLEVBQVlOLEVBQUtoRSxLQUFLRCxHQUFRLEVBQzlCd0UsRUFBTzVJLE9BQU80SSxLQUFLeEUsR0FBTW1ELEtBQUtTLEdBQU9BLEVBQUk1RCxJQUU3QyxJQURBcUUsRUFBTSxHQUNEM0ssRUFBSSxFQUFHQSxFQUFJOEssRUFBS2xMLE9BQVFJLElBQUssQ0FDOUIsSUFBSTJKLEVBQU1tQixFQUFLOUssR0FDWHFCLEVBQVF3SSxFQUFVdkQsRUFBS3FELElBRXRCdEksSUFDRHNKLElBQUtBLEdBQU8sS0FDaEJBLEdBQU9mLEtBQUtDLFVBQVVGLEdBQU8sSUFBTXRJLEdBR3ZDLE9BREFrSixFQUFLUSxPQUFPRixFQUFXLEdBQ2hCLElBQU1GLEVBQU0sS0F0Q2hCLENBdUNKWCxHRGlLNkJILENBQVVOLEdBQzFDTyxHQUFxQixJQUFJQyxNQWMzQixPQVhJMUUsR0FDRm5ELE9BQU80SSxLQUFLekYsR0FBWTFELFNBQVEsU0FBQWdJLElBQ1MsSUFBbkNQLEVBQWlCdkksUUFBUThJLEtBQ3pCdEUsRUFBV3NFLElBQVF6SCxPQUFPNEksS0FBS3pGLEVBQVdzRSxJQUFNL0osT0FDbERrSyxHQUFxQixJQUFJSCxNQUFPQyxLQUFLQyxVQUFVeEUsRUFBV3NFLFFBRTFERyxHQUFxQixJQUFJSCxNQUt4QkcsV0FpQk9rQixFQUF1QkMsR0FDckMsT0FBT0EsRUFBTUMsTUFBUUQsRUFBTUMsTUFBTTdKLE1BQVE0SixFQUFNdkYsS0FBS3JFLGVBR3RDOEosRUFDZHRMLEVBQ0FxSCxFQUNBTyxHQUVBLEdBQWlDLGlCQUF0QjVILEVBQU91TCxXQUNoQixPQUFPdkwsRUFBT3VMLFdBR2hCLElBQXdCLFFBQUFsSCxFQUFBZ0QsRUFBYUMsV0FBYmtFLFdBQUFBLElBQXlCLENBQTVDLElBQU03RCxPQUNULEdBQUk4RCxFQUFROUQsSUFDVixHQUE2QixlQUF6QkEsRUFBVTlCLEtBQUtyRSxNQUNqQixPQUFPeEIsRUFBT21MLEVBQXVCeEQsUUFFbEMsQ0FDTCxJQUFNK0QsRUFBV0osRUFDZnRMLEVBQ0EwSCxFQUF5QkMsRUFBV0MsR0FBY1AsYUFDbERPLEdBRUYsR0FBd0IsaUJBQWI4RCxFQUNULE9BQU9BLGFBTUNELEVBQVE5RCxHQUN0QixNQUEwQixVQUFuQkEsRUFBVXhCLGNFOVFId0YsRUFBY0Msc0xBTzVCLElBQU1DLEVBQWFELEVBQUkxRSxZQUNwQjRFLFFBQU8sU0FBQTNKLEdBQUssTUFBVyx1QkFBWEEsRUFBRWdFLFFBQ2QyQyxLQUFJLFNBQUEzQixHQUNILEdBQXdCLHdCQUFwQkEsRUFBV2hCLEtBQ2IsbUZBTUYsT0FBT2dCLEtBUVgsbUJBRkUsa0VBRUt5RSxXQUdPRyxFQUNkSCxHQUdBLE9BREFELEVBQWNDLEdBQ1BBLEVBQUkxRSxZQUFZNEUsUUFDckIsU0FBQTNFLEdBQWMsTUFBb0Isd0JBQXBCQSxFQUFXaEIsUUFDekIsWUFlWTZGLEVBQ2RKLEdBRUEsT0FBT0EsRUFBSTFFLFlBQVk0RSxRQUNyQixTQUFBM0UsR0FBYyxNQUFvQix1QkFBcEJBLEVBQVdoQixpQkE0Q2I4RixFQUNkQyxHQUlBLElBQUlDLEVBRkpSLEVBQWNPLEdBSWQsSUFBdUIsUUFBQTdILEVBQUE2SCxFQUFTaEYsWUFBVHNFLFdBQUFBLElBQXNCLENBQXhDLElBQUlyRSxPQUNQLEdBQXdCLHdCQUFwQkEsRUFBV2hCLEtBQWdDLENBQzdDLElBQU1pQixFQUFhRCxFQUF1Q0MsVUFDMUQsR0FDZ0IsVUFBZEEsR0FDYyxhQUFkQSxHQUNjLGlCQUFkQSxFQUVBLE9BQU9ELEVBR2EsdUJBQXBCQSxFQUFXaEIsTUFBa0NnRyxJQUcvQ0EsRUFBcUJoRixHQUl6QixHQUFJZ0YsRUFDRixPQUFPQSxFQUdULDZHQUtjQyxFQUNkakYsR0FFQSxJQUFNa0YsRUFBZ0JoSyxPQUFPVyxPQUFPLE1BQzlCc0osRUFBT25GLEdBQWNBLEVBQVdvRixvQkFZdEMsT0FYSUQsR0FBUUEsRUFBS3ZNLFFBQ2Z1TSxFQUFLeEssU0FBUSxTQUFBMEssR0FDUEEsRUFBSUMsY0FDTnJFLEVBQ0VpRSxFQUNBRyxFQUFJRSxTQUFTN0csS0FDYjJHLEVBQUlDLGlCQUtMSixFQzFHVCxJQUFNTSxFQUE0QixDQUNoQ3hHLEtBQU0sUUFDTk4sS0FBTSxDQUNKTSxLQUFNLE9BQ04zRSxNQUFPLHdCQTBKS29MLEVBQXNCaEIsR0FDcEMsT0FBT3JGLFFBQU1vRixFQUFjQyxHQUFNLENBQy9CaUIsYUFBYyxDQUNaQyxNQUFBLFNBQU1yRyxFQUFNc0csRUFBTUMsR0FFaEIsSUFDRUEsR0FDNkMsd0JBQTVDQSxFQUFtQzdHLEtBRnRDLENBUVEsSUFBQW1CLEVBQWViLGFBQ3ZCLEdBQUthLEVBYUwsSUFQYUEsRUFBV1YsTUFBSyxTQUFBZSxHQUMzQixPQUNFOEQsRUFBUTlELEtBQ2tCLGVBQXpCQSxFQUFVOUIsS0FBS3JFLE9BQ2dDLElBQTlDbUcsRUFBVTlCLEtBQUtyRSxNQUFNeUwsWUFBWSxLQUFNLE9BRzdDLENBTUEsSUFBTTdCLEVBQVE0QixFQUNkLEtBQ0V2QixFQUFRTCxJQUNSQSxFQUFNNUYsWUFDTjRGLEVBQU01RixXQUFXb0IsTUFBSyxTQUFBekUsR0FBSyxNQUFpQixXQUFqQkEsRUFBRTBELEtBQUtyRSxVQU1wQyxjQUNLaUYsSUFDSGEsYUFBZ0JBLEdBQVlxRixZQVV0Q0MsRUFBc0JNLE1BQVEsU0FBVTlCLEdBQ3RDLE9BQU9BLElBQVV1QixHQzNRWCxJQUFBakssRUFBbUJMLE9BQU9VLHlCQWdEbEMsU0FBU29LLEVBQVM3SSxHQUNoQixPQUFlLE9BQVJBLEdBQStCLGlCQUFSQSxFQVdoQyxJQUFNOEksRUFDSixTQUFVQyxFQUFRQyxFQUFRQyxHQUN4QixPQUFPMUssS0FBSzJLLE1BQU1ILEVBQU9FLEdBQVdELEVBQU9DLGtCQUk3QyxXQUNVRSxnQkFBQUEsS0FBQTVLLGdCQUFBNEssRUFnQ0g1SyxjQUFXc0ssRUFFVnRLLGdCQUFhLElBQUk2SyxJQWdCM0IsT0EvQ1NDLGtCQUFQLFNBQWFOLEVBQWFDLE9BQTFCLG9CQUF1QzlCLG1CQUFBQSxJQUFBb0Msb0JBQ3JDLE9BQUlULEVBQVNHLElBQVdILEVBQVNFLElBQy9CaEwsT0FBTzRJLEtBQUtxQyxHQUFReEwsU0FBUSxTQUFBK0wsR0FDMUIsR0FBSW5MLEVBQWVhLEtBQUs4SixFQUFRUSxHQUFZLENBQzFDLElBQU1DLEVBQWNULEVBQU9RLEdBQzNCLEdBQUlQLEVBQU9PLEtBQWVDLEVBQWEsQ0FDckMsSUFBTTlOLEVBQVMwRSxFQUFLK0ksaUJBQUwvSSxLQUFnQjJJLEVBQVFDLEVBQVFPLEdBQWNELElBR3pENU4sSUFBVzhOLEtBQ2JULEVBQVMzSSxFQUFLcUosb0JBQW9CVixJQUMzQlEsR0FBYTdOLFNBTXhCcU4sRUFBUzNJLEVBQUtxSixvQkFBb0JWLElBQzNCUSxHQUFhUCxFQUFPTyxNQUl4QlIsR0FJRkMsR0FPRkssZ0NBQVAsU0FBOEJuTSxHQVk1QixPQVhJMkwsRUFBUzNMLEtBQVdxQixLQUFLbUwsV0FBV0MsSUFBSXpNLEtBRXhDQSxFQURFZ0IsTUFBTXVJLFFBQVF2SixHQUNQQSxFQUFjME0sTUFBTSxNQUczQjNMLFVBQVdGLE9BQU84TCxlQUFlM00sSUFDOUJBLEdBR1BxQixLQUFLbUwsV0FBV0ksSUFBSTVNLElBRWZBLDJGQzVHWCxTQUFTNk0sRUFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsYUFBb0JDLEdBQWdCLE1BQU0sSUFBSTNKLFVBQVUscUNBRWhILFNBQVM0SixFQUFrQm5CLEVBQVFvQixHQUFTLElBQUssSUFBSXRPLEVBQUksRUFBR0EsRUFBSXNPLEVBQU0xTyxPQUFRSSxJQUFLLENBQUUsSUFBSXVPLEVBQWFELEVBQU10TyxHQUFJdU8sRUFBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUFNeE0sT0FBT3lNLGVBQWV6QixFQUFRcUIsRUFBVzVFLElBQUs0RSxJQUU3UyxTQUFTSyxFQUFhUixFQUFhUyxFQUFZQyxHQUFtSixPQUFoSUQsR0FBWVIsRUFBa0JELEVBQVl4TCxVQUFXaU0sR0FBaUJDLEdBQWFULEVBQWtCRCxFQUFhVSxHQUFxQlYsRUFUek1sTSxPQUFPeU0sZUFBZUksRUFBUyxhQUFjLENBQzNDMU4sT0FBTyxJQUVUME4sa0JBQXFCLEVBU3JCLElBQUlDLEVBQWEsV0FDZixNQUF5QixtQkFBWEMsUUFHWkMsRUFBWSxTQUFVeEosR0FDeEIsT0FBT3NKLEtBQWdCaEgsUUFBUWlILE9BQU92SixLQUdwQ3lKLEVBQVksU0FBVXpKLEdBQ3hCLE9BQU93SixFQUFVeEosR0FBUXVKLE9BQU92SixHQUFRLEtBQU9BLEdBRzdDc0osTUFBaUJFLEVBQVUsZ0JBQzdCRCxPQUFPRyxXQUFhSCxPQUFPLGVBRzdCLElBQUlJLEVBQWlCRixFQUFVLFlBQzNCRyxFQUFtQkgsRUFBVSxjQUM3QkksRUFBZ0JKLEVBQVUsV0FFOUIsU0FBU0ssRUFBVXJMLEVBQUt3RixHQUN0QixJQUFJdEksRUFBUThDLEVBQUl3RixHQUNoQixHQUFhLE1BQVR0SSxFQUFKLENBQ0EsR0FBcUIsbUJBQVZBLEVBQXNCLE1BQU0sSUFBSW9ELFVBQVVwRCxFQUFRLHNCQUM3RCxPQUFPQSxHQUdULFNBQVNvTyxFQUFXdEwsR0FDbEIsSUFBSXVMLEVBQU92TCxFQUFJeEIsWUFVZixZQVJhOEgsSUFBVGlGLEdBR1csUUFGYkEsRUFBT0EsRUFBS0gsTUFHVkcsT0FBT2pGLFFBSUtBLElBQVRpRixFQUFxQkEsRUFBT0MsRUFHckMsU0FBU0MsRUFBYUMsR0FDcEIsT0FBT0EsYUFBYUYsRUFHdEIsU0FBU0csRUFBZ0J2TSxHQUNuQnVNLEVBQWdCQyxJQUNsQkQsRUFBZ0JDLElBQUl4TSxHQUVwQnlNLFlBQVcsV0FDVCxNQUFNek0sS0FLWixTQUFTME0sRUFBUUMsR0FDZkMsUUFBUUMsVUFBVUMsTUFBSyxXQUNyQixJQUNFSCxJQUNBLE1BQU8zTSxHQUNQdU0sRUFBZ0J2TSxPQUt0QixTQUFTK00sRUFBb0JDLEdBQzNCLElBQUlDLEVBQVVELEVBQWFFLFNBQzNCLFFBQWdCaEcsSUFBWitGLElBQ0pELEVBQWFFLGNBQVdoRyxFQUVuQitGLEdBSUwsSUFDRSxHQUF1QixtQkFBWkEsRUFDVEEsUUFDSyxDQUNMLElBQUlFLEVBQWNsQixFQUFVZ0IsRUFBUyxlQUVqQ0UsR0FDRkEsRUFBWXROLEtBQUtvTixJQUdyQixNQUFPak4sR0FDUHVNLEVBQWdCdk0sSUFJcEIsU0FBU29OLEVBQWtCSixHQUN6QkEsRUFBYUssZUFBWW5HLEVBQ3pCOEYsRUFBYU0sWUFBU3BHLEVBQ3RCOEYsRUFBYU8sT0FBUyxTQW1CeEIsU0FBU0MsRUFBbUJSLEVBQWNTLEVBQU0zUCxHQUM5Q2tQLEVBQWFPLE9BQVMsVUFDdEIsSUFBSUcsRUFBV1YsRUFBYUssVUFFNUIsSUFDRSxJQUFJTSxFQUFJMUIsRUFBVXlCLEVBQVVELEdBRTVCLE9BQVFBLEdBQ04sSUFBSyxPQUNDRSxHQUFHQSxFQUFFOU4sS0FBSzZOLEVBQVU1UCxHQUN4QixNQUVGLElBQUssUUFFSCxHQURBc1AsRUFBa0JKLElBQ2RXLEVBQWdDLE1BQU03UCxFQUFuQzZQLEVBQUU5TixLQUFLNk4sRUFBVTVQLEdBQ3hCLE1BRUYsSUFBSyxXQUNIc1AsRUFBa0JKLEdBQ2RXLEdBQUdBLEVBQUU5TixLQUFLNk4sSUFHbEIsTUFBTzFOLEdBQ1B1TSxFQUFnQnZNLEdBR1UsV0FBeEJnTixFQUFhTyxPQUFxQlIsRUFBb0JDLEdBQStDLFlBQXhCQSxFQUFhTyxTQUFzQlAsRUFBYU8sT0FBUyxTQUc1SSxTQUFTSyxFQUFTWixFQUFjUyxFQUFNM1AsR0FDcEMsR0FBNEIsV0FBeEJrUCxFQUFhTyxPQUFqQixDQUVBLEdBQTRCLGNBQXhCUCxFQUFhTyxPQVNqQixNQUE0QixVQUF4QlAsRUFBYU8sUUFDZlAsRUFBYU8sT0FBUyxZQUN0QlAsRUFBYU0sT0FBUyxDQUFDLENBQ3JCRyxLQUFNQSxFQUNOM1AsTUFBT0EsU0FFVDRPLEdBQVEsV0FDTixPQWhFTixTQUEyQk0sR0FDekIsSUFBSWEsRUFBUWIsRUFBYU0sT0FFekIsR0FBS08sRUFBTCxDQUlBYixFQUFhTSxZQUFTcEcsRUFDdEI4RixFQUFhTyxPQUFTLFFBRXRCLElBQUssSUFBSTlRLEVBQUksRUFBR0EsRUFBSW9SLEVBQU14UixTQUN4Qm1SLEVBQW1CUixFQUFjYSxFQUFNcFIsR0FBR2dSLEtBQU1JLEVBQU1wUixHQUFHcUIsT0FDN0IsV0FBeEJrUCxFQUFhTyxVQUZpQjlRLEtBc0R6QnFSLENBQWtCZCxZQUs3QlEsRUFBbUJSLEVBQWNTLEVBQU0zUCxHQXBCckNrUCxFQUFhTSxPQUFPdEssS0FBSyxDQUN2QnlLLEtBQU1BLEVBQ04zUCxNQUFPQSxLQXFCYixJQUFJaVEsRUFFSixXQUNFLFNBQVNBLEVBQWFMLEVBQVVNLEdBQzlCckQsRUFBZ0J4TCxLQUFNNE8sR0FJdEI1TyxLQUFLK04sY0FBV2hHLEVBQ2hCL0gsS0FBS2tPLFVBQVlLLEVBQ2pCdk8sS0FBS21PLFlBQVNwRyxFQUNkL0gsS0FBS29PLE9BQVMsZUFDZCxJQUFJVSxFQUF1QixJQUFJQyxFQUFxQi9PLE1BRXBELElBQ0VBLEtBQUsrTixTQUFXYyxFQUFXbk8sVUFBS3FILEVBQVcrRyxHQUMzQyxNQUFPak8sR0FDUGlPLEVBQXFCRSxNQUFNbk8sR0FHVCxpQkFBaEJiLEtBQUtvTyxTQUEyQnBPLEtBQUtvTyxPQUFTLFNBa0JwRCxPQWZBbEMsRUFBYTBDLEVBQWMsQ0FBQyxDQUMxQjNILElBQUssY0FDTHRJLE1BQU8sV0FDZSxXQUFoQnFCLEtBQUtvTyxTQUNQSCxFQUFrQmpPLE1BQ2xCNE4sRUFBb0I1TixTQUd2QixDQUNEaUgsSUFBSyxTQUNMZ0ksSUFBSyxXQUNILE1BQXVCLFdBQWhCalAsS0FBS29PLFdBSVRRLEVBcENULEdBdUNJRyxFQUVKLFdBQ0UsU0FBU0EsRUFBcUJsQixHQUM1QnJDLEVBQWdCeEwsS0FBTStPLEdBRXRCL08sS0FBS2tQLGNBQWdCckIsRUF5QnZCLE9BdEJBM0IsRUFBYTZDLEVBQXNCLENBQUMsQ0FDbEM5SCxJQUFLLE9BQ0x0SSxNQUFPLFNBQWNBLEdBQ25COFAsRUFBU3pPLEtBQUtrUCxjQUFlLE9BQVF2USxLQUV0QyxDQUNEc0ksSUFBSyxRQUNMdEksTUFBTyxTQUFlQSxHQUNwQjhQLEVBQVN6TyxLQUFLa1AsY0FBZSxRQUFTdlEsS0FFdkMsQ0FDRHNJLElBQUssV0FDTHRJLE1BQU8sV0FDTDhQLEVBQVN6TyxLQUFLa1AsY0FBZSxjQUU5QixDQUNEakksSUFBSyxTQUNMZ0ksSUFBSyxXQUNILE1BQXFDLFdBQTlCalAsS0FBS2tQLGNBQWNkLFdBSXZCVyxFQTdCVCxHQWdDSTlCLEVBRUosV0FDRSxTQUFTQSxFQUFXNEIsR0FHbEIsR0FGQXJELEVBQWdCeEwsS0FBTWlOLEtBRWhCak4sZ0JBQWdCaU4sR0FBYSxNQUFNLElBQUlsTCxVQUFVLDZDQUN2RCxHQUEwQixtQkFBZjhNLEVBQTJCLE1BQU0sSUFBSTlNLFVBQVUsNkNBQzFEL0IsS0FBS21QLFlBQWNOLEVBbVZyQixPQWhWQTNDLEVBQWFlLEVBQVksQ0FBQyxDQUN4QmhHLElBQUssWUFDTHRJLE1BQU8sU0FBbUI0UCxHQVN4QixNQVJ3QixpQkFBYkEsR0FBc0MsT0FBYkEsSUFDbENBLEVBQVcsQ0FDVGEsS0FBTWIsRUFDTlMsTUFBT3ZPLFVBQVUsR0FDakI0TyxTQUFVNU8sVUFBVSxLQUlqQixJQUFJbU8sRUFBYUwsRUFBVXZPLEtBQUttUCxlQUV4QyxDQUNEbEksSUFBSyxVQUNMdEksTUFBTyxTQUFpQjZPLEdBQ3RCLElBQUkzTCxFQUFRN0IsS0FFWixPQUFPLElBQUl5TixTQUFRLFNBQVVDLEVBQVM0QixHQUNwQyxHQUFrQixtQkFBUDlCLEVBVVgsSUFBSUssRUFBZWhNLEVBQU0wTixVQUFVLENBQ2pDSCxLQUFNLFNBQVV6USxHQUNkLElBQ0U2TyxFQUFHN08sRUFBTzZRLEdBQ1YsTUFBTzNPLEdBQ1B5TyxFQUFPek8sR0FDUGdOLEVBQWFHLGdCQUdqQmdCLE1BQU9NLEVBQ1BELFNBQVUzQixTQW5CVjRCLEVBQU8sSUFBSXZOLFVBQVV5TCxFQUFLLHVCQUk1QixTQUFTZ0MsSUFDUDNCLEVBQWFHLGNBQ2JOLFVBaUJMLENBQ0R6RyxJQUFLLE1BQ0x0SSxNQUFPLFNBQWE2TyxHQUNsQixJQUFJaUMsRUFBU3pQLEtBRWIsR0FBa0IsbUJBQVB3TixFQUFtQixNQUFNLElBQUl6TCxVQUFVeUwsRUFBSyxzQkFFdkQsT0FBTyxJQURDVCxFQUFXL00sTUFDWixFQUFNLFNBQVV1TyxHQUNyQixPQUFPa0IsRUFBT0YsVUFBVSxDQUN0QkgsS0FBTSxTQUFVelEsR0FDZCxJQUNFQSxFQUFRNk8sRUFBRzdPLEdBQ1gsTUFBT2tDLEdBQ1AsT0FBTzBOLEVBQVNTLE1BQU1uTyxHQUd4QjBOLEVBQVNhLEtBQUt6USxJQUVoQnFRLE1BQU8sU0FBVW5PLEdBQ2YwTixFQUFTUyxNQUFNbk8sSUFFakJ3TyxTQUFVLFdBQ1JkLEVBQVNjLG1CQUtoQixDQUNEcEksSUFBSyxTQUNMdEksTUFBTyxTQUFnQjZPLEdBQ3JCLElBQUlrQyxFQUFTMVAsS0FFYixHQUFrQixtQkFBUHdOLEVBQW1CLE1BQU0sSUFBSXpMLFVBQVV5TCxFQUFLLHNCQUV2RCxPQUFPLElBRENULEVBQVcvTSxNQUNaLEVBQU0sU0FBVXVPLEdBQ3JCLE9BQU9tQixFQUFPSCxVQUFVLENBQ3RCSCxLQUFNLFNBQVV6USxHQUNkLElBQ0UsSUFBSzZPLEVBQUc3TyxHQUFRLE9BQ2hCLE1BQU9rQyxHQUNQLE9BQU8wTixFQUFTUyxNQUFNbk8sR0FHeEIwTixFQUFTYSxLQUFLelEsSUFFaEJxUSxNQUFPLFNBQVVuTyxHQUNmME4sRUFBU1MsTUFBTW5PLElBRWpCd08sU0FBVSxXQUNSZCxFQUFTYyxtQkFLaEIsQ0FDRHBJLElBQUssU0FDTHRJLE1BQU8sU0FBZ0I2TyxHQUNyQixJQUFJbUMsRUFBUzNQLEtBRWIsR0FBa0IsbUJBQVB3TixFQUFtQixNQUFNLElBQUl6TCxVQUFVeUwsRUFBSyxzQkFDdkQsSUFBSW9DLEVBQUk3QyxFQUFXL00sTUFDZjZQLEVBQVVwUCxVQUFVdkQsT0FBUyxFQUM3QjRTLEdBQVcsRUFDWEMsRUFBT3RQLFVBQVUsR0FDakJ1UCxFQUFNRCxFQUNWLE9BQU8sSUFBSUgsR0FBRSxTQUFVckIsR0FDckIsT0FBT29CLEVBQU9KLFVBQVUsQ0FDdEJILEtBQU0sU0FBVXpRLEdBQ2QsSUFBSXNSLEdBQVNILEVBR2IsR0FGQUEsR0FBVyxHQUVORyxHQUFTSixFQUNaLElBQ0VHLEVBQU14QyxFQUFHd0MsRUFBS3JSLEdBQ2QsTUFBT2tDLEdBQ1AsT0FBTzBOLEVBQVNTLE1BQU1uTyxRQUd4Qm1QLEVBQU1yUixHQUdWcVEsTUFBTyxTQUFVbk8sR0FDZjBOLEVBQVNTLE1BQU1uTyxJQUVqQndPLFNBQVUsV0FDUixJQUFLUyxJQUFhRCxFQUFTLE9BQU90QixFQUFTUyxNQUFNLElBQUlqTixVQUFVLG9DQUMvRHdNLEVBQVNhLEtBQUtZLEdBQ2R6QixFQUFTYyxtQkFLaEIsQ0FDRHBJLElBQUssU0FDTHRJLE1BQU8sV0FHTCxJQUZBLElBQUl1UixFQUFTbFEsS0FFSm1RLEVBQU8xUCxVQUFVdkQsT0FBUWtULEVBQVUsSUFBSXpRLE1BQU13USxHQUFPakcsRUFBTyxFQUFHQSxFQUFPaUcsRUFBTWpHLElBQ2xGa0csRUFBUWxHLEdBQVF6SixVQUFVeUosR0FHNUIsSUFBSTBGLEVBQUk3QyxFQUFXL00sTUFDbkIsT0FBTyxJQUFJNFAsR0FBRSxTQUFVckIsR0FDckIsSUFBSVYsRUFDQXdDLEVBQVEsRUFzQlosT0FwQkEsU0FBU0MsRUFBVWxCLEdBQ2pCdkIsRUFBZXVCLEVBQUtHLFVBQVUsQ0FDNUJILEtBQU0sU0FBVW1CLEdBQ2RoQyxFQUFTYSxLQUFLbUIsSUFFaEJ2QixNQUFPLFNBQVVuTyxHQUNmME4sRUFBU1MsTUFBTW5PLElBRWpCd08sU0FBVSxXQUNKZ0IsSUFBVUQsRUFBUWxULFFBQ3BCMlEsT0FBZTlGLEVBQ2Z3RyxFQUFTYyxZQUVUaUIsRUFBVVYsRUFBRVksS0FBS0osRUFBUUMsVUFNakNDLENBQVVKLEdBQ0gsV0FDRHJDLElBQ0ZBLEVBQWFHLGNBQ2JILE9BQWU5RixTQUt0QixDQUNEZCxJQUFLLFVBQ0x0SSxNQUFPLFNBQWlCNk8sR0FDdEIsSUFBSWlELEVBQVN6USxLQUViLEdBQWtCLG1CQUFQd04sRUFBbUIsTUFBTSxJQUFJekwsVUFBVXlMLEVBQUssc0JBQ3ZELElBQUlvQyxFQUFJN0MsRUFBVy9NLE1BQ25CLE9BQU8sSUFBSTRQLEdBQUUsU0FBVXJCLEdBQ3JCLElBQUltQyxFQUFnQixHQUVoQkMsRUFBUUYsRUFBT2xCLFVBQVUsQ0FDM0JILEtBQU0sU0FBVXpRLEdBQ2QsR0FBSTZPLEVBQ0YsSUFDRTdPLEVBQVE2TyxFQUFHN08sR0FDWCxNQUFPa0MsR0FDUCxPQUFPME4sRUFBU1MsTUFBTW5PLEdBSTFCLElBQUkrUCxFQUFRaEIsRUFBRVksS0FBSzdSLEdBQU80USxVQUFVLENBQ2xDSCxLQUFNLFNBQVV6USxHQUNkNFAsRUFBU2EsS0FBS3pRLElBRWhCcVEsTUFBTyxTQUFVbk8sR0FDZjBOLEVBQVNTLE1BQU1uTyxJQUVqQndPLFNBQVUsV0FDUixJQUFJL1IsRUFBSW9ULEVBQWN2UyxRQUFReVMsR0FDMUJ0VCxHQUFLLEdBQUdvVCxFQUFjckksT0FBTy9LLEVBQUcsR0FDcEN1VCxPQUdKSCxFQUFjN00sS0FBSytNLElBRXJCNUIsTUFBTyxTQUFVbk8sR0FDZjBOLEVBQVNTLE1BQU1uTyxJQUVqQndPLFNBQVUsV0FDUndCLE9BSUosU0FBU0EsSUFDSEYsRUFBTUcsUUFBbUMsSUFBekJKLEVBQWN4VCxRQUFjcVIsRUFBU2MsV0FHM0QsT0FBTyxXQUNMcUIsRUFBY3pSLFNBQVEsU0FBVXNCLEdBQzlCLE9BQU9BLEVBQUV5TixpQkFFWDJDLEVBQU0zQyxvQkFJWCxDQUNEL0csSUFBSzJGLEVBQ0xqTyxNQUFPLFdBQ0wsT0FBT3FCLFFBRVAsQ0FBQyxDQUNIaUgsSUFBSyxPQUNMdEksTUFBTyxTQUFjd08sR0FDbkIsSUFBSXlDLEVBQW9CLG1CQUFUNVAsS0FBc0JBLEtBQU9pTixFQUM1QyxHQUFTLE1BQUxFLEVBQVcsTUFBTSxJQUFJcEwsVUFBVW9MLEVBQUkscUJBQ3ZDLElBQUk1SyxFQUFTdUssRUFBVUssRUFBR1AsR0FFMUIsR0FBSXJLLEVBQVEsQ0FDVixJQUFJbUssRUFBYW5LLEVBQU83QixLQUFLeU0sR0FDN0IsR0FBSTNOLE9BQU9rTixLQUFnQkEsRUFBWSxNQUFNLElBQUkzSyxVQUFVMkssRUFBYSxxQkFDeEUsT0FBSVEsRUFBYVIsSUFBZUEsRUFBV3pNLGNBQWdCMlAsRUFBVWxELEVBQzlELElBQUlrRCxHQUFFLFNBQVVyQixHQUNyQixPQUFPN0IsRUFBVzZDLFVBQVVoQixNQUloQyxHQUFJL0IsRUFBVSxjQUNaakssRUFBU3VLLEVBQVVLLEVBQUdSLElBR3BCLE9BQU8sSUFBSWlELEdBQUUsU0FBVXJCLEdBQ3JCaEIsR0FBUSxXQUNOLElBQUlnQixFQUFTdUMsT0FBYixDQUNBLElBQUlDLEdBQTRCLEVBQzVCQyxHQUFvQixFQUNwQkMsT0FBaUJsSixFQUVyQixJQUNFLElBQUssSUFBbURtSixFQUEvQ0MsRUFBWTVPLEVBQU83QixLQUFLeU0sR0FBR1osT0FBTzZFLGNBQXNCTCxHQUE2QkcsRUFBUUMsRUFBVS9CLFFBQVFJLE1BQU91QixHQUE0QixFQUFNLENBQy9KLElBQUlNLEVBQVFILEVBQU12UyxNQUVsQixHQURBNFAsRUFBU2EsS0FBS2lDLEdBQ1Y5QyxFQUFTdUMsT0FBUSxRQUV2QixNQUFPUSxHQUNQTixHQUFvQixFQUNwQkMsRUFBaUJLLFVBRWpCLElBQ09QLEdBQWlELE1BQXBCSSxFQUFVSSxRQUMxQ0osRUFBVUksaUJBR1osR0FBSVAsRUFDRixNQUFNQyxHQUtaMUMsRUFBU2Msa0JBTWpCLEdBQUkxUCxNQUFNdUksUUFBUWlGLEdBQ2hCLE9BQU8sSUFBSXlDLEdBQUUsU0FBVXJCLEdBQ3JCaEIsR0FBUSxXQUNOLElBQUlnQixFQUFTdUMsT0FBYixDQUVBLElBQUssSUFBSXhULEVBQUksRUFBR0EsRUFBSTZQLEVBQUVqUSxTQUFVSSxFQUU5QixHQURBaVIsRUFBU2EsS0FBS2pDLEVBQUU3UCxJQUNaaVIsRUFBU3VDLE9BQVEsT0FHdkJ2QyxFQUFTYyxrQkFLZixNQUFNLElBQUl0TixVQUFVb0wsRUFBSSx3QkFFekIsQ0FDRGxHLElBQUssS0FDTHRJLE1BQU8sV0FDTCxJQUFLLElBQUk2UyxFQUFRL1EsVUFBVXZELE9BQVF1VSxFQUFRLElBQUk5UixNQUFNNlIsR0FBUUUsRUFBUSxFQUFHQSxFQUFRRixFQUFPRSxJQUNyRkQsRUFBTUMsR0FBU2pSLFVBQVVpUixHQUczQixJQUFJOUIsRUFBb0IsbUJBQVQ1UCxLQUFzQkEsS0FBT2lOLEVBQzVDLE9BQU8sSUFBSTJDLEdBQUUsU0FBVXJCLEdBQ3JCaEIsR0FBUSxXQUNOLElBQUlnQixFQUFTdUMsT0FBYixDQUVBLElBQUssSUFBSXhULEVBQUksRUFBR0EsRUFBSW1VLEVBQU12VSxTQUFVSSxFQUVsQyxHQURBaVIsRUFBU2EsS0FBS3FDLEVBQU1uVSxJQUNoQmlSLEVBQVN1QyxPQUFRLE9BR3ZCdkMsRUFBU2Msb0JBSWQsQ0FDRHBJLElBQUs0RixFQUNMb0MsSUFBSyxXQUNILE9BQU9qUCxTQUlKaU4sRUF6VlQsR0E0VkFaLGFBQXFCWSxFQUVqQlgsS0FDRjlNLE9BQU95TSxlQUFlZ0IsRUFBWVYsT0FBTyxjQUFlLENBQ3RENU4sTUFBTyxDQUNMZ1QsT0FBUS9FLEVBQ1JRLGdCQUFpQkEsR0FFbkJyQixjQUFjLHNHQ3RtQmxCLE1BQWlCNkYsRUFBK0IzRSxZQ0FqQyxTQUFrQ3hKLEdBQ2hELElBQUl0RyxFQUNBb1AsRUFBUzlJLEVBQUs4SSxPQUVsQixHQUFzQixtQkFBWEEsRUFDVixHQUFJQSxFQUFPRyxXQUNWdlAsRUFBU29QLEVBQU9HLGVBQ1YsQ0FLTnZQLEVBQVNvUCxFQUFPc0YsSUFBSSxnREFDcEIsSUFDQ3RGLEVBQU9HLFdBQWF2UCxFQUNuQixNQUFPbVUsVUFPVm5VLEVBQVMsZ0JDakJTLG9CQUFUMlUsS0FDRkEsS0FDb0Isb0JBQVg3VCxPQUNUQSxPQUNvQixvQkFBWDhULE9BQ1RBLE9BQ29CLG9CQUFYQyxPQUNUQSxPQUVBQyxTQUFTLGNBQVRBLElDREQsSUFBQS9SLEVBQWMrTSxZQUNoQmlGLEVBQWdCLGVBQ2pCaFMsRUFBVWdTLEtBQ2JoUyxFQUFVZ1MsR0FBaUIsV0FBYyxPQUFPbFMsT0NoQjFDLElBQUFtUyxFQUFhM1MsT0FBT1UsNEJBS1prUyxHQUFhelQsR0FDM0IsT0FBTzBULEdBQWdCMVQsR0FHekIsU0FBUzBULEdBQW1CQyxFQUFRekssR0FDbEMsT0FBUXNLLEVBQVN6UixLQUFLNFIsSUFDdEIsSUFBSyxpQkFFSCxJQURBekssRUFBT0EsR0FBUSxJQUFJMEssS0FDVm5ILElBQUlrSCxHQUFNLE9BQU96SyxFQUFLb0gsSUFBSXFELEdBQ25DLElBQU1FLEVBQW1CRixFQUFZakgsTUFBTSxHQUszQyxPQUpBeEQsRUFBSzRLLElBQUlILEVBQUtFLEdBQ2RBLEVBQUt2VCxTQUFRLFNBQVV5VCxFQUFPcFYsR0FDNUJrVixFQUFLbFYsR0FBSytVLEdBQWdCSyxFQUFPN0ssTUFFNUIySyxFQUdULElBQUssa0JBRUgsSUFEQTNLLEVBQU9BLEdBQVEsSUFBSTBLLEtBQ1ZuSCxJQUFJa0gsR0FBTSxPQUFPekssRUFBS29ILElBQUlxRCxHQUduQyxJQUFNSyxFQUFPblQsT0FBT1csT0FBT1gsT0FBTzhMLGVBQWVnSCxJQUtqRCxPQUpBekssRUFBSzRLLElBQUlILEVBQUtLLEdBQ2RuVCxPQUFPNEksS0FBS2tLLEdBQUtyVCxTQUFRLFNBQUFnSSxHQUN2QjBMLEVBQUsxTCxHQUFPb0wsR0FBaUJDLEVBQVlyTCxHQUFNWSxNQUUxQzhLLEVBR1QsUUFDRSxPQUFPTCxZQzNCS00sR0FBTTNOLEdBQ3BCLE1BUlMsZ0JBUVdBLEVDUnRCLFNBQVNxRixHQUFTM0wsR0FDaEIsT0FBaUIsT0FBVkEsR0FBbUMsaUJBQVZBLFdBZ0JsQmtVLEdBQW1CcFIsR0FibkMsSUFBb0I5QyxFQUNabVUsRUFnQk4sT0RUZ0MsSUFBekJGLEdBQU0saUJBSVksSUFBbEJBLEdBQU0sVUNaS2pVLEVBZUw4QyxHQWRQcVIsRUFBVSxJQUFJakksSUFBSSxDQUFDbE0sS0FDakJNLFNBQVEsU0FBQXdDLEdBQ1Y2SSxHQUFTN0ksS0FDTmpDLE9BQU91VCxTQUFTdFIsSUFBTWpDLE9BQU93VCxPQUFPdlIsR0FDekNqQyxPQUFPeVQsb0JBQW9CeFIsR0FBS3hDLFNBQVEsU0FBQStELEdBQ2xDc0gsR0FBUzdJLEVBQUl1QixLQUFROFAsRUFBUXZILElBQUk5SixFQUFJdUIsWUFXeEN2QixXQ3JCT3lSLEdBQ2RDLEVBQ0E1USxFQUNBNlEsR0FLQSxJQUFNQyxFQUFxQyxHQUMzQ0YsRUFBVWxVLFNBQVEsU0FBQXFVLEdBQU8sT0FBQUEsRUFBSS9RLElBQVc4USxFQUFvQnhQLEtBQUt5UCxNQUNqRUQsRUFBb0JwVSxTQUFRLFNBQUFxVSxHQUFPLE9BQUNBLEVBQVkvUSxHQUFRNlEsZUNGMUNHLEdBRWRDLEdBQ0EsU0FBU2YsRUFBSXhMLEdBSVh6SCxPQUFPeU0sZUFBZXVILEVBQVV2TSxFQUFLLENBQUV0SSxNQUFPc08sSUFTaEQsTUFQc0IsbUJBQVhWLFFBQXlCQSxPQUFPa0gsU0FDekNoQixFQUFJbEcsT0FBT2tILFNBS2JoQixFQUFJLGFBQ0dlLEVDcEJULFNBQVNFLEdBQWlCL1UsR0FDeEIsT0FBT0EsR0FBd0MsbUJBQXZCQSxFQUFjZ1AsY0NQeEJnRyxHQUFtQmhWLEdBQ2pDLE9BQU9nQixNQUFNdUksUUFBUXZKLElBQVVBLEVBQU16QixPQUFTLEVEeVBoRHFXLGVBaE1FLFdBQVluRCxHQUFaLE1BQ0V4TyxhQUFNLFNBQUEyTSxHQUVKLE9BREExTSxFQUFLK1IsWUFBWXJGLEdBQ1YsV0FBTSxPQUFBMU0sRUFBS2dTLGVBQWV0RixvQkFiN0IxTSxZQUFZLElBQUlnSixJQTRFaEJoSixXQUFXLEVBK0JIQSxVQUFVLElBQUk0TCxTQUFXLFNBQUNDLEVBQVM0QixHQUNqRHpOLEVBQUs2TCxRQUFVQSxFQUNmN0wsRUFBS3lOLE9BQVNBLEtBU1J6TixXQUFXLENBQ2pCdU4sS0FBTSxTQUFDalMsR0FDWSxPQUFiMEUsRUFBS2lTLE1BQ1BqUyxFQUFLa1MsT0FBUyxDQUFDLE9BQVE1VyxHQUN2QitWLEdBQXVCclIsRUFBS3NSLFVBQVcsT0FBUWhXLEtBSW5ENlIsTUFBTyxTQUFDQSxHQUNFLElBQUE4RSxFQUFRalMsTUFDSixPQUFSaVMsSUFJRUEsR0FBS3JHLFFBQVFDLFVBQVVDLE1BQUssV0FBTSxPQUFBbUcsRUFBSTlGLGlCQUMxQ25NLEVBQUtpUyxJQUFNLEtBQ1hqUyxFQUFLa1MsT0FBUyxDQUFDLFFBQVMvRSxHQUN4Qm5OLEVBQUt5TixPQUFPTixHQUNaa0UsR0FBdUJyUixFQUFLc1IsVUFBVyxRQUFTbkUsS0FJcERLLFNBQVUsV0FDUixHQUFpQixPQUFieE4sRUFBS2lTLElBQWMsQ0FDckIsSUFBTW5WLEVBQVFrRCxFQUFLdU8sUUFBUTRELFFBQ3RCclYsRUFlTStVLEdBQWMvVSxHQUN2QkEsRUFBTWdQLE1BQUssU0FBQTJGLEdBQU8sT0FBQXpSLEVBQUtpUyxJQUFNUixFQUFJL0QsVUFBVTFOLEVBQUtvUyxhQUVoRHBTLEVBQUtpUyxJQUFNblYsRUFBTTRRLFVBQVUxTixFQUFLb1MsV0FqQmhDcFMsRUFBS2lTLElBQU0sS0FDUGpTLEVBQUtrUyxRQUNjLFNBQW5CbFMsRUFBS2tTLE9BQU8sR0FDZGxTLEVBQUs2TCxRQUFRN0wsRUFBS2tTLE9BQU8sSUFFekJsUyxFQUFLNkwsVUFRUHdGLEdBQXVCclIsRUFBS3NSLFVBQVcsZ0JBb0N4Q3RSLFNBQVMsU0FBQ3FTLEdBQ2ZyUyxFQUFLeU4sT0FBTzRFLEdBQ1pyUyxFQUFLdU8sUUFBVSxHQUNmdk8sRUFBS29TLFNBQVM1RSxZQWpMZHhOLEVBQUtzUyxRQUFRQyxPQUFNLFNBQUFDLE9BS0ksbUJBQVpqRSxJQUNUQSxFQUFVLENBQUMsSUFBSW5ELEVBQVdtRCxLQUd4QnNELEdBQWN0RCxHQUNoQkEsRUFBUXpDLE1BQ04sU0FBQTJHLEdBQVksT0FBQXpTLEVBQUswUyxNQUFNRCxLQUN2QnpTLEVBQUtvUyxTQUFTakYsT0FHaEJuTixFQUFLMFMsTUFBTW5FLEtBb0tqQixPQTFNZ0N0USxPQThDdEIwVSxrQkFBUixTQUFjcEUsUUFDSyxJQUFicFEsS0FBSzhULE1BS1Q5VCxLQUFLb1EsUUFBVXpRLE1BQU02USxLQUFLSixHQU0xQnBRLEtBQUtpVSxTQUFTNUUsYUFHUm1GLCtCQUFSLFNBQTJCakcsR0FDekIsR0FBSXZPLEtBQUsrVCxPQUFRLENBQ2YsSUFBTVUsRUFBY3pVLEtBQUsrVCxPQUFPLEdBQzFCeFIsRUFBU2dNLEVBQVNrRyxHQUNwQmxTLEdBQ0ZBLEVBQU83QixLQUFLNk4sRUFBVXZPLEtBQUsrVCxPQUFPLElBS25CLE9BQWIvVCxLQUFLOFQsS0FDVyxTQUFoQlcsR0FDQWxHLEVBQVNjLFVBQ1hkLEVBQVNjLGFBUVJtRix3QkFBUCxTQUFtQmpHLEdBQ1p2TyxLQUFLbVQsVUFBVS9ILElBQUltRCxLQUd0QnZPLEtBQUswVSxtQkFBbUJuRyxHQUN4QnZPLEtBQUttVCxVQUFVNUgsSUFBSWdELEtBQ2pCdk8sS0FBSzJVLFdBSUpILDJCQUFQLFNBQ0VqRyxFQUNBcUcsR0FFSTVVLEtBQUttVCxVQUFVMEIsT0FBT3RHLE1BQ3BCdk8sS0FBSzJVLFNBQVcsSUFDakJDLEdBSUg1VSxLQUFLaVUsU0FBU2pGLE1BQU0sSUFBSS9NLE1BQU0sc0NBcUUzQnVTLG9CQUFQLFNBQWVNLEdBQWYsV0FDTUMsR0FBUyxFQUNQQyxFQUFPLFdBQ05ELElBQ0hBLEdBQVMsRUFJVGxULEVBQUtzUixVQUFVMEIsT0FBT3RHLEdBQ3RCdUcsTUFHRXZHLEVBQVcsQ0FDZmEsS0FBTTRGLEVBQ05oRyxNQUFPZ0csRUFDUDNGLFNBQVUyRixHQUVOQyxFQUFRalYsS0FBSzJVLFNBQ25CM1UsS0FBSzRULFlBQVlyRixHQUlqQnZPLEtBQUsyVSxTQUFXTSxNQWpNWWhJLElFNUN6QixJQUFNaUksR0FBbUMsbUJBQVpDLFdBQ2IsaUJBQWRDLFdBQ2UsZ0JBQXRCQSxVQUFVQyxrQkNJSUMsU0FDZCxhQUFBM00sbUJBQUFBLElBQUE0TSxrQkFFQSxJQUFNcFksRUFBU3FDLE9BQU9XLE9BQU8sTUFZN0IsT0FWQW9WLEVBQVF0VyxTQUFRLFNBQUF3QyxHQUNUQSxHQUNMakMsT0FBTzRJLEtBQUszRyxHQUFLeEMsU0FBUSxTQUFBZ0ksR0FDdkIsSUFBTXRJLEVBQVM4QyxFQUFZd0YsUUFDYixJQUFWdEksSUFDRnhCLEVBQU84SixHQUFPdEksU0FLYnhCLFdDbkJPcVksR0FBYUMsR0FDM0IsT0FBTyxJQUFJeEksR0FBYyxTQUFBc0IsR0FDdkJBLEVBQVNTLE1BQU15RyxNQ0VaLElBQU1DLEdBQW1CLFNBQzlCQyxFQUNBeFksRUFDQXdFLEdBRUEsSUFBTXFOLEVBQVEsSUFBSS9NLE1BQU1OLEdBS3hCLE1BSkFxTixFQUFNaE0sS0FBTyxjQUNiZ00sRUFBTTJHLFNBQVdBLEVBQ2pCM0csRUFBTTRHLFdBQWFELEVBQVNFLE9BQzVCN0csRUFBTTdSLE9BQVNBLEVBQ1Q2UixHQ0FSLFNBQVM4RyxHQUFZQyxFQUFlQyxHQUNsQyxPQUFRQSxFQUFVQSxFQUFRRCxHQUFNOUksRUFBV2dKLEtBRzdDLFNBQVNDLEdBQU9DLEdBQ2QsTUFBMEIsbUJBQVpBLEVBQXlCLElBQUlDLEdBQVdELEdBQVdBLEVBR25FLFNBQVNFLEdBQWNDLEdBQ3JCLE9BQU9BLEVBQUtDLFFBQVFyWixRQUFVLEVBR2hDLG1CQUVFLFdBQVl5RSxFQUFrQjJVLEdBQTlCLE1BQ0UxVSxZQUFNRCxnQkFDTkUsRUFBS3lVLEtBQU9BLElBRWhCLE9BTndCeFcsVUFBQW1DLHFCQTBGdEIsV0FBWXNVLEdBQ05BLElBQVN2VyxLQUFLdVcsUUFBVUEsR0E4Q2hDLE9BaElnQkgsUUFBZCxXQUNFLE9BQU8sSUFBSUEsR0FBVyxXQUFNLE9BQUFuSixFQUFXZ0osU0FHM0JHLE9BQWQsU0FBbUJJLEdBQ2pCLE9BQXFCLElBQWpCQSxFQUFNdFosT0FBcUJrWixFQUFXSyxRQUNuQ0QsRUFBTXZRLElBQUlpUSxJQUFRUSxRQUFPLFNBQUN2SixFQUFHd0osR0FBTSxPQUFBeEosRUFBRXlKLE9BQU9ELE9BR3ZDUCxRQUFkLFNBQ0VTLEVBQ0FDLEVBQ0FDLEdBRUEsSUFBTUMsRUFBV2QsR0FBT1ksR0FDbEJHLEVBQVlmLEdBQU9hLEdBQVMsSUFBSVgsRUFBV04sS0FFakQsT0FBSU8sR0FBY1csSUFBYVgsR0FBY1ksR0FDcEMsSUFBSWIsR0FBVyxTQUFBN1IsR0FDcEIsT0FBT3NTLEVBQUt0UyxHQUNSeVMsRUFBU1QsUUFBUWhTLElBQWMwSSxFQUFXZ0osS0FDMUNnQixFQUFVVixRQUFRaFMsSUFBYzBJLEVBQVdnSixRQUcxQyxJQUFJRyxHQUFXLFNBQUM3UixFQUFXeVIsR0FDaEMsT0FBT2EsRUFBS3RTLEdBQ1J5UyxFQUFTVCxRQUFRaFMsRUFBV3lSLElBQVkvSSxFQUFXZ0osS0FDbkRnQixFQUFVVixRQUFRaFMsRUFBV3lSLElBQVkvSSxFQUFXZ0osU0FLaERHLFVBQWQsU0FDRUUsRUFDQS9SLEdBRUEsT0FDRStSLEVBQUtDLGlCQ3ZFVFcsRUFDQTNTLEdBRUEsSUFBSXdHLE9BQWVtTSxHQW9CbkIsT0FWQTFYLE9BQU95TSxlQUFlMUgsRUFBVyxhQUFjLENBQzdDdUgsWUFBWSxFQUNabk4sTUFYaUIsU0FBQ3lRLEdBRWhCckUsU0FBZUEsR0FERyxtQkFBVHFFLEVBQ2tCQSxFQUFLckUsR0FFTHFFLE1BVS9CNVAsT0FBT3lNLGVBQWUxSCxFQUFXLGFBQWMsQ0FDN0N1SCxZQUFZLEVBQ1puTixNQVRpQixXQUFNLFlBQU1vTSxNQVl4QnhHLEVEaURENFMsQ0FDRTVTLEVBQVV3RyxpQkV6RWV4RyxHQUNqQyxJQUFNNlMsRUFBdUMsQ0FDM0MxVSxVQUFXNkIsRUFBVTdCLFdBQWEsR0FDbEMyVSxXQUFZOVMsRUFBVThTLFlBQWMsR0FDcENDLGNBQWUvUyxFQUFVK1MsY0FDekJDLE1BQU9oVCxFQUFVZ1QsT0FXbkIsT0FQS0gsRUFBcUJFLGdCQUN4QkYsRUFBcUJFLGNBQ21CLGlCQUEvQkYsRUFBcUJHLE1BQ1BILEVBQXFCRyxNckJvQ3hDbFQsWUFDRDRFLFFBQ0MsU0FBQTNFLEdBQ0UsTUFBb0Isd0JBQXBCQSxFQUFXaEIsTUFBa0NnQixFQUFXdEIsUUFFM0RpRCxLQUFJLFNBQUNrSCxHQUErQixPQUFBQSxFQUFHbkssS0FBTXJFLFNBQU8sU3FCekNEb0osRUFDaEQsSUFHRHFQLEVGMERDSSxVR3pFd0JqVCxHQVFoQyxJQVBBLElBQU1rVCxFQUFtQixDQUN2QixRQUNBLGdCQUNBLFlBQ0EsYUFDQSxlQUVjalcsRUFBQWhDLE9BQU80SSxLQUFLN0QsR0FBWm9FLFdBQUFBLElBQXdCLENBQW5DLElBQUkxQixPQUNQLEdBQUl3USxFQUFpQnRaLFFBQVE4SSxHQUFPLEVBQ2xDLG9DQUlKLE9BQU8xQyxFSDJEb0JtVCxDQUFrQm5ULE9BRXBDMEksRUFBV2dKLE1BSU5HLFNBQWQsU0FDRW5HLEVBQ0EwSCxHQUVBLElBQU1DLEVBQVkxQixHQUFPakcsR0FDekIsR0FBSW9HLEdBQWN1QixHQU9oQixtR0FBT0EsRUFFVCxJQUFNQyxFQUFXM0IsR0FBT3lCLEdBRXhCLE9BQUl0QixHQUFjd0IsR0FDVCxJQUFJekIsR0FDVCxTQUFBN1IsR0FDRSxPQUFBcVQsRUFBVXJCLFFBQ1JoUyxHQUNBLFNBQUF3UixHQUFNLE9BQUE4QixFQUFTdEIsUUFBUVIsSUFBTzlJLEVBQVdnSixTQUN0Q2hKLEVBQVdnSixRQUdiLElBQUlHLEdBQVcsU0FBQzdSLEVBQVd5UixHQUNoQyxPQUNFNEIsRUFBVXJCLFFBQVFoUyxHQUFXLFNBQUF3UixHQUMzQixPQUFPOEIsRUFBU3RCLFFBQVFSLEVBQUlDLElBQVkvSSxFQUFXZ0osU0FDL0NoSixFQUFXZ0osU0FVbEJHLGtCQUFQLFNBQ0VTLEVBQ0FDLEVBQ0FDLEdBRUEsT0FBTy9XLEtBQUs0VyxPQUNWUixFQUFXcFgsTUFBTTZYLEVBQU1DLEVBQU1DLEdBQVMsSUFBSVgsRUFBV04sT0FJbERNLG1CQUFQLFNBQWNoSCxHQUNaLE9BQU9nSCxFQUFXUSxPQUFPNVcsS0FBTW9QLElBRzFCZ0gsb0JBQVAsU0FDRTdSLEVBQ0F5UixHQUVBLDJDQUdRSSxvQkFBVixTQUNFcEgsRUFDQVQsR0FFQSxHQUFJQSxHQUFZQSxFQUFTUyxNQVF2QixPQVBBVCxFQUFTUyxNQUFNQSxJQU9SLEVBR1QsTUFBTUEsR0FHRG9ILHVCQUFQLFNBQWtCNUksR0FFaEIsT0FEQXhOLEtBQUs4WCxRQUFVdEssRUFDUnhOLFdJaEtISCxHQUFtQkwsT0FBT1UseUJDRzNCLElBQU02WCxHQUEwQixTQUFDblksRUFBUW9ZLEdBQzlDLElBQUlDLEVBQ0osSUFDRUEsRUFBYS9RLEtBQUtDLFVBQVV2SCxHQUM1QixNQUFPaUIsR0FDUCxJQUFNcVgsUUFDc0QsaUVBRzVELE1BREFBLEVBQVdBLFdBQWFyWCxFQUNsQnFYLEVBRVIsT0FBT0QsR0MrRUlFLEdBQXFCLENBQ2hDQyxLQWhCMkMsQ0FDM0NDLGNBQWMsRUFDZEMsbUJBQW1CLEdBZW5CdGEsUUFacUIsQ0FFckJ1YSxPQUFRLE1BQ1JDLGVBQWdCLG9CQVVoQkMsUUFQcUIsQ0FDckJsVyxPQUFRLFNDNUVILElBQU1tVyxHQUFpQixTQUFDQyxnQkFBQUEsTUFFM0IsSUFBQW5YLEVBT0VtWCxNQVBGQyxhQUFNLGFBRUNDLEVBS0xGLFFBSkZMLEVBSUVLLG9CQUhGRyxFQUdFSCxtQkFGRkksRUFFRUoseUJBRkZLLGdCQUNHQyxJQUNETixFQVJBLGtGQ2hCc0IsU0FBQ0UsR0FDM0IsSUFBS0EsR0FBNEIsb0JBQVZLLE1BQ3JCLGtjRHlCRkMsQ0FBYU4sR0FLUkEsSUFDSEEsRUFBVUssT0FHWixJQUFNRSxFQUFhLENBQ2pCaEIsS0FBTSxDQUFFRSxxQkFDUkcsUUFBU1EsRUFBZUksYUFDeEJDLFlBQWFMLEVBQWVLLFlBQzVCdGIsUUFBU2liLEVBQWVqYixTQUcxQixPQUFPLElBQUlvWSxJQUFXLFNBQUE3UixHQUNwQixJQUFJZ1YsRUU1Q2lCLFNBQ3ZCaFYsRUFDQWlWLEdBS0EsT0FIZ0JqVixFQUFVa1YsYUFDQ2IsTUFJTyxtQkFBaEJZLEVBQ1RBLEVBQVlqVixHQUVYaVYsR0FBMEIsWUZnQ2xCRSxDQUFVblYsRUFBV3FVLEdBRS9CN04sRUFBVXhHLEVBQVVrVixhQVFwQkUsRUFHRixHQUVKLEdBQUk1TyxFQUFRNk8sZ0JBQWlCLENBQ3JCLElBQUFwWSxFQUFvQnVKLEVBQVE2TyxnQkFBMUJDLFNBQU1DLFlBQ1ZELElBQ0ZGLEVBQXVCLDZCQUErQkUsR0FFcERDLElBQ0ZILEVBQXVCLGdDQUFrQ0csR0FJN0QsSUF3Q0lDLEVBeENFQyxTQUFzQkwsR0FBMkI1TyxFQUFRL00sU0FFekRpYyxFQUFnQixDQUNwQjdCLEtBQU1yTixFQUFRcU4sS0FDZEssUUFBUzFOLEVBQVFzTyxhQUNqQkMsWUFBYXZPLEVBQVF1TyxZQUNyQnRiLFFBQVNnYyxHQUlMakIsRURxQjhCLFNBQ3RDeFUsRUFDQTJWLE9BQ0EsYUFBQXZSLG1CQUFBQSxJQUFBd1Isb0JBRUEsSUFBSTFCLFNBQ0N5QixFQUFlekIsVUFDbEJ6YSxRQUFTa2MsRUFBZWxjLFFBQ3hCc2IsWUFBYVksRUFBZVosY0FFMUJsQixFQUF5QjhCLEVBQWU5QixNQUFRLEdBTXBEK0IsRUFBUWxiLFNBQVEsU0FBQW1iLEdBQ2QzQixXQUNLQSxHQUNBMkIsRUFBTzNCLFVBQ1Z6YSxlQUNLeWEsRUFBUXphLFNBQ1JvYyxFQUFPcGMsV0FHVm9jLEVBQU9kLGNBQWFiLEVBQVFhLFlBQWNjLEVBQU9kLGFBRXJEbEIsU0FDS0EsR0FDQWdDLEVBQU9oQyxTQUtOLElBQUFkLEVBQWdEL1MsZ0JBQWpDOFMsRUFBaUM5UyxhQUFyQjdCLEVBQXFCNkIsWUFBVmdULEVBQVVoVCxRQUNsRDhWLEVBQWEsQ0FBRS9DLGdCQUFlNVUsYUFPcEMsT0FMSTBWLEVBQUtFLG9CQUFvQitCLEVBQWFoRCxXQUFhQSxHQUduRGUsRUFBS0MsZUFBZWdDLEVBQWE5QyxNQUFRK0MsUUFBTS9DLElBRTVDLENBQ0xrQixVQUNBNEIsUUNqRTBCRSxDQUN4QmhXLEVBQ0E0VCxHQUNBaUIsRUFDQWEsR0FKTXhCLFlBQVM0QixTQU9qQixHQUFJQSxFQUFLM1gsWUFBY3NXLEVBQXdCLENBQzdDLElBQU13QixFQUFjLElBQUkzUCxJQUFJckwsT0FBTzRJLEtBQUtpUyxFQUFLM1gsWUFDN0NnQixRQUFNYSxFQUFVZ1QsTUFBTyxDQUNyQmtELFNBQUEsU0FBUzdXLEVBQU1zRyxFQUFNQyxHQUtmQSxHQUFzRCx1QkFBM0NBLEVBQWtDN0csTUFDL0NrWCxFQUFZM0YsT0FBT2pSLEVBQUtaLEtBQUtyRSxVQUkvQjZiLEVBQVlFLE9BR2RMLEVBQUszWCxlQUFpQjJYLEVBQUszWCxXQUMzQjhYLEVBQVl2YixTQUFRLFNBQUErRCxVQUNYcVgsRUFBSzNYLFVBQVdNLE9BTTdCLElBQU15VixFQUFnQmtDLE9BQVEsQ0FDdEIsSUFBQUMsRUdqSDJCLFdBQ3JDLEdBQStCLG9CQUFwQkMsZ0JBQ1QsTUFBTyxDQUFFZCxZQUFZLEVBQU9ZLFFBQVEsR0FFdEMsSUFBTVosRUFBYSxJQUFJYyxnQkFFdkIsTUFBTyxDQUFFZCxhQUFZWSxPQUROWixFQUFXWSxRSDRHc0JHLEdBQXhCQyxlQUFhSixZQUNqQ1osRUFBYWdCLEtBQ0l0QyxFQUFnQmtDLE9BQVNBLEdBYzVDLEdBTkU3QixJQUNDdlUsRUFBVWdULE1BQU1sVCxZQUFZTixNQUxGLFNBQUN6RSxHQUM1QixNQUFrQix3QkFBWEEsRUFBRWdFLE1BQWtELGFBQWhCaEUsRUFBRWlGLGVBTTdDa1UsRUFBUWxXLE9BQVMsT0FHSSxRQUFuQmtXLEVBQVFsVyxPQUFrQixDQUN0QixJQUFBeVksV0k3SHFCekIsRUFBbUJjLEdBR2xELElBQU1ZLEVBQXdCLEdBQ3hCQyxFQUFnQixTQUFDalUsRUFBYXRJLEdBQ2xDc2MsRUFBWXBYLEtBQVFvRCxNQUFPa1UsbUJBQW1CeGMsS0FTaEQsR0FOSSxVQUFXMGIsR0FDYmEsRUFBYyxRQUFTYixFQUFLOUMsT0FFMUI4QyxFQUFLL0MsZUFDUDRELEVBQWMsZ0JBQWlCYixFQUFLL0MsZUFFbEMrQyxFQUFLM1gsVUFBVyxDQUNsQixJQUFJMFksU0FDSixJQUNFQSxFQUFzQnJELEdBQ3BCc0MsRUFBSzNYLFVBQ0wsaUJBRUYsTUFBT3dWLEdBQ1AsTUFBTyxDQUFFQSxjQUVYZ0QsRUFBYyxZQUFhRSxHQUU3QixHQUFJZixFQUFLaEQsV0FBWSxDQUNuQixJQUFJZ0UsU0FDSixJQUNFQSxFQUF1QnRELEdBQ3JCc0MsRUFBS2hELFdBQ0wsa0JBRUYsTUFBT2EsR0FDUCxNQUFPLENBQUVBLGNBRVhnRCxFQUFjLGFBQWNHLEdBUzlCLElBQUl6VyxFQUFXLEdBQ2IwVyxFQUFjL0IsRUFDVmdDLEVBQWdCaEMsRUFBVXBiLFFBQVEsTUFDakIsSUFBbkJvZCxJQUNGM1csRUFBVzJVLEVBQVVpQyxPQUFPRCxHQUM1QkQsRUFBYy9CLEVBQVVpQyxPQUFPLEVBQUdELElBRXBDLElBQU1FLEdBQWtELElBQTlCSCxFQUFZbmQsUUFBUSxLQUFjLElBQU0sSUFHbEUsTUFBTyxDQUFFdWQsT0FEUEosRUFBY0csRUFBb0JSLEVBQVlVLEtBQUssS0FBTy9XLEdKdUV6QmdYLENBQWlCckMsRUFBV2MsR0FBbkRxQixXQUFReEQsZUFDaEIsR0FBSUEsRUFDRixPQUFPMUMsR0FBVTBDLEdBRW5CcUIsRUFBWW1DLE9BRVosSUFDR2pELEVBQWdCNEIsS0FBT3RDLEdBQXdCc0MsRUFBTSxXQUN0RCxNQUFPbkMsR0FDUCxPQUFPMUMsR0FBVTBDLEdBSXJCLE9BQU8sSUFBSWpMLEdBQVcsU0FBQXNCLE9Ibkl4QnZGLEVHeUxJLE9BckRBNlAsRUFBU1UsRUFBV2QsR0FDakI5SyxNQUFLLFNBQUFnSSxHQUVKLE9BREFwUixFQUFVc1gsV0FBVyxDQUFFbEcsYUFDaEJBLEtBRVJoSSxNSHpJUDNFLEVHeUlzQ3pFLEVIdkkvQixTQUFDb1IsR0FBdUIsT0FBQUEsRUFDNUJtRyxPQUNBbk8sTUFBSyxTQUFBb08sR0FDSixJQUNFLE9BQU83VSxLQUFLOFUsTUFBTUQsR0FDbEIsTUFBT3pLLEdBQ1AsSUFBTTRHLEVBQWE1RyxFQUtuQixNQUpBNEcsRUFBV2xWLEtBQU8sbUJBQ2xCa1YsRUFBV3ZDLFNBQVdBLEVBQ3RCdUMsRUFBV3RDLFdBQWFELEVBQVNFLE9BQ2pDcUMsRUFBVzZELFNBQVdBLEVBQ2hCN0QsTUFHVHZLLE1BQUssU0FBQ3hRLEdBMEJMLE9BekJJd1ksRUFBU0UsUUFBVSxLQUVyQkgsR0FDRUMsRUFDQXhZLEVBQ0EsaURBQWlEd1ksRUFBU0UsUUFLM0RsVyxNQUFNdUksUUFBUS9LLElBQ2QwQyxHQUFlYSxLQUFLdkQsRUFBUSxTQUM1QjBDLEdBQWVhLEtBQUt2RCxFQUFRLFdBRzdCdVksR0FDRUMsRUFDQXhZLEVBQ0EsMkNBQ0V3QyxNQUFNdUksUUFBUWMsR0FDVkEsRUFBVy9DLEtBQUksU0FBQThQLEdBQU0sT0FBQUEsRUFBR3VCLGlCQUN4QnRPLEVBQVdzTyxxQkFJZG5hLFFHZ0dKd1EsTUFBSyxTQUFBeFEsR0FJSixPQUZBb1IsRUFBU2EsS0FBS2pTLEdBQ2RvUixFQUFTYyxXQUNGbFMsS0FFUmlYLE9BQU0sU0FBQTlDLEdBRVksZUFBYkEsRUFBSXRPLE9BT0pzTyxFQUFJblUsUUFBVW1VLEVBQUluVSxPQUFPOGUsUUFBVTNLLEVBQUluVSxPQUFPbUssTUEyQmhEaUgsRUFBU2EsS0FBS2tDLEVBQUluVSxRQUVwQm9SLEVBQVNTLE1BQU1zQyxPQUdaLFdBR0R5SSxHQUFZQSxFQUFXbUMsNkJLbE1qQyxXQUFtQnpELGdCQUFBQSxNQUFuQixNQUNFN1csWUFBTThXLEdBQWVELEdBQVNsQyxzQkFEYjFVLFVBQUE0VyxJQUZTM1ksUUFBQXNXLElDSnhCLElBQUE1VSxHQUErQmhDLE9BQU9VLFVBQXBDaVMsZUFBVXRTLHFCQUNac2MsR0FBVWxLLFNBQVMvUixVQUFVaVMsU0FDN0JpSyxHQUFzQixJQUFJN0osYUFLaEI4SixHQUFNamIsRUFBUTdCLEdBQzVCLElBQ0UsT0FBTytjLEdBQU1sYixFQUFHN0IsV0FFaEI2YyxHQUFvQkcsU0FPeEIsU0FBU0QsR0FBTWxiLEVBQVE3QixHQUVyQixHQUFJNkIsSUFBTTdCLEVBQ1IsT0FBTyxFQUtULElBZ0pnQmlkLEVBQWNDLEVBQ3hCQyxFQWpKQUMsRUFBT3hLLEdBQVN6UixLQUFLVSxHQU0zQixHQUFJdWIsSUFMU3hLLEdBQVN6UixLQUFLbkIsR0FNekIsT0FBTyxFQUdULE9BQVFvZCxHQUNOLElBQUssaUJBR0gsR0FBSXZiLEVBQUVsRSxTQUFXcUMsRUFBRXJDLE9BQVEsT0FBTyxFQUVwQyxJQUFLLGtCQUNILEdBQUkwZixHQUFtQnhiLEVBQUc3QixHQUFJLE9BQU8sRUFFckMsSUFBTXNkLEVBQVFDLEdBQVkxYixHQUNwQjJiLEVBQVFELEdBQVl2ZCxHQUlwQnlkLEVBQVdILEVBQU0zZixPQUN2QixHQUFJOGYsSUFBYUQsRUFBTTdmLE9BQVEsT0FBTyxFQUd0QyxJQUFLLElBQUlpRSxFQUFJLEVBQUdBLEVBQUk2YixJQUFZN2IsRUFDOUIsSUFBS3RCLEdBQWVhLEtBQUtuQixFQUFHc2QsRUFBTTFiLElBQ2hDLE9BQU8sRUFLWCxJQUFTQSxFQUFJLEVBQUdBLEVBQUk2YixJQUFZN2IsRUFBRyxDQUNqQyxJQUFNOEYsRUFBTTRWLEVBQU0xYixHQUNsQixJQUFLbWIsR0FBTWxiLEVBQUU2RixHQUFNMUgsRUFBRTBILElBQ25CLE9BQU8sRUFJWCxPQUFPLEVBR1QsSUFBSyxpQkFDSCxPQUFPN0YsRUFBRTRCLE9BQVN6RCxFQUFFeUQsTUFBUTVCLEVBQUVPLFVBQVlwQyxFQUFFb0MsUUFFOUMsSUFBSyxrQkFFSCxHQUFJUCxHQUFNQSxFQUFHLE9BQU83QixHQUFNQSxFQUU1QixJQUFLLG1CQUNMLElBQUssZ0JBQ0gsT0FBUTZCLElBQU83QixFQUVqQixJQUFLLGtCQUNMLElBQUssa0JBQ0gsT0FBTzZCLEdBQUssR0FBRzdCLEVBRWpCLElBQUssZUFDTCxJQUFLLGVBQ0gsR0FBSTZCLEVBQUVzWixPQUFTbmIsRUFBRW1iLEtBQU0sT0FBTyxFQUM5QixHQUFJa0MsR0FBbUJ4YixFQUFHN0IsR0FBSSxPQUFPLEVBS3JDLElBSEEsSUFBTTBkLEVBQVk3YixFQUFFOGIsVUFDZEMsRUFBaUIsaUJBQVRSLElBRUQsQ0FDWCxJQUFNUyxFQUFPSCxFQUFVN04sT0FDdkIsR0FBSWdPLEVBQUs1TixLQUFNLE1BR1QsSUFBQWhPLEVBQWlCNGIsRUFBS3plLE1BQXJCMGUsT0FBTUMsT0FHYixJQUFLL2QsRUFBRTZMLElBQUlpUyxHQUNULE9BQU8sRUFLVCxHQUFJRixJQUFVYixHQUFNZ0IsRUFBUS9kLEVBQUUwUCxJQUFJb08sSUFDaEMsT0FBTyxFQUlYLE9BQU8sRUFHVCxJQUFLLHlCQUNMLElBQUssNkJBQ0wsSUFBSyxrQ0FDTCxJQUFLLG9CQUNILElBQU1FLEVBQVFwQixHQUFRemIsS0FBS1UsR0FDM0IsT0FBSW1jLElBQVVwQixHQUFRemIsS0FBS25CLEtBaUREa2QsRUF0QkZlLE1BdUJ0QmQsR0FEVUYsRUF0QktlLEdBdUJFcmdCLE9BQVN1ZixFQUFPdmYsU0FDbkIsR0FDbEJzZixFQUFLcmUsUUFBUXNlLEVBQVFDLEtBQWVBLElBcEJ0QyxPQUFPLEVBR1QsU0FBU0ksR0FBb0NyYixHQUczQyxPQUFPakMsT0FBTzRJLEtBQUszRyxHQUFLd0gsT0FBT3dVLEdBQWNoYyxHQUUvQyxTQUFTZ2MsR0FFUHhXLEdBRUEsWUFBcUIsSUFBZGpILEtBQUtpSCxHQUdkLElBQU11VyxHQUFtQixvQkFRekIsU0FBU1osR0FBbUJ4YixFQUFXN0IsR0FTckMsSUFBSW1lLEVBQU90QixHQUFvQm5OLElBQUk3TixHQUNuQyxHQUFJc2MsR0FHRixHQUFJQSxFQUFLdFMsSUFBSTdMLEdBQUksT0FBTyxPQUV4QjZjLEdBQW9CM0osSUFBSXJSLEVBQUdzYyxFQUFPLElBQUk3UyxLQUd4QyxPQURBNlMsRUFBS25TLElBQUloTSxJQUNGLEVDcExULElDWFlvZSxrQkQ2Q1YsV0FBWW5jLE9BbENnQjhQLEVBQ3hCM1AsRUFrQ0ZpYyxrQkFDQUMsaUJBQ0FDLGlCQUNBQyxnQkFPQW5jLFlBQU1rYyxnQkFDTmpjLEVBQUsrYixjQUFnQkEsR0FBaUIsR0FDdEMvYixFQUFLZ2MsYUFBZUEsR0FBZ0IsS0FDcENoYyxFQUFLRixRQUFVbWMsSUEvQ2JuYyxFQUFVLEdBRVZnUyxJQUh3QnJDLEVBZ0QwQnpQLEdBN0M5QitiLGdCQUN0QnRNLEVBQUlzTSxjQUFjM2UsU0FBUSxTQUFDK2UsR0FDekIsSUFBTUYsRUFBZUUsRUFDakJBLEVBQWFyYyxRQUNiLDJCQUNKQSxHQUFjbWMsVUFJZHhNLEVBQUl1TSxlQUNObGMsR0FBYzJQLEVBQUl1TSxhQUFhbGMsY0FJakNBLEVBQVVBLEVBQVFzYyxRQUFRLE1BQU8sS0FnQy9CcGMsRUFBS2tjLFVBQVlBLEVBSWhCbGMsRUFBYW5DLFVBQVl3ZSxFQUFZaGUsWUFFMUMsT0FsQ2lDSixVQUFBbUMsZ0JDZ0JqQmtjLEdBQ2RDLEdBRUEsUUFBT0EsR0FBZ0JBLEVBQWdCLEdBbkR6QyxTQUFZVCxHQU1WQSx5QkFNQUEsbUNBTUFBLDZCQU1BQSx5QkFPQUEsbUJBS0FBLHFCQUtBQSxxQkF6Q0YsQ0FBWUEsS0FBQUEsUUNhWixrQkFDRSxXQUNVcFAsRUFDQWtLLEVBS0FTLEVBU0FtRixHQWZBcmUsY0FBQXVPLEVBQ0F2TyxhQUFBeVksRUFLQXpZLFdBQUFrWixFQVNBbFosaUJBQUFxZSxFQXdIWixPQW5IU0Msc0JBQVAsU0FDRUMsRUFDQUMsR0FFSUQsRUFDRnZlLEtBQUt5ZSxjQUFjRixHQUtuQnZlLEtBQUswZSxnQkFHUCxJQUFNQyxFQUFVM2UsS0FBS2taLE1BQU1sWixLQUFLeVksUUFBUytGLEdBY3pDLE9BWkl4ZSxLQUFLMmUsU0FPUDNlLEtBQUsyZSxRQUFROUssZUFBZTdULEtBQUt1TyxVQUFVLEdBRzdDb1EsRUFBUS9LLFlBQVk1VCxLQUFLdU8sV0FFakJ2TyxLQUFLMmUsUUFBVUEsR0FBU3hLLFNBRzNCbUssMEJBQVAsU0FBcUJDLEdBR25CLE9BRkEvZSxPQUFPYSxPQUFPTCxLQUFLeVksUUFBU25ELEdBQVFpSixJQUNwQ3ZlLEtBQUswZSxnQkFDRTFlLE1BR0ZzZSxpQkFBUCxXQUNNdGUsS0FBSzJlLFVBQ1AzZSxLQUFLMmUsUUFBUTlLLGVBQWU3VCxLQUFLdU8saUJBQzFCdk8sS0FBSzJlLFNBR1YzZSxLQUFLNGUsY0FDUEMsYUFBYTdlLEtBQUs0ZSxZQUFZRSxTQUM5QjllLEtBQUt5WSxRQUFRc0csYUFBZSxFQUM1Qi9lLEtBQUswZSxrQkFVREosMEJBQVIsV0FBQSxXQUVJTSxFQUlFNWUsaUJBRkErZSxFQUVBL2UsMEJBRUosR0FBSytlLEdBUUwsS0FBSUgsR0FDQUEsRUFBWUksV0FBYUQsNEVBVUosSUFBckIvZSxLQUFLcWUsYUFBVCxFQUlhTyxJQUNYNWUsS0FBSzRlLFlBQWMsS0FHaEJJLFNBQVdELEVBRWhCLElBQU1FLEVBQWEsV0FDYnBkLEVBQUsrYyxjQUNIL2MsRUFBS3djLGFBQWV4YyxFQUFLd2MsY0FDM0J4YyxFQUFLcWQsVUFBVSxDQUNiQyxZQUFhLGVBQ2JDLGdCQUFpQnZkLEVBQUs0VyxRQUFRMEcsYUFBZSxlQUM1Q3hCLEdBQWMwQixNQUFNMVIsS0FBSzBSLEVBQU1BLEdBRWxDQSxNQUtBQSxFQUFPLFdBQ1gsSUFBTWpDLEVBQU92YixFQUFLK2MsWUFDZHhCLElBQ0Z5QixhQUFhekIsRUFBSzBCLFNBQ2xCMUIsRUFBSzBCLFFBQVV4UixXQUFXMlIsRUFBWTdCLEVBQUs0QixZQUkvQ0ssVUFqRE1ULElBQ0ZDLGFBQWFELEVBQVlFLGdCQUNsQjllLEtBQUs0ZSxtQkM5RGhCVSxJQUF5QixFQWltQjdCLFNBQVNDLEdBQXlDdlEsR0FDUDlNLDZDQUgzQ3FSLGVBcmtCRSxXQUFZL1IsT0FDVmdlLGlCQUNBQyxjQUNBaEgsY0FNQTdXLGFBQU0sU0FBQzJNLEdBQ0wsT0FBQTFNLEVBQUs2ZCxZQUFZblIsWUFsQmIxTSxZQUFZLElBQUlnSixJQUNoQmhKLGdCQUFnQixJQUFJZ0osSUEyaEJwQmhKLFdBQVcsQ0FDakJ1TixLQUFNLFNBQUNqUyxJQUNEMEUsRUFBSzhkLFdBQWE5ZCxFQUFLK2QsMEJBQTBCemlCLE1BQ25EMEUsRUFBS2dlLGlCQUFpQjFpQixHQUN0QitWLEdBQXVCclIsRUFBS3NSLFVBQVcsT0FBUWhXLEtBSW5ENlIsTUFBTyxTQUFDQSxHQUdObk4sRUFBS2dlLHdCQUNBaGUsRUFBS2llLGFBQ1I5USxRQUNBaU4sT0FBUWpOLEVBQU00TyxjQUNkUSxjQUFlVCxHQUFjM08sTUFDN0IrUSxTQUFTLEtBR1g3TSxHQUF1QnJSLEVBQUtzUixVQUFXLFFBQVN0UixFQUFLOGQsVUFBWTNRLEtBemhCbkVuTixFQUFLbWUsWUFBYSxFQUdsQm5lLEVBQUs0VyxRQUFVQSxFQUNmNVcsRUFBS29lLFFBQVVULEVBQWFVLGtCQUU1QixJQUFNQyxFQUFRalgsRUFBdUJ1UCxFQUFRbEIsY0FDN0MxVixFQUFLdWUsVUFBWUQsR0FBU0EsRUFBTW5kLE1BQVFtZCxFQUFNbmQsS0FBS3JFLE1BR25Ea0QsRUFBSzJkLGFBQWVBLEVBRXBCM2QsRUFBSzRkLFVBQVlBLElBdWlCckIsT0F0bEJVM2YsT0FPUk4sc0JBQVc2Z0IsNkJBQVgsV0FDRSxPQUFPcmdCLEtBQUt5WSxRQUFRL1YsMkNBMENmMmQsbUJBQVAsV0FBQSxXQUNFLE9BQU8sSUFBSTVTLFNBQVEsU0FBQ0MsRUFBUzRCLEdBQzNCLElBQU1mLEVBQStDLENBQ25EYSxLQUFNLFNBQUNqUyxHQUNMdVEsRUFBUXZRLEdBWVIwRSxFQUFLc1IsVUFBVTBCLE9BQU90RyxHQUNqQjFNLEVBQUtzUixVQUFVdUgsTUFDbEI3WSxFQUFLMmQsYUFBYWMsWUFBWXplLEVBQUtvZSxTQUdyQzNTLFlBQVcsV0FDVE8sRUFBYUcsZ0JBQ1osSUFFTGdCLE1BQU9NLEdBRUh6QixFQUFlaE0sRUFBSzBOLFVBQVVoQixPQUlqQzhSLDZCQUFQLFNBQXdCRSxnQkFBQUEsTUFDZCxJQUFBVCxFQUFlOWYsZ0JBRWpCb2UsRUFDSnBlLEtBQUt5ZixVQUFVckIsZUFDZDBCLEdBQWNBLEVBQVcxQixlQUMxQlQsR0FBYzZDLE1BRVZyakIsU0FDRDJpQixJQUNIQyxRQUFTNUIsR0FBeUJDLEdBQ2xDQSxrQkFHRixHQUFJcGUsS0FBS2dnQixXQUNQLE9BQU83aUIsRUFHRCxJQUFBcUUsRUFBZ0N4QixLQUFLeVksb0JBQXJDMEcsYUFBYyxnQkFDdEIsR0FBb0IsYUFBaEJBLEdBQ2dCLGlCQUFoQkEsU0FHS2hpQixFQUFPc2pCLGFBQ1QsSUFDSnRqQixFQUFPbUssT0FRUHRILEtBQUt3ZixhQUFha0IsVUFBVTFnQixLQUFLeVksUUFBUWxCLE9BQU9vSixtQkFDakQsQ0FDQSxJQUFNQyxFQUFPNWdCLEtBQUt5ZixVQUFVb0IsVUFDNUIxakIsRUFBT21LLEtBQ0xzWixFQUFLdlIsVUFDTHJQLEtBQUt5WSxRQUFRcUksa0JBQ1hGLEVBQUt6akIsWUFBUyxFQUNkeWpCLEVBQUt2UixVQUlIbFMsRUFBT2loQixnQkFBa0JULEdBQWNvQyxTQUN0QixnQkFBaEJaLEdBQ2dCLGVBQWhCQSxJQUNIaGlCLEVBQU9paEIsY0FBZ0JULEdBQWM2QyxNQUNyQ3JqQixFQUFPNGlCLFNBQVUsVUFFWjVpQixFQUFPc2pCLFNBRWR0akIsRUFBT3NqQixTQUFVLEVBUXJCLE9BSklGLEdBQ0Z2Z0IsS0FBSzZmLGlCQUFpQjFpQixHQUdqQkEsR0FLRmtqQixzQ0FBUCxTQUFpQ1UsR0FDL0IsT0FBUTFFLEdBQU1yYyxLQUFLZ2hCLG1CQUFvQkQsSUFLbENWLDBCQUFQLFdBQ0UsT0FBT3JnQixLQUFLOGYsWUFHUE8seUJBQVAsV0FDRSxPQUFPcmdCLEtBQUsyZixXQUdQVSw2QkFBUCxrQkFDU3JnQixLQUFLOGYsa0JBQ0w5ZixLQUFLZ2hCLDBCQUNMaGhCLEtBQUsyZixVQUNaM2YsS0FBS2dnQixZQUFhLEdBR2JLLGtDQUFQLFdBQ0VyZ0IsS0FBS3dmLGFBQWF5QixZQUFZamhCLEtBQUtpZ0IsVUFVOUJJLG9CQUFQLFNBQWUzZCxHQUNiLElBQU13ZSxFQUFrRSxDQUV0RW5DLGFBQWMsR0FNUkksRUFBZ0JuZixLQUFLeVksb0JBZ0I3QixNQWZvQixhQUFoQjBHLEdBQ2dCLHNCQUFoQkEsSUFDRitCLEVBQWlCL0IsWUFBYyxlQUUvQitCLEVBQWlCOUIsZ0JBQWtCRCxHQUFlLGVBR2hEemMsSUFBYzJaLEdBQU1yYyxLQUFLeVksUUFBUS9WLFVBQVdBLEtBRTlDd2UsRUFBaUJ4ZSxVQUFZMUMsS0FBS3lZLFFBQVEvVixVQUFZdEMsT0FDakRKLEtBQUt5WSxRQUFRL1YsV0FDYkEsSUFJQTFDLEtBQUttaEIsZUFBYyxHQUFPakMsVUFDL0JnQyxFQUNBdkQsR0FBY3lELFVBSVhmLHNCQUFQLFNBQ0VnQixHQURGLFdBSVFDLEVBQWtCbGhCLE9BQ2xCaWhCLEVBQWlCOUosTUFBUThKLFdBQ3hCcmhCLEtBQUt5WSxTQUNMNEksSUFDSDNlLGlCQUNLMUMsS0FBS3lZLFFBQVEvVixXQUNiMmUsRUFBaUIzZSxlQVF4QnljLFlBQWEsYUFHVG9DLEVBQU12aEIsS0FBS3dmLGFBQWFVLGtCQVM5QixPQUxJb0IsRUFBZ0JFLDhCQUNsQnhoQixLQUFLeWYsVUFBVXJCLGNBQWdCVCxHQUFjOEQsVUFDN0N6aEIsS0FBSzBoQixXQUdBMWhCLEtBQUt3ZixhQUFhbUMsV0FDdkJKLEVBQ0FELEVBQ0EzRCxHQUFjOEQsV0FDZDlULE1BQUssU0FBQWlVLEdBQ0wsSUFBTXRhLEVBQU9zYSxFQUFnQnRhLEtBQ3JCdWEsRUFBZ0JSLGNBb0N4QixPQWxDSVEsR0FFR3ZDLDBqQkFhSEEsSUFBeUIsR0FFM0J6ZCxFQUFLZ2dCLGFBQVksU0FBQUMsR0FBWSxPQUFBRCxFQUFZQyxFQUFVLENBQ2pERixnQkFBaUJ0YSxFQUNqQjVFLFVBQVc0ZSxFQUFnQjVlLGdCQVE3QmIsRUFBSzJkLGFBQWF1QyxNQUFNQyxXQUFXLENBQ2pDekssTUFBTytKLEVBQWdCL0osTUFDdkI3VSxVQUFXNGUsRUFBZ0I1ZSxVQUMzQjRFLFNBSUdzYSxLQUVOSyxTQUFRLFdBQ1RwZ0IsRUFBSzJkLGFBQWEwQyxVQUFVWCxHQUM1QjFmLEVBQUtxZCxnQkFPRm1CLDRCQUFQLFNBSUU1SCxHQUpGLFdBVVE1SyxFQUFlN04sS0FBS3dmLGFBQ3ZCMkMseUJBQXlCLENBQ3hCNUssTUFBT2tCLEVBQVF4VSxTQUNmdkIsVUFBVytWLEVBQVEvVixVQUNuQnFJLFFBQVMwTixFQUFRMU4sVUFFbEJ3RSxVQUFVLENBQ1RILEtBQU0sU0FBQ2dULEdBQ0csSUFBQVAsRUFBZ0JwSixjQUNwQm9KLEdBQ0ZoZ0IsRUFBS2dnQixhQUNILFNBQUNDLEVBQVV0Z0IsT0FBRWtCLGNBQ1gsT0FBQW1mLEVBQVlDLEVBQVUsQ0FDcEJNLG1CQUNBMWYsa0JBS1ZzTSxNQUFPLFNBQUNzQyxHQUNGbUgsRUFBUVgsUUFDVlcsRUFBUVgsUUFBUXhHLHdEQVN4QixPQUZBdFIsS0FBSzBRLGNBQWNuRixJQUFJc0MsR0FFaEIsV0FDRGhNLEVBQUs2TyxjQUFjbUUsT0FBT2hILElBQzVCQSxFQUFhRyxnQkFLWnFTLHVCQUFQLFNBQ0U5QixHQUVBLE9BQU92ZSxLQUFLa2YsVUFBVVgsSUE0QmpCOEIseUJBQVAsU0FDRTNkLEdBRUEsR0FBSTJaLEdBQU1yYyxLQUFLMEMsVUFBV0EsR0FJeEIsT0FBTzFDLEtBQUttVCxVQUFVdUgsS0FDbEIxYSxLQUFLN0MsU0FDTHNRLFFBQVFDLFVBTWQsR0FIQTFOLEtBQUt5WSxRQUFRL1YsVUFBWUEsR0FHcEIxQyxLQUFLbVQsVUFBVXVILEtBQ2xCLE9BQU9qTixRQUFRQyxVQUdYLElBQUFsTSxFQUFnQ3hCLEtBQUt5WSxvQkFBckMwRyxhQUFjLGdCQUNkK0IsRUFBa0UsQ0FDdEUvQixjQUNBemMsYUFVRixNQVBvQixnQkFBaEJ5YyxHQUNnQixhQUFoQkEsR0FDZ0IsaUJBQWhCQSxJQUNGK0IsRUFBaUIvQixZQUFjLG9CQUMvQitCLEVBQWlCOUIsZ0JBQWtCRCxHQUc5Qm5mLEtBQUtrZixVQUNWZ0MsRUFDQXZELEdBQWMwRSxlQUlYaEMsd0JBQVAsU0FDRWlDLFNBS1E5QyxFQUFpQnhmLGtCQVNuQitnQixFQUFZdUIsRUFSQzlDLEVBQWF1QyxNQUFNbkIsS0FBWSxDQUNoRHJKLE1BQU92WCxLQUFLeVksUUFBUWxCLE1BQ3BCN1UsVUFBVzFDLEtBQUswQyxVQUNoQjZmLHlCQUFnQnZpQixLQUFLOGYsaUNBQVl4WSxLQUNqQ3daLG1CQUFtQixFQUNuQjBCLFlBQVksV0FHbUIsQ0FDL0I5ZixVQUFZMUMsS0FBYTBDLFlBR3ZCcWUsSUFDRnZCLEVBQWF1QyxNQUFNQyxXQUFXLENBQzVCekssTUFBT3ZYLEtBQUt5WSxRQUFRbEIsTUFDcEJqUSxLQUFNeVosRUFDTnJlLFVBQVcxQyxLQUFLMEMsWUFHbEI4YyxFQUFhaUQscUJBSVZwQyx5QkFBUCxTQUFvQnRCLEdBQ2xCL2UsS0FBSzBpQixnQkFBZ0JqRSxjQUFjLENBQUVNLGtCQUdoQ3NCLHdCQUFQLFdBQ01yZ0IsS0FBSzJpQixZQUNQM2lCLEtBQUsyaUIsV0FBV2xFLGNBQWMsQ0FBRU0sYUFBYyxLQUkxQ3NCLDZCQUFSLFNBQXlCVSxHQUN2QixJQUFNd0IsRUFBaUJ2aUIsS0FBSzhmLFdBUTVCLE9BUEE5ZixLQUFLOGYsV0FBYWlCLEVBQ2xCL2dCLEtBQUtnaEIsbUJBQXFCaGhCLEtBQUt3ZixhQUFhb0QsdUJBQ3hDN0IsRUFDQTNPLEdBQVUyTyxHQUNUcE4sR0FBZ0JvTixFQUFVOUUsZ0JBQ3RCamMsS0FBSzJmLFVBRVA0QyxHQUdEbEMsd0JBQVIsU0FBb0I5UixHQUFwQixXQUtFLEdBQUlBLElBQWF2TyxLQUFLdU8sU0FDcEIsT0FBTyxhQUtULElBQ0UsSUFBSXNVLEVBQWV0VSxFQUFpQlcsY0FBY2hCLFVBQzlDMlUsSUFBZ0JBLEVBQVk3VCxRQUM5QjZULEVBQVk3VCxNQUFRdVEsSUFFdEIsVUFFRixJQUFNdFAsR0FBU2pRLEtBQUttVCxVQUFVdUgsS0FxQjlCLE9BcEJBMWEsS0FBS21ULFVBQVU1SCxJQUFJZ0QsR0FHZnZPLEtBQUsyZixVQUNQcFIsRUFBU1MsT0FBU1QsRUFBU1MsTUFBTWhQLEtBQUsyZixXQUM3QjNmLEtBQUs4ZixZQUNkdlIsRUFBU2EsTUFBUWIsRUFBU2EsS0FBS3BQLEtBQUs4ZixZQUtsQzdQLEdBQ0ZqUSxLQUFLa2YsWUFBWTlLLE9BQU0sU0FBQUMsT0FRbEIsV0FDRHhTLEVBQUtzUixVQUFVMEIsT0FBT3RHLEtBQWMxTSxFQUFLc1IsVUFBVXVILE1BQ3JEN1ksRUFBS2loQixrQkFPSHpDLDBCQUFSLFdBQ0UsT0FBT3JnQixLQUFLMmlCLGFBQWUzaUIsS0FBSzJpQixXQUFhM2lCLEtBQUttaEIsZUFBYyxLQUcxRGQsMEJBQVIsU0FBc0IwQyxHQUF0QixXQUNVdkQsRUFBMEJ4ZixrQkFBWmlnQixFQUFZamdCLGFBRWxDLE9BREF3ZixFQUFhd0QsbUJBQW1CaGpCLE1BQ3pCLElBQUlzZSxHQUNUdGUsS0FBS3VPLFNBSUx3VSxFQUFlL2lCLEtBQUt5WSxhQUFlelksS0FBS3lZLFVBQ3hDLFNBQUN3SyxFQUFnQnpFLEdBRWYsT0FEQWdCLEVBQWF3RCxtQkFBbUJuaEIsR0FDekIyZCxFQUFhMEQscUJBQ2xCakQsRUFDQWdELEVBQ0F6RSxNQUlIZ0IsRUFBYTJELG9CQUNOLE9BQUNoRixHQUF5QnRjLEVBQUs0ZCxVQUFVckIsa0JBSTlDaUMsc0JBQVAsU0FDRTlCLEVBQ0FDLEdBR0EsT0FEQXhlLEtBQUtnZ0IsWUFBYSxFQUNYaGdCLEtBQUswaUIsZ0JBQWdCeEQsVUFBVVgsRUFBWUMsSUFLNUM2QixvQkFBUixXQUtFcmdCLEtBQUt1TyxTQUFTYSxLQUFLcFAsS0FBS29qQixrQkFBaUIsS0EwQnBDL0MseUJBQVAsV0FDRSxPQUFPcmdCLEtBQUttVCxVQUFVdUgsS0FBTyxHQUd2QjJGLDBCQUFSLFdBQ01yZ0IsS0FBS2dnQixhQUVMaGdCLEtBQUsyaUIsYUFDUDNpQixLQUFLMmlCLFdBQVdVLGNBQ1RyakIsS0FBSzJpQixZQUlkM2lCLEtBQUswUSxjQUFjelIsU0FBUSxTQUFBNlUsR0FBTyxPQUFBQSxFQUFJOUYsaUJBQ3RDaE8sS0FBSzBRLGNBQWM2TCxRQUVuQnZjLEtBQUt3ZixhQUFhMEMsVUFBVWxpQixLQUFLaWdCLFNBRWpDamdCLEtBQUttVCxVQUFVb0osUUFFZnZjLEtBQUtnZ0IsWUFBYSxPQXBsQlovUyxJQ3pDVixJQUFNcVcsR0FBa0IsV0FBTSxPQUFBOWpCLE9BQU9XLE9BQU8sT0FHdENxQixHQUFxQjdCLE1BQU1PLFVBQXpCakIsY0FBU29NLDBCQVVmLFdBQ1VrWSxFQUNBQyxnQkFEQUQsbUJBQ0FDLE1BREF4akIsY0FBQXVqQixFQUNBdmpCLGNBQUF3akIsRUFxQlosT0FsQlNDLG1CQUFQLGVBQStCLGFBQUE5YSxtQkFBQUEsSUFBQSthLGtCQUM3QixPQUFPMWpCLEtBQUsyakIsWUFBWUQsSUFHbkJELHdCQUFQLFNBQWlEQyxHQUMvQyxJQUFJOWYsRUFBbUI1RCxLQUV2QixPQURBZixHQUFReUIsS0FBS2dqQixHQUFPLFNBQUF6YyxHQUFPLE9BQUFyRCxFQUFPQSxFQUFLZ2dCLGFBQWEzYyxNQUM3Q3JELEVBQUswRCxPQUFTMUQsRUFBSzBELEtBQU90SCxLQUFLd2pCLFNBQVNuWSxHQUFNM0ssS0FBS2dqQixNQUdwREQseUJBQVIsU0FBcUJ4YyxHQUNuQixJQUFNaEIsRUFBTWpHLEtBQUt1akIsVUFTckIsU0FBa0I1a0IsR0FDaEIsY0FBZUEsR0FDZixJQUFLLFNBQ0gsR0FBYyxPQUFWQSxFQUFnQixNQUV0QixJQUFLLFdBQ0gsT0FBTyxFQUVULE9BQU8sRUFqQndCa2xCLENBQVM1YyxHQUNsQ2pILEtBQUs4akIsT0FBUzlqQixLQUFLOGpCLEtBQU8sSUFBSTNPLFNBQzlCblYsS0FBSytqQixTQUFXL2pCLEtBQUsrakIsT0FBUyxJQUFJeFIsS0FDbENHLEVBQVF6TSxFQUFJZ0osSUFBSWhJLEdBRXBCLE9BREt5TCxHQUFPek0sRUFBSXdNLElBQUl4TCxFQUFLeUwsRUFBUSxJQUFJK1EsRUFBV3pqQixLQUFLdWpCLFNBQVV2akIsS0FBS3dqQixXQUM3RDlRLFFDaENYLElBQUlzUixHQUFpQyxLQUkvQkMsR0FBcUIsR0FFdkJDLEdBQVksRUF1SFZDLEdBQVksb0JBQ1pwbUIsR0FBTzRCLE1BRUF5a0IsR0FBeUNybUIsR0FBS29tQixLQUFjLFdBQ3ZFLElBQU1DLGFBdEhvQixhQUlWcGtCLFFBQUssQ0FDbkIsT0FDQWtrQixLQUNBRyxLQUFLQyxNQUNMOW1CLEtBQUtFLFNBQVN5VSxTQUFTLElBQUk5RyxNQUFNLElBQ2pDc1EsS0FBSyxLQStGVCxPQTdGU3lJLHFCQUFQLFdBQ0UsSUFBSyxJQUFJRyxFQUFVUCxHQUFnQk8sRUFBU0EsRUFBVUEsRUFBUXBhLE9BRzVELEdBQUluSyxLQUFLbUYsTUFBTW9mLEVBQVFDLE1BQU8sQ0FDNUIsSUFBTTdsQixFQUFRNGxCLEVBQVFDLE1BQU14a0IsS0FBS21GLElBQ2pDLEdBQUl4RyxJQUFVc2xCLEdBQWUsTUFPN0IsT0FOSU0sSUFBWVAsS0FJZEEsR0FBZ0JRLE1BQU14a0IsS0FBS21GLElBQU14RyxJQUU1QixFQVNYLE9BTklxbEIsS0FJRkEsR0FBZVEsTUFBTXhrQixLQUFLbUYsSUFBTThlLEtBRTNCLEdBR0ZHLHFCQUFQLFdBQ0UsR0FBSXBrQixLQUFLOFAsV0FDUCxPQUFPa1UsR0FBZ0JRLE1BQU14a0IsS0FBS21GLEtBSS9CaWYsc0JBQVAsU0FDRXpsQixFQUNBbVcsRUFHQWpPLEVBQ0E0ZCxTQUVNRCxPQUNKOWtCLFVBQVcsT0FDVk0sS0FBS21GLElBQUt4RyxLQUVQd0wsRUFBUzZaLEdBQ2ZBLEdBQWlCLENBQUU3WixTQUFRcWEsU0FDM0IsSUFHRSxPQUFPMVAsRUFBU25VLE1BQU04akIsRUFBVTVkLFdBRWhDbWQsR0FBaUI3WixJQU1kaWEsT0FBUCxTQUNFdFAsR0FFQSxJQUFNL0osRUFBVWlaLEdBQ2hCLE9BQU8sV0FDTCxJQUFNVSxFQUFRVixHQUNkLElBRUUsT0FEQUEsR0FBaUJqWixFQUNWK0osRUFBU25VLE1BQU1YLEtBQU1TLG1CQUU1QnVqQixHQUFpQlUsS0FNaEJOLFlBQVAsU0FDRXRQLEVBR0FqTyxFQUNBNGQsR0FFQSxJQUFJVCxHQVdGLE9BQU9sUCxFQUFTblUsTUFBTThqQixFQUFVNWQsR0FWaEMsSUFBTTZkLEVBQVFWLEdBQ2QsSUFJRSxPQUhBQSxHQUFpQixLQUdWbFAsRUFBU25VLE1BQU04akIsRUFBVTVkLFdBRWhDbWQsR0FBaUJVLFNBcUJ2QixJQUNFbGxCLE9BQU95TSxlQUFlbE8sR0FBTW9tQixHQUFXLENBQ3JDeGxCLE1BQU9aLEdBQUtvbUIsSUFBYUMsRUFDekJ0WSxZQUFZLEVBQ1pFLFVBQVUsRUFDVkQsY0FBYyxZQUdoQixPQUFPcVksR0FWOEQsR0NqSXpFLFNBQVNPLE1DTDBCUCxRQUFBQSxhRE9uQyxxQkFLRSxXQUNVUSxFQUNEQyxnQkFEQ0Qsb0JBQ0RDLE1BREM3a0IsU0FBQTRrQixFQUNENWtCLGFBQUE2a0IsRUFORDdrQixTQUFNLElBQUl1UyxJQUNWdlMsWUFBNEIsS0FDNUJBLFlBQTRCLEtBc0d0QyxPQS9GUzhrQixnQkFBUCxTQUFXN2QsR0FDVCxPQUFPakgsS0FBS2lHLElBQUltRixJQUFJbkUsSUFHZjZkLGdCQUFQLFNBQVc3ZCxHQUNULElBQU1yRCxFQUFPNUQsS0FBSytrQixRQUFROWQsR0FDMUIsT0FBT3JELEdBQVFBLEVBQUtqRixPQUdkbW1CLG9CQUFSLFNBQWdCN2QsR0FDZCxJQUFNckQsRUFBTzVELEtBQUtpRyxJQUFJZ0osSUFBSWhJLEdBRTFCLEdBQUlyRCxHQUFRQSxJQUFTNUQsS0FBS2dsQixPQUFRLENBQ3hCLElBQUFDLEVBQWlCcmhCLFFBQVZzaEIsRUFBVXRoQixRQUVyQnNoQixJQUNGQSxFQUFNRCxNQUFRQSxHQUdaQSxJQUNGQSxFQUFNQyxNQUFRQSxHQUdoQnRoQixFQUFLcWhCLE1BQVFqbEIsS0FBS2dsQixPQUNsQnBoQixFQUFLcWhCLE1BQU9DLE1BQVF0aEIsRUFFcEJBLEVBQUtzaEIsTUFBUSxLQUNibGxCLEtBQUtnbEIsT0FBU3BoQixFQUVWQSxJQUFTNUQsS0FBS21sQixTQUNoQm5sQixLQUFLbWxCLE9BQVNELEdBSWxCLE9BQU90aEIsR0FHRmtoQixnQkFBUCxTQUFXN2QsRUFBUXRJLEdBQ2pCLElBQUlpRixFQUFPNUQsS0FBSytrQixRQUFROWQsR0FDeEIsT0FBSXJELEVBQ0tBLEVBQUtqRixNQUFRQSxHQUd0QmlGLEVBQU8sQ0FDTHFELE1BQ0F0SSxRQUNBdW1CLE1BQU8sS0FDUEQsTUFBT2psQixLQUFLZ2xCLFFBR1ZobEIsS0FBS2dsQixTQUNQaGxCLEtBQUtnbEIsT0FBT0UsTUFBUXRoQixHQUd0QjVELEtBQUtnbEIsT0FBU3BoQixFQUNkNUQsS0FBS21sQixPQUFTbmxCLEtBQUttbEIsUUFBVXZoQixFQUU3QjVELEtBQUtpRyxJQUFJd00sSUFBSXhMLEVBQUtyRCxHQUVYQSxFQUFLakYsUUFHUG1tQixrQkFBUCxXQUNFLEtBQU85a0IsS0FBS21sQixRQUFVbmxCLEtBQUtpRyxJQUFJeVUsS0FBTzFhLEtBQUs0a0IsS0FDekM1a0IsS0FBSzZVLE9BQU83VSxLQUFLbWxCLE9BQU9sZSxNQUlyQjZkLG1CQUFQLFNBQWM3ZCxHQUNaLElBQU1yRCxFQUFPNUQsS0FBS2lHLElBQUlnSixJQUFJaEksR0FDMUIsUUFBSXJELElBQ0VBLElBQVM1RCxLQUFLZ2xCLFNBQ2hCaGxCLEtBQUtnbEIsT0FBU3BoQixFQUFLcWhCLE9BR2pCcmhCLElBQVM1RCxLQUFLbWxCLFNBQ2hCbmxCLEtBQUttbEIsT0FBU3ZoQixFQUFLc2hCLE9BR2pCdGhCLEVBQUtzaEIsUUFDUHRoQixFQUFLc2hCLE1BQU1ELE1BQVFyaEIsRUFBS3FoQixPQUd0QnJoQixFQUFLcWhCLFFBQ1ByaEIsRUFBS3FoQixNQUFNQyxNQUFRdGhCLEVBQUtzaEIsT0FHMUJsbEIsS0FBS2lHLElBQUk0TyxPQUFPNU4sR0FDaEJqSCxLQUFLNmtCLFFBQVFqaEIsRUFBS2pGLE1BQU9zSSxJQUVsQixTRTFHQW1lLEdBQWtCLElBQUloQixHQ0ZqQ3ZrQixHQUNFTCxPQUFPVSx5QkFRSG1sQixhQUFON2pCLEdBS0U3QixZQUxjLFNBQUMybEIsR0FDZixJQUFNNUIsRUFBZSxHQUVyQixPQURBNEIsRUFBV3JtQixTQUFRLFNBQUFzbUIsR0FBUSxPQUFBN0IsRUFBTTdmLEtBQUswaEIsTUFDL0I3QixlQVFLOEIsR0FBaUJDLEdBQ3ZCLElBQUF6WCxFQUFnQnlYLGNBQ0csbUJBQWhCelgsSUFDVHlYLEVBQVd6WCxpQkFBYyxFQUN6QkEsS0NwQkosSUFBTTBYLEdBQTJCLEdBS2pDLFNBQVNDLEdBQU94akIsRUFBZ0J5akIsR0FDOUIsSUFBTXpqQixFQUNKLE1BQU0sSUFBSUYsTUFBTTJqQixHQUFtQixxQkF1QnZDLFNBQVNDLEdBQVlsbkIsR0FDbkIsT0FBUUEsRUFBTXpCLFFBQ1osS0FBSyxFQUFHLE1BQU0sSUFBSStFLE1BQU0saUJBQ3hCLEtBQUssRUFBRyxPQUFPdEQsRUFBTSxHQUNyQixLQUFLLEVBQUcsTUFBTUEsRUFBTSxJQVV4QixrQkFrQkUsV0FDa0I2TyxHQUFBeE4sUUFBQXdOLEVBYkZ4TixhQUFVLElBQUk2SyxJQUNkN0ssaUJBQWMsSUFBSXVTLElBSzNCdlMsbUJBQXNDLEtBRXRDQSxZQUFRLEVBQ1JBLGtCQUFjLEVBQ0xBLFdBQXVCLEdBd0UvQkEsVUFBNkIsT0FuRWpDOGxCLEVBQU03USxNQXFGWixPQWxGUzZRLGlCQUFQLFdBQ0UsR0FBMEIsSUFBdEI5bEIsS0FBS3JCLE1BQU16QixTQUFpQjZvQixHQUFhL2xCLE1BRTNDLE9BREFnbUIsR0FBZWhtQixNQUNSQSxLQUFLckIsTUFBTSxJQVVmbW5CLHNCQUFQLFNBQWlCamYsR0FHZixPQUZBOGUsSUFBUzNsQixLQUFLaW1CLFlBQWEsdUJBQzNCRCxHQUFlaG1CLE1BQ1IrbEIsR0FBYS9sQixNQXVGeEIsU0FBeUJrbUIsRUFBaUJyZixHQUN4Q3NmLEdBQWVELEdBR2ZkLEdBQWdCZ0IsVUFBVUYsRUFBT0csR0FBbUIsQ0FBQ0gsRUFBT3JmLElBc0o5RCxTQUF3QnFmLEVBQWlCcmYsR0FDdkMsR0FBK0IsbUJBQXBCcWYsRUFBTTNXLFVBQ2YsSUFDRWlXLEdBQWlCVSxHQUNqQkEsRUFBTWxZLFlBQWNrWSxFQUFNM1csVUFBVTVPLE1BQU0sS0FBTWtHLEdBQ2hELE1BQU9oRyxHQU1QLE9BREFxbEIsRUFBTUksWUFDQyxFQU1YLE9BQU8sRUFyS0hDLENBQWVMLEVBQU9yZixJQTRCNUIsU0FBa0JxZixHQUdoQixHQUZBQSxFQUFNTSxPQUFRLEVBRVZULEdBQWFHLEdBR2YsT0FHRk8sR0FBWVAsR0FsQ1ZRLENBQVNSLEdBR1gsT0FBT0wsR0FBU0ssRUFBTXZuQixPQWxHaEJnb0IsQ0FBZ0IzbUIsS0FBTTZHLEdBQ3RCZ2YsR0FBUzdsQixLQUFLckIsUUFHYm1uQixxQkFBUCxXQUNNOWxCLEtBQUt3bUIsUUFDVHhtQixLQUFLd21CLE9BQVEsRUFDYnhtQixLQUFLckIsTUFBTXpCLE9BQVMsRUFDcEIwcEIsR0FBWTVtQixNQUlad2xCLEdBQWlCeGxCLFFBR1o4bEIsb0JBQVAsV0FBQSxXQUNFOWxCLEtBQUtzbUIsV0FLTEgsR0FBZW5tQixNQWFmNm1CLEdBQVc3bUIsTUFBTSxTQUFDbUssRUFBUXVJLEdBQ3hCdkksRUFBT21jLFdBQ1BRLEdBQVkzYyxFQUFRdEksT0FJakJpa0IsbUJBQVAsV0FJRTlsQixLQUFLNmtCLFdBS0FpQixxQkFBUCxTQUFnQmlCLEdBQ2RBLEVBQUl4YixJQUFJdkwsTUFDRkEsS0FBS2duQixPQUNUaG5CLEtBQUtnbkIsS0FBT3RCLEdBQWF1QixPQUFTLElBQUlwYyxLQUV4QzdLLEtBQUtnbkIsS0FBS3piLElBQUl3YixJQUdUakIsdUJBQVAsV0FBQSxXQUNNOWxCLEtBQUtnbkIsT0FDUDNCLEdBQVFybEIsS0FBS2duQixNQUFNL25CLFNBQVEsU0FBQThuQixHQUFPLE9BQUFBLEVBQUlsUyxPQUFPaFQsTUFDN0M3QixLQUFLZ25CLEtBQUt6SyxRQUNWbUosR0FBYTdoQixLQUFLN0QsS0FBS2duQixNQUN2QmhuQixLQUFLZ25CLEtBQU8sT0F0R0ZsQixRQUFRLE9BMkd4QixTQUFTRSxHQUFldFQsR0FDdEIsSUFBTXZJLEVBQVNpYixHQUFnQjhCLFdBQy9CLEdBQUkvYyxFQWFGLE9BWkF1SSxFQUFNeVUsUUFBUTViLElBQUlwQixHQUVaQSxFQUFPaWQsWUFBWWhjLElBQUlzSCxJQUMzQnZJLEVBQU9pZCxZQUFZM1UsSUFBSUMsRUFBTyxJQUc1QnFULEdBQWFyVCxHQUNmMlUsR0FBaUJsZCxFQUFRdUksR0FFekI0VSxHQUFpQm5kLEVBQVF1SSxHQUdwQnZJLEVBbUJYLFNBQVNrYyxHQUFrQkgsRUFBaUJyZixHQUMxQ3FmLEVBQU1ELGFBQWMsRUFFcEJDLEVBQU12bkIsTUFBTXpCLE9BQVMsRUFDckIsSUFFRWdwQixFQUFNdm5CLE1BQU0sR0FBS3VuQixFQUFNMVksR0FBRzdNLE1BQU0sS0FBTWtHLEdBQ3RDLE1BQU9oRyxHQUVQcWxCLEVBQU12bkIsTUFBTSxHQUFLa0MsRUFHbkJxbEIsRUFBTUQsYUFBYyxFQUd0QixTQUFTRixHQUFhRyxHQUNwQixPQUFPQSxFQUFNTSxVQUFZTixFQUFNcUIsZ0JBQWlCckIsRUFBTXFCLGNBQWM3TSxNQWV0RSxTQUFTa00sR0FBWWxVLEdBQ25CbVUsR0FBV25VLEVBQU8yVSxJQUdwQixTQUFTWixHQUFZL1QsR0FDbkJtVSxHQUFXblUsRUFBTzRVLElBR3BCLFNBQVNULEdBQ1BuVSxFQUNBb0MsR0FFQSxJQUFNMFMsRUFBYzlVLEVBQU15VSxRQUFRek0sS0FDbEMsR0FBSThNLEVBRUYsSUFEQSxJQUFNTCxFQUFVOUIsR0FBUTNTLEVBQU15VSxTQUNyQjdwQixFQUFJLEVBQUdBLEVBQUlrcUIsSUFBZWxxQixFQUNqQ3dYLEVBQVNxUyxFQUFRN3BCLEdBQUlvVixHQU0zQixTQUFTMlUsR0FBaUJsZCxFQUFrQnVJLEdBRzFDaVQsR0FBT3hiLEVBQU9pZCxZQUFZaGMsSUFBSXNILElBQzlCaVQsR0FBT0ksR0FBYXJULElBQ3BCLElBQU0rVSxHQUFrQjFCLEdBQWE1YixHQUVyQyxHQUFNQSxFQUFPb2QsZUFHTixHQUFJcGQsRUFBT29kLGNBQWNuYyxJQUFJc0gsR0FJbEMsWUFOQXZJLEVBQU9vZCxjQUFnQjdCLEdBQWF1QixPQUFTLElBQUlwYyxJQVNuRFYsRUFBT29kLGNBQWNoYyxJQUFJbUgsR0FJckIrVSxHQUNGYixHQUFZemMsR0FLaEIsU0FBU21kLEdBQWlCbmQsRUFBa0J1SSxHQUcxQ2lULEdBQU94YixFQUFPaWQsWUFBWWhjLElBQUlzSCxJQUM5QmlULElBQVNJLEdBQWFyVCxJQUV0QixJQTlQZXRSLEVBQWU3QixFQUN4Qm1vQixFQTZQQUMsRUFBYXhkLEVBQU9pZCxZQUFZblksSUFBSXlELEdBQ2hCLElBQXRCaVYsRUFBV3pxQixPQUNiaU4sRUFBT2lkLFlBQVkzVSxJQUFJQyxFQUFpQkEsRUFBTS9ULE1BM09uQzBNLE1BQU0sS0FyQkpqSyxFQWlRTXVtQixFQWpRU3BvQixFQWlRR21ULEVBQU0vVCxPQWhRakMrb0IsRUFBTXRtQixFQUFFbEUsUUFHTixHQUVOd3FCLElBQVFub0IsRUFBRXJDLFFBRVZrRSxFQUFFc21CLEVBQU0sS0FBT25vQixFQUFFbW9CLEVBQU0sSUEwUHZCdmQsRUFBT21jLFlBR1RzQixHQUFpQnpkLEVBQVF1SSxHQUVyQnFULEdBQWE1YixJQUlqQnNjLEdBQVl0YyxHQUdkLFNBQVN5ZCxHQUFpQnpkLEVBQWtCdUksR0FDMUMsSUFBTW1WLEVBQUsxZCxFQUFPb2QsY0FDZE0sSUFDRkEsRUFBR2hULE9BQU9uQyxHQUNNLElBQVptVixFQUFHbk4sT0FDRGdMLEdBQWF4b0IsT0FwU0UsS0FxU2pCd29CLEdBQWE3aEIsS0FBS2drQixHQUVwQjFkLEVBQU9vZCxjQUFnQixPQU83QixTQUFTcEIsR0FBZWhjLEdBQ2xCQSxFQUFPaWQsWUFBWTFNLEtBQU8sR0FDNUJ2USxFQUFPaWQsWUFBWW5vQixTQUFRLFNBQUM2b0IsRUFBUXBWLEdBQ2xDb1UsR0FBWTNjLEVBQVF1SSxNQU14QnZJLEVBQU80ZCxhQUlQcEMsR0FBZ0MsT0FBekJ4YixFQUFPb2QsZUFHaEIsU0FBU1QsR0FBWTNjLEVBQWtCdUksR0FDckNBLEVBQU15VSxRQUFRdFMsT0FBTzFLLEdBQ3JCQSxFQUFPaWQsWUFBWXZTLE9BQU9uQyxHQUMxQmtWLEdBQWlCemQsRUFBUXVJLEdDalUzQixJQUFNc1YsR0FBZSxDQUNuQjFCLFVBQVUsRUFDVnpCLFNBQVMsRUFDVG9ELFFBQVEsWUFZTWxCLEdBQVV0TyxHQUd4QixJQUFNeVAsRUFBWSxJQUFJM1YsSUFDaEJoRCxFQUFZa0osR0FBV0EsRUFBUWxKLFVBRXJDLFNBQVM0WSxFQUFPbGhCLEdBQ2QsSUFBTWtELEVBQVNpYixHQUFnQjhCLFdBQy9CLEdBQUkvYyxFQUFRLENBQ1YsSUFBSWllLEVBQU1GLEVBQVVqWixJQUFJaEksR0FDbkJtaEIsR0FDSEYsRUFBVXpWLElBQUl4TCxFQUFLbWhCLEVBQU0sSUFBSXZkLEtBRS9CVixFQUFPa2UsU0FBU0QsR0FDUyxtQkFBZDdZLElBQ1RpVyxHQUFpQjRDLEdBQ2pCQSxFQUFJcGEsWUFBY3VCLEVBQVV0SSxLQXdCbEMsT0FuQkFraEIsRUFBTzNCLE1BQVEsU0FDYnZmLEVBQ0FxaEIsR0FFQSxJQUFNdkIsRUFBTW1CLEVBQVVqWixJQUFJaEksR0FDMUIsR0FBSThmLEVBQUssQ0FDUCxJQUFNd0IsRUFDSkQsR0FDQXpvQixHQUFlYSxLQUFLc25CLEdBQWNNLEdBQ2hDQSxFQUFrQixXQUl0QmpELEdBQVEwQixHQUFLOW5CLFNBQVEsU0FBQWluQixHQUFTLE9BQUFBLEVBQU1xQyxRQUNwQ0wsRUFBVXJULE9BQU81TixHQUNqQnVlLEdBQWlCdUIsS0FJZG9CLEVDcENULFNBQVNLLEtBSVAsSUFBTUMsRUFBVSxJQUFJaEYsR0FBbUMsbUJBQVp0TyxTQUMzQyxPQUFPLFdBQ0wsT0FBT3NULEVBQVE5RSxZQUFZbGpCLFlBV0krbkIsS0FvRW5DLElBQU1FLEdBQVMsSUFBSTdkLGFBRUg4ZCxHQU1kQyxFQUNBblEsZ0JBQUFBLEVBQWtEalosT0FBT1csT0FBTyxPQUVoRSxJQUFNNGhCLEVBQVEsSUFBSStDLEdBQ2hCck0sRUFBUW1NLEtBQU9wbkIsS0FBS3FyQixJQUFJLEVBQUcsS0FDM0IsU0FBQTNDLEdBQVMsT0FBQUEsRUFBTXJCLGFBR1hpRSxFQUFVclEsRUFBUXFRLFFBQ2xCQyxFQUFldFEsRUFBUXNRLGNBQzNCUCxLQUVJaEcsRUFBYSxXQUNqQixJQUFNdmIsRUFBTThoQixFQUFhcG9CLE1BQ3ZCLEtBQ0Ftb0IsRUFBVUEsRUFBUW5vQixNQUFNLEtBQU1GLFdBQW9CQSxXQUdwRCxRQUFZLElBQVJ3RyxFQUNGLE9BQU8yaEIsRUFBaUJqb0IsTUFBTSxLQUFNRixXQUd0QyxJQUFJeWxCLEVBQVFuRSxFQUFNOVMsSUFBSWhJLEdBQ2pCaWYsSUFDSG5FLEVBQU10UCxJQUFJeEwsRUFBS2lmLEVBQVEsSUFBSUosR0FBTThDLElBQ2pDMUMsRUFBTTNXLFVBQVlrSixFQUFRbEosVUFHMUIyVyxFQUFNK0IsT0FBUyxXQUFNLE9BQUFsRyxFQUFNbE4sT0FBTzVOLEtBR3BDLElBQU10SSxFQUFRdW5CLEVBQU04QyxVQUNsQnJwQixNQUFNTyxVQUFVbUwsTUFBTTNLLEtBQUtELFlBaUI3QixPQVpBc2hCLEVBQU10UCxJQUFJeEwsRUFBS2lmLEdBRWZ3QyxHQUFPbmQsSUFBSXdXLEdBS0xxRCxHQUFnQnRWLGFBQ3BCNFksR0FBT3pwQixTQUFRLFNBQUE4aUIsR0FBUyxPQUFBQSxFQUFNa0gsV0FDOUJQLEdBQU9uTSxTQUdGNWQsR0FXVCxTQUFTdXFCLEVBQVNqaUIsR0FDaEIsSUFBTWlmLEVBQVFuRSxFQUFNOVMsSUFBSWhJLEdBQ3BCaWYsR0FDRkEsRUFBTUksV0FRVixTQUFTNkMsRUFBUWxpQixHQUNmLElBQU1pZixFQUFRbkUsRUFBTTlTLElBQUloSSxHQUN4QixHQUFJaWYsRUFDRixPQUFPQSxFQUFNa0QsT0FRakIsU0FBU0MsRUFBVXBpQixHQUNqQixPQUFPOGEsRUFBTWxOLE9BQU81TixHQVl0QixPQTNDQXpILE9BQU95TSxlQUFldVcsRUFBWSxPQUFRLENBQ3hDdlQsZUFDRSxPQUFPOFMsRUFBVyxJQUFFckgsTUFFdEIzTyxjQUFjLEVBQ2RELFlBQVksSUFTZDBXLEVBQVcwRyxTQUFXQSxFQUN0QjFHLEVBQVdnRSxNQUFRLFdBQ2pCMEMsRUFBU0gsRUFBYXBvQixNQUFNLEtBQU1GLGFBU3BDK2hCLEVBQVcyRyxRQUFVQSxFQUNyQjNHLEVBQVc0RyxLQUFPLFdBQ2hCLE9BQU9ELEVBQVFKLEVBQWFwb0IsTUFBTSxLQUFNRixhQU0xQytoQixFQUFXNkcsVUFBWUEsRUFDdkI3RyxFQUFXeUYsT0FBUyxXQUNsQixPQUFPb0IsRUFBVU4sRUFBYXBvQixNQUFNLEtBQU1GLGFBRzVDK2hCLEVBQVd1RyxhQUFlQSxFQUMxQnZHLEVBQVc4RyxPQUFTUixFQUFVLFdBQzVCLE9BQU9DLEVBQWFwb0IsTUFBTSxLQUFNbW9CLEVBQVFub0IsTUFBTSxLQUFNRixhQUNsRHNvQixFQUVHdnBCLE9BQU93VCxPQUFPd1AsR0N4TXZCLGtCQUFBLGFBMkdVeGlCLG9CQUFpQjJvQixHQUFLM2tCLEdBc0NoQyxPQTFGU3VsQix3Q0FBUCxTQUNFQyxFQUNBQyxHQUVBenBCLEtBQUswcEIsbUJBQW1CRixFQUFhQyxJQUtoQ0YsOEJBQVAsU0FBeUJ0bEIsR0FDdkIsT0FBT0EsR0FHRnNsQixxQkFBUCxTQUFnQkksS0FJVEosZUFBUCxXQUNFLE1BQU8sSUFHRkEsbUJBQVAsU0FBYzlRLEdBQ1osT0FBTyxHQUtGOFEsNkJBQVAsU0FBd0J0bEIsR0FDdEIsT0FBT0EsR0FTRnNsQixzQkFBUCxTQUNFOVEsRUFDQStKLEdBRUEsb0JBRkFBLElBQWUvSixFQUFRK0osWUFFaEJ4aUIsS0FBSzRwQixLQUFLLENBQ2ZDLE9BQVFwUixFQUFRdFQsSUFBTSxhQUN0Qm9TLE1BQU9rQixFQUFRbEIsTUFDZjdVLFVBQVcrVixFQUFRL1YsVUFDbkJvZSxrQkFBbUJySSxFQUFRcUksa0JBQzNCMEIsZ0JBUUcrRyx5QkFBUCxTQUNFOVEsRUFDQStKLEdBRUEsb0JBRkFBLElBQWUvSixFQUFRK0osWUFFaEJ4aUIsS0FBSzRwQixLQUFLLENBQ2ZyUyxNQUFPdlgsS0FBSzhwQixlQUFlclIsRUFBUTdULFNBQVU2VCxFQUFRdlUsY0FDckR4QixVQUFXK1YsRUFBUS9WLFVBQ25CbW5CLE9BQVFwUixFQUFRdFQsR0FDaEIyYixrQkFBbUJySSxFQUFRcUksa0JBQzNCMEIsZ0JBSUcrRyx1QkFBUCxTQUNFOVEsR0FFQSxPQUFPelksS0FBSytwQixNQUFNLENBQ2hCQyxPQUFRdlIsRUFBUXRULElBQU0sYUFDdEJoSSxPQUFRc2IsRUFBUW5SLEtBQ2hCaVEsTUFBT2tCLEVBQVFsQixNQUNmN1UsVUFBVytWLEVBQVEvVixVQUNuQnVuQixVQUFXeFIsRUFBUXdSLGFBSWhCViwwQkFBUCxTQUNFOVEsR0FFQSxPQUFPelksS0FBSytwQixNQUFNLENBQ2hCQyxPQUFRdlIsRUFBUXRULEdBQ2hCaEksT0FBUXNiLEVBQVFuUixLQUNoQjVFLFVBQVcrVixFQUFRL1YsVUFDbkI2VSxNQUFPdlgsS0FBSzhwQixlQUFlclIsRUFBUTdULFNBQVU2VCxFQUFRdlUsY0FDckQrbEIsVUFBV3hSLEVBQVF3UixxQkN0SXZCLFNBQ2tCdG9CLEVBQ0F1b0IsRUFDQTNTLEVBQ0E0UyxFQUNBem5CLEdBSkExQyxhQUFBMkIsRUFDQTNCLFVBQUFrcUIsRUFDQWxxQixXQUFBdVgsRUFDQXZYLGdCQUFBbXFCLEVBQ0FucUIsZUFBQTBDLEdDWlAwbkIsR0FBUzVxQixPQUFPVSxVQUFVTCxlQVdoQyxJQUFNd3FCLEdBQXdCLDhCQUVyQkMsR0FBdUJDLEdBQ3JDLElBQU1DLEVBQVFELEVBQWVDLE1BQU1ILElBQ25DLE9BQU9HLEVBQVFBLEVBQU0sR0FBS0QsV0FHWkUsR0FDZGptQixFQUNBckgsRUFDQXVGLEdBRUEsU0FBSXZGLEdBQTRCLGlCQUFYQSxLQUNad0MsTUFBTXVJLFFBQVEvSyxHQUNqQkEsRUFBT2lHLE9BQU0sU0FBQW1pQixHQUFRLE9BQUFrRixHQUEwQmptQixFQUFjK2dCLEVBQU03aUIsTUFDbkU4QixFQUFhQyxXQUFXckIsT0FBTSxTQUFBbUYsR0FDOUIsR0FBSUssRUFBUUwsSUFBVTlGLEVBQWM4RixFQUFPN0YsR0FBWSxDQUNyRCxJQUFNdUUsRUFBTXFCLEVBQXVCQyxHQUNuQyxPQUFPNmhCLEdBQU8xcEIsS0FBS3ZELEVBQVE4SixNQUN2QnNCLEVBQU0vRCxjQUNQaW1CLEdBQTBCbGlCLEVBQU0vRCxhQUFjckgsRUFBTzhKLEdBQU12RSxJQU9oRSxPQUFPLGVBTUNnb0IsR0FDZC9yQixHQUVBLE9BQWlCLE9BQVZBLEdBQ1ksaUJBQVZBLElBQ04wRyxFQUFZMUcsS0FDWmdCLE1BQU11SSxRQUFRdkosR0N0Q25CLElBQU1nc0IsR0FBY25yQixPQUFPVyxPQUFPLE1BQzVCeXFCLEdBQTZCLFdBQU0sT0FBQUQsSUFDbkNFLEdBQWtCcnJCLE9BQU9XLE9BQU8sb0JBS3BDLFdBQ2tCMnFCLEVBQ0FDLEdBRmxCLFdBQ2tCL3FCLGNBQUE4cUIsRUFDQTlxQixXQUFBK3FCLEVBSlIvcUIsVUFBOEJSLE9BQU9XLE9BQU8sTUEyUjlDSCxhQUVKUixPQUFPVyxPQUFPLE1BMERWSCxVQUVKUixPQUFPVyxPQUFPLE1BK0JYSCxtQkFBZ0IsU0FDckJnckIsRUFDQVQsR0FDRyxPQUFBMVgsR0FDSHhOLEVBQVkybEIsR0FDUm5wQixFQUFLb04sSUFBSStiLEVBQWtCNWxCLE1BQU9tbEIsR0FDbENTLEdBQXFCQSxFQUFrQlQsS0FNdEN2cUIsYUFBMkIsU0FBQWlyQixHQUNoQyxPQUFPNWxCLEVBQVk0bEIsR0FDZnBwQixFQUFLdUosSUFBSTZmLEVBQVM3bEIsT0FDRSxpQkFBYjZsQixHQU9OanJCLGlCQUFtQyxTQUN4Q2tyQixFQUNBQyxHQUVBLEdBQTRCLGlCQUFqQkQsRUFDVCxPQUFPaG1CLEVBQWNnbUIsR0FHdkIsR0FBSTdsQixFQUFZNmxCLEdBQ2QsT0FBT0EsRUFHRixJQUFBL2xCLEVBQU10RCxFQUFLaXBCLFNBQVNNLFNBQVNGLE1BRXBDLEdBQUkvbEIsRUFBSSxDQUNOLElBQU1rbUIsRUFBTW5tQixFQUFjQyxHQUkxQixPQUhJZ21CLEdBQ0Z0cEIsRUFBSzhJLE1BQU14RixFQUFJK2xCLEdBRVZHLElBR2IsT0FsWlNDLHFCQUFQLFdBQ0UsWUFBWXRyQixLQUFLc0gsT0FHWmdrQixnQkFBUCxTQUFXdEIsR0FDVCxZQUFxQyxJQUE5QmhxQixLQUFLdXJCLE9BQU92QixHQUFRLElBR3RCc0IsZ0JBQVAsU0FBV3RCLEVBQWdCcGpCLEdBRXpCLEdBREE1RyxLQUFLK3FCLE1BQU01QyxPQUFPNkIsRUFBUXBqQixHQUN0QndqQixHQUFPMXBCLEtBQUtWLEtBQUtzSCxLQUFNMGlCLEdBQVMsQ0FDbEMsSUFBTXdCLEVBQWN4ckIsS0FBS3NILEtBQUswaUIsR0FDOUIsR0FBSXdCLEdBQWVwQixHQUFPMXBCLEtBQUs4cUIsRUFBYTVrQixHQUMxQyxPQUFPNGtCLEVBQVk1a0IsR0FHdkIsTUFBa0IsZUFBZEEsR0FDQXdqQixHQUFPMXBCLEtBQUtWLEtBQUs4cUIsU0FBU1csa0JBQW1CekIsR0FDeENocUIsS0FBSzhxQixTQUFTVyxrQkFBa0J6QixHQUVyQ2hxQixnQkFBZ0IwckIsR0FDWDFyQixLQUFLbUssT0FBTzhFLElBQUkrYSxFQUFRcGpCLFFBRGpDLEdBS1Ewa0IsbUJBQVYsU0FBaUJ0QixFQUFnQjJCLEdBUS9CLE9BRklBLEdBQW1CM3JCLEtBQUsrcUIsTUFBTTVDLE9BQU82QixFQUFRLFlBRTdDSSxHQUFPMXBCLEtBQUtWLEtBQUtzSCxLQUFNMGlCLEdBQ2xCaHFCLEtBQUtzSCxLQUFLMGlCLEdBR2ZocUIsZ0JBQWdCMHJCLEdBQ1gxckIsS0FBS21LLE9BQU9vaEIsT0FBT3ZCLEVBQVEyQixHQUdoQzNyQixLQUFLOHFCLFNBQVNXLGtCQUFrQnpCLEdBQzNCeHFCLE9BQU9XLE9BQU8sV0FEdkIsR0FLS21yQixrQkFBUCxTQUFhdEIsRUFBZ0I0QixHQUE3QixXQUNRQyxFQUFXN3JCLEtBQUt1ckIsT0FBT3ZCLEdBQ3ZCOEIsRUFDSixJQUFJaGhCLEVBQVdpaEIsSUFBdUJwaEIsTUFBTWtoQixFQUFVRCxHQUl4RCxHQURBNXJCLEtBQUtzSCxLQUFLMGlCLEdBQVU4QixFQUNoQkEsSUFBV0QsV0FDTjdyQixLQUFLZ3NCLEtBQUtoQyxHQUNiaHFCLEtBQUsrcUIsTUFBTWtCLFNBQVMsQ0FDdEIsSUFBTUMsRUFBbUMxc0IsT0FBT1csT0FBTyxNQUtsRDByQixJQUFVSyxFQUFjQyxTQUFXLEdBSXhDM3NCLE9BQU80SSxLQUFLd2pCLEdBQVUzc0IsU0FBUSxTQUFBc3JCLEdBQzVCLElBQUtzQixHQUFZQSxFQUFTdEIsS0FBb0J1QixFQUFPdkIsR0FBaUIsQ0FHcEUyQixFQUFjM0IsR0FBa0IsRUFTaEMsSUFBTTNqQixFQUFZMGpCLEdBQXVCQyxHQUNyQzNqQixJQUFjMmpCLEdBQ2Ixb0IsRUFBS2lwQixTQUFTc0IsV0FBV04sRUFBT3BqQixXQUFZOUIsS0FDL0NzbEIsRUFBY3RsQixHQUFhLFFBTUUsSUFBM0JrbEIsRUFBT3ZCLElBQWdDMW9CLGFBQWdCNnBCLFdBQ2xESSxFQUFPdkIsT0FLcEIvcUIsT0FBTzRJLEtBQUs4akIsR0FBZWp0QixTQUN6QixTQUFBMkgsR0FBYSxPQUFBL0UsRUFBS2twQixNQUFNdkUsTUFBTXdELEVBQVFwakIsUUFLdkMwa0IsbUJBQVAsU0FDRXRCLEVBQ0Foa0IsR0FGRixXQUlRd2xCLEVBQWN4ckIsS0FBS3VyQixPQUFPdkIsR0FFaEMsR0FBSXdCLEVBQWEsQ0FDZixJQUFNYSxFQUFxQzdzQixPQUFPVyxPQUFPLE1BQ3JEbXNCLEdBQWMsRUFDZEMsR0FBYSxFQUVYQyxFQUFnQixDQUNwQjdCLFVBQ0FFLGNBQ0F4bEIsY0FDQW9uQixZQUFhenNCLEtBQUt5c0IsWUFDbEJDLFFBQVMxc0IsS0FBSzBzQixRQUNkQyxVQUFXLFNBQ1RDLEVBQ0FwYyxHQUNHLE9BQUEzTyxFQUFLaXBCLFNBQVM2QixVQUNhLGlCQUF2QkMsRUFBa0MsQ0FDdkNobUIsVUFBV2dtQixFQUNYcGMsS0FBTUEsR0FBUXRMLEVBQWM4a0IsSUFDMUI0QyxFQUNKLENBQUVDLE1BQU9ockIsTUFtQ2IsR0EvQkFyQyxPQUFPNEksS0FBS29qQixHQUFhdnNCLFNBQVEsU0FBQXNyQixHQUMvQixJQUFNM2pCLEVBQVkwakIsR0FBdUJDLEdBQ3JDdUMsRUFBYXRCLEVBQVlqQixHQUM3QixRQUFtQixJQUFmdUMsRUFBSixDQUNBLElBQU1DLEVBQWlELG1CQUFYL21CLEVBQ3hDQSxFQUNBQSxFQUFPdWtCLElBQW1CdmtCLEVBQU9ZLEdBQ3JDLEdBQUltbUIsRUFBUSxDQUNWLElBQUlDLEVBQVdELElBQVduQyxHQUFjRCxHQUN0Q29DLEVBQU9sYSxHQUFnQmlhLFVBQ2xCTixJQUNINWxCLFlBQ0EyakIsaUJBQ0EwQyxRQUFTcHJCLEVBQUtxckIsV0FBV2xELEVBQVFPLE1BRWpDeUMsSUFBYW5DLEdBQ2ZocEIsRUFBS2twQixNQUFNdkUsTUFBTXdELEVBQVFPLElBRXJCeUMsSUFBYXJDLEtBQVFxQyxPQUFXLEdBQ2hDQSxJQUFhRixJQUNmVCxFQUFjOUIsR0FBa0J5QyxFQUNoQ1YsR0FBYyxFQUNkUSxFQUFhRSxTQUlBLElBQWZGLElBQ0ZQLEdBQWEsT0FJYkQsRUFZRixPQVhBdHNCLEtBQUsySyxNQUFNcWYsRUFBUXFDLEdBRWZFLElBQ0V2c0IsZ0JBQWdCMHJCLEdBQ2xCMXJCLEtBQUtzSCxLQUFLMGlCLFFBQVUsU0FFYmhxQixLQUFLc0gsS0FBSzBpQixHQUVuQmhxQixLQUFLK3FCLE1BQU12RSxNQUFNd0QsRUFBUSxjQUdwQixFQUlYLE9BQU8sR0FTRnNCLG1CQUFQLFNBQ0V0QixFQUNBcGpCLEVBQ0FDLFNBRU0ya0IsRUFBY3hyQixLQUFLdXJCLE9BQU92QixHQUNoQyxHQUFJd0IsRUFBYSxDQUNmLElBQU0zaUIsRUFBVzdJLEtBQUttdEIsY0FBc0IzQixFQUFhLGNBQ25EakIsRUFBaUIzakIsR0FBYUMsRUFDaEM3RyxLQUFLOHFCLFNBQVNzQyxrQkFBa0IsQ0FBRXZrQixXQUFVakMsWUFBV0MsU0FDdkRELEVBQ0osT0FBTzVHLEtBQUsrc0IsT0FBTy9DLEVBQVFPLFVBQ3hCQSxHQUFpQkssTUFDaEJBLElBRU4sT0FBTyxHQUdGVSxrQkFBUCxTQUFhN1MsR0FDWCxJQUFJNFUsR0FBVSxFQWdCZCxPQWZJNVUsRUFBUXRULEtBQ05pbEIsR0FBTzFwQixLQUFLVixLQUFLc0gsS0FBTW1SLEVBQVF0VCxNQUNqQ2tvQixFQUFVcnRCLEtBQUs2VSxPQUFPNEQsRUFBUXRULEdBQUlzVCxFQUFRN1IsVUFBVzZSLEVBQVE1UixPQUUzRDdHLGdCQUFnQjByQixLQUNsQjJCLEVBQVVydEIsS0FBS21LLE9BQU9takIsTUFBTTdVLElBQVk0VSxJQU10QzVVLEVBQVE3UixXQUFheW1CLElBQ3ZCcnRCLEtBQUsrcUIsTUFBTXZFLE1BQU0vTixFQUFRdFQsR0FBSXNULEVBQVE3UixXQUFhLGFBRy9DeW1CLEdBR0YvQixrQkFBUCxXQUNFdHJCLEtBQUtpZSxRQUFRLE9BR1JxTixvQkFBUCxXQUFBLFdBQ1E3cEIsRUFBTXpCLEtBQUt1dEIsV0FDWEMsRUFBeUIsR0FTL0IsT0FSQXh0QixLQUFLeXRCLGVBQWV4dUIsU0FBUSxTQUFBa0csR0FDckJpbEIsR0FBTzFwQixLQUFLbUIsRUFBS2lwQixTQUFTVyxrQkFBbUJ0bUIsSUFDaERxb0IsRUFBYTNwQixLQUFLc0IsTUFHbEJxb0IsRUFBYXR3QixTQUNmdUUsRUFBSWlzQixPQUFTLENBQUVGLGFBQWNBLEVBQWF6bUIsU0FFckN0RixHQUdGNnBCLG9CQUFQLFNBQWVxQyxHQUFmLFdBTUUsR0FMQW51QixPQUFPNEksS0FBS3BJLEtBQUtzSCxNQUFNckksU0FBUSxTQUFBK3FCLEdBQ3ZCMkQsR0FBV3ZELEdBQU8xcEIsS0FBS2l0QixFQUFTM0QsSUFDcENub0IsRUFBS2dULE9BQU9tVixNQUdaMkQsRUFBUyxDQUNILElBQUFELEVBQW9CQyxTQUFUQyxJQUFTRCxFQUF0QixZQUNObnVCLE9BQU80SSxLQUFLd2xCLEdBQU0zdUIsU0FBUSxTQUFBK3FCLEdBQ3hCbm9CLEVBQUs4SSxNQUFNcWYsRUFBUTRELEVBQUs1RCxPQUV0QjBELEdBQ0ZBLEVBQU9GLGFBQWF2dUIsUUFBUWUsS0FBSzZ0QixPQUFRN3RCLFFBaUJ4Q3NyQixtQkFBUCxTQUFjekIsR0FDWixPQUFPN3BCLEtBQUs4dEIsUUFBUWpFLElBQVc3cEIsS0FBSzh0QixRQUFRakUsSUFBVyxHQUFLLEdBR3ZEeUIsb0JBQVAsU0FBZXpCLEdBQ2IsR0FBSTdwQixLQUFLOHRCLFFBQVFqRSxHQUFVLEVBQUcsQ0FDNUIsSUFBTTVVLElBQVVqVixLQUFLOHRCLFFBQVFqRSxHQUU3QixPQURLNVUsVUFBY2pWLEtBQUs4dEIsUUFBUWpFLEdBQ3pCNVUsRUFFVCxPQUFPLEdBS0ZxVyx5QkFBUCxTQUFvQnlDLEdBVWxCLG9CQVZrQkEsTUFBVWxqQixLQUM1QnJMLE9BQU80SSxLQUFLcEksS0FBSzh0QixTQUFTN3VCLFFBQVE4dUIsRUFBSXhpQixJQUFLd2lCLEdBQ3ZDL3RCLGdCQUFnQjByQixHQUNsQjFyQixLQUFLbUssT0FBT3NqQixhQUFhTSxHQUt6QnZ1QixPQUFPNEksS0FBS3BJLEtBQUs4cUIsU0FBU1csbUJBQW1CeHNCLFFBQVE4dUIsRUFBSXhpQixJQUFLd2lCLEdBRXpEQSxHQU9GekMsZUFBUCxXQUFBLFdBQ1F5QyxFQUFNL3RCLEtBQUt5dEIsZUFDWE8sRUFBV2h1QixLQUFLdXRCLFdBQ3RCUSxFQUFJOXVCLFNBQVEsU0FBQWtHLEdBQ05pbEIsR0FBTzFwQixLQUFLc3RCLEVBQVU3b0IsS0FJeEIzRixPQUFPNEksS0FBS3ZHLEVBQUtvc0IsZ0JBQWdCOW9CLElBQUtsRyxRQUFROHVCLEVBQUl4aUIsSUFBS3dpQixVQUdoREMsRUFBUzdvQixPQUdwQixJQUFNK29CLEVBQWMxdUIsT0FBTzRJLEtBQUs0bEIsR0FDaEMsR0FBSUUsRUFBWWh4QixPQUFRLENBRXRCLElBREEsSUFBSWl4QixFQUFvQm51QixLQUNqQm11QixhQUFnQnpDLElBQU95QyxFQUFPQSxFQUFLaGtCLE9BQzFDK2pCLEVBQVlqdkIsU0FBUSxTQUFBa0csR0FBTSxPQUFBZ3BCLEVBQUt0WixPQUFPMVAsTUFFeEMsT0FBTytvQixHQVFGNUMsNEJBQVAsU0FBdUJ0QixHQUNyQixJQUFLSSxHQUFPMXBCLEtBQUtWLEtBQUtnc0IsS0FBTWhDLEdBQVMsQ0FDbkMsSUFBTW9FLEVBQVFwdUIsS0FBS2dzQixLQUFLaEMsR0FBVXhxQixPQUFPVyxPQUFPLE1BQzFDa3VCLEVBQVUsSUFBSXhqQixJQUFJLENBQUM3SyxLQUFLc0gsS0FBSzBpQixLQUc3QnNFLEVBQWMsU0FBQzdzQixHQUFhLE9BQVEsT0FBUkEsR0FBK0IsaUJBQVJBLEdBQ3pENHNCLEVBQVFwdkIsU0FBUSxTQUFBd0MsR0FDVjRELEVBQVk1RCxHQUNkMnNCLEVBQU0zc0IsRUFBSTJELFFBQVMsRUFDVmtwQixFQUFZN3NCLElBQ3JCakMsT0FBTzZHLE9BQU81RSxHQUdYd0gsT0FBT3FsQixHQUNQcnZCLFFBQVFvdkIsRUFBUTlpQixJQUFLOGlCLE1BSTlCLE9BQU9ydUIsS0FBS2dzQixLQUFLaEMsSUFJWnNCLHlCQUFQLGVBQW9CLGFBQUEzaUIsbUJBQUFBLElBQUE5QixrQkFDbEIsT0FBTzdHLEtBQUsrcUIsTUFBTXdELFNBQVM1SyxZQUFZOWMsdUJBcUV6QyxXQUE0Qm9sQixHQUFBanNCLGFBQUFpc0IsRUFGcEJqc0IsT0FBaUQsS0E2QnpDQSxjQUFXLElBQUl3dUIsR0FBZ0J0WixJQTFCN0NsVixLQUFLVixFQUFJMnNCLEVBQVVsRixLQUFnQixLQTJCdkMsT0F4QlMwSCxtQkFBUCxTQUFjekUsRUFBZ0JPLEdBQzVCLEdBQUl2cUIsS0FBS1YsRUFBRyxDQUNWVSxLQUFLVixFQUFFb3ZCLEdBQVcxRSxFQUFRTyxJQUMxQixJQUFNM2pCLEVBQVkwakIsR0FBdUJDLEdBQ3JDM2pCLElBQWMyakIsR0FNaEJ2cUIsS0FBS1YsRUFBRW92QixHQUFXMUUsRUFBUXBqQixNQUt6QjZuQixrQkFBUCxTQUFhekUsRUFBZ0JPLEdBQ3ZCdnFCLEtBQUtWLEdBQ1BVLEtBQUtWLEVBQUVrbkIsTUFBTWtJLEdBQVcxRSxFQUFRTyxVQVN0QyxTQUFTbUUsR0FBVzFFLEVBQWdCTyxHQUlsQyxPQUFPQSxFQUFpQixJQUFNUCxHQUdoQyxTQUFpQnNCLEdBRWYsa0JBUUUsV0FBWTlwQixPQUNWc3BCLGFBQ0EvUixrQkFBQTRWLGdCQUNBNWUsV0FNQW5PLFlBQU1rcEIsRUFBVSxJQUFJMkQsR0FBV0UsaUJBa0JqQjlzQixjQUFjLElBQUkyc0IsR0FBcUJ0WixJQWpCckRyVCxFQUFLK3NCLGlCQUFtQixJQUFJSCxHQUFXRSxHQUNuQzVlLEdBQU1sTyxFQUFLb2MsUUFBUWxPLEtBb0IzQixPQXZDMEJqUSxPQXNCakIrdUIscUJBQVAsU0FDRUMsRUFDQUMsR0FHQSxPQUFPLElBQUlyRCxHQUFNb0QsRUFBUzl1QixLQUFNK3VCLEVBQVEvdUIsS0FBSzR1QixtQkFHeENDLHdCQUFQLFdBRUUsT0FBTzd1QixNQUlGNnVCLHVCQUFQLFdBQ0UsT0FBTzd1QixLQUFLZ3ZCLFlBQVlyTCxZQUFZbGpCLGVBckNkNnFCLEdBQWJBLFNBRmYsQ0FBaUJBLEtBQUFBLFFBOENqQixtQkFDRSxXQUNrQm5tQixFQUNBZ0YsRUFDQTRrQixFQUNBaEUsR0FKbEIsTUFNRW5wQixZQUFNdUksRUFBTzJnQixTQUFVQyxnQkFMUGxwQixLQUFBc0QsRUFDQXRELFNBQUFzSSxFQUNBdEksU0FBQWt0QixFQUNBbHRCLFFBQUFrcEIsRUFHaEJnRSxFQUFPbHRCLEtBeURYLE9BakVvQi9CLE9BV1g0ckIscUJBQVAsU0FDRW9ELEVBQ0FDLEdBRUEsT0FBTyxJQUFJckQsRUFBTW9ELEVBQVM5dUIsS0FBTSt1QixFQUFRL3VCLEtBQUsrcUIsUUFHeENXLHdCQUFQLFNBQW1Cb0QsR0FBbkIsV0FFUTNrQixFQUFTbkssS0FBS21LLE9BQU84a0IsWUFBWUgsR0FFdkMsT0FBSUEsSUFBWTl1QixLQUFLbUYsSUFFZm5GLEtBQUsrcUIsTUFBTWtCLFNBQ2J6c0IsT0FBTzRJLEtBQUtwSSxLQUFLc0gsTUFBTXJJLFNBQVEsU0FBQStxQixHQUt6Qm5vQixFQUFLeUYsS0FBSzBpQixLQUFhN2YsRUFBaUJvaEIsT0FBT3ZCLElBQ2pEbm9CLEVBQUtnVCxPQUFPbVYsTUFJWDdmLEdBSUxBLElBQVduSyxLQUFLbUssT0FBZW5LLEtBRzVCbUssRUFBTytrQixTQUFTbHZCLEtBQUttRixHQUFJbkYsS0FBSyt1QixTQUdoQ3JELHFCQUFQLFdBQ0UsY0FDSzFyQixLQUFLbUssT0FBT29qQixZQUNadnRCLEtBQUtzSCxPQUlMb2tCLDRCQUFQLFNBQXVCMUIsR0FDckIsSUFBTW1GLEVBQWFudkIsS0FBS21LLE9BQU84akIsZ0JBQWdCakUsR0FDL0MsT0FBT0ksR0FBTzFwQixLQUFLVixLQUFLc0gsS0FBTTBpQixVQUN6Qm1GLEdBQ0F2dEIsWUFBTXFzQiwwQkFBZ0JqRSxJQUN2Qm1GLEdBR0N6RCx1QkFBUCxXQUVFLElBREEsSUFBSTlyQixFQUFpQkksS0FBS21LLE9BQ2xCdkssRUFBWXVLLFFBQVF2SyxFQUFLQSxFQUFZdUssT0FDN0MsT0FBT3ZLLEVBQUVzdEIsV0FBV3ZzQixNQUFNZixFQUFHYSxlQS9EYjZxQixJQW1FcEIsU0FBU1MsR0FDUHFELEVBQ0FDLEVBQ0Eza0IsR0FFQSxJQUFNNGtCLEVBQWdCRixFQUFlMWtCLEdBQy9CNmtCLEVBQWdCRixFQUFlM2tCLEdBTXJDLE9BQU8yUixHQUFNaVQsRUFBZUMsR0FBaUJELEVBQWdCQyxXQUcvQ0MsR0FBc0IzQyxHQUVwQyxTQUFVQSxhQUFpQnZCLElBQWV1QixFQUFNOUIsTUFBTWtCLFNDeGtCeEQsU0FBU3dELEdBQ1BuZSxFQUNBdkcsR0FFQSxPQUFPLElBQUkya0IsR0FDVHBlLEVBQUkzUCxRQUNKb0osRUFBUW1mLEtBQUs3ZSxRQUNiTixFQUFRd00sTUFDUnhNLEVBQVFvZixXQUNScGYsRUFBUXJJLFdBcUJaLGtCQUNFLFdBQW9CMFgsR0FBcEIsV0FBb0JwYSxZQUFBb2EsRUFzRVpwYSx5QkFLSjJvQixJQUFLLFNBQUFsUSxHQUFXLE9BQUE1VyxFQUFLOHRCLHFCQUFxQmxYLEtBQVUsQ0FDdERxUSxpQkFBUXJRLEdBQ04sTUFBTyxDQUNMQSxFQUFRalUsYUFDUmlVLEVBQVF1UyxrQkFDUnZTLEVBQVExTixVQUtaZ2Usc0JBQWF2a0IsRUFBYzJGLEVBQVFZLEdBQ2pDLEdBQUl5a0IsR0FBc0J6a0IsRUFBUThoQixPQUNoQyxPQUFPOWhCLEVBQVE4aEIsTUFBTTlELGFBQ25CdmtCLEVBQ0FhLEVBQVk4RSxHQUFVQSxFQUFPL0UsTUFBUStFLEVBQ3JDWSxFQUFRNmtCLGNBb0tSNXZCLGtCQUFlLElBQUltVixRQUduQm5WLDZCQUEwQjJvQixJQUFLLFNBQUNsUSxHQUN0QyxPQUFPNVcsRUFBS2d1Qix5QkFBeUJwWCxLQUNwQyxDQUNEc1Esc0JBQWF2bkIsT0FBRStHLFVBQU9tYixVQUFPM1ksWUFDM0IsR0FBSXlrQixHQUFzQnprQixFQUFROGhCLE9BQ2hDLE9BQU85aEIsRUFBUThoQixNQUFNOUQsYUFDbkJ4Z0IsRUFDQW1iLEVBQ0EzWSxFQUFRNmtCLGNBeFFkNXZCLEtBQUtvYSxVQUFXMFYsYUFBYSxHQUFTMVYsR0E4VTFDLE9BcFVTMlYsa0NBQVAsU0FBZ0N2dUIsT2xEMUIxQnd1QixFa0QyQkpuRCxVQUNBdFYsVUFDQXdCLFdBQUE4USxhQUFTLGVBQ1RubkIsY0FDQWtZLHNCQUFBa0csZ0JBRU1nSyxFQUFXOXFCLEtBQUtvYSxPQUFPMkgsTUFBTStJLFNBRW5DcG9CLFNBQ0s2RyxNbERwQ0R5bUIsRUFBVzltQixFa0RvQzBCcU8sK0RsRDdCcEN5WSxLa0Q4QkF0dEIsR0FHTCxJQUFNdXRCLEVBQWFqd0IsS0FBS2t3QixvQkFBb0IsQ0FDMUMxckIsYUFBYzRFLEVBQWtCbU8sR0FBTy9TLGFBQ3ZDd21CLGtCQUFtQjlsQixFQUFjMmtCLEdBQ2pDOWUsUUFBUyxDQUNQOGhCLFFBQ0F0VixRQUNBdVQsV0FDQXBvQixZQUNBa3RCLFVBQVcxb0IsS0FBS0MsVUFBVXpFLEdBQzFCcUMsWUFBYUwsRUFBa0J5RSxFQUF1Qm9PLElBQ3REMlMsS0FBTSxHQUNOQyxZQUFZLEtBSVZnRyxFQUNKRixFQUFXRyxTQUFXSCxFQUFXRyxRQUFRbHpCLE9BQVMsRUFDcEQsR0FBSWl6QixJQUFxQnJQLEVBQ3ZCLE1BQU1tUCxFQUFXRyxRQUFTLEdBRzVCLE1BQU8sQ0FDTGp6QixPQUFROHlCLEVBQVc5eUIsT0FDbkJpekIsUUFBU0gsRUFBV0csUUFDcEIvZ0IsVUFBVzhnQixJQUlSSixvQkFBUCxTQUNFNXlCLEVBQ0FnTixFQUNBM0YsRUFDQXVHLEdBRUEsR0FBSXlrQixHQUFzQnprQixFQUFROGhCLFFBQzlCN3NCLEtBQUtxd0IsYUFBYXBoQixJQUFJOVIsS0FBWXFILEVBQWMsQ0FDbEQsSUFBTXVQLEVBQVMvVCxLQUFLa3dCLG9CQUFvQjlHLEtBQUs1a0IsRUFBYzJGLEVBQVFZLEdBQ25FLEdBQUlnSixHQUFVNVcsSUFBVzRXLEVBQU81VyxPQUM5QixPQUFPLEVBR1gsT0FBTyxHQStCRDR5QixpQ0FBUixTQUE2QnZ1QixHQUE3QixXQUNFZ0QsaUJBQ0F3bUIsc0JBQ0FqZ0IsWUFFQSxHQUFJMUYsRUFBWTJsQixLQUNYamdCLEVBQVErZixTQUFTVyxrQkFBa0JULEVBQWtCNWxCLFNBQ3JEMkYsRUFBUThoQixNQUFNemhCLElBQUk0ZixFQUFrQjVsQixPQUN2QyxNQUFPLENBQ0xqSSxPQUFRLEdBQ1JpekIsUUFBUyxDQUFDWCxrRUFTTixJQUFBL3NCLEVBQStCcUksWUFBcEIrZixFQUFvQi9mLFdBQVY4aEIsRUFBVTloQixRQUNqQ3VsQixFQUEyQyxHQUMzQ0MsRUFBMEIsQ0FBRXB6QixPQUFRLE1BQ3BDMEwsRUFBV2drQixFQUFNTSxjQUFzQm5DLEVBQW1CLGNBV2hFLFNBQVN3RixJQUNQLE9BQU9ELEVBQVlILFVBQVlHLEVBQVlILFFBQVUsSUFHdkQsU0FBU0ssRUFBaUJ0ekIsU0FFeEIsT0FESUEsRUFBT2l6QixVQUFTNXVCLEVBQUFndkIsS0FBYTNzQixhQUFRMUcsRUFBT2l6QixTQUN6Q2p6QixFQUFPQSxPQWZaNkMsS0FBS29hLE9BQU8wVixhQUNRLGlCQUFiam5CLElBQ05paUIsRUFBUzRGLGtCQUFrQjduQixJQUk5QnluQixFQUFlenNCLEtBQUssQ0FBRTZFLFdBQVlHLElBWXBDLElBQU1pSyxFQUFVLElBQUlqSSxJQUFJckcsRUFBYUMsWUFnSHJDLE9BOUdBcU8sRUFBUTdULFNBQVEsU0FBQTZGLFNBR2QsR0FBS3JDLEVBQWNxQyxFQUFXcEMsR0FFOUIsR0FBSWtHLEVBQVE5RCxHQUFZLENBQ3RCLElBQUlnb0IsRUFBYWhDLEVBQVM2QixVQUFVLENBQ2xDL2xCLFVBQVc5QixFQUFVOUIsS0FBS3JFLE1BQzFCNEosTUFBT3pELEVBQ1BwQyxVQUFXcUksRUFBUXJJLFVBQ25COE4sS0FBTXdhLEdBQ0xqZ0IsR0FFRzRsQixFQUFhcm9CLEVBQXVCeEQsR0FDMUNpRyxFQUFRbWYsS0FBS3JtQixLQUFLOHNCLEdBS2xCLElBQU1DLEVBQWdCN2xCLEVBQVFvZixXQUc5QnBmLEVBQVFvZixXQUFheUcsTUFJbkI5ckIsRUFBVW5DLGFBQ1ZtQyxFQUFVbkMsV0FBV29CLE1BQUssU0FBQXpFLEdBQUssTUFBaUIsV0FBakJBLEVBQUUwRCxLQUFLckUsZUFHckIsSUFBZm11QixFQUNHL2lCLEVBQXNCTSxNQUFNdkYsSUFDL0IwckIsSUFBYTNzQixLQUNYNHJCLDhCQUlrQzNxQiwyQkFDMUJrbUIsRUFBa0I1bEIsTUFBUSxVQUMxQixVQUFZOEIsS0FBS0MsVUFBVTZqQixFQUFtQixLQUFNLEtBRTFEamdCLElBS0dwTCxNQUFNdUksUUFBUTRrQixHQUN2QkEsRUFBYTJELEVBQWM1dUIsRUFBS2d2Qix3QkFBd0IsQ0FDdER0b0IsTUFBT3pELEVBQ1A0ZSxNQUFPb0osRUFDUC9oQixhQUdRakcsRUFBVU4sYUFjRyxNQUFkc29CLElBSVRBLEVBQWEyRCxFQUFjNXVCLEVBQUtxdUIsb0JBQW9CLENBQ2xEMXJCLGFBQWNNLEVBQVVOLGFBQ3hCd21CLGtCQUFtQjhCLEVBQ25CL2hCLGVBZkErbEIsR0FDRS9sQixFQUFROGhCLE1BQ1IvbkIsRUFDQWdvQixHQUVGamEsR0FBZ0JpYSxTQWNELElBQWZBLEdBQ0Z3RCxFQUFlenNCLGFBQVE4c0IsR0FBYTdELE1BR3RDL2hCLEVBQVFvZixXQUFheUcsRUFFckIxdUIsRUFBVTZJLEVBQVFtZixLQUFLakQsUUFBVTBKLE9BRTVCLENBQ0wsSUFBTS9yQixFQUFXQyxFQUNmQyxFQUNBaUcsRUFBUWhHLGFBR05ILEdBQVlrbUIsRUFBU2lHLGdCQUFnQm5zQixFQUFVaUUsSUFDakRqRSxFQUFTSixhQUFhQyxXQUFXeEYsUUFBUTZULEVBQVF2SCxJQUFLdUgsT0FPNUR5ZCxFQUFZcHpCLGdCaERsU2tCaVQsR0FDaEMsSUFBSTVGLEVBQVM0RixFQUFRLElBQU8sR0FDdEI2RSxFQUFRN0UsRUFBUWxULE9BQ3RCLEdBQUkrWCxFQUFRLEVBRVYsSUFEQSxJQUFNK2IsRUFBUyxJQUFJbG1CLEVBQ1Z4TixFQUFJLEVBQUdBLEVBQUkyWCxJQUFTM1gsRUFDM0JrTixFQUFTd21CLEVBQU9ybUIsTUFBTUgsRUFBUTRGLEVBQVE5UyxJQUcxQyxPQUFPa04sRWdEeVJnQnltQixDQUFlWCxHQUdsQzl3QixPQUFPd1QsT0FBT3VkLEVBQVlwekIsUUFLNUI2QyxLQUFLcXdCLGFBQWE1ZCxJQUFJOGQsRUFBWXB6QixPQUFRcUgsR0FFbkMrckIsR0FxQkRSLHFDQUFSLFNBQWlDdnVCLEdBQWpDLElBS000dUIsU0FKSjduQixVQUNBbWIsVUFDQTNZLFlBSUEsU0FBUzBsQixFQUFpQlMsRUFBNEI1ekIsR0FRcEQsT0FQSTR6QixFQUFZZCxVQUNkQSxFQUFVQSxHQUFXLElBQ2J2c0IsV0FBUnVzQixFQUFnQmMsRUFBWWQsU0FHOUJsdUIsRUFBVTZJLEVBQVFtZixLQUFLakQsUUFBVTNwQixHQUUxQjR6QixFQUFZL3pCLE9BOENyQixPQTNDSW9MLEVBQU0vRCxlQUNSa2YsRUFBUUEsRUFBTXphLE9BQU84QixFQUFROGhCLE1BQU1ILFVBR3JDaEosRUFBUUEsRUFBTXpkLEtBQUksU0FBQ3NmLEVBQU1qb0IsR0FFdkIsT0FBYSxPQUFUaW9CLEVBQ0ssTUFHVHhhLEVBQVFtZixLQUFLcm1CLEtBQUt2RyxHQUdkcUMsTUFBTXVJLFFBQVFxZCxHQUNUa0wsRUFBYzV1QixFQUFLZ3ZCLHdCQUF3QixDQUNoRHRvQixRQUNBbWIsTUFBTzZCLEVBQ1B4YSxZQUNFek4sR0FJRmlMLEVBQU0vRCxhQUNEaXNCLEVBQWM1dUIsRUFBS3F1QixvQkFBb0IsQ0FDNUMxckIsYUFBYytELEVBQU0vRCxhQUNwQndtQixrQkFBbUJ6RixFQUNuQnhhLFlBQ0V6TixJQUlKd3pCLEdBQTZCL2xCLEVBQVE4aEIsTUFBT3RrQixFQUFPZ2QsR0FHckRyakIsRUFBVTZJLEVBQVFtZixLQUFLakQsUUFBVTNwQixHQUUxQmlvQixPQUlQL2xCLE9BQU93VCxPQUFPMFEsR0FHVCxDQUFFdm1CLE9BQVF1bUIsRUFBTzBNLGlCQUk1QixTQUFTVSxHQUNQakUsRUFDQXRrQixFQUNBdWtCLEdBRUEsSUFBS3ZrQixFQUFNL0QsYUFBYyxDQUN2QixJQUFNNnBCLEVBQVUsSUFBSXhqQixJQUFJLENBQUNpaUIsSUFDekJ1QixFQUFRcHZCLFNBQVEsU0FBQU4sR0FDVkEsR0FBMEIsaUJBQVZBLGlFRjdaeEJrdUIsRUFDQTdCLEdBRUEsT0FBTzNsQixFQUFZMmxCLEdBQ2Y2QixFQUFNNWQsSUFBSStiLEVBQWtCNWxCLE1BQU8sY0FDbkM0bEIsR0FBcUJBLEVBQWtCdGlCLDRERStackNsSixPQUFPNkcsT0FBTzFILEdBQU9NLFFBQVFvdkIsRUFBUTlpQixJQUFLOGlCLFFDOVhsRCxrQkFDRSxXQUNrQnRNLEVBQ1JvUCxHQURRbnhCLFdBQUEraEIsRUFDUi9oQixZQUFBbXhCLEVBdVlaLE9BdFhTQyx5QkFBUCxTQUFvQjV2QixPQUNsQitWLFVBQ0FwYSxXQUNBNnNCLFdBQ0E2QyxVQUNBbnFCLGNBRU0ydUIsRUFBc0Jub0IsRUFBdUJxTyxHQUM3Q3laLEVIZkQsSUFBSWxtQixFR2lCVHBJLFNBQ0s2RyxFQUFpQjhuQixJQUNqQjN1QixHQUdMLElBQU0yb0IsRUFBTXJyQixLQUFLc3hCLG9CQUFvQixDQUNuQ24wQixPQUFRQSxHQUFVcUMsT0FBT1csT0FBTyxNQUNoQzZwQixTQUNBeGxCLGFBQWM2c0IsRUFBb0I3c0IsYUFDbEMrc0IsVUFBVyxDQUFFdHJCLElBQUssSUFBSXNNLEtBQ3RCeEgsUUFBUyxDQUNQOGhCLFFBQ0EyRSxRQUFTaHlCLE9BQU9XLE9BQU8sTUFDdkJ3SyxNQUFBLFNBQVNraEIsRUFBYUQsR0FDcEIsT0FBT29GLEVBQU9ybUIsTUFBTWtoQixFQUFVRCxJQUVoQ2xwQixZQUNBa3RCLFVBQVcxb0IsS0FBS0MsVUFBVXpFLEdBQzFCcUMsWUFBYUwsRUFBa0J5RSxFQUF1Qm9PLE9BSTFELElBQUtsUyxFQUFZZ21CLEdBQ2YsTUFBb0Usc0RBVXRFLE9BRkF3QixFQUFNZ0IsT0FBT3hDLEVBQUlqbUIsT0FFVmltQixHQUdEK0YsZ0NBQVIsU0FBNEI1dkIsR0FBNUIsV0FDRXdvQixXQUNBN3NCLFdBQ0FxSCxpQkFDQXVHLFlBR0F3bUIsY0FFUXpHLEVBQWE5cUIsS0FBSytoQixlQUlwQmhKLEVBQWtCK1IsRUFBU00sU0FDL0JqdUIsRUFBUXFILEVBQWN1RyxFQUFRaEcsYUFEekJJLE9BQUlzc0IsT0FPWCxHQUFJLGlCQUZKekgsRUFBU0EsR0FBVTdrQixHQUVhLENBTTlCLElBQU11c0IsRUFBTzNtQixFQUFReW1CLFFBQVF4SCxLQUFZamYsRUFBUXltQixRQUFReEgsR0FBVSxJQUM3RHFCLEVBQU1ubUIsRUFBYzhrQixHQUMxQixHQUFJMEgsRUFBS3Z6QixRQUFRcUcsSUFBaUIsRUFBRyxPQUFPNm1CLEVBUTVDLEdBUEFxRyxFQUFLN3RCLEtBQUtXLEdBT054RSxLQUFLbXhCLFFBQVVueEIsS0FBS214QixPQUFPUSxRQUM3QngwQixFQUNBa3VCLEVBQ0E3bUIsRUFDQXVHLEdBRUEsT0FBT3NnQixFQU1YLElBQUl1RyxFQUE4QnB5QixPQUFPVyxPQUFPLE1BSTVDc3hCLElBQ0ZHLEVBQWlCN21CLEVBQVFKLE1BQU1pbkIsRUFBZ0JILElBTWpELElBQU01b0IsRUFDSG1oQixHQUFVYyxFQUFTVyxrQkFBa0J6QixJQUN0Q3ZoQixFQUFzQnRMLEVBQVFxSCxFQUFjdUcsRUFBUWhHLGNBQ25EaWxCLEdBQVVqZixFQUFROGhCLE1BQU01ZCxJQUFJK2EsRUFBUSxjQUVuQyxpQkFBb0JuaEIsSUFDdEIrb0IsRUFBZWxwQixXQUFhRyxHQUc5QixJQUFNaUssRUFBVSxJQUFJakksSUFBSXJHLEVBQWFDLFlBNEZyQyxHQTFGQXFPLEVBQVE3VCxTQUFRLFNBQUE2RixTQUNkLEdBQUtyQyxFQUFjcUMsRUFBV2lHLEVBQVFySSxXQUV0QyxHQUFJa0csRUFBUTlELEdBQVksQ0FDdEIsSUFBTStzQixFQUFpQnZwQixFQUF1QnhELEdBQ3hDbkcsRUFBUXhCLEVBQU8wMEIsR0FFckIsUUFBcUIsSUFBVmx6QixFQUF1QixDQUNoQyxJQUFNNHJCLEVBQWlCTyxFQUFTc0Msa0JBQWtCLENBQ2hEdmtCLFdBQ0FqQyxVQUFXOUIsRUFBVTlCLEtBQUtyRSxNQUMxQjRKLE1BQU96RCxFQUNQcEMsVUFBV3FJLEVBQVFySSxZQUdmb3ZCLEVBQVlDLEdBQWtCUixFQUFXaEgsR0FFM0NnRixFQUNGMXRCLEVBQUttd0Isa0JBQWtCcnpCLEVBQU9tRyxFQUFXaUcsRUFBUyttQixHQUU5Q0csRUFBZ0JudEIsRUFBVU4sY0FDM0J1RyxFQUFROGhCLE1BQU1NLGNBQXNCb0MsRUFBOEIsb0JBQ2xFLEVBRUM1a0IsRUFBUW1nQixFQUFTb0gsaUJBQ3JCcnBCLEVBQ0EvRCxFQUFVOUIsS0FBS3JFLE1BQ2ZzekIsR0FHRXRuQixFQUNGbW5CLEVBQVUxVSxLQUFPLENBR2Y3VSxNQUFPekQsRUFDUCtELFdBQ0E4QixTQUdGd25CLEdBQTJCWixFQUFXaEgsR0FHeENxSCxFQUFpQjdtQixFQUFRSixNQUFNaW5CLFVBQzVCckgsR0FBaUJnRixXQUdmLEdBQ0x6RSxFQUFTc0gscUJBQ1I3dUIsRUFBYyxDQUFDLFFBQVMsVUFBV3VCLEdBRXBDLHVGQVFHLENBRUwsSUFBTUYsRUFBV0MsRUFDZkMsRUFDQWlHLEVBQVFoRyxhQUdOSCxHQW1CQWttQixFQUFTaUcsZ0JBQWdCbnNCLEVBQVVpRSxFQUFVMUwsRUFBUTROLEVBQVFySSxZQUMvRGtDLEVBQVNKLGFBQWFDLFdBQVd4RixRQUFRNlQsRUFBUXZILElBQUt1SCxPQUt4RCxpQkFBb0JrWCxFQUFRLENBQzlCLElBQU1xSSxFQUFZbnRCLEVBQWM4a0IsR0FFNUJ1SCxFQUFVdHJCLElBQUl5VSxPQUNoQmtYLEVBQWlCNXhCLEtBQUtzeUIsWUFBWWYsRUFBV2MsRUFBV1QsRUFBZ0I3bUIsSUFJeEUsSUFFTXduQixFQUEwQixJQUFJMW5CLElBQ3BDaUksRUFBUTdULFNBQVEsU0FBQTZGLEdBQ1Y4RCxFQUFROUQsSUFBY0EsRUFBVU4sY0FDbEMrdEIsRUFBd0JobkIsSUFBSXpHLEVBQVU5QixLQUFLckUsVUE0QmpELE9BbkJFYSxPQUFPNEksS0FBS3dwQixHQUFnQjN5QixTQUFRLFNBQUFzckIsSUFkWixTQUFDQSxHQUN2QixPQUFBZ0ksRUFBd0JubkIsSUFBSWtmLEdBQXVCQyxLQWtCL0NpSSxDQUFnQmpJLEtBVkcsU0FBQ0EsR0FDeEIsSUFBTXVILEVBQVlQLEVBQVV0ckIsSUFBSWdKLElBQUlzYixHQUNwQyxPQUFPamxCLFFBQVF3c0IsR0FBYUEsRUFBVTFVLE1BQVEwVSxFQUFVMVUsS0FBS3pTLE9BU3hEOG5CLENBQWlCbEksSUEyS2hDLFNBQ0VtSSxFQUNBQyxFQUNBcEksRUFDQXNDLEdBRUEsSUFBTStGLEVBQVcsU0FBQzNILEdBQ2hCLElBQU12WSxFQUFRbWEsRUFBTU0sY0FBMkJsQyxFQUFVVixHQUN6RCxNQUF3QixpQkFBVjdYLEdBQXNCQSxHQUdoQ21aLEVBQVcrRyxFQUFTRixHQUMxQixJQUFLN0csRUFBVSxPQUVmLElBQU1ELEVBQVdnSCxFQUFTRCxHQUMxQixJQUFLL0csRUFBVSxPQUlmLEdBQUl2bUIsRUFBWXdtQixHQUFXLE9BSTNCLEdBQUl4UCxHQUFNd1AsRUFBVUQsR0FBVyxPQUsvQixHQUFJcHNCLE9BQU80SSxLQUFLeWpCLEdBQVV6b0IsT0FDeEIsU0FBQTZELEdBQU8sWUFBdUMsSUFBdkM0bEIsRUFBTU0sY0FBY3ZCLEVBQVUza0IsTUFDckMsT0FHRixJQUFNNHJCLEVBQ0poRyxFQUFNTSxjQUFzQnVGLEVBQWEsZUFDekM3RixFQUFNTSxjQUFzQndGLEVBQWEsY0FDckMvckIsRUFBWTBqQixHQUF1QkMsR0FDbkN1SSxFQUFpQkQsTUFBY2pzQixFQUVyQyxHQUFJbXNCLEdBQVMzbkIsSUFBSTBuQixHQUFjLE9BQy9CQyxHQUFTeG5CLElBQUl1bkIsR0FFYixJQUFNRSxFQUEyQixHQUc1QnJ6QixNQUFNdUksUUFBUTJqQixJQUNkbHNCLE1BQU11SSxRQUFRMGpCLElBQ2pCLENBQUNDLEVBQVVELEdBQVUzc0IsU0FBUSxTQUFBeVQsR0FDM0IsSUFBTTdKLEVBQVdna0IsRUFBTU0sY0FBY3phLEVBQU8sY0FDcEIsaUJBQWI3SixHQUNObXFCLEVBQWVDLFNBQVNwcUIsSUFDM0JtcUIsRUFBZW52QixLQUFLZ0YscUtBVXRCLHFDQUNFbXFCLEVBQWVyWCxLQUFLLFNBQVcsOENBQ2pDLDhDQUVKbVgsNkVBR1k1ckIsS0FBS0MsVUFBVTBrQixHQUFVeGdCLE1BQU0sRUFBRyxzQkFDbENuRSxLQUFLQyxVQUFVeWtCLEdBQVV2Z0IsTUFBTSxFQUFHLHVSQS9PcEM2bkIsQ0FDRWIsRUFDQVQsRUFDQXJILEVBQ0F4ZixFQUFROGhCLFVBTWhCOWhCLEVBQVE4aEIsTUFBTWxpQixNQUFNcWYsRUFBUTRILEdBRXJCUyxFQUdULE9BQU9ULEdBR0RSLDhCQUFSLFNBQ0V6eUIsRUFDQTRKLEVBQ0F3QyxFQUNBd21CLEdBSkYsV0FNRSxPQUFLaHBCLEVBQU0vRCxjQUEwQixPQUFWN0YsRUFPdkJnQixNQUFNdUksUUFBUXZKLEdBQ1RBLEVBQU1zSCxLQUFJLFNBQUNzZixFQUFNam9CLEdBQ3RCLElBQU1xQixFQUFRa0QsRUFBS213QixrQkFDakJ6TSxFQUFNaGQsRUFBT3dDLEVBQVNnbkIsR0FBa0JSLEVBQVdqMEIsSUFFckQsT0FEQTYwQixHQUEyQlosRUFBV2owQixHQUMvQnFCLEtBSUpxQixLQUFLc3hCLG9CQUFvQixDQUM5Qm4wQixPQUFRd0IsRUFDUjZGLGFBQWMrRCxFQUFNL0QsYUFDcEJ1RyxVQUNBd21CLGNBaEJ1RG5mLEdBQVV6VCxJQW9CN0R5eUIsd0JBQVIsU0FDRUcsRUFDQTFGLEVBQ0FELEVBQ0E3Z0IsRUFDQW9vQixnQkFFQSxHQUFJNUIsRUFBVXRyQixJQUFJeVUsT0FBU3JWLEVBQVl1bUIsR0FBVyxDQUNoRCxJQTZCSVMsRUE3QkUrRyxFQUlIenpCLE1BQU11SSxRQUFRMGpCLEtBSWR2bUIsRUFBWXdtQixLQUFhbkIsR0FBd0JtQixRQUNyQyxFQUFYQSxFQUtFd0gsRUFBSXpILEVBTU53SCxJQUFNRCxJQUNSQSxFQUFpQixDQUFDOXRCLEVBQVkrdEIsR0FBS0EsRUFBRWh1QixNQUFRZ3VCLElBVS9DLElBQU1FLEVBQVcsU0FDZjlpQixFQUNBeE4sR0FFQSxPQUFPckQsTUFBTXVJLFFBQVFzSSxHQUNBLGlCQUFUeE4sRUFBb0J3TixFQUFLeE4sUUFBUSxFQUN6QytILEVBQVE4aEIsTUFBTU0sY0FBYzNjLEVBQU14TyxPQUFPZ0IsS0FHL0N1dUIsRUFBVXRyQixJQUFJaEgsU0FBUSxTQUFDNnlCLEVBQVd2SCxHQUM1QjRJLEdBQ0ZBLEVBQWV0dkIsS0FBSzBtQixHQUV0QixJQUFNZ0osRUFBT0QsRUFBU0YsRUFBRzdJLEdBQ25CaUosRUFBT0YsRUFBU0QsRUFBRzlJLEdBQ25Ca0osRUFBTzV4QixFQUFLeXdCLFlBQ2hCUixFQUNBeUIsRUFDQUMsRUFDQXpvQixFQUNBb29CLEdBRUVNLElBQVNELElBQ1huSCxFQUFnQkEsR0FBaUIsSUFBSTlaLEtBQ3ZCRSxJQUFJOFgsRUFBZ0JrSixHQUVoQ04sR0FDRmp4QixFQUFVaXhCLEVBQWVsTSxRQUFVc0QsTUFJbkM4QixJQUVGVCxFQUFZanNCLE1BQU11SSxRQUFRbXJCLEdBQUtBLEVBQUVob0IsTUFBTSxRQUFVZ29CLEdBQ2pEaEgsRUFBY3B0QixTQUFRLFNBQUNOLEVBQU9xRSxHQUMzQjRvQixFQUFpQjVvQixHQUFRckUsTUFLaEMsT0FBSTR5QixFQUFVblUsS0FDTHBkLEtBQUsraEIsTUFBTStJLFNBQVM0SSxpQkFDekI3SCxFQUNBRCxFQUNBMkYsRUFBVW5VLEtBQ1ZyUyxFQUNBb29CLElBQWtCM3hCLEVBQUF1SixFQUFROGhCLE9BQU1LLG1CQUFjaUcsSUFJM0N2SCxRQUlMK0gsR0FBa0MsR0FFeEMsU0FBUzVCLEdBQ1B2d0IsRUFDQXdCLE9BREVpRCxRQU1GLE9BSEtBLEVBQUltRixJQUFJcEksSUFDWGlELEVBQUl3TSxJQUFJelAsRUFBTTJ3QixHQUFtQjFNLE9BQVMsQ0FBRWhoQixJQUFLLElBQUlzTSxNQUVoRHRNLEVBQUlnSixJQUFJak0sR0FHakIsU0FBU212QixHQUNQM3dCLEVBQ0F3QixPQURFaUQsUUFHSTZyQixFQUFZN3JCLEVBQUlnSixJQUFJak0sSUFDdEI4dUIsR0FDQ0EsRUFBVTFVLE1BQ1YwVSxFQUFVN3JCLElBQUl5VSxPQUNqQmlaLEdBQW1COXZCLEtBQUtpdUIsR0FDeEI3ckIsRUFBSTRPLE9BQU83UixJQUlmLElBQU0rdkIsR0FBVyxJQUFJbG9CLElDNWNkLElBQU0rb0IsR0FBWSxJQUFJeFAsR0FFdkJ5UCxHQUFlLElBQUkxZSxRQUt6QixTQUFTMmUsR0FBYS9SLEdBQ3BCLElBQUkzRSxFQUFPeVcsR0FBYTVrQixJQUFJOFMsR0FPNUIsT0FOSzNFLEdBQ0h5VyxHQUFhcGhCLElBQUlzUCxFQUFPM0UsRUFBTyxDQUM3QjJXLEtBQU0sSUFBSWxwQixJQUNWa2MsSUFBS0EsT0FHRjNKLFdBbUJPNFcsR0FBV3IxQixHQUN6QixJQUFNK3BCLEVBQVMsSUFBSTdkLElBQ2JvcEIsRUFBWSxJQUFJcHBCLElBRWhCcXBCLEVBQXFCLFNBQVVsSCxHQUNuQyxHQUFJdnNCLFVBQVV2RCxPQUFTLEdBQ3JCLEdBQUl5QixJQUFVcXVCLEVBQVUsQ0FDdEJydUIsRUFBUXF1QixFQUNSdEUsRUFBT3pwQixTQUFRLFNBQUE4aUIsR0FJYitSLEdBQWEvUixHQUFPZ0YsSUFBSVAsTUFBTTBOLEdBRzlCakssR0FBVWxJLE1BR1osSUFBTW9TLEVBQWV4MEIsTUFBTTZRLEtBQUt5akIsR0FDaENBLEVBQVUxWCxRQUNWNFgsRUFBYWwxQixTQUFRLFNBQUFtMUIsR0FBWSxPQUFBQSxFQUFTejFCLFdBRXZDLENBSUwsSUFBTW9qQixFQUFRNlIsR0FBVTFNLFdBQ3BCbkYsSUFDRnNTLEVBQU90UyxHQUNQK1IsR0FBYS9SLEdBQU9nRixJQUFJbU4sSUFJNUIsT0FBT3YxQixHQUdUdTFCLEVBQUdJLGFBQWUsU0FBQUYsR0FFaEIsT0FEQUgsRUFBVTFvQixJQUFJNm9CLEdBQ1AsV0FDTEgsRUFBVXBmLE9BQU91ZixLQUlyQixJQUFNQyxFQUFTSCxFQUFHSyxZQUFjLFNBQUF4UyxHQUc5QixPQUZBMkcsRUFBT25kLElBQUl3VyxHQUNYK1IsR0FBYS9SLEdBQU9nUyxLQUFLeG9CLElBQUkyb0IsR0FDdEJBLEdBS1QsT0FGQUEsRUFBR00sWUFBYyxTQUFBelMsR0FBUyxPQUFBMkcsRUFBTzdULE9BQU9rTixJQUVqQ21TLEVBU1QsU0FBU2pLLEdBQVVsSSxHQUNiQSxFQUFNMFMsa0JBQ1IxUyxFQUFNMFMsbUJDb0JWLFNBQVNDLEdBQXVCQyxHQUM5QixZQUFxQixJQUFkQSxFQUFLOXRCLEtBQWtCOHRCLEVBQUs5dEIsS0FDakM4dEIsRUFBS3BzQixldkR1R1BBLEVBQ0E3RixHQUVBLEdBQUk2RixFQUFNOUgsV0FBYThILEVBQU05SCxVQUFVdkQsT0FBUSxDQUM3QyxJQUFNMDNCLEVBQWlCLEdBSXZCLE9BSEFyc0IsRUFBTTlILFVBQVV4QixTQUFRLFNBQUN1QyxPQUFFd0IsU0FBTXJFLFVBQy9CLE9BQUE0RyxFQUE0QnF2QixFQUFRNXhCLEVBQU1yRSxFQUFPK0QsTUFFNUNreUIsRUFFVCxPQUFPLEt1RGpIUUMsQ0FBeUJGLEVBQUtwc0IsTUFBT29zQixFQUFLanlCLFdBQWEsS0FvRmpFLElBQU1veUIsR0FBMEIsU0FDckN0ekIsRUFDQXVKLE9BREVyQyxlQUFZdkQsT0FBSTR2QixRQUdsQixHQUEwQixpQkFBZnJzQixJQUNMcUMsSUFDRkEsRUFBUTBtQixlQUNFLElBQVB0c0IsRUFBZ0IsQ0FBR0EsV0FDWixJQUFSNHZCLEVBQWlCLENBQUVBLFlBQ25CLFFBR08sSUFBUDV2QixJQUFlQSxFQUFLNHZCLFFBQ2IsSUFBUDV2QixHQUNGLE9BQVV1RCxPQUNNLGlCQUFQdkQsR0FDTyxpQkFBUEEsRUFDTEEsRUFBSytCLEtBQUtDLFVBQVVoQyxLQUt4QjZ2QixHQUFxQyxhQUNyQ0MsR0FBbUMsU0FBQ0MsRUFBT25xQixHQUFZLE9BQUFBLEVBQVFuRSxXQUkvRHV1QixHQUNKLFNBQUN0SixFQUFVRCxFQUFVcHFCLEdBQXFCLE9BQUE0ekIsa0JBQWF2SixFQUFVRCxJQUM3RHlKLEdBQXdDLFNBQUNoaEIsRUFBR3VYLEdBQWEsT0FBQUEsaUJBNEM3RCxXQUFvQnhSLEdBQUFwYSxZQUFBb2EsRUFyQ1pwYSxrQkFZSlIsT0FBT1csT0FBTyxNQUVWSCxlQUVKUixPQUFPVyxPQUFPLE1BTVZILGtCQUFlLElBQUl1UyxJQU1uQnZTLG1CQUFnQixJQUFJdVMsSUFJWnZTLHVCQUE0Q1IsT0FBT1csT0FBTyxNQUMxREgsdUJBQTRDUixPQUFPVyxPQUFPLE1BRTFESCx5QkFBcUIsRUFRbkNBLEtBQUtvYSxVQUNIa2IsaUJBQWtCUixJQUNmMWEsR0FHTHBhLEtBQUsraEIsTUFBUS9oQixLQUFLb2EsT0FBTzJILE1BRXpCL2hCLEtBQUt1MUIsZ0JBQWdCLFNBQ3JCdjFCLEtBQUt1MUIsZ0JBQWdCLFlBQ3JCdjFCLEtBQUt1MUIsZ0JBQWdCLGdCQUVqQm5iLEVBQU9vYixlQUNUeDFCLEtBQUt5MUIsaUJBQWlCcmIsRUFBT29iLGVBRzNCcGIsRUFBT3NiLGNBQ1QxMUIsS0FBSzIxQixnQkFBZ0J2YixFQUFPc2IsY0FzZ0JsQyxPQWxnQlNFLHFCQUFQLFNBQ0VqTSxFQUNBbmxCLEVBQ0FPLEdBR0EsSUFBTThELEVBQVdyRSxHQUFnQk8sRUFDN0IwRCxFQUFzQmtoQixFQUFRbmxCLEVBQWNPLEdBQzVDNGtCLEVBQU9qaEIsV0FRWCxHQUFJRyxJQUFhN0ksS0FBS3lyQixrQkFBa0JvSyxXQUN0QyxNQUFPLENBQUMsY0FhVixJQVZBLElBTUkxd0IsRUFORTRGLEVBQTRCLENBQ2hDbEMsV0FDQXJFLGVBQ0FPLGVBS0krd0IsRUFBU2p0QixHQUFZN0ksS0FBSysxQixjQUFjbHRCLEdBQzFDbXRCLEVBQVFGLEdBQVVBLEVBQU9FLE9BQVNoMkIsS0FBS29hLE9BQU9rYixpQkFDM0NVLEdBQU8sQ0FDWixJQUFNQyxFQUFnQkQsRUFBTXJNLEVBQVE1ZSxHQUNwQyxJQUFJcEwsTUFBTXVJLFFBQVErdEIsR0FFWCxDQUNMOXdCLEVBQUs4d0IsRUFDTCxNQUhBRCxFQUFRRSxHQUF5QkQsR0FRckMsT0FEQTl3QixFQUFLQSxFQUFLbkQsT0FBT21ELFFBQU0sRUFDaEI0RixFQUFRMG1CLFVBQVksQ0FBQ3RzQixFQUFJNEYsRUFBUTBtQixXQUFhLENBQUN0c0IsSUFHakR5d0IsNEJBQVAsU0FBdUJGLEdBQXZCLFdBQ0VsMkIsT0FBTzRJLEtBQUtzdEIsR0FBY3oyQixTQUFRLFNBQUE0SixHQUNoQyxJQUFNckgsRUFLRmswQixFQUFhN3NCLEdBSmZzdEIsY0FDQUMsaUJBQ0FDLHFCQUNHekssTUFKQyxpREFxQkZ1SyxHQUFXdDBCLEVBQUswekIsZ0JBQWdCLFFBQVMxc0IsR0FDekN1dEIsR0FBY3YwQixFQUFLMHpCLGdCQUFnQixXQUFZMXNCLEdBQy9Dd3RCLEdBQWtCeDBCLEVBQUswekIsZ0JBQWdCLGVBQWdCMXNCLEdBRXZEdWhCLEdBQU8xcEIsS0FBS21CLEVBQUt5MEIsVUFBV3p0QixHQUM5QmhILEVBQUt5MEIsVUFBVXp0QixHQUFVaEYsS0FBSytuQixHQUU5Qi9wQixFQUFLeTBCLFVBQVV6dEIsR0FBWSxDQUFDK2lCLE9BSzFCZ0ssNkJBQVIsU0FBeUIvc0IsRUFBa0IraUIsR0FBM0MsV0FDUUMsRUFBVzdyQixLQUFLKzFCLGNBQWNsdEIsR0FDNUIwdEIsRUFBc0IzSyxZQUFYNWxCLEVBQVc0bEIsU0FFOUIsU0FBUzRLLEVBQ1AzSyxFQUNBbGhCLEdBRUFraEIsRUFBU2xoQixNQUNVLG1CQUFWQSxFQUF1QkEsR0FHcEIsSUFBVkEsRUFBaUJ3cUIsSUFHUCxJQUFWeHFCLEVBQWtCMHFCLEdBQ2xCeEosRUFBU2xoQixNQUtiNnJCLEVBQVMzSyxFQUFVRCxFQUFTamhCLE9BRTVCa2hCLEVBQVNtSyxPQUVPLElBQWRPLEVBQXNCdkIsR0FHdEJyMUIsTUFBTXVJLFFBQVFxdUIsR0FBYUwsR0FBeUJLLEdBRS9CLG1CQUFkQSxFQUEyQkEsRUFFbEMxSyxFQUFTbUssTUFFUGh3QixHQUNGeEcsT0FBTzRJLEtBQUtwQyxHQUFRL0csU0FBUSxTQUFBMkgsR0FDMUIsSUFBTWlsQixFQUFXaHFCLEVBQUs0MEIsZUFBZTV0QixFQUFVakMsR0FBVyxHQUNwRGdsQixFQUFXNWxCLEVBQU9ZLEdBRXhCLEdBQXdCLG1CQUFiZ2xCLEVBQ1RDLEVBQVNqQyxLQUFPZ0MsTUFDWCxDQUNHLElBQUE5QyxFQUF5QjhDLFVBQWhCaEMsRUFBZ0JnQyxPQUFWamhCLEVBQVVpaEIsUUFFakNDLEVBQVNtSyxPQUdLLElBQVpsTixFQUFvQm1NLEdBR3BCdDFCLE1BQU11SSxRQUFRNGdCLEdBQVc0TixHQUF1QjVOLEdBRTdCLG1CQUFaQSxFQUF5QkEsRUFFaEMrQyxFQUFTbUssTUFFUyxtQkFBVHBNLElBQ1RpQyxFQUFTakMsS0FBT0EsR0FHbEI0TSxFQUFTM0ssRUFBVWxoQixHQUdqQmtoQixFQUFTakMsTUFBUWlDLEVBQVNsaEIsUUFNNUJraEIsRUFBU21LLE1BQVFuSyxFQUFTbUssT0FBU2YsUUFNbkNXLDRCQUFSLFNBQ0VlLEVBQ0E5dEIsZ0JBQUFBLEtBRUEsSUFBTWdoQixFQUFTLFFBQVU4TSxFQUFNQyxjQUN6QkMsRUFBTTcyQixLQUFLeXJCLGtCQUFrQjVCLEdBQy9CaGhCLElBQWFndUIsc0VBSVhBLFVBQVk3MkIsS0FBSzB3QixrQkFBa0JtRyxHQUV2QzcyQixLQUFLMHdCLGtCQUFrQjduQixHQUFZZ2hCLEVBRW5DN3BCLEtBQUt5ckIsa0JBQWtCNUIsR0FBVWhoQixJQUk5QitzQiw2QkFBUCxTQUF3QkosR0FBeEIsV0FDR3gxQixLQUFLb3lCLG9CQUFpQyxFQUN2QzV5QixPQUFPNEksS0FBS290QixHQUFldjJCLFNBQVEsU0FBQTYzQixHQUlqQ2oxQixFQUFLazFCLGdCQUFnQkQsR0FBVyxHQUVoQ3RCLEVBQWNzQixHQUFXNzNCLFNBQVEsU0FBQSszQixHQUMvQm4xQixFQUFLazFCLGdCQUFnQkMsR0FBUyxHQUFPenJCLElBQUl1ckIsR0FDekMsSUFBTXRNLEVBQVF3TSxFQUFReE0sTUFBTUgsSUFDdkJHLEdBQVNBLEVBQU0sS0FBT3dNLEdBRXpCbjFCLEVBQUtvMUIsY0FBY3hrQixJQUFJdWtCLEVBQVMsSUFBSUUsT0FBT0YsV0FNM0NwQiwwQkFBUixTQUFzQi9zQixHQUF0QixXQUNFLElBQUt1aEIsR0FBTzFwQixLQUFLVixLQUFLMDFCLGFBQWM3c0IsR0FBVyxDQUM3QyxJQUFNc3VCLEVBQ0puM0IsS0FBSzAxQixhQUFhN3NCLEdBQVlySixPQUFPVyxPQUFPLE1BQzlDZzNCLEVBQU9ueEIsT0FBU3hHLE9BQU9XLE9BQU8sTUF1QjlCLElBQU1pM0IsRUFBYXAzQixLQUFLcTNCLGFBQWFwb0IsSUFBSXBHLEdBQ3JDdXVCLEdBQWNBLEVBQVcxYyxNQUMzQjBjLEVBQVduNEIsU0FBUSxTQUFBNjNCLEdBQ2pCLElBQU10MUIsRUFBc0JLLEVBQUtrMEIsY0FBY2UsR0FBdkM5d0IsV0FBV3N4QixNQUFiLFlBQ045M0IsT0FBT2EsT0FBTzgyQixFQUFRRyxHQUN0QjkzQixPQUFPYSxPQUFPODJCLEVBQU9ueEIsT0FBUUEsTUFLbkMsSUFBTXV4QixFQUFRdjNCLEtBQUtzMkIsVUFBVXp0QixHQUs3QixPQUpJMHVCLEdBQVNBLEVBQU1yNkIsUUFDakI4QyxLQUFLdzNCLGlCQUFpQjN1QixFQUFVeU0sZ0JBQVdpaUIsRUFBTWx2QixPQUFPLEtBR25EckksS0FBSzAxQixhQUFhN3NCLElBR25CK3NCLDJCQUFSLFNBQ0Uvc0IsRUFDQWpDLEVBQ0E2d0IsR0FNQSxHQUFJNXVCLEVBQVUsQ0FDWixJQUFNNnVCLEVBQWdCMTNCLEtBQUsrMUIsY0FBY2x0QixHQUFVN0MsT0FDbkQsT0FBTzB4QixFQUFjOXdCLElBQ25CNndCLElBQW9CQyxFQUFjOXdCLEdBQWFwSCxPQUFPVyxPQUFPLFNBSTNEeTFCLDRCQUFSLFNBQ0VvQixFQUNBUyxHQUVBLElBQUlFLEVBQWUzM0IsS0FBS3EzQixhQUFhcG9CLElBQUkrbkIsR0FJekMsT0FIS1csR0FBZ0JGLEdBQ25CejNCLEtBQUtxM0IsYUFBYTVrQixJQUFJdWtCLEVBQVNXLEVBQWUsSUFBSTlzQixLQUU3QzhzQixHQUdGL0IsNEJBQVAsU0FDRWh4QixFQUNBaUUsRUFDQTFMLEVBQ0F1RixHQUpGLFdBTUUsSUFBS2tDLEVBQVNnekIsY0FBZSxPQUFPLEVBSXBDLElBQUsvdUIsRUFBVSxPQUFPLEVBRXRCLElBQU1pdUIsRUFBWWx5QixFQUFTZ3pCLGNBQWM1MEIsS0FBS3JFLE1BRTlDLEdBQUlrSyxJQUFhaXVCLEVBQVcsT0FBTyxFQUVuQyxHQUFJOTJCLEtBQUtveUIsb0JBQ0xweUIsS0FBS3EzQixhQUFhanNCLElBQUkwckIsR0F1QnhCLElBdEJBLElBQU1lLEVBQXVCNzNCLEtBQUsrMkIsZ0JBQWdCbHVCLEdBQVUsR0FDdERpdkIsRUFBWSxDQUFDRCxHQUNiRSxFQUFlLFNBQUNmLEdBQ3BCLElBQU1XLEVBQWU5MUIsRUFBS2sxQixnQkFBZ0JDLEdBQVMsR0FDL0NXLEdBQ0FBLEVBQWFqZCxNQUNib2QsRUFBVTM1QixRQUFRdzVCLEdBQWdCLEdBQ3BDRyxFQUFVajBCLEtBQUs4ekIsSUFVZkssS0FBOEI3NkIsSUFBVTZDLEtBQUtpM0IsY0FBY3ZjLE1BQzNEdWQsR0FBd0IsRUFJbkIzNkIsRUFBSSxFQUFHQSxFQUFJdzZCLEVBQVU1NkIsU0FBVUksRUFBRyxDQUN6QyxJQUFNcTZCLEVBQWVHLEVBQVV4NkIsR0FFL0IsR0FBSXE2QixFQUFhdnNCLElBQUkwckIsR0FXbkIsT0FWS2UsRUFBcUJ6c0IsSUFBSTByQixLQUN4Qm1CLCtCQUN3RXB2QixzQkFNNUVndkIsRUFBcUJ0c0IsSUFBSXVyQixLQUVwQixFQUdUYSxFQUFhMTRCLFFBQVE4NEIsR0FFakJDLEdBR0ExNkIsSUFBTXc2QixFQUFVNTZCLE9BQVMsR0FLekJ1dEIsR0FBMEI3bEIsRUFBU0osYUFBY3JILEVBQVN1RixLQUk1RHMxQixHQUEyQixFQUMzQkMsR0FBd0IsRUFNeEJqNEIsS0FBS2kzQixjQUFjaDRCLFNBQVEsU0FBQ2k1QixFQUFRQyxHQUNsQyxJQUFNM04sRUFBUTNoQixFQUFTMmhCLE1BQU0wTixHQUN6QjFOLEdBQVNBLEVBQU0sS0FBTzNoQixHQUN4Qmt2QixFQUFhSSxPQU92QixPQUFPLEdBR0Z2Qyx1QkFBUCxTQUFrQi9zQixFQUE4QmpDLEdBQzlDLElBQU1rdkIsRUFBUzkxQixLQUFLeTJCLGVBQWU1dEIsRUFBVWpDLEdBQVcsR0FDeEQsU0FBVWt2QixJQUFVQSxFQUFPRSxRQUd0QkosOEJBQVAsU0FBeUJ3QyxHQUNmLElBRUo3TixFQUZJMWhCLEVBQXdCdXZCLFdBQWR4eEIsRUFBY3d4QixZQUMxQnRDLEVBQVM5MUIsS0FBS3kyQixlQUFlNXRCLEVBQVVqQyxHQUFXLEdBR3BEb3ZCLEVBQVFGLEdBQVVBLEVBQU9FLE1BQzdCLEdBQUlBLEdBQVNudEIsRUFRWCxJQVBBLElBQU1rQyxFQUEwQyxDQUM5Q2xDLFdBQ0FqQyxZQUNBMkIsTUFBTzZ2QixFQUFVN3ZCLE9BQVMsS0FDMUI3RixVQUFXMDFCLEVBQVUxMUIsV0FFakJtRSxFQUFPNnRCLEdBQXVCMEQsR0FDN0JwQyxHQUFPLENBQ1osSUFBTXFDLEVBQW9CckMsRUFBTW52QixFQUFNa0UsR0FDdEMsSUFBSXBMLE1BQU11SSxRQUFRbXdCLEdBRVgsQ0FHTDlOLEVBQWlCOE4sR0FBcUJ6eEIsRUFDdEMsTUFMQW92QixFQUFRVSxHQUF1QjJCLEdBa0JyQyxZQVJ1QixJQUFuQjlOLElBQ0ZBLEVBQWlCNk4sRUFBVTd2QixldkQ3akIvQkEsRUFDQTdGLEdBRUEsSUFBSTQxQixFQUFxQixLQUNyQi92QixFQUFNNUYsYUFDUjIxQixFQUFnQixHQUNoQi92QixFQUFNNUYsV0FBVzFELFNBQVEsU0FBQTJELEdBQ3ZCMDFCLEVBQWMxMUIsRUFBVUksS0FBS3JFLE9BQVMsR0FFbENpRSxFQUFVbkMsV0FDWm1DLEVBQVVuQyxVQUFVeEIsU0FBUSxTQUFDdUMsT0FBRXdCLFNBQU1yRSxVQUNuQyxPQUFBNEcsRUFDRSt5QixFQUFjMTFCLEVBQVVJLEtBQUtyRSxPQUM3QnFFLEVBQ0FyRSxFQUNBK0QsVUFPVixJQUFJOEMsRUFBYyxLQVFsQixPQVBJK0MsRUFBTTlILFdBQWE4SCxFQUFNOUgsVUFBVXZELFNBQ3JDc0ksRUFBUyxHQUNUK0MsRUFBTTlILFVBQVV4QixTQUFRLFNBQUN1QyxPQUFFd0IsU0FBTXJFLFVBQy9CLE9BQUE0RyxFQUE0QkMsRUFBUXhDLEVBQU1yRSxFQUFPK0QsT0FJOUNpRSxFQUFnQjRCLEVBQU12RixLQUFLckUsTUFBTzZHLEVBQVE4eUIsR3VEZ2lCekNDLENBQXNCSCxFQUFVN3ZCLE1BQU82dkIsRUFBVTExQixXQUNqRGlFLEVBQWdCQyxFQUFXOHRCLEdBQXVCMEQsTUFLakMsSUFBbkI3TixFQUNLM2pCLEVBTUZBLElBQWMwakIsR0FBdUJDLEdBQ3hDQSxFQUNBM2pCLEVBQVksSUFBTTJqQixHQUdqQnFMLHNCQUFQLFNBQ0VuZCxFQUNBMU4sR0FFQSxJQUFNaWdCLEVBQW9CdlMsRUFBUWpJLEtBQ2xDLEdBQUt3YSxJQUVldlMsRUFBUWxRLE9BQVNrUSxFQUFRN1IsV0FDN0MsQ0FFQSxRQUF5QixJQUFyQjZSLEVBQVE1UCxTQUFxQixDQUMvQixJQUFNQSxFQUFXa0MsRUFBUThoQixNQUFNTSxjQUFzQm5DLEVBQW1CLGNBQ3BFbmlCLElBQVU0UCxFQUFRNVAsU0FBV0EsR0FHbkMsSUFBTTBoQixFQUFpQnZxQixLQUFLb3RCLGtCQUFrQjNVLEdBQ3hDN1IsRUFBWTBqQixHQUF1QkMsR0FDbkNzQixFQUFXOWdCLEVBQVE4aEIsTUFBTU0sY0FBaUJuQyxFQUFtQlQsR0FDN0R1TCxFQUFTOTFCLEtBQUt5MkIsZUFBZWhlLEVBQVE1UCxTQUFVakMsR0FBVyxHQUMxRGdqQixFQUFPa00sR0FBVUEsRUFBT2xNLEtBRTlCLEdBQUlBLEVBQU0sQ0FDUixJQUFNNE8sRUFBY0MsR0FDbEJ6NEIsS0FDQWdyQixFQUNBdlMsRUFDQTFOLEVBQ0FBLEVBQVE4aEIsTUFBTUssV0FDWjduQixFQUFZMmxCLEdBQ1JBLEVBQWtCNWxCLE1BQ2xCNGxCLEVBQ0pULElBS0osT0FBT3FKLEdBQVV4TixVQUNmcG1CLEtBQUsraEIsTUFDTDZILEVBQ0EsQ0FBQ2lDLEVBQVUyTSxJQUlmLE9BQU8zTSxJQUdGK0osNkJBQVAsU0FDRThDLEVBQ0E5eEIsRUFDQXFyQixHQUVBLElBQUk2RCxFQUlGOTFCLEtBQUt5MkIsZUFBZWlDLEVBQWdCOXhCLEdBQVcsR0FDN0MrRCxFQUFRbXJCLEdBQVVBLEVBQU9uckIsTUFLN0IsT0FKS0EsR0FBU3NuQixJQUVadG5CLEdBREFtckIsRUFBUzkxQixLQUFLKzFCLGNBQWM5RCxLQUNWNkQsRUFBT25yQixPQUVwQkEsR0FHRmlyQiw2QkFBUCxTQUNFL0osRUFDQUQsRUFDQXBxQixFQUNBdUosRUFDQWtpQixPQUZFMWtCLFVBQU9NLGFBQVU4QixVQUluQixPQUFJQSxJQUFVd3FCLEdBSUx3RCxHQUNMNXRCLEVBQVE4aEIsTUFBTU0sY0FEVHdMLENBRUw5TSxFQUNBRCxHQUdBamhCLElBQVUwcUIsR0FFTHpKLEVBR0ZqaEIsRUFBTWtoQixFQUFVRCxFQUFVNk0sR0FDL0J6NEIsVUFZQSxFQUNBLENBQUU2SSxXQUNBakMsVUFBVzJCLEVBQU12RixLQUFLckUsTUFDdEI0SixRQUNBN0YsVUFBV3FJLEVBQVFySSxXQUNyQnFJLEVBQ0FraUIsR0FBV3p0QixPQUFPVyxPQUFPLGNBSy9CLFNBQVNzNEIsR0FDUDNOLEVBQ0FFLEVBQ0FvTixFQUNBcnRCLEVBQ0FraUIsR0FFQSxJQUFNMUMsRUFBaUJPLEVBQVNzQyxrQkFBa0JnTCxHQUM1Q3h4QixFQUFZMGpCLEdBQXVCQyxHQUNuQzduQixFQUFZMDFCLEVBQVUxMUIsV0FBYXFJLEVBQVFySSxVQUMzQ2xCLEVBQTBDdUosRUFBUThoQixNQUFoRE0sa0JBQWVWLGdCQUFhQyxZQUVwQyxNQUFPLENBQ0w3bEIsS0FBTTZ0QixHQUF1QjBELEdBQzdCN3ZCLE1BQU82dkIsRUFBVTd2QixPQUFTLEtBQzFCM0IsWUFDQTJqQixpQkFDQTduQixZQUNBMkMsY0FDQW9uQixjQUNBUSxVQUNBbEwsTUFBTytJLEVBQVMvSSxNQUNoQjJLLFVBRUFDLFVBQUEsU0FDRUMsRUFDQXBjLEdBRUEsSUFBTWlJLEVBQzBCLGlCQUF2Qm1VLEVBQWtDLENBQ3ZDaG1CLFVBQVdnbUIsRUFDWHBjLGFBQ09vYyxHQVVYLFlBUkksSUFBV25VLEVBQVFqSSxPQUNyQmlJLEVBQVFqSSxLQUFPd2EsUUFHYixJQUFXdlMsRUFBUS9WLFlBQ3JCK1YsRUFBUS9WLFVBQVlBLEdBR2Zvb0IsRUFBUzZCLFVBQWFsVSxFQUFTMU4sSUFHeENxcUIsYUFBY3VELEdBQXlCeEwsSUFJM0MsU0FBU3dMLEdBQ1B4TCxHQUVBLE9BQU8sU0FBc0J0QixFQUFVRCxHQUNyQyxHQUFJanNCLE1BQU11SSxRQUFRMmpCLElBQWFsc0IsTUFBTXVJLFFBQVEwakIsR0FDM0MsaURBT0YsR0FBSUMsR0FBZ0MsaUJBQWJBLEdBQ25CRCxHQUFnQyxpQkFBYkEsRUFBdUIsQ0FDNUMsSUFBTWdOLEVBQVF6TCxFQUFjdEIsRUFBVSxjQUNoQ2dOLEVBQVExTCxFQUFjdkIsRUFBVSxjQUd0QyxRQUZvQmdOLEdBQVNDLEdBQVNELElBQVVDLElBRzNDbk8sR0FBd0JtQixJQUN4Qm5CLEdBQXdCa0IsVUFJakJDLEdBQWFELEdBSGhCQSxFQU1YLE9BQU9BLEdBSVgsU0FBUzhLLEdBQ1BvQyxHQUVBLE9BQU8sU0FBQ2p5QixFQUFNa0UsR0FDWixPQUFPbEUsRUFBVWtFLEVBQVFuRSxjQUN2Qk0sS0FBS0MsVUFBVTR4QixHQUFpQmx5QixFQUFNaXlCLEdBQVcsSUFDOUMvdEIsRUFBUW5FLFdBSWpCLFNBQVNzdkIsR0FDUDRDLEdBRUEsSUFBTUUsRUFBTyxJQUFJeEssR0FFZHRaLElBRUgsT0FBTyxTQUFDeVUsRUFBUTVlLEdBQ2QsSUFBSWt1QixFQUNKLEdBQUlsdUIsRUFBUXZHLGNBQWdCdUcsRUFBUWhHLFlBQWEsQ0FDL0MsSUFBTXFZLEVBQU80YixFQUFLclYsWUFBWSxDQUM1QjVZLEVBQVF2RyxhQUNSdUcsRUFBUWhHLGNBRVZrMEIsRUFBVzdiLEVBQUs2YixXQUNkN2IsRUFBSzZiLFNBQVdDLEdBQWFudUIsRUFBUXZHLGFBQWN1RyxFQUFRaEcsY0FJL0QsSUFBTTBzQixFQUFZMW1CLEVBQVEwbUIsVUFDeEJzSCxHQUFpQnBQLEVBQVFtUCxHQUFXLEVBQU1HLEdBRTVDLE9BQVVsdUIsRUFBUWxDLGFBQVkzQixLQUFLQyxVQUFVc3FCLElBYWpELFNBQVN5SCxHQUNQMTBCLEVBQ0FPLEdBRUEsSUFBSWtCLEVBQWdCekcsT0FBT1csT0FBTyxNQUU1Qmc1QixFQUFZLElBQUl0dUIsSUFBSSxDQUFDckcsSUF5QjNCLE9BeEJBMjBCLEVBQVVsNkIsU0FBUSxTQUFBdUYsR0FDaEJBLEVBQWFDLFdBQVd4RixTQUFRLFNBQUE2RixHQUM5QixHQUFJOEQsRUFBUTlELEdBQVksQ0FDdEIsR0FBSUEsRUFBVTBELE1BQU8sQ0FDbkIsSUFBTTR3QixFQUFjdDBCLEVBQVUwRCxNQUFNN0osTUFDOUIwNkIsRUFBV3YwQixFQUFVOUIsS0FBS3JFLE1BQ2hDLEdBQUkwNkIsSUFBYUQsR0FDQ256QixFQUFJcXpCLFVBQVlyekIsRUFBSXF6QixRQUFVOTVCLE9BQU9XLE9BQU8sUUFDcERrNUIsR0FBWUQsRUFHeEIsR0FBSXQwQixFQUFVTixjQUNJeUIsRUFBSXN6QixVQUFZdHpCLEVBQUlzekIsUUFBVS81QixPQUFPVyxPQUFPLFFBQ3BEMkUsRUFBVTlCLEtBQUtyRSxPQUNyQnU2QixHQUFhcDBCLEVBQVVOLGFBQWNPLE9BRXBDLENBQ0wsSUFBTUgsRUFBV0MsRUFBeUJDLEVBQVdDLEdBQ2pESCxHQUNGdTBCLEVBQVU1dEIsSUFBSTNHLEVBQVNKLHFCQUt4QnlCLEVBR1QsU0FBUzh5QixHQUNQcGpCLEVBQ0FtakIsRUFDQVUsRUFDQVAsR0FLQSxJQUNJUSxFQURFQyxFQUFTbDZCLE9BQU9XLE9BQU8sTUFvQjdCLE9BbEJBMjRCLEVBQVU3NUIsU0FBUSxTQUFBc0IsR0FDaEIsR0FBSVosTUFBTXVJLFFBQVEzSCxJQUNoQixHQUF1QixpQkFBWms1QixFQUFzQixDQUMvQixJQUFNRixFQUFVTixHQUFZQSxFQUFTTSxRQUMvQkksRUFBU0osR0FBV0EsRUFBUUUsR0FDbENDLEVBQU9ELEdBQVdWLEdBQWlCcGpCLEVBQVM4akIsR0FBVWw1QixFQUFHaTVCLEVBQVFHLFFBRTlELENBQ0wsSUFBTUwsRUFBVUwsR0FBWUEsRUFBU0ssUUFDL0JNLEVBQWVOLEdBQVdBLEVBQVEvNEIsSUFBTUEsRUFDMUM2cEIsR0FBTzFwQixLQUFLaVYsRUFBVWlrQixHQUN4QkYsRUFBT0QsRUFBVWw1QixHQUFLb1YsRUFBU2lrQiw2REFHL0JILE9BQVUsT0FJVEMsRUN4OUJULElBQU1HLEdBQXFDLENBQ3pDdkUsaUJBQWtCUixHQUNsQmhGLGFBQWEsRUFDYm5CLGVBQWUsRUFDZitHLGFBQWMsaUJBc0JkLFdBQVl0YixnQkFBQUEsTUFBWixNQUNFeFksMEJBZk1DLFVBQVUsSUFBSWdKLElBR2RoSix3QkFBd0IsSUFBSTBRLElBU3BCMVEsVUFBVW15QixHQWlQbEJueUIsVUFBVSxFQW9FVkEsc0JBQXNCOG1CLElBQUssU0FDakNtUixFQUNBQyxHQUVBLE9BQU9sNEIsRUFBS200QixlQUFldDVCLEtBQUttQixFQUFNaTRCLElBQUtDLEtBQzFDLENBQ0RoUixhQUFjLFNBQUMrUSxHQUdiLElBQU1qTixFQUFRaU4sRUFBRXRYLFdBQWEzZ0IsRUFBS280QixlQUFpQnA0QixFQUFLeUYsS0FDeEQsR0FBSWtvQixHQUFzQjNDLEdBQVEsQ0FDeEIsSUFBQXJLLEVBQWtDc1gsYUFBdEJqUSxFQUFzQmlRLFNBQWRwM0IsRUFBY28zQixZQUMxQyxPQUFPak4sRUFBTTlELGFBQ1grUSxFQUFFdmlCLE1BT0Z1aUIsRUFBRWhsQixTQUNGNU4sS0FBS0MsVUFBVSxDQUFFcWIsYUFBWXFILFNBQVFubkIsbUJBTXJDYixXQUFXa2xCLEtBNVVqQmxsQixFQUFLdVksY0FBY3lmLElBQWtCemYsR0FDckN2WSxFQUFLaXVCLGNBQWdCanVCLEVBQUt1WSxPQUFPMFYsWUFFakNqdUIsRUFBS2lwQixTQUFXLElBQUk4SyxHQUFTLENBQzNCN1QsTUFBT2xnQixFQUNQeXpCLGlCQUFrQnp6QixFQUFLdVksT0FBT2tiLGlCQUM5QkUsY0FBZTN6QixFQUFLdVksT0FBT29iLGNBQzNCRSxhQUFjN3pCLEVBQUt1WSxPQUFPc2IsZUFNNUI3ekIsRUFBS3lGLEtBQU8sSUFBSWdrQixHQUFZdUQsS0FBSyxDQUMvQi9ELFNBQVVqcEIsRUFBS2lwQixTQUNmNkQsY0FBZTlzQixFQUFLdVksT0FBT3VVLGdCQVE3QjlzQixFQUFLbzRCLGVBQWlCcDRCLEVBQUt5RixLQUUzQnpGLEVBQUtxNEIsWUFBYyxJQUFJOUksR0FDckJ2dkIsRUFDQUEsRUFBS3M0QixZQUFjLElBQUlwSyxHQUFZLENBQ2pDaE8sTUFBT2xnQixFQUNQaXVCLFlBQWFqdUIsRUFBS2l1QixpQkFsRFNod0IsT0F1RDFCczZCLG9CQUFQLFNBQWU5eUIsR0FFYixPQURJQSxHQUFNdEgsS0FBS3NILEtBQUsyVyxRQUFRM1csR0FDckJ0SCxNQUdGbzZCLG9CQUFQLFNBQWU1WCxHQUNiLG9CQURhQSxPQUNMQSxFQUFheGlCLEtBQUtpNkIsZUFBaUJqNkIsS0FBS3NILE1BQU0reUIsV0FHakRELGlCQUFQLFNBQWUzaEIsR0FTWCxJQUFBalgsRUFDRWlYLG9CQURGcUksZ0JBRUYsSUFDRSxPQUFPOWdCLEtBQUttNkIsWUFBWUcsc0JBQXlCLENBQy9Dek4sTUFBT3BVLEVBQVErSixXQUFheGlCLEtBQUtpNkIsZUFBaUJqNkIsS0FBS3NILEtBQ3ZEaVEsTUFBT2tCLEVBQVFsQixNQUNmN1UsVUFBVytWLEVBQVEvVixVQUNuQm1uQixPQUFRcFIsRUFBUW9SLE9BQ2hCelAsT0FBUXBhLEtBQUtvYSxPQUNiMEcsc0JBQ0MzakIsUUFBVSxLQUNiLE1BQU8wRCxHQUNQLEdBQUlBLGFBQWE2dUIsR0FNZixPQUFPLEtBRVQsTUFBTTd1QixJQUlIdTVCLGtCQUFQLFNBQWEzaEIsR0FDWCxJQUVFLFFBREV6WSxLQUFLdTZCLFFBQ0F2NkIsS0FBS2s2QixZQUFZTSxhQUFhLENBQ25DM04sTUFBTzdzQixLQUFLc0gsS0FDWmlRLE1BQU9rQixFQUFRbEIsTUFDZnBhLE9BQVFzYixFQUFRdGIsT0FDaEI2c0IsT0FBUXZSLEVBQVF1UixPQUNoQnRuQixVQUFXK1YsRUFBUS9WLHNCQUdkMUMsS0FBS3U2QixVQUFpQyxJQUF0QjloQixFQUFRd1IsV0FDN0JqcUIsS0FBS3kwQixxQkFLSjJGLG1CQUFQLFNBQWMzaEIsR0FDWixHQUFJMlIsR0FBTzFwQixLQUFLK1gsRUFBUyxRQUFVQSxFQUFRdFQsR0FVekMsT0FBTyxFQUVULElBQU0wbkIsRUFBUXBVLEVBQVErSixXQUNsQnhpQixLQUFLaTZCLGVBQ0xqNkIsS0FBS3NILEtBQ1QsSUFFRSxRQURFdEgsS0FBS3U2QixRQUNBMU4sRUFBTUUsT0FBT3RVLEVBQVF0VCxJQUFNLGFBQWNzVCxFQUFRelMsa0JBRWpEaEcsS0FBS3U2QixVQUFpQyxJQUF0QjloQixFQUFRd1IsV0FDN0JqcUIsS0FBS3kwQixxQkFLSjJGLGlCQUFQLFNBQWUzaEIsR0FDYixPQUFPelksS0FBS202QixZQUFZRyxzQkFBc0IsQ0FDNUN6TixNQUFPcFUsRUFBUStKLFdBQWF4aUIsS0FBS2k2QixlQUFpQmo2QixLQUFLc0gsS0FDdkR1aUIsT0FBUXBSLEVBQVF0VCxJQUFNLGFBQ3RCb1MsTUFBT2tCLEVBQVFsQixNQUNmN1UsVUFBVytWLEVBQVEvVixVQUNuQm9lLGtCQUFtQnJJLEVBQVFxSSxrQkFDM0IxRyxPQUFRcGEsS0FBS29hLFVBSVZnZ0Isa0JBQVAsU0FBYUssR0FBYixXQWtCRSxPQWpCS3o2QixLQUFLMDZCLFFBQVFoZ0IsZUZ0Sk1xSCxHQUMxQitSLEdBQWEvUixHQUFPZ1MsS0FBSzkwQixTQUFRLFNBQUFpMUIsR0FBTSxPQUFBQSxFQUFHSyxZQUFZeFMsTUVnS2xENFksQ0FBWTM2QixNQUVkQSxLQUFLMDZCLFFBQVFudkIsSUFBSWt2QixHQUNiQSxFQUFNRyxXQUNSNTZCLEtBQUs2NkIsb0JBQW9CSixHQUVwQixXQUlENTRCLEVBQUs2NEIsUUFBUTdsQixPQUFPNGxCLEtBQVc1NEIsRUFBSzY0QixRQUFRaGdCLGVGdkwxQnFILEdBQzFCK1IsR0FBYS9SLEdBQU9nUyxLQUFLOTBCLFNBQVEsU0FBQWkxQixHQUFNLE9BQUFBLEVBQUdNLFlBQVl6UyxNRXVMaER5UyxDQUFZM3lCLEdBRWRBLEVBQUtpNUIsU0FBU3RVLE1BQU1pVSxHQUlwQjU0QixFQUFLZzVCLG9CQUFvQjVTLE9BQU93UyxLQUs3QkwsZUFBUCxXQUNFLE9BQU9wNkIsS0FBS2k2QixlQUFlYyxNQVV0QlgsbUJBQVAsU0FBY3ZRLEVBQWdCckgsR0FDNUIsT0FBUUEsRUFBYXhpQixLQUFLaTZCLGVBQWlCajZCLEtBQUtzSCxNQUFNdW1CLE9BQU9oRSxJQVF4RHVRLG9CQUFQLFNBQWV2USxFQUFnQnJILEdBQzdCLE9BQVFBLEVBQWF4aUIsS0FBS2k2QixlQUFpQmo2QixLQUFLc0gsTUFBTTB6QixRQUFRblIsSUFTekR1USxxQkFBUCxTQUFnQnpRLEdBQ2QsT0FBT3RrQixFQUFZc2tCLEdBQVVBLEVBQU92a0IsTUFDbENwRixLQUFLOHFCLFNBQVNNLFNBQVN6QixHQUFRLElBRzVCeVEsa0JBQVAsU0FBYTNoQixHQUNYLElBQUtBLEVBQVF0VCxHQUFJLENBQ2YsR0FBSWlsQixHQUFPMXBCLEtBQUsrWCxFQUFTLE1BR3ZCLE9BQU8sRUFFVEEsU0FBZUEsSUFBU3RULEdBQUksZUFFOUIsSUFNRSxRQURFbkYsS0FBS3U2QixRQUNBdjZCLEtBQUtpNkIsZUFBZTNNLE1BQU03VSxhQUUxQnpZLEtBQUt1NkIsVUFBaUMsSUFBdEI5aEIsRUFBUXdSLFdBQzdCanFCLEtBQUt5MEIscUJBS0oyRixrQkFBUCxXQUlFLE9BSEFwNkIsS0FBS3NILEtBQUtpVixRQUNWdmMsS0FBS2k2QixlQUFpQmo2QixLQUFLc0gsS0FDM0J0SCxLQUFLeTBCLG1CQUNFaG5CLFFBQVFDLFdBR1Ywc0IsNkJBQVAsU0FBd0JhLEdBQ3RCLElBQU1DLEVBQW9CbDdCLEtBQUtpNkIsZUFBZWhMLFlBQVlnTSxHQUN0REMsSUFBc0JsN0IsS0FBS2k2QixpQkFDN0JqNkIsS0FBS2k2QixlQUFpQmlCLEVBQ3RCbDdCLEtBQUt5MEIscUJBTUYyRiwrQkFBUCxTQUNFNVEsRUFDQUMsR0FGRixXQUlRMFIsRUFBVSxTQUFDQyxHQUNULElBQUE1NUIsRUFBMkJLLEVBQXpCeUYsU0FBTTJ5QixxQkFDWnA0QixFQUFLMDRCLFFBQ0hhLElBQ0Z2NUIsRUFBS3lGLEtBQU96RixFQUFLbzRCLGVBQWlCbUIsR0FFcEMsSUFDRTVSLEVBQVkzbkIsYUFFVkEsRUFBSzA0QixRQUNQMTRCLEVBQUt5RixLQUFPQSxFQUNaekYsRUFBS280QixlQUFpQkEsSUFJdEJGLEdBQTRCLEVBRUosaUJBQWpCdFEsR0FJVHpwQixLQUFLaTZCLGVBQWlCajZCLEtBQUtpNkIsZUFBZS9LLFNBQVN6RixFQUFjMFIsR0FDakVwQixHQUE0QixHQUNGLE9BQWpCdFEsRUFNVDBSLEVBQVFuN0IsS0FBS3NILE1BSWI2ekIsSUFJRm43QixLQUFLeTBCLGlCQUFpQnNGLElBR2pCSyw4QkFBUCxTQUF5Qm4yQixHQUN2QixHQUFJakUsS0FBSzh2QixZQUFhLENBQ3BCLElBQUkzeUIsRUFBUzZDLEtBQUtxN0Isc0JBQXNCcHNCLElBQUloTCxHQVM1QyxPQVJLOUcsSUFDSEEsRUFBUzRNLEVBQXNCOUYsR0FDL0JqRSxLQUFLcTdCLHNCQUFzQjVvQixJQUFJeE8sRUFBVTlHLEdBSXpDNkMsS0FBS3E3QixzQkFBc0I1b0IsSUFBSXRWLEVBQVFBLElBRWxDQSxFQUVULE9BQU84RyxHQUdDbTJCLDZCQUFWLFNBQTJCTCxHQUEzQixXQUNPLzVCLEtBQUt1NkIsU0FDUnY2QixLQUFLMDZCLFFBQVF6N0IsU0FBUSxTQUFBNjZCLEdBQUssT0FBQWo0QixFQUFLZzVCLG9CQUFvQmYsRUFBR0MsT0F1Q2xESywyQkFBUixTQUNFTixFQUNBQyxHQVNBLzVCLEtBQUs4NkIsU0FBU3RVLE1BQU1zVCxHQVFwQjk1QixLQUFLODZCLFNBQVNoQixHQUVkLElBQU1sWixFQUFPNWdCLEtBQUs0Z0IsS0FBVSxDQUMxQnJKLE1BQU91aUIsRUFBRXZpQixNQUNUN1UsVUFBV28zQixFQUFFcDNCLFVBQ2I4ZixXQUFZc1gsRUFBRXRYLGFBR1pzWCxFQUFFdFgsWUFBY3VYLElBQ2xCblosRUFBS21aLDJCQUE0QixHQUduQ0QsRUFBRWhsQixTQUFTOEwsS0F4WW9CMkk7Ozs7Ozs7Ozs7Ozs7OztBQ2I1QixJQUFJbnBCLEdBQVcsV0FRbEIsT0FQQUEsR0FBV1osT0FBT2EsUUFBVSxTQUFrQkMsR0FDMUMsSUFBSyxJQUFJQyxFQUFHakQsRUFBSSxFQUFHa0QsRUFBSUMsVUFBVXZELE9BQVFJLEVBQUlrRCxFQUFHbEQsSUFFNUMsSUFBSyxJQUFJc0MsS0FEVFcsRUFBSUUsVUFBVW5ELEdBQ09rQyxPQUFPVSxVQUFVTCxlQUFlYSxLQUFLSCxFQUFHWCxLQUFJVSxFQUFFVixHQUFLVyxFQUFFWCxJQUU5RSxPQUFPVSxJQUVLSyxNQUFNWCxLQUFNUyxZQzlCMUI2NkIsR0FBVyxJQUFJL29CLElBR2ZncEIsR0FBb0IsSUFBSWhwQixJQUUxQmlwQixJQUF3QixFQUN4QkMsSUFBZ0MsRUFJcEMsU0FBU0MsR0FBVUMsR0FDakIsT0FBT0EsRUFBTzFkLFFBQVEsVUFBVyxLQUFLMmQsT0FVeEMsU0FBU0MsR0FBaUJDLEdBQ3hCLElBQU1DLEVBQVcsSUFBSWx4QixJQUNmeEcsRUFBZ0MsR0FnQ3RDLE9BOUJBeTNCLEVBQUl6M0IsWUFBWXBGLFNBQVEsU0FBQXFLLEdBQ3RCLEdBQWdDLHVCQUE1QkEsRUFBbUJoRyxLQUErQixDQUNwRCxJQUFJWSxFQUFlb0YsRUFBbUJ0RyxLQUFLckUsTUFDdkNxTSxFQWJEMHdCLElBRGdCTSxFQWNhMXlCLEVBQW1CMHlCLEtBYmxDdnhCLE9BQU80UCxLQUFLNGhCLFVBQVVELEVBQUl6bkIsTUFBT3luQixFQUFJRSxNQWdCbERDLEVBQWVaLEdBQWtCdHNCLElBQUkvSyxHQUNyQ2k0QixJQUFpQkEsRUFBYS93QixJQUFJSixHQUdoQ3d3QixJQUNGaDVCLFFBQVE0NUIsS0FBSywrQkFBaUNsNEIsRUFBakMsaU1BSUxpNEIsR0FDVlosR0FBa0I5b0IsSUFBSXZPLEVBQWNpNEIsRUFBZSxJQUFJdHhCLEtBR3pEc3hCLEVBQWE1d0IsSUFBSVAsR0FFWit3QixFQUFTM3dCLElBQUlKLEtBQ2hCK3dCLEVBQVN4d0IsSUFBSVAsR0FDYjNHLEVBQVlSLEtBQUt5RixTQUduQmpGLEVBQVlSLEtBQUt5RixHQXJDdkIsSUFBeUIweUIsY0EwQ2xCRixJQUNIejNCLGdCQTBCSixTQUFTZzRCLEdBQWM1eEIsR0FDckIsSUFBSTZ4QixFQUFXWixHQUFVanhCLEdBQ3pCLElBQUs2d0IsR0FBU2x3QixJQUFJa3hCLEdBQVcsQ0FDM0IsSUFBTUMsRUFBU3ZnQixRQUFNdlIsRUFBUSxDQUMzQmd4QixtQ0FFRixJQUFLYyxHQUEwQixhQUFoQkEsRUFBT2o1QixLQUNwQixNQUFNLElBQUlyQixNQUFNLGlDQUVsQnE1QixHQUFTN29CLElBQ1A2cEIsRUFoQ04sU0FBa0J2ekIsR0FDaEIsSUFBTStKLEVBQVUsSUFBSWpJLElBQXlCOUIsRUFBSTFFLGFBRWpEeU8sRUFBUTdULFNBQVEsU0FBQTJFLEdBQ1ZBLEVBQUtvNEIsWUFBWXA0QixFQUFLbzRCLElBQzFCeDhCLE9BQU80SSxLQUFLeEUsR0FBTTNFLFNBQVEsU0FBQWdJLEdBQ3hCLElBQU10SSxFQUFRaUYsRUFBS3FELEdBQ2Z0SSxHQUEwQixpQkFBVkEsR0FDbEJtVSxFQUFRdkgsSUFBSTVNLFNBS2xCLElBQU1xOUIsRUFBTWp6QixFQUFJaXpCLElBTWhCLE9BTElBLFdBQ0tBLEVBQUlRLGtCQUNKUixFQUFJUyxVQUdOMXpCLEVBZ0JIMnpCLENBQVNiLEdBQWlCVSxLQUc5QixPQUFPakIsR0FBU3JzQixJQUFJcXRCLFlBSU5LLEdBQ2RDLE9BQ0EsYUFBQWowQixtQkFBQUEsSUFBQTlCLG9CQUd3QixpQkFBYisxQixJQUNUQSxFQUFXLENBQUNBLElBR2QsSUFBSXovQixFQUFTeS9CLEVBQVMsR0FXdEIsT0FUQS8xQixFQUFLNUgsU0FBUSxTQUFDNDlCLEVBQUt2L0IsR0FDYnUvQixHQUFvQixhQUFiQSxFQUFJdjVCLEtBQ2JuRyxHQUFVMC9CLEVBQUliLElBQUl2eEIsT0FBTzRQLEtBRXpCbGQsR0FBVTAvQixFQUVaMS9CLEdBQVV5L0IsRUFBU3QvQixFQUFJLE1BR2xCKytCLEdBQWNsL0IsR0FvQnZCLElBUWlCMi9CLEdBUlhDLE1BQUFBLGNBaEJKekIsR0FBUy9lLFFBQ1RnZixHQUFrQmhmLFNBZWR3Z0IsY0FYSnZCLElBQXdCLEdBV3BCdUIsY0FQSnRCLElBQWdDLEdBTzVCc0IsY0FISnRCLElBQWdDLElBV2pCcUIsR0FBQUgsS0FBQUEsWUFPWEksR0FKRkQsZUFJRUMsR0FIRkQsMkJBR0VDLEdBRkZELHVDQUVFQyxHQURGRCx3Q0FDRUMsR0FHTkosR0FBVyxRQUFHQSxPN0R6SGVLLE02RDJIZEwsRzdEM0hjSyxHOEQwQ2hCLE05RHpDQzU2QixFQUFnQkMsR0FDNUJBLEVBQWlCN0UsS0FBS29uQixJQUFJLEVBQUd4aUIsRUFBZ0JqRSxRQUFRNitCLEsrRG5DdkQsSUNSWUMsR0RRTmxiLEdBQVEsSUFBSzdNLEdBQWdCQyxRQUFVNUMsTUNSN0MsU0FBWTBxQixHQUNWQSxxQkFDQUEsMkJBQ0FBLG1DQUhGLENBQVlBLEtBQUFBLFFBWVosSUFBTWxiLEdBQVEsSUFBSXhQLGFBRUYrRSxHQUFjaEosR0FDNUIsSUFBSXRMLEVBQ0osT0FBUXNMLEdBQ04sS0FBSzJ1QixHQUFhQyxNQUNoQmw2QixFQUFPLFFBQ1AsTUFDRixLQUFLaTZCLEdBQWFFLFNBQ2hCbjZCLEVBQU8sV0FDUCxNQUNGLEtBQUtpNkIsR0FBYXJ1QixhQUNoQjVMLEVBQU8sZUFHWCxPQUFPQSxFQzNCVCxrQkFVRSxXQUFZeVYsRUFBbUMxTixHQVR4Qy9LLGdCQUFxQixFQUNyQkEscUJBQTJDLEdBRzNDQSxhQUFlLEdBR2RBLGFBQW1DLEdBR3pDQSxLQUFLeVksUUFBVUEsR0FBWSxHQUMzQnpZLEtBQUsrSyxRQUFVQSxHQUFXLEdBMkQ5QixPQXhEU3F5Qix1QkFBUCxXQUNFLE9BQU9wOUIsS0FBS3lZLFNBR1Aya0IsdUJBQVAsU0FDRTdlLEVBQ0E4ZSxnQkFBQUEsTUFFSUEsSUFBa0JoaEIsR0FBTXJjLEtBQUt5WSxRQUFTOEYsS0FDeEN2ZSxLQUFLczlCLGdCQUFrQnQ5QixLQUFLeVksU0FFOUJ6WSxLQUFLeVksUUFBVThGLEdBT1A2ZSxvQkFBVixXQUNFcDlCLEtBQUt1OUIsV0FBWSxHQUdUSCwwQkFBVixXQUNFLElBQU1JLEVBQ0h4OUIsS0FBS3lZLFNBQVd6WSxLQUFLeVksUUFBUStrQixRQUM3Qng5QixLQUFLK0ssU0FBVy9LLEtBQUsrSyxRQUFReXlCLG1MQVNoQyxJQUFJQyxHQUFRLEVBTVosT0FMSUQsSUFBV3g5QixLQUFLdzlCLFNBQ2xCQyxHQUFRLEVBQ1J6OUIsS0FBS3c5QixPQUFTQSxFQUNkeDlCLEtBQUs4TixXQUVBLENBQ0wwdkIsT0FBUXg5QixLQUFLdzlCLE9BQ2JDLFVBSU1MLCtCQUFWLFNBQTZCbjVCLEVBQXdCcUssR0FDbkQsSUFBTS9KLFdEL0JhTixHQUNyQixJQUdJdkIsRUFBVzRMLEVBSFRvdkIsRUFBUzNiLEdBQU05UyxJQUFJaEwsR0FDekIsR0FBSXk1QixFQUFRLE9BQU9BLFdBTWtEejVCLGlMQUtyRSxJQUFNRyxFQUFZSCxFQUFTSSxZQUFZNEUsUUFDckMsU0FBQ2tFLEdBQXNCLE1BQVcsdUJBQVhBLEVBQUU3SixRQUdyQnE2QixFQUFVMTVCLEVBQVNJLFlBQVk0RSxRQUNuQyxTQUFDa0UsR0FDQyxNQUFXLHdCQUFYQSxFQUFFN0osTUFBa0QsVUFBaEI2SixFQUFFNUksYUFHcENxNUIsRUFBWTM1QixFQUFTSSxZQUFZNEUsUUFDckMsU0FBQ2tFLEdBQ0MsTUFBVyx3QkFBWEEsRUFBRTdKLE1BQWtELGFBQWhCNkosRUFBRTVJLGFBR3BDbU0sRUFBZ0J6TSxFQUFTSSxZQUFZNEUsUUFDekMsU0FBQ2tFLEdBQ0MsTUFBVyx3QkFBWEEsRUFBRTdKLE1BQWtELGlCQUFoQjZKLEVBQUU1SSx1REFReEMscU9BTUVOLDZKQUtKcUssV0FBd0IydUIsK0JBQXNDVyxXQUV4RHR2Qix1QkFDSmpLLFdBQ0VzNUIsV0FFQUMsRUFHRmx0QixpTEFPRixXQUVBaE8sSUFBdUJnSCx3QkFPdkIsWUFORXBGLGlEQU0wQmdLLDJCQUM1QnlULGNDM0NvQjhiLENBQU81NUIsR0FDbkI2NUIsRUFBd0J4bUIsR0FBY2hKLEdBQ3RDeXZCLEVBQW9Cem1CLEdBQWMvUyxFQUFVK0oseURBSTNDd3ZCLGFBQWdDQywyQ0M1RHpDLFdBQVl2OEIsT0FDVmlYLFlBQ0ExTixZQUNBaXpCLGdCQU1BcDhCLFlBQU02VyxFQUFTMU4sZ0JBWFRsSixvQkFBbUQsR0FZekRBLEVBQUttOEIsVUFBWUEsRUFDakJuOEIsRUFBS284QixXQUFXeGxCLEtBZlYzWSxPQWtCRG8rQixvQkFBUCxTQUFlL2dDLEdBQ2IsSUFBK0IsSUFBM0I2QyxLQUFLbStCLGFBQWFDLEtBRXBCLE9BREFwK0IsS0FBSzhOLFVBQ0UsQ0FDTGlTLFNBQVMsRUFDVC9RLFdBQU9qSCxFQUNQVCxVQUFNUyxFQUNOckYsVUFBVzFDLEtBQUttK0IsYUFBYXo3QixXQUlqQyxJQUFJMjdCLEVBQWdCbGhDLEVBQ2hCNkMsS0FBS3MrQixnQkFBZ0JiLFFBQ3ZCWSxFQUFnQnIrQixLQUFLdStCLG9CQUdqQixJQUFBQyxFQUFzQngrQixLQUFLbStCLCtCQXFCakMsTUFwQmlDLG1CQUF0QkssSUFDVEEsSUFBc0JBLEVBQWtCeCtCLEtBQUttK0IsZ0JBSXZCLElBQXRCSyxHQUNBeCtCLEtBQUtzOUIsaUJBQ0w5OUIsT0FBTzRJLEtBQUtwSSxLQUFLczlCLGlCQUFpQnBnQyxPQUFTLElBQzFDOEMsS0FBS3M5QixnQkFBZ0J6dkIsZUFBaUI3TixLQUFLbStCLGFBQWF0d0IsZUFDdER3TyxHQUFNcmMsS0FBS3M5QixnQkFBZ0I1NkIsVUFBVzFDLEtBQUttK0IsYUFBYXo3QixZQUN6RDFDLEtBQUtzOUIsZ0JBQWdCYyxPQUFTcCtCLEtBQUttK0IsYUFBYUMsUUFFbERwK0IsS0FBSzhOLFVBQ0x1d0IsRUFBZ0JyK0IsS0FBS3UrQixvQkFHdkJ2K0IsS0FBS2krQixXQUFXaitCLEtBQUttK0IsY0FDckJuK0IsS0FBS3krQixvQkFFTHorQixLQUFLczlCLGdCQUFrQnQ5QixLQUFLbStCLG9CQUNoQkUsSUFBZTM3QixVQUFXMUMsS0FBS20rQixhQUFhejdCLGFBR25EdzdCLHlCQUFQLFdBQ0VsK0IsS0FBS3U5QixXQUFZLEdBR1pXLG9CQUFQLFdBQ0VsK0IsS0FBSzArQix5QkFDRTErQixLQUFLMitCLGtCQUFrQnBuQixPQUd4QjJtQix1QkFBUixTQUFtQnpsQixHQUNielksS0FBSzIrQixrQkFBa0JwbkIsUUFBb0MsSUFBM0J2WCxLQUFLbStCLGFBQWFDLE9BQ3REcCtCLEtBQUsyK0Isa0JBQWtCcG5CLE1BQVF2WCxLQUFLcytCLGdCQUFnQmQsT0FBT2p1QixVQUFVLENBQ25FZ0ksTUFBT2tCLEVBQVE1SyxhQUNmbkwsVUFBVytWLEVBQVEvVixVQUNuQnljLFlBQWExRyxFQUFRMEcsWUFDckJwVSxRQUFTME4sRUFBUTFOLFlBSWJtekIsOEJBQVIsV0FDTWwrQixLQUFLMitCLGtCQUFrQjl3QixlQUMzQjdOLEtBQUsyK0Isa0JBQWtCOXdCLGFBQWU3TixLQUFLMitCLGtCQUFrQnBuQixNQUFPaEksVUFDbEUsQ0FDRUgsS0FBTXBQLEtBQUs0K0Isa0JBQWtCQyxLQUFLNytCLE1BQ2xDZ1AsTUFBT2hQLEtBQUs4K0IsWUFBWUQsS0FBSzcrQixNQUM3QnFQLFNBQVVyUCxLQUFLKytCLHFCQUFxQkYsS0FBSzcrQixVQUt2Q2srQiw2QkFBUixXQUNFLE1BQU8sQ0FDTG5lLFNBQVMsRUFDVC9RLFdBQU9qSCxFQUNQVCxVQUFNUyxJQUlGbTJCLHlCQUFSLFNBQXFCL2dDLEdBQ2Y2QyxLQUFLdTlCLFdBQ1B2OUIsS0FBS2crQixVQUFVN2dDLElBSVgrZ0MsOEJBQVIsU0FBMEIvZ0MsR0FDaEIsSUFBQTZoQyxFQUF1QmgvQixLQUFLbStCLGdDQUVwQ24rQixLQUFLaS9CLGFBQWEsQ0FDaEIzM0IsS0FBTW5LLEVBQU9tSyxLQUNieVksU0FBUyxFQUNUL1EsV0FBT2pILElBR0xpM0IsR0FDRkEsRUFBbUIsQ0FDakJ4QixPQUFReDlCLEtBQUtzK0IsZ0JBQWdCZCxPQUM3QnBiLGlCQUFrQmpsQixLQUtoQitnQyx3QkFBUixTQUFvQmx2QixHQUNsQmhQLEtBQUtpL0IsYUFBYSxDQUNoQmp3QixRQUNBK1EsU0FBUyxLQUlMbWUsaUNBQVIsV0FBQSxXQUlFendCLFFBQVFDLFVBQVVDLE1BQUssV0FDYixJQUFBdXhCLEVBQTJCcjlCLEVBQUtzOEIsb0NBQ3BDZSxHQUF3QkEsSUFDNUJyOUIsRUFBSzY4QixzQkFJRFIsNEJBQVIsV0FDTWwrQixLQUFLMitCLGtCQUFrQjl3QixlQUN6QjdOLEtBQUsyK0Isa0JBQWtCOXdCLGFBQWFHLHFCQUM3QmhPLEtBQUsyK0Isa0JBQWtCOXdCLGdCQTVJMUJ1dkIsSUNJVixtQkFTRSxXQUFZNTdCLE9BQ1ZpWCxZQUNBMU4sWUFDQTVOLFdBQ0E2Z0MsZ0JBT0FwOEIsWUFBTTZXLEVBQVMxTixnQkF5QlRsSixjQUFjLFNBQ3BCczlCLGdCQUFBQSxFQUdJLElBRUp0OUIsRUFBS3U5QixrQkFDTCxJQUFNQyxFQUFheDlCLEVBQUt5OUIsd0JBRXhCLE9BQU96OUIsRUFBSzA5QixPQUFPSixHQUNoQnh4QixNQUFLLFNBQUNnSSxHQUVMLE9BREE5VCxFQUFLMjlCLG9CQUFvQjdwQixFQUFVMHBCLEdBQzVCMXBCLEtBRVJ2QixPQUFNLFNBQUNwRixHQUNFLElBQUE4SSxFQUFZalcsRUFBS3M4QixxQkFFekIsR0FEQXQ4QixFQUFLNDlCLGdCQUFnQnp3QixFQUFPcXdCLEdBQ3hCdm5CLEVBRUYsT0FEQUEsRUFBUTlJLEdBQ0QsQ0FDTDFILFVBQU1TLEVBQ05rVSxPQUFRak4sR0FHVixNQUFNQSxNQWhEWm5OLEVBQUs2OUIsbUJBQW1Cam5CLEVBQVFrbkIsU0FBVTFDLEdBQWFFLFVBQ3ZEdDdCLEVBQUsxRSxPQUFTQSxFQUNkMEUsRUFBS204QixVQUFZQSxFQUNqQm44QixFQUFLKzlCLHFCQUF1QixJQStIaEMsT0FwSlU5L0IsT0F3QkQrL0Isb0JBQVAsU0FBZTFpQyxHQUdiLE9BRkE2QyxLQUFLdTlCLFdBQVksRUFDakJ2OUIsS0FBSzAvQixtQkFBbUIxL0IsS0FBS20rQixhQUFhd0IsU0FBVTFDLEdBQWFFLFVBQzFELENBQ0xuOUIsS0FBSzgvQixtQkFDQTNpQyxJQUFRcWdDLE9BQVF4OUIsS0FBS3MrQixnQkFBZ0JkLFdBSXZDcUMseUJBQVAsV0FFRSxPQURBNy9CLEtBQUt1OUIsV0FBWSxFQUNWdjlCLEtBQUsrL0IsUUFBUWxCLEtBQUs3K0IsT0FHcEI2L0Isb0JBQVAsYUFpQ1FBLG1CQUFSLFNBQ0VwbkIsR0FFQSxPQUFPelksS0FBS3MrQixnQkFBZ0JkLE9BQU8rQixnQkMzQnJDUyxFQUNBdm5CLEdBRUEsT0FBT25ELEdBQVEwcUIsRUFBVXZuQixFQUFTQSxFQUFRL1YsV0FBYSxDQUNyREEsaUJBQ0tzOUIsRUFBU3Q5QixXQUNUK1YsRUFBUS9WLGFEc0JYdTlCLENBQ0VqZ0MsS0FBS20rQixhQUNMMWxCLEtBS0VvbkIsNEJBQVIsV0FDTzcvQixLQUFLN0MsT0FBTzRpQixTQUFZL2YsS0FBS20rQixhQUFhK0IsZUFDN0NsZ0MsS0FBS2kvQixhQUFhLENBQ2hCbGYsU0FBUyxFQUNUL1EsV0FBT2pILEVBQ1BULFVBQU1TLEVBQ05nTixRQUFRLEtBS044cUIsZ0NBQVIsU0FDRWxxQixFQUNBMHBCLEdBRU0sSUFBQTc5QixFQUFpQ3hCLEtBQUttK0IsYUFBcENnQyxnQkFBYUQsa0JBRWI1NEIsRUFBaUJxTyxPQUFYc0csRUFBV3RHLFNBQ25CM0csRUFDSmlOLEdBQVVBLEVBQU8vZSxPQUFTLEVBQ3RCLElBQUlnaEIsR0FBWSxDQUFFTixjQUFlM0IsU0FDakNsVSxFQUtGL0gsS0FBS29nQyxxQkFBcUJmLEtBQWdCYSxHQUM1Q2xnQyxLQUFLaS9CLGFBQWEsQ0FDaEJscUIsUUFBUSxFQUNSZ0wsU0FBUyxFQUNUelksT0FDQTBILFVBUEZteEIsR0FBY0EsRUFBWTc0QixJQWF0QnU0Qiw0QkFBUixTQUF3Qjd3QixFQUFvQnF3QixHQUN0Q3IvQixLQUFLb2dDLHFCQUFxQmYsSUFDNUJyL0IsS0FBS2kvQixhQUFhLENBQ2hCbGYsU0FBUyxFQUNUL1EsUUFDQTFILFVBQU1TLEVBQ05nTixRQUFRLEtBS044cUIsa0NBQVIsV0FDRSxRQUFTNy9CLEtBQUs0L0Isc0JBR1JDLGlDQUFSLFNBQTZCUixHQUMzQixPQUFPci9CLEtBQUs0L0IsdUJBQXlCUCxHQUcvQlEseUJBQVIsU0FBcUIxaUMsR0FDbkIsR0FDRTZDLEtBQUt1OUIsYUFDSHY5QixLQUFLdWlCLGlCQUFtQmxHLEdBQU1yYyxLQUFLdWlCLGVBQWdCcGxCLElBSXJELE9BRkE2QyxLQUFLZytCLFVBQVU3Z0MsR0FDZjZDLEtBQUt1aUIsZUFBaUJwbEIsRUFDZkEsTUFqSkhpZ0MsYUVWTWlELEdBQ2RWLEVBQ0FsbkIsR0FFQSxJQUFNMU4sRUFBVXUxQix3Qk5TaEIsSUFBSXYxQixFQUFVZ1gsR0FBTTlTLElBQUkxUSxVQUFNQyxlQU05QixPQUxLdU0sS0FDSEEsRUFBVXhNLFVBQU1DLGNBQWtDLEtBQzFDK2hDLFlBQWMsZ0JBQ3RCeGUsR0FBTXRQLElBQUlsVSxVQUFNQyxjQUFldU0sSUFFMUJBLEVNZm9CeTFCLElBQ3JCaC9CLEVBQXNCaS9CLFdBQVMsQ0FBRTFyQixRQUFRLEVBQU9nTCxTQUFTLElBQXhENWlCLE9BQVE2Z0MsT0FDVDBDLEVBQWlCam9CLFNBQWVBLElBQVNrbkIsYUFBYSxDQUFFQSxZQUV4RGdCLEVBQWtCQyxXQWF4QixJQUFNQyxHQVhDRixFQUFnQkcsVUFDbkJILEVBQWdCRyxRQUFVLElBQUlqQixHQUFnQyxDQUM1RHBuQixRQUFTaW9CLEVBQ1QzMUIsVUFDQTVOLFNBQ0E2Z0MsZUFHRzJDLEVBQWdCRyxTQVN6QixPQUxBRCxFQUFhRSxXQUFXTCxHQUN4QkcsRUFBYTkxQixRQUFVQSxFQUV2QmkyQixhQUFVLFdBQU0sT0FBQUgsRUFBYUksa0JBRXRCSixFQUFhSyxRQUFRL2pDLGdCQ1k1QixXQUFZcUUsT0FDVmlYLFlBQ0ExTixZQUNBbzJCLGdCQU1Bdi9CLFlBQU02VyxFQUFTMU4sZ0JBckJUbEosV0FBbUIsRUFFbkJBLFdBUUpyQyxPQUFPVyxPQUFPLE1BZ0dWMEIsZUFBZSxTQUFDNFcsR0FDdEI1VyxFQUFLaU0sVUFDTGpNLEVBQUt1L0IsU0FBVSxFQUNmdi9CLEVBQUt3L0IsWUFBYzVvQixFQUNuQjVXLEVBQUtzL0IsYUEyTEN0L0IsaUJBQWlCLFdBQ3ZCLElBQUkxRSxFQUFTMEUsRUFBS3kvQix3QkFDWjdvQixFQUFVNVcsRUFBS3M4QixhQVlyQixHQUFJMWxCLEVBQVEybEIsS0FDVmpoQyxTQUNLQSxJQUNIbUssVUFBTVMsRUFDTmlILFdBQU9qSCxFQUNQZ1ksU0FBUyxFQUNUM0IsY0FBZVQsR0FBYzZDLE1BQzdCekwsUUFBUSxTQUVMLEdBQUlsVCxFQUFLODhCLGtCQUFtQixDQUVqQyxJQUFNTixFQUFnQng4QixFQUFLODhCLGtCQUFrQnZiLG1CQUNyQzliLEVBQWtEKzJCLE9BQTVDdGUsRUFBNENzZSxVQUFuQzVkLEVBQW1DNGQsVUFBMUJqZ0IsRUFBMEJpZ0IsZ0JBQVhwaUIsRUFBV29pQixTQUNwRHJ2QixFQUFVcXZCLFFBaUJoQixHQWJJcGlCLEdBQVVBLEVBQU8vZSxPQUFTLElBQzVCOFIsRUFBUSxJQUFJa1AsR0FBWSxDQUFFTixjQUFlM0IsS0FHM0M5ZSxTQUNLQSxJQUNIbUssT0FDQXlZLFVBQ0EzQixnQkFDQXBQLFFBQ0ErRixRQUFRLElBR05nTCxRQUVHLEdBQUkvUSxFQUNUeFAsT0FBT2EsT0FBT2xELEVBQVEsQ0FDcEJtSyxNQUFPekYsRUFBSzg4QixrQkFBa0I0QyxpQkFBb0IsSUFDL0NqNkIsV0FFQSxDQUNHLElBQUE2WCxFQUFnQnRkLEVBQUs4OEIsa0JBQWtCbG1CLG9CQUUvQyxHQUQyQkEsa0JBR3pCZ0ksS0FDRW5aLEdBQXFDLElBQTdCOUgsT0FBTzRJLEtBQUtkLEdBQU1wSyxTQUNaLGVBQWhCaWlCLEVBZUEsT0FMQTNmLE9BQU9hLE9BQU9sRCxFQUFRLENBQ3BCNGlCLFNBQVMsRUFDVDNCLGNBQWVULEdBQWNvQyxVQUUvQjVpQixFQUFPaWtCLFVBQ0Fqa0IsR0FLYkEsRUFBT3FnQyxPQUFTMzdCLEVBQUsyN0IsT0FFckIzN0IsRUFBS2svQixXQUFXdG9CLEdBQVMsR0FFekIsSUFBTThKLEVBQWlCMWdCLEVBQUtpZ0IsU0FBUzNrQixPQXFCckMsT0FuQkEwRSxFQUFLaWdCLFNBQVMvQixRQUNad0MsR0FBa0JBLEVBQWV4QyxVQUFXLEVBTzlDNWlCLEVBQU9xa0MsYUFBZWpmLElBQ25CQSxFQUFlamIsTUFBUWliLEVBQWVpZixjQUV6QzMvQixFQUFLaWdCLFNBQVMza0IsT0FBU0EsRUFNdkIwRSxFQUFLODhCLG1CQUFxQjk4QixFQUFLODhCLGtCQUFrQjhDLHdCQUUxQ3RrQyxHQW1ERDBFLGFBQWEsU0FBQ2EsMEJBQ3BCYixFQUFLODhCLHdDQUFtQnZkLFFBQVExZSxJQUUxQmIsZUFBZSxTQUNyQndmLEdBRUcsT0FBQXhmLEVBQUs4OEIsa0JBQW1CbGQsVUFBVUosSUFFL0J4ZixpQkFBaUIsU0FDdkJ5Z0IsR0FJRyxPQUFBemdCLEVBQUs4OEIsa0JBQW1COWMsWUFBWVMsSUFFakN6Z0Isa0JBQWtCLFNBQUNrZCxtQkFDekJsZCxFQUFLODhCLGtDQUFtQitDLGFBQWEzaUIsSUFHL0JsZCxpQkFBaUIsMkJBQ3ZCQSxFQUFLODhCLGtDQUFtQmdELGVBR2xCOS9CLHFCQUFxQixTQUkzQjRXLEdBS0csT0FBQTVXLEVBQUs4OEIsa0JBQW1CaUQsZ0JBQWdCbnBCLElBN2MzQzVXLEVBQUtzL0IsVUFBWUEsSUE1QjZCcmhDLE9BK0J6QytoQyxvQkFBUCxXQUNFN2hDLEtBQUtzK0IsZ0JBRUMsSUFBQTk4QixFQUFrQnhCLEtBQUttK0IsYUFBckJDLFNBQU03bUIsVUFXZCxPQVZJNm1CLEdBQVE3bUIsSUFBVXZYLEtBQUs4aEIsU0FBU3ZLLFNBQ2xDdlgsS0FBSzhoQywwQkFDTDloQyxLQUFLK2hDLGtCQUFrQjNELEdBQ3ZCcCtCLEtBQUs4aEIsU0FBU3ZLLE1BQVFBLEdBR3hCdlgsS0FBS2dpQyx3QkFFRGhpQyxLQUFLdTlCLFdBQVd2OUIsS0FBS2lpQyx5QkFFbEJqaUMsS0FBS2tpQyx1QkFBeUJsaUMsS0FBS21pQyxvQkFHckNOLHdCQUFQLFdBQ0UsT0FBUTdoQyxLQUFLb2hDLFFBVVQsQ0FBQ3BoQyxLQUFLb2lDLGFBQWNwaUMsS0FBS2toQyxXQVR6QixDQUNFbGhDLEtBQUtvaUMsYUFDTCxDQUNFcmlCLFNBQVMsRUFDVDNCLGNBQWVULEdBQWM2QyxNQUM3QnpMLFFBQVEsRUFDUnpOLFVBQU1TLEtBT1Q4NUIsc0JBQVAsV0FBQSxXQUNRcHBCLEVBQVV6WSxLQUFLbStCLGFBQ3JCLE9BQUkxbEIsRUFBUTJsQixPQUF3QixJQUFoQjNsQixFQUFRNHBCLEtBQ3JCLElBQUk1MEIsU0FBUSxTQUFBQyxHQUFXLE9BQUE3TCxFQUFLb2dDLHVCQUF1QnYwQixPQUdyRG0wQix5QkFBUCxTQUFvQnJnQyxPQUFFdVgsY0FBcUMsV0FBckN1cEIsZ0JBUXBCLE9BUEF0aUMsS0FBS3U5QixXQUFZLEVBRVorRSxJQUFRdGlDLEtBQUtvaEMsU0FDaEJwaEMsS0FBS3VpQyx5QkFHUHZpQyxLQUFLczlCLGdCQUFrQnQ5QixLQUFLbStCLGFBQ3JCbitCLEtBQUsrL0IsUUFBUWxCLEtBQUs3K0IsT0FHcEI2aEMsb0JBQVAsV0FDRTdoQyxLQUFLOGhDLDBCQUNMOWhDLEtBQUsraEMsa0JBQWlCLFVBQ2YvaEMsS0FBSzhoQixTQUFTM2tCLFFBR2hCMGtDLHVCQUFQLFdBQ0UsSUFBTXBwQixFQUFVN1csWUFBTXU4QixzQkFrQnRCLE9BaEJJbitCLEtBQUtxaEMsY0FDUDVvQixFQUFRL1YsVUFBWXRDLE9BQ2ZxWSxFQUFRL1YsV0FDUjFDLEtBQUtxaEMsWUFBWTMrQixXQUV0QitWLEVBQVExTixlQUNIME4sRUFBUTFOLFNBQ1IvSyxLQUFLcWhDLFlBQVl0MkIsVUFLcEIvSyxLQUFLb2hDLGdCQUNBM29CLEVBQVEybEIsS0FHVjNsQixHQUdGb3BCLHlCQUFQLFdBQ0UsT0FBTzdoQyxLQUFLK0ssU0FBVy9LLEtBQUsrSyxRQUFReTNCLGdCQVU5QlgsNkJBQVIsV0FDRSxJQUFNMWtDLEVBQVM2QyxLQUFLeWlDLGlCQUVwQixPQURBemlDLEtBQUtpaUMseUJBQ0U5a0MsR0FHRDBrQyxnQ0FBUixXQUNRLElBQUFyZ0MsRUFBZ0J4QixLQUFLbStCLGFBQW5Ca0UsUUFBS2pFLFNBQ1BzRSxHQUFzQixJQUFSTCxFQUNkTSxFQUFnQjNpQyxLQUFLcytCLGdCQUFnQmQsT0FBT29GLHNCQUU1Q0MsRUFBYXppQyxHQUNqQjJmLFNBQVMsRUFDVDNCLGNBQWVULEdBQWNvQyxRQUM3QmhMLFFBQVEsRUFDUnpOLFVBQU1TLEVBQ04rNkIsT0FBTyxFQUNQdEYsT0FBUXg5QixLQUFLdzlCLFFBQ1Z4OUIsS0FBS3NoQyx5QkFLVixHQUFJb0IsSUFBZ0IxaUMsS0FBSytpQyxnQkFBa0JKLEdBRXpDLE9BREEzaUMsS0FBSzhoQixTQUFTM2tCLE9BQVMwbEMsRUFDaEJBLEVBR1QsR0FBSTdpQyxLQUFLK2lDLGVBQWdCLENBQ3ZCLElBQU01bEMsRUFBUzZDLEtBQUt5aUMsa0JBQW9CSSxFQUl4QyxPQUhJMWxDLEVBQU80aUIsVUFBWXFlLEdBQ3JCcCtCLEtBQUsrSyxRQUFReTNCLGVBQWdCUSxnQkFBZ0JoakMsTUFBTSxXQUFNLE9BQUEsUUFFcEQ3QyxJQUlIMGtDLDBDQUFSLFdBQ0UsSUFBTXBwQixFQUFVelksS0FBS20rQixhQUNyQm4rQixLQUFLMC9CLG1CQUFtQmpuQixFQUFRbEIsTUFBTzBsQixHQUFhQyxPQUNwRCxJQUFNcUQsRUFBYzluQixFQUFROG5CLGFBQWUsUUFZM0MsT0FQRXZnQyxLQUFLK2lDLGdCQUNvQixpQkFBeEJ0cUIsRUFBUTBHLGFBQ2lCLHNCQUF4QjFHLEVBQVEwRyxjQUVWMUcsRUFBUTBHLFlBQWMsc0JBSW5CMUcsSUFDSDhuQixjQUNBeDFCLFFBQVMwTixFQUFRMU4sV0FJYjgyQixzQ0FBUixXQVVFLEdBTkk3aEMsS0FBSytpQyxpQkFDUC9pQyxLQUFLMitCLGtCQUFvQjMrQixLQUFLK0ssUUFBU3kzQixlQUFnQlMsaUJBQ3JEampDLEtBQUttK0IsZ0JBSUpuK0IsS0FBSzIrQixrQkFBbUIsQ0FDM0IsSUFBTXVFLEVBQXlCbGpDLEtBQUttakMsZ0NBRXBDbmpDLEtBQUs4aEIsU0FBU29oQiw4QkFDVEEsSUFDSHhrQyxTQUFVLE9BRVpzQixLQUFLMitCLGtCQUFvQjMrQixLQUFLcytCLGdCQUFnQmQsT0FBTzRGLGdCQUNoREYsSUFHRGxqQyxLQUFLK2lDLGdCQUNQL2lDLEtBQUsrSyxRQUFTeTNCLGVBQWdCYSxzQkFDNUJyakMsS0FBSzIrQixrQkFDTHVFLEtBTUFyQixrQ0FBUixXQUVFLEdBQUs3aEMsS0FBSzIrQixtQkFLVixJQUFJMytCLEtBQUttK0IsYUFBYUMsS0FBdEIsQ0FFQSxJQUFNa0YsU0FDRHRqQyxLQUFLbWpDLGtDQUNSemtDLFNBQVUsT0FJVDJkLEdBQ0NpbkIsRUFDQXRqQyxLQUFLOGhCLFNBQVNvaEIsMEJBR2hCbGpDLEtBQUs4aEIsU0FBU29oQix1QkFBeUJJLEVBQ3ZDdGpDLEtBQUsyK0Isa0JBQ0ZvQyxXQUFXdUMsR0FLWGx2QixPQUFNLHNCQXhCVHBVLEtBQUt1akMsNkJBa0NEMUIsbUNBQVIsU0FBK0JWLEdBQS9CLHdCQUErQkEsRUFBd0JuaEMsS0FBS21oQyxXQUN0RG5oQyxLQUFLd2pDLHFCQUF1QnhqQyxLQUFLbStCLGFBQWFDLE9BRWxEcCtCLEtBQUt3akMsb0JBQXNCeGpDLEtBQUsyK0Isa0JBQW1CcHZCLFVBQVUsQ0FDM0RILEtBQU0sU0FBQzVOLE9BQUV1ZSxZQUFTM0Isa0JBQWU5VyxTQUN6QmliLEVBQWlCMWdCLEVBQUtpZ0IsU0FBUzNrQixPQUluQ29sQixHQUNBQSxFQUFleEMsVUFBWUEsR0FDM0J3QyxFQUFlbkUsZ0JBQWtCQSxHQUNqQy9CLEdBQU1rRyxFQUFlamIsS0FBTUEsSUFLN0I2NUIsS0FFRm55QixNQUFPLFNBQUFBLEdBRUwsR0FEQW5OLEVBQUs0aEMsc0JBQ0F6MEIsRUFBTW5QLGVBQWUsaUJBQWtCLE1BQU1tUCxFQUVsRCxJQUFNdVQsRUFBaUIxZ0IsRUFBS2lnQixTQUFTM2tCLFFBRWxDb2xCLEdBQWtCQSxFQUFleEMsVUFDakMxRCxHQUFNck4sRUFBT25OLEVBQUtpZ0IsU0FBUzlTLFVBRTVCbk4sRUFBS2lnQixTQUFTOVMsTUFBUUEsRUFDdEJteUIsVUFNQVUsK0JBQVIsV0FDRTdoQyxLQUFLOGhDLDBCQVNHLElBQUFuRCxFQUFzQjMrQix1QkFDOUIsR0FBSTIrQixFQUFtQixDQUNyQixJQUFNaGYsRUFBWWdmLEVBQWtCK0UsZUFDOUI1akIsRUFBYTZlLEVBQWtCNEMsZ0JBQ3JDNUMsRUFBa0JnRixtQkFDbEIzakMsS0FBS2lpQyx5QkFDTHppQyxPQUFPYSxPQUFPcytCLEVBQW1CLENBQy9CaGYsWUFDQUcsaUJBK0dFK2hCLG1DQUFSLFdBQ0UsR0FBSzdoQyxLQUFLMitCLG1CQUFzQjMrQixLQUFLOGhCLFNBQVMza0IsT0FBOUMsQ0FFTSxJQUFBcUUsRUFBMkJ4QixLQUFLOGhCLFNBQVMza0IsT0FBdkNtSyxTQUFNeVksWUFBUy9RLFVBRXZCLElBQUsrUSxFQUFTLENBQ04sSUFBQWhILEVBTUYvWSxLQUFLbStCLGFBTFA1bUIsVUFDQTdVLGNBQ0F5OUIsZ0JBQ0Fyb0IsWUFDQXNtQixTQUlGLEdBQ0VwK0IsS0FBS3M5QixrQkFDSnQ5QixLQUFLOGhCLFNBQVMvQixTQUNmMUQsR0FBTXJjLEtBQUtzOUIsZ0JBQWdCL2xCLE1BQU9BLElBQ2xDOEUsR0FBTXJjLEtBQUtzOUIsZ0JBQWdCNTZCLFVBQVdBLEdBRXRDLFFBR0V5OUIsR0FBZ0JueEIsR0FBVW92QixFQUVuQnRtQixHQUFXOUksR0FDcEI4SSxFQUFROUksR0FGUm14QixFQUFZNzRCLE1BT1Z1NkIsb0NBQVIsV0FDTTdoQyxLQUFLd2pDLHNCQUNQeGpDLEtBQUt3akMsb0JBQW9CeDFCLHFCQUNsQmhPLEtBQUt3akMsc0JBSVIzQiw2QkFBUixTQUF5QitCLEdBQ25CNWpDLEtBQUsyK0Isb0JBQ1AzK0IsS0FBSzIrQixrQkFBaUMsZ0JBQ2xDaUYsVUFDSzVqQyxLQUFLMitCLG9CQXVDVmtELGtDQUFSLGlCQUNFLE1BQU8sQ0FDTG4vQixvQkFBVzFDLEtBQUsyK0Isd0NBQW1CajhCLFVBQ25DMGUsUUFBU3BoQixLQUFLNmpDLFdBQ2RwaUIsVUFBV3poQixLQUFLOGpDLGFBQ2hCamlCLFlBQWE3aEIsS0FBSytqQyxlQUNsQnJDLGFBQWMxaEMsS0FBS2drQyxnQkFDbkJyQyxZQUFhM2hDLEtBQUtpa0MsZUFDbEJyQyxnQkFBaUI1aEMsS0FBS2trQyxzQkFuZnNCOUcsSUMxQmxELE1BQU11QyxHQUFXaEQsRUFBSTs7Ozs7O1FDTU4sSUFBS3dILEtBQVlDLEtBQVNDLEtDUjFCLENBQUVDLGlCRlVRLFdBQ2hCcEQsR0FBUzU1QixLQUFFQSxFQUFGMEgsTUFBUUEsRUFBUitRLFFBQWVBLElBQWFzZ0IsR0FBWVYsSUFFeERxQixhQUFVLEtBQ0poeUIsR0FDRnUxQixVQUFLdjFCLEVBQU1yTixTQUVUMkYsR0FBUUEsRUFBS2s5QixTQUNmRCxVQUFLLG1CQUVOLENBQUN2MUIsRUFBTzFILFVBT0osQ0FMY205QixNQUFBQSxJQUNuQmppQyxRQUFRNkssSUFBSSw2QkFDTjZ6QixFQUFRLENBQUV4K0IsVUFBVyxDQUFFZ2lDLE1BQU9yK0IsTUFHaEIsQ0FBRWlCLEtBQUFBLEVBQU0wSCxNQUFBQSxFQUFPK1EsUUFBQUEsU0czQnhCLENBQUU0a0IsT0NFRixJQUVYcG1DLHdCQUFDRCxFQUFhc21DLGVBQ1gsQ0FBQ2ptQyxFQUFPa21DLEtBQ1ByaUMsUUFBUTZLLElBQUksUUFBUzFPLEVBQU9rbUMsR0FDckJ0bUMsa0NBQVErUCxLQUFLIn0=
